{"version":3,"file":"MissionControl-Cu9CWCbj.js","sources":["../../../components/MissionControl.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Theme, Project, Habit, DiceState } from '../types';\nimport { INITIAL_DICE_STATE } from '../constants/index';\nimport { Search } from 'lucide-react';\nimport { GlobalHelpButton } from './HelpSystem';\nimport FateDice from './FateDice';\nimport { getNeomorphicStyles, getButtonStyle, getCardBgStyle, getTextStyle } from '../utils/styleHelpers';\n\ninterface MissionControlProps {\n  theme: Theme;\n  projects: Project[];\n  habits: Habit[];\n  onHelpClick: (id: string) => void;\n}\n\nconst MissionControl: React.FC<MissionControlProps> = ({ theme, projects, habits, onHelpClick }) => {\n  const [diceState, setDiceState] = useState<DiceState>(INITIAL_DICE_STATE);\n  \n  const isDark = theme.includes('dark');\n  const isNeomorphic = theme.startsWith('neomorphic');\n  \n  // 模拟掷骰子功能\n  const onSpinDice = () => {\n    if (diceState.todayCount >= diceState.config.dailyLimit) {\n      return { success: false, message: '今日次数已达上限' };\n    }\n    \n    // 更新骰子状态\n    setDiceState(prev => ({\n      ...prev,\n      todayCount: prev.todayCount + 1,\n      isSpinning: true\n    }));\n    \n    // 模拟骰子结果\n    setTimeout(() => {\n      setDiceState(prev => ({\n        ...prev,\n        isSpinning: false\n      }));\n    }, 2000);\n    \n    return { success: true };\n  };\n  \n  // 更新骰子状态\n  const onUpdateDiceState = (updates: Partial<DiceState>) => {\n    setDiceState(prev => ({\n      ...prev,\n      ...updates\n    }));\n  };\n  \n  // 添加浮动奖励\n  const onAddFloatingReward = (text: string, color: string) => {\n    // 这里可以添加奖励提示逻辑\n    console.log(`Floating reward: ${text} with color ${color}`);\n  };\n  \n  const isNeomorphicDark = theme === 'neomorphic-dark';\n  const neomorphicStyles = getNeomorphicStyles(isNeomorphicDark);\n\n  // 生成按钮样式的辅助函数\n  const getButtonStyleLocal = (isActive: boolean, isSpecial?: boolean) => {\n    return getButtonStyle(isActive, isSpecial, isNeomorphic, theme, isDark);\n  };\n  \n  const bgClass = isNeomorphic \n      ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e]' : 'bg-[#e0e5ec]') \n      : isDark \n      ? 'bg-zinc-950' \n      : 'bg-slate-50';\n  \n  const cardBg = getCardBgStyle(isNeomorphic, theme, isDark);\n  \n  const textMain = getTextStyle(isDark, isNeomorphic, 'main');\n  \n  const textSub = getTextStyle(isDark, isNeomorphic, 'sub');\n\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  return (\n    <div className={`w-full h-full ${bgClass} overflow-auto`} ref={containerRef}>\n      {/* 作战中心主界面 */}\n      <div className=\"p-4\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <div className=\"flex items-center gap-2\">\n            <h2 className={`text-xl font-bold ${textMain}`}>作战中心</h2>\n            <GlobalHelpButton helpId=\"mission-control\" onHelpClick={onHelpClick} size={16} variant=\"ghost\" />\n          </div>\n        </div>\n        \n        {/* 核心功能区域 */}\n        <div className={`${cardBg} p-6 rounded-3xl shadow-lg`}>\n          <h3 className={`text-2xl font-bold ${textMain} mb-4`}>欢迎来到作战中心</h3>\n          \n          {/* 命运骰子功能 */}\n          <div className=\"mb-8 px-2\">\n            <FateDice \n              theme={theme}\n              diceState={diceState}\n              onSpinDice={onSpinDice}\n              onUpdateDiceState={onUpdateDiceState}\n              onAddFloatingReward={onAddFloatingReward}\n            />\n          </div>\n          \n          {/* 项目和习惯数据概览 */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 w-full mt-6\">\n            <div className={`${isNeomorphic ? `${neomorphicStyles.bg} ${neomorphicStyles.border} ${neomorphicStyles.shadow} ${neomorphicStyles.hoverShadow} ${neomorphicStyles.transition}` : (isDark ? 'bg-zinc-800' : 'bg-white shadow-sm')} p-4 rounded-xl transition-all duration-300 hover:shadow-lg`}>\n              <h4 className={`text-lg font-semibold ${textMain} mb-2`}>项目总数</h4>\n              <p className={`text-4xl font-bold ${textMain}`}>{projects.length}</p>\n            </div>\n            <div className={`${isNeomorphic ? `${neomorphicStyles.bg} ${neomorphicStyles.border} ${neomorphicStyles.shadow} ${neomorphicStyles.hoverShadow} ${neomorphicStyles.transition}` : (isDark ? 'bg-zinc-800' : 'bg-white shadow-sm')} p-4 rounded-xl transition-all duration-300 hover:shadow-lg`}>\n              <h4 className={`text-lg font-semibold ${textMain} mb-2`}>习惯总数</h4>\n              <p className={`text-4xl font-bold ${textMain}`}>{habits.length}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MissionControl;"],"names":["INITIAL_DICE_STATE","jsxRuntimeExports","GlobalHelpButton","reactExports","FateDice","getTextStyle","getCardBgStyle","getNeomorphicStyles","MissionControl","theme","projects","habits","onHelpClick","diceState","setDiceState","useState","isDark","includes","isNeomorphic","startsWith","neomorphicStyles","bgClass","cardBg","textMain","containerRef","useRef","jsx","className","ref","children","jsxs","helpId","size","variant","onSpinDice","todayCount","config","dailyLimit","success","message","prev","isSpinning","setTimeout","onUpdateDiceState","updates","onAddFloatingReward","text","color","console","log","bg","border","shadow","hoverShadow","transition","length"],"mappings":"YAeAA,OAAAC,OAAAC,MAAA,kCAAAC,MAAA,qCAAAC,MAAA,qCAAAC,OAAAC,OAAAC,MAAA,mCAAA,4BAAA,6BAAA,4BAAA,6BAAA,yBAAA,MAAMC,EAAgD,EAAGC,QAAOC,WAAUC,SAAQC,kBAChF,MAAOC,EAAWC,GAAgBC,EAAAA,SAAoBf,GAEhDgB,EAASP,EAAMQ,SAAS,QACxBC,EAAeT,EAAMU,WAAW,cAyChCC,EAAmBb,EADU,oBAAVE,GAQnBY,EAAUH,EACC,oBAAVT,EAA8B,eAAiB,eAChDO,EACA,cACA,cAEAM,EAAShB,EAAeY,EAAcT,EAAOO,GAE7CO,EAAWlB,EAAaW,EAAQE,EAAc,QAI9CM,EAAeC,EAAAA,OAAuB,MAE5C,SACEC,IAAC,MAAA,CAAIC,UAAW,iBAAiBN,kBAAyBO,IAAKJ,EAE7DK,SAAAC,OAAC,MAAA,CAAIH,UAAU,MACbE,SAAA,CAAAH,EAAAA,IAAC,OAAIC,UAAU,yCACbE,SAAAC,EAAAA,KAAC,MAAA,CAAIH,UAAU,0BACbE,SAAA,CAAAH,MAAC,KAAA,CAAGC,UAAW,qBAAqBJ,IAAYM,SAAA,SAChDH,MAACxB,GAAiB6B,OAAO,kBAAkBnB,cAA0BoB,KAAM,GAAIC,QAAQ,eAK3FH,EAAAA,KAAC,MAAA,CAAIH,UAAW,GAAGL,8BACjBO,SAAA,CAAAH,MAAC,KAAA,CAAGC,UAAW,sBAAsBJ,SAAiBM,SAAA,eAGtDH,IAAC,MAAA,CAAIC,UAAU,YACbE,SAAAH,EAAAA,IAACtB,EAAA,CACCK,QACAI,YACAqB,WA/EO,IACbrB,EAAUsB,YAActB,EAAUuB,OAAOC,WACpC,CAAEC,SAAS,EAAOC,QAAS,aAIpCzB,EAAa0B,IAAA,IACRA,EACHL,WAAYK,EAAKL,WAAa,EAC9BM,YAAY,KAIdC,WAAW,KACT5B,EAAa0B,IAAA,IACRA,EACHC,YAAY,MAEb,KAEI,CAAEH,SAAS,IA4DRK,kBAxDeC,IACzB9B,EAAa0B,IAAA,IACRA,KACAI,MAsDKC,oBAjDgB,CAACC,EAAcC,KAEzCC,QAAQC,IAAI,oBAAoBH,gBAAmBC,YAoD7CjB,KAAC,MAAA,CAAIH,UAAU,oDACbE,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAIH,WAAcT,EAAe,GAAGE,EAAiB8B,MAAM9B,EAAiB+B,UAAU/B,EAAiBgC,UAAUhC,EAAiBiC,eAAejC,EAAiBkC,aAAgBtC,EAAS,cAAgB,sBAA5L,8DACda,SAAA,CAAAH,MAAC,KAAA,CAAGC,UAAW,yBAAyBJ,SAAiBM,SAAA,eACxD,IAAA,CAAEF,UAAW,sBAAsBJ,IAAaM,WAAS0B,YAE5DzB,EAAAA,KAAC,MAAA,CAAIH,WAAcT,EAAe,GAAGE,EAAiB8B,MAAM9B,EAAiB+B,UAAU/B,EAAiBgC,UAAUhC,EAAiBiC,eAAejC,EAAiBkC,aAAgBtC,EAAS,cAAgB,sBAA5L,8DACda,SAAA,CAAAH,MAAC,KAAA,CAAGC,UAAW,yBAAyBJ,SAAiBM,SAAA,eACxD,IAAA,CAAEF,UAAW,sBAAsBJ,IAAaM,WAAO0B"}