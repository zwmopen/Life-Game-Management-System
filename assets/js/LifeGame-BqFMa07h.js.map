{"version":3,"mappings":"g9BAgBA,MAAMA,GAA8C,EAClDC,OACAC,aACAC,aACAC,UACAC,SACAC,eACAC,QAAQ,OACRC,kBAEA,MAAMC,gBAAEA,GAAoBC,IAEtBC,EAAeJ,EAAMK,WAAW,cAChCC,EAAmB,oBAAVN,EAGfO,EAAMC,UAAU,KACVP,GACFA,KAED,CAACA,IAGJ,MAAMQ,EAASL,EACVE,EAAS,eAAiB,eAC3B,iBACEI,EAAWJ,EAAS,aAAe,iBACnCK,EAAUL,EAAS,gBAAkB,iBAe3C,SACEM,IAAC,OAAIC,UAAU,+GACbC,SAAAC,OAAC,OAAIF,UAAW,mCAAmCJ,sEAC9CO,MAAO,CACLC,UAAWb,EACNE,EACG,oKACA,6KACJ,kCAGTQ,SAAA,CAAAC,OAAC,MAAGF,UAAW,kBAAkBH,oDAC/BI,SAAA,CAAAF,MAACM,EAAA,CAASC,KAAM,GAAIN,UAAU,6EAC9BD,MAAC,QAAKC,UAAU,4GAA4GC,SAAA,cAG9HC,KAAC,OAAIF,UAAU,YAEbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,cAEbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,wBAEbC,SAAA,CAAAF,MAAC,OAAIC,UAAW,wGAAuGlB,EAAa,oCAAsC,MAE1KiB,MAAC,OAAIC,WAAclB,EAAa,oCAAsC,IAAtD,YACdmB,SAAAF,MAACQ,EAAA,CAAMD,KAAM,IAAKN,UAAU,iFAI9BD,IAAC,OAAIC,UAAU,2EACfD,IAAC,OAAIC,UAAU,oEAGjBD,MAAC,MAAGC,UAAW,qBAAqBH,oIACjCI,SA/CgB,CAACO,IAC5B,OAAQA,GACN,KAAKC,EAAaC,OAChB,MAAO,QACT,KAAKD,EAAaE,WAChB,MAAO,OACT,KAAKF,EAAaG,QAChB,MAAO,QACT,QACE,MAAO,SAsCAC,CAAqBhC,EAAK2B,YAG7BT,MAAC,KAAEC,UAAW,WAAWH,4FACtBM,MAAO,CACLW,gBACKrB,EAAS,UAAY,UAE1BW,UACKX,EACG,qFACA,4FAKVQ,SAAApB,EAAKkC,YAKVb,KAAC,OAAIF,UAAU,qCACbC,SAAA,CAAAC,OAAC,OAAIF,UAAW,sFACXG,MAAO,CACLW,gBACKrB,EAAS,UAAY,UAE1BW,UACKX,EACG,+JACA,4KAKbQ,SAAA,CAAAF,MAAC,OAAIC,UAAW,WAAWF,SAAgBG,SAAA,SAC3CC,KAAC,OAAIF,UAAU,yFACbC,SAAA,CAAAF,MAACiB,EAAA,CAAMV,KAAM,GAAIN,UAAU,+CAA+C,IACxEnB,EAAKoC,GAAkB,OAG3BlB,IAAC,OAAIC,UAAU,+KAGjBE,OAAC,OAAIF,UAAW,sFACXG,MAAO,CACLW,gBAAiBvB,EACZE,EAAS,UAAY,2BACtBA,EACE,UACA,2BACNW,UAAWb,EACNE,EACG,+JACA,2KACJA,EACE,wEACA,0EAEXQ,SAAA,CAAAF,MAAC,OAAIC,UAAW,WAAWF,SAAgBG,SAAA,SAC3CC,KAAC,OAAIF,UAAU,yFACbC,SAAA,CAAAF,MAACmB,EAAA,CAAKZ,KAAM,GAAIN,UAAU,+CAA+C,IACvEnB,EAAKsC,GAAgB,OAGzBpB,IAAC,OAAIC,UAAU,+KAGhBnB,EAAKuC,UACJlB,OAAC,OAAIF,UAAW,sFACXG,MAAO,CACLW,gBACKrB,EAAS,UAAY,UAE1BW,UACKX,EACG,+JACA,4KAKbQ,SAAA,CAAAF,MAAC,OAAIC,UAAW,WAAWF,SAAgBG,SAAA,SAC3CC,KAAC,OAAIF,UAAU,uFACbC,SAAA,CAAAF,MAACsB,EAAA,CAAMf,KAAM,GAAIN,UAAU,+CAC1BnB,EAAKuC,SAAS,WAGjBrB,IAAC,OAAIC,UAAU,kLAMrBE,KAAC,OAAIF,UAAU,wCACZC,SAAA,CAAApB,EAAKuC,UACJlB,OAAC,UACCoB,QAAS,KACPpC,EAAaL,EAAKuC,UAClBpC,KAEFgB,UAAW,mHACXG,MAAO,CACLW,gBACKrB,EAAS,UAAY,UAE1B8B,MAAuB9B,EAAS,0BAA4B,2BAC5DW,UACKX,EACG,8GACA,kHAIR+B,OAAQ,QAGVvB,SAAA,CAAAF,MAAC,QAAKC,UAAU,gBAAgBC,SAAA,SAEhCF,IAAC,OAAIC,UAAU,yKAInBE,OAAC,UACCoB,QAAS,KACPjC,EAAgB,kBAChBN,KAEFiB,UAAW,mHACXG,MAAO,CACLW,gBACKrB,EAAS,UAAY,UAE1B8B,MAAuB9B,EAAS,0BAA4B,2BAC5DW,UACKX,EACG,8GACA,kHAIR+B,OAAQ,QAGVvB,SAAA,CAAAF,MAAC,QAAKC,UAAU,gBAAgBC,SAAA,UAEhCF,IAAC,OAAIC,UAAU,yKAGjBE,OAAC,UACCoB,QAAStC,EACTgB,UAAW,mHACXG,MAAO,CACLW,gBACKrB,EAAS,UAAY,UAE1B8B,MAAuB9B,EAAS,2BAA6B,qBAC7DW,UACKX,EACG,+GACA,mHAIR+B,OAAQ,QAGVvB,SAAA,CAAAF,MAAC,QAAKC,UAAU,gBAAgBC,SAAA,UAEhCF,IAAC,OAAIC,UAAU,yKAGjBE,OAAC,UACCoB,QAASrC,EACTe,UAAW,mHACXG,MAAO,CACLW,gBACKrB,EAAS,UAAY,UAE1B8B,MAAuB9B,EAAS,2BAA6B,qBAC7DW,UACKX,EACG,+GACA,mHAIR+B,OAAQ,QAGVvB,SAAA,CAAAF,MAAC,QAAKC,UAAU,gBAAgBC,SAAA,SAEhCF,IAAC,OAAIC,UAAU,qLC/PvByB,GAAoCC,OAAK,EAC7CC,QACAnB,WACAoB,iBACAC,eACAC,iBACAC,kBACAC,kBACA9C,eACA+C,cACAC,YACAC,aACAC,cACAxC,SACAC,WACAV,QACAM,SACAF,eACA8C,cAAc,WAGd,MAAOC,EAAeC,GAAoBC,WAExCb,EAAMc,OAAO,CAACC,EAAK7D,KACjB6D,EAAI7D,EAAK8D,KAAM,EACRD,GACN,KAsPL,SACE3C,IAAC,OAAIC,UAAU,OACZC,SAAgB,SAAhBoC,EACCnC,OAAC,OAAIF,UAAW,qBAAqBJ,oBAClCK,SAAA,CAAA0B,EAAMiB,IAAI,CAAC/D,EAAMgE,IAhDD,EAAChE,EAAgBgE,IACxC3C,OAAC,OAEC4C,WAAS,EACTb,YAAa,IAAMA,EAAYpD,EAAMgE,GACrCX,YACAC,WAAaY,GAAMZ,EAAWY,EAAGF,GACjCG,cAAe,IAAMlB,EAAejD,GACpCmB,UAAW,wCAAwCP,EAAS,kBAAoB,sBAAsBZ,EAAKoE,UAAY,aAAe,MAAMb,GAAeA,EAAYO,KAAO9D,EAAK8D,GAAK,6CAA+C,KAEvO1C,SAAA,GAAAC,KAAC,UAAOoB,QAAUyB,IAAQA,EAAEG,kBAAmBtB,EAAe/C,EAAMkE,IAAO/C,UAAW,2FAA0FnB,EAAKoE,UAAY,+CAAiDpE,EAAKsE,UAAY,iDAAoD1D,EAAS,4DAA8D,sDAAyD2D,SAAUvE,EAAKsE,UACnclD,SAAA,CAAApB,EAAKoE,WAAalD,MAACsD,EAAA,CAAM/C,KAAM,GAAIgD,YAAa,IAChDzE,EAAKsE,WAAapD,MAACwD,GAAEjD,KAAM,GAAIgD,YAAa,SAE/CpD,KAAC,OAAIF,UAAU,iBACbC,SAAA,CAAAC,OAAC,MAAGF,UAAW,gCAAgCnB,EAAKoE,WAAapE,EAAKsE,UAAY,6BAA+BtD,IAC9GI,SAAA,CAAApB,EAAKkC,KACLlC,EAAKsE,WAAapD,MAAC,QAAKC,UAAU,4GAA4GC,SAAA,aAEjJC,KAAC,OAAIF,UAAU,wEACbC,SAAA,GAAAC,KAAC,QAAKF,UAAU,kBAAkBC,SAAA,KAAEpB,EAAK2E,QACzCtD,KAAC,QAAKF,UAAU,kBAAkBC,SAAA,KAAEpB,EAAK4E,UACzCvD,KAAC,QAAKF,UAAU,gBAAiBC,SAAA,CAAApB,EAAKuC,UAAY,GAAG,OACpDvC,EAAK6E,UAAY7E,EAAK6E,SAASC,SAAW9E,EAAK6E,SAASE,MACvD7D,MAAC,QAAKC,UAAU,iBAAkBC,SAAApB,EAAK6E,SAASE,OAElD7D,MAAC,QAAKC,UAAgC,SAAlBnB,EAAKgF,SAAsB,eAAmC,WAAlBhF,EAAKgF,SAAwB,kBAAoB,iBAC9G5D,SAAkB,WAAb4D,SAAsB,KAAyB,WAAlBhF,EAAKgF,SAAwB,IAAM,eAI5E3D,KAAC,OAAIF,UAAU,0BACZC,SAAA,EAACpB,EAAKoE,YAAcpE,EAAKsE,WACxBpD,MAAC,UAAOuB,QAAUyB,GAAMlB,EAAahD,EAAK8D,GAAII,GAAI/C,UAAU,0FAA0F8D,MAAM,aAC1J7D,SAAAF,MAACwD,EAAA,CAAEjD,KAAM,OAGbP,MAAC,UAAOuB,QAAS,IAAMpC,EAAaL,EAAKuC,UAAY,IAAKgC,SAAUvE,EAAKoE,WAAapE,EAAKsE,UAAWnD,UAAW,iDAAiDP,EAAS,mCAAqC,sDAC9MQ,SAAAF,MAACgE,EAAA,CAAKzD,KAAM,GAAI0D,KAAK,wBApCpBnF,EAAK8D,IA8CsBsB,CAAiBpF,EAAMgE,IACjC,IAAjBlB,EAAMuC,cACJ,OAAIlE,UAAU,wCAAwCC,SAAA,YAM3DC,OAAC,OAAIF,UAAU,sBACZC,SAAA,CAAa,UAAbO,GAAwBmB,EAAMiB,IAAI,CAAC/D,EAAMgE,IAxP1B,EAAChE,EAAgBgE,IACvC9C,MAAC,OAEC+C,WAAS,EACTb,YAAa,IAAMA,EAAYpD,EAAMgE,GACrCX,YACAC,WAAaY,GAAMZ,EAAWY,EAAGF,GACjCG,cAAe,IAAMlB,EAAejD,GACpCmB,UAAW,kFAAkFnB,EAAKoE,UAAY,yBAA2BxD,EAAS,iBAAmB,gBAAkBZ,EAAKsE,UAAY,eAAiB1D,EAAS,kCAAoC,4BAA8B,MAAMG,KAAWf,EAAKoE,WAAcpE,EAAKsE,UAAiC1D,EAAS,kBAAoB,mBAAlD,qBAAyE2C,GAAeA,EAAYO,KAAO9D,EAAK8D,GAAK,sBAAwB,KAEte1C,SAAAC,OAAC,OAAIF,UAAU,8CACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,kEAAkEC,eAACkE,EAAA,CAAa7D,KAAM,SACrGJ,KAAC,UAAOoB,QAAUyB,IAAQA,EAAEG,kBAAmBtB,EAAe/C,EAAMkE,IAAO/C,UAAW,2FAA0FnB,EAAKoE,UAAY,+CAAiDpE,EAAKsE,UAAY,iDAAoD1D,EAAS,4DAA8D,sDAAyD2D,SAAUvE,EAAKsE,UACnclD,SAAA,CAAApB,EAAKoE,WAAalD,MAACsD,EAAA,CAAM/C,KAAM,GAAIgD,YAAa,IAChDzE,EAAKsE,WAAapD,MAACwD,GAAEjD,KAAM,GAAIgD,YAAa,SAE/CpD,KAAC,OAAIF,UAAU,iBACbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,mCACbC,SAAA,CAAAC,OAAC,MAAGF,UAAW,qCAAqCnB,EAAKoE,WAAapE,EAAKsE,UAAY,6BAA+BtD,IACnHI,SAAA,CAAApB,EAAKkC,KACLlC,EAAKsE,WAAapD,MAAC,QAAKC,UAAU,4GAA4GC,SAAA,WAEjJF,MAAC,UAAOuB,QAAS,IAAMQ,EAAejD,GAAOmB,UAAU,uGAAuGC,SAAAF,MAACqE,EAAA,CAAM9D,KAAM,YAE7KJ,KAAC,OAAIF,UAAU,sFACXC,SAAA,GAAAC,KAAC,QAAKF,UAAU,kBAAkBC,SAAA,QAAKpB,EAAK2E,QAC5CtD,KAAC,QAAKF,UAAU,kBAAkBC,SAAA,QAAKpB,EAAK4E,UAC5CvD,KAAC,QAAKF,UAAU,gBAAgBC,SAAA,OAAIpB,EAAKuC,UAAY,GAAG,SACvDvC,EAAK6E,UAAY7E,EAAK6E,SAASC,SAAW9E,EAAK6E,SAASE,MACvD7D,MAAC,QAAKC,UAAU,iBAAkBC,SAAApB,EAAK6E,SAASE,SAElD1D,KAAC,QAAKF,UAAU,0BACdC,SAAA,CAAAF,MAAC,QAAKC,UAAgC,SAAlBnB,EAAKgF,SAAsB,eAAmC,WAAlBhF,EAAKgF,SAAwB,kBAAoB,iBAC9G5D,SAAkB,WAAb4D,SAAsB,KAAyB,WAAlBhF,EAAKgF,SAAwB,IAAM,SAExE9D,IAAC,QAAKC,UAAU,gBAAiBC,SAAkB,SAAlBpB,EAAKgF,SAAsB,IAAwB,WAAlBhF,EAAKgF,SAAwB,IAAM,WAEvG3D,KAAC,QAAKF,UAAU,0BACdC,SAAA,CAAAF,MAAC,OAAIsE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QAAQ3E,UAAU,gBAC1LC,SAAAF,MAAC,YAAS6E,OAAO,4CAElB,QAAK5E,UAAU,gBAAiBC,SAAApB,EAAKoE,UAAY,MAAQ,mBAIlE/C,KAAC,OAAIF,UAAU,mCACZC,SAAA,EAACpB,EAAKoE,YAAcpE,EAAKsE,WACxBpD,MAAC,UAAOuB,QAAUyB,GAAMlB,EAAahD,EAAK8D,GAAII,GAAI/C,UAAU,0FAA0F8D,MAAM,aAC1J7D,SAAAF,MAACwD,EAAA,CAAEjD,KAAM,OAGbP,MAAC,UAAOuB,QAAS,IAAMpC,EAAaL,EAAKuC,UAAY,IAAKgC,SAAUvE,EAAKoE,WAAapE,EAAKsE,UAAWnD,UAAW,iFAAiFP,EAAS,mCAAqC,yEAC9OQ,SAAAF,MAACgE,EAAA,CAAKzD,KAAM,GAAI0D,KAAK,0BAlDtBnF,EAAK8D,IAsP8CkC,CAAgBhG,EAAMgE,IAC5D,SAAbrC,GAAuBmB,EAAMiB,IAAI,CAAC/D,EAAMgE,IA7L1B,EAAChE,EAAgBgE,WACtC3C,cAAC,OAEC4C,WAAS,EACTb,YAAa,IAAMA,EAAYpD,EAAMgE,GACrCX,YACAC,WAAaY,GAAMZ,EAAWY,EAAGF,GACjCG,cAAe,IAAMlB,EAAejD,GACpCmB,UAAW,kFAAkFnB,EAAKoE,UAAY,yBAA2BxD,EAAS,iBAAmB,gBAAkB,MAAMG,KAAWf,EAAKoE,UAAiCxD,EAAS,kBAAoB,mBAAlD,qBAAyE2C,GAAeA,EAAYO,KAAO9D,EAAK8D,GAAK,sBAAwB,KAEtW1C,SAAA,CAAAF,MAAC,OAAIC,UAAU,0BACbC,SAAAC,OAAC,OAAIF,UAAU,0BACbC,SAAA,GAAAF,IAAC,UAAOuB,QAAUyB,IAAQA,EAAEG,kBAAmBtB,EAAe/C,EAAMkE,IAAO/C,UAAW,2FAA0FnB,EAAKoE,UAAY,+CAAkDxD,EAAS,0DAA4D,qEACrTQ,SAAApB,EAAKoE,WAAalD,MAACsD,EAAA,CAAM/C,KAAM,GAAIgD,YAAa,QAEnDpD,KAAC,OAAIF,UAAU,SACbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,2CACbC,SAAA,CAAAF,MAAC,UACCuB,QAAS,KAAMwD,OArFDC,EAqFoBlG,EAAK8D,QApFnDJ,EAAiByC,IAAA,IACZA,EACHD,CAACA,IAAUC,EAAKD,MAHO,IAACA,GAsFd/E,UAAU,oGACV8D,MAAOxB,EAAczD,EAAK8D,IAAM,QAAU,QAEzC1C,SAAAqC,EAAczD,EAAK8D,IAClB5C,MAAC,OAAIsE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QACxK1E,SAAAF,MAAC,QAAKkF,EAAE,mBAGVlF,MAAC,OAAIsE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QACxK1E,SAAAF,MAAC,QAAKkF,EAAE,wBAIdlF,MAAC,MAAGC,UAAW,aAAanB,EAAKoE,UAAY,6BAA+BpD,IACzEI,SAAApB,EAAKkC,OAERhB,MAAC,UAAOuB,QAAS,IAAMQ,EAAejD,GAAOmB,UAAU,oIAAoIC,SAAAF,MAACqE,EAAA,CAAM9D,KAAM,YAG1MJ,KAAC,OAAIF,UAAU,6EACbC,SAAA,GAAAC,KAAC,QAAKF,UAAU,kBAAkBC,SAAA,QAAKpB,EAAK2E,QAC5CtD,KAAC,QAAKF,UAAU,kBAAkBC,SAAA,QAAKpB,EAAK4E,UAC5CvD,KAAC,QAAKF,UAAU,gBAAgBC,SAAA,OAAI,OAAAiF,EAAArG,EAAKsG,eAAL,EAAAD,EAAezC,OAAO,CAAC2C,EAAKC,IAAOD,EAAMC,EAAGjE,SAAU,GAAG,SAC5FvC,EAAK6E,UAAY7E,EAAK6E,SAASC,SAAW9E,EAAK6E,SAASE,MACvD7D,MAAC,QAAKC,UAAU,iBAAkBC,SAAApB,EAAK6E,SAASE,SAElD1D,KAAC,QAAKF,UAAU,0BACdC,SAAA,CAAAF,MAAC,QAAKC,UAAgC,SAAlBnB,EAAKgF,SAAsB,eAAmC,WAAlBhF,EAAKgF,SAAwB,kBAAoB,iBAC9G5D,SAAkB,WAAb4D,SAAsB,KAAyB,WAAlBhF,EAAKgF,SAAwB,IAAM,SAExE9D,IAAC,QAAKC,UAAU,gBAAiBC,SAAkB,SAAlBpB,EAAKgF,SAAsB,IAAwB,WAAlBhF,EAAKgF,SAAwB,IAAM,WAEvG3D,KAAC,QAAKF,UAAU,0BACdC,SAAA,CAAAF,MAAC,OAAIsE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QAAQ3E,UAAU,gBAC1LC,SAAAF,MAAC,YAAS6E,OAAO,4CAElB,QAAK5E,UAAU,gBAAiBC,SAAApB,EAAKoE,UAAY,MAAQ,eAI5DpE,EAAKoE,WAAapE,EAAKsG,UACvBjF,OAAC,OAAIF,UAAU,SACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,+CACbC,SAAAC,OAAC,QAAKF,UAAU,0BAA2BC,SAAA,CAAAqF,KAAKC,MAAO1G,EAAKsG,SAASK,OAAOH,GAAMA,EAAGpC,WAAWiB,OAASrF,EAAKsG,SAASjB,OAAU,KAAK,SAExInE,MAAC,OAAIC,UAAW,4CAA2CT,EAAe,wGAA0GE,EAAS,2BAA6B,2GACxNQ,SAAAF,MAAC,OACCC,UAAU,uEACVG,MAAO,CAAEmE,MAAWzF,EAAKsG,SAASK,OAAOH,GAAMA,EAAGpC,WAAWiB,OAASrF,EAAKsG,SAASjB,OAAU,IAA9E,oBAS7BrF,EAAKsG,WAAatG,EAAKoE,WAAaX,EAAczD,EAAK8D,KACtD5C,MAAC,OAAIC,UAAW,kCAAiCT,EAA0B,oBAAVJ,EAA8B,gCAAkC,gCAAmCM,EAAS,iCAAmC,gCAC7MQ,SAAApB,EAAKsG,SAASvC,IAAKyC,IAElB,IAAII,EAAmB,mHAYvB,OARIA,GAFAlG,EACY,oBAAVJ,EACkB,kKAEA,kLAGFM,EAAS,oBAAsB,mEAInDS,OAAC,OAECF,UAAWyF,EAEXxF,SAAA,GAAAC,KAAC,OAAIF,UAAU,yCACbC,SAAA,GAAAF,IAAC,UAAOuB,QAAUyB,IAAQA,EAAEG,kBAAmBnB,EAAgBlD,EAAK8D,GAAI0C,EAAG1C,KAAQ3C,UAAW,2FAA0FqF,EAAGpC,UAAY,+CAAkDxD,EAAS,4DAA8D,sDAC7TQ,SAAAoF,EAAGpC,WAAalD,MAACsD,EAAA,CAAM/C,KAAM,GAAIgD,YAAa,MAEjDvD,MAAC,QAAKC,UAAW,oBAAoBqF,EAAGpC,UAAY,6BAA+BpD,mBAChFI,SAAAoF,EAAGtE,YAIRb,KAAC,OAAIF,UAAU,0FACbC,SAAA,GAAAC,KAAC,QAAKF,UAAU,kBAAkBC,SAAA,KAAEoF,EAAG7B,QACvCtD,KAAC,QAAKF,UAAU,kBAAkBC,SAAA,KAAEoF,EAAG5B,UACvCvD,KAAC,QAAKF,UAAU,gBAAiBC,SAAA,CAAAoF,EAAGjE,SAAS,YAE/ClB,KAAC,OAAIF,UAAU,qCACbC,SAAA,GAAAF,IAAC,UAAOuB,QAAUyB,IAAQA,EAAEG,kBAAmBlB,EAAgBnD,EAAK8D,GAAI0C,EAAG1C,KAAQ3C,UAAU,6GAA6G8D,MAAM,QAC9M7D,SAAAF,MAACwD,EAAA,CAAEjD,KAAM,SAEXP,IAAC,UAAOuB,QAAUyB,IAChBA,EAAEG,kBACFhE,EAAamG,EAAGjE,UAAY,KAC3BpB,UAAW,qFAAqFP,EAAS,mCAAqC,wEAC/IQ,SAAAF,MAACgE,EAAA,CAAKzD,KAAM,GAAI0D,KAAK,wBAzBpBqB,EAAG1C,UA5Fb9D,EAAK8D,KA2L6C+C,CAAe7G,EAAMgE,IACtD,IAAjBlB,EAAMuC,QACLnE,MAAC,OAAIC,UAAW,GAAGJ,4DAAkEK,SAAA,gBAUjGwB,GAASkE,YAAc,WC7SvB,MAAMC,GAA4ClE,OAAK,EACrDmE,eACAC,iBACAC,iBAAiB,GACjBnE,iBACAoE,gBACA9G,eACA4C,iBACAmE,cACArG,SACAC,WACAV,QACAM,SACAF,mBAGA,MAAM2G,EAAiB,CAACC,EAA4BC,GAAqB,IACvErG,MAAC,OAECuB,QAAS,IAAMQ,EAAe,IAAIqE,EAAWtH,KAAM8D,GAAIwD,EAAWxD,GAAI0D,KAAM,SAAU5C,KAAM0C,EAAWG,cAAe9C,GAAI2C,EAAWI,YAAatD,UAAiC,cAAtBkD,EAAWK,OAAwBC,UAAW,SAC3MzG,UAAW,kFAAkFJ,qBAA0BH,EAAS,kBAAoB,qBAEpJQ,SAAAC,OAAC,OAAIF,UAAU,kFACZC,SAAA,CAAAmG,EACCrG,MAAC,UACCuB,QAAUyB,IACRA,EAAEG,kBACFtB,EAAeuE,EAAWxD,KAE5B3C,UAAW,0FAA0FP,EAAS,4DAA8D,uEAE5KQ,eAACoD,EAAA,CAAM/C,KAAM,GAAIgD,YAAa,EAAGtD,UAAU,0DAG7CD,MAAC,OAAIC,UAAW,sIACdC,SAAAF,MAACsD,EAAA,CAAM/C,KAAM,GAAIgD,YAAa,QAGlCpD,KAAC,OAAIF,UAAU,wBACbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,mCACbC,SAAA,CAAAF,MAAC,MACCuB,QAAS,IAAMQ,EAAe,IAAIqE,EAAWtH,KAAM8D,GAAIwD,EAAWxD,GAAI0D,KAAM,SAAU5C,KAAM0C,EAAWG,cAAe9C,GAAI2C,EAAWI,YAAatD,UAAiC,cAAtBkD,EAAWK,OAAwBC,UAAW,SAC3MzG,UAAW,qCAAqCoG,EAAYvG,EAAW,+BAEtEI,WAAWpB,KAAKkC,OAEnBhB,MAAC,UACCuB,QAAUyB,IACRA,EAAEG,kBACFpB,EAAe,IAAIqE,EAAWtH,KAAM8D,GAAIwD,EAAWxD,GAAI0D,KAAM,SAAU5C,KAAM0C,EAAWG,cAAe9C,GAAI2C,EAAWI,YAAatD,UAAiC,cAAtBkD,EAAWK,OAAwBC,UAAW,UAE9LzG,UAAU,kGAEVC,SAAAF,MAACqE,EAAA,CAAM9D,KAAM,YAGjBJ,KAAC,OAAIF,UAAU,qGACbC,SAAA,GAAAC,KAAC,QAAKF,UAAU,kBAAkBC,SAAA,QAAKkG,EAAWI,iBAClDrG,KAAC,QAAKF,UAAU,kBAAkBC,SAAA,QAAKkG,EAAWG,iBACjDH,EAAWtH,KAAKuC,UACflB,OAAC,QAAKF,UAAU,gBAAgBC,SAAA,OAAIkG,EAAWtH,KAAKuC,SAAS,OAE9D+E,EAAWtH,KAAK6E,UAAYyC,EAAWtH,KAAK6E,SAASC,SAAWwC,EAAWtH,KAAK6E,SAASE,YACvF,QAAK5D,UAAU,iBAAkBC,SAAAkG,EAAWtH,KAAK6E,SAASE,OAE5DuC,EAAWtH,KAAKgF,UACf3D,OAAC,QAAKF,UAAU,0BACdC,SAAA,CAAAF,MAAC,QAAKC,UAA2C,SAA7BmG,EAAWtH,KAAKgF,SAAsB,eAA8C,WAA7BsC,EAAWtH,KAAKgF,SAAwB,kBAAoB,iBACpI5D,SAA6B,SAA7BkG,EAAWtH,KAAKgF,SAAsB,KAAoC,WAA7BsC,EAAWtH,KAAKgF,SAAwB,IAAM,SAE9F9D,IAAC,QAAKC,UAAU,gBAAiBC,SAA6B,WAAlBpB,KAAKgF,SAAsB,IAAmC,WAA7BsC,EAAWtH,KAAKgF,SAAwB,IAAM,eAKlIuC,GACClG,OAAC,OAAIF,UAAU,iFACbC,SAAA,CAAAF,MAAC,UACCuB,QAAUyB,IACRA,EAAEG,kBACF8C,EAAcG,EAAWxD,KAE3B3C,UAAU,0GACV8D,MAAM,aAEN7D,SAAAF,MAACwD,EAAA,CAAEjD,KAAM,OAEXP,MAAC,UACCuB,QAAUyB,IACRA,EAAEG,kBACFhE,EAAaiH,EAAWtH,KAAKuC,UAAY,KAE3CpB,UAAW,kFAAiFP,EAAS,mCAAqC,iCAE1IQ,WAAAF,IAACgE,EAAA,CAAKzD,KAAM,GAAI0D,KAAK,0BA5ExBmC,EAAWxD,IAoFpB,SACEzC,KAAC,OAAIF,UAAU,YAEbC,SAAA,CAAAC,OAAC,OAAIF,UAAW,GAAGJ,6DACjBK,SAAA,GAAAC,KAAC,OAAIF,UAAU,yCACbC,SAAA,CAAAF,MAAC,MAAGC,UAAW,kCAAkCH,IAAYI,SAAA,YAC5DgG,GACClG,MAAC2G,EAAA,CACCC,OAAO,WACPV,cACA3F,KAAM,GACNsG,QAAQ,aAIbf,EAAa3B,OAAS,GAAK4B,EAAe5B,OAAS,EAClDhE,OAAC,OAAIF,UAAU,YAEZC,SAAA,CAAA4F,EAAajD,IAAIuD,GAAcD,EAAeC,GAAY,IAG1DL,EAAelD,IAAIuD,GAAcD,EAAeC,GAAY,cAG9D,OAAInG,UAAW,qBAAoBP,EAAS,gBAAkB,kBAC7DQ,SAAA,CAAAF,MAAC,KAAEC,UAAU,UAAUC,SAAA,WACvBF,MAAC,KAAEC,UAAU,eAAeC,SAAA,mBAMjC8F,EAAe7B,OAAS,GACvBhE,OAAC,OAAIF,UAAW,GAAGJ,6DACjBK,SAAA,CAAAF,MAAC,MAAGC,UAAW,uCAAuCH,IAAYI,SAAA,gBACjE,OAAID,UAAU,gDACZC,SAAA8F,EAAenD,IAAIuD,GAClBpG,MAAC,OAECC,UAAW,6DAA6DJ,KAAUH,EAAS,kCAAoC,6BAE/HQ,SAAAC,OAAC,OAAIF,UAAU,8CACbC,SAAA,GAAAF,IAAC,OAAIC,UAAW,sGACdC,SAAAF,MAACwD,GAAEjD,KAAM,GAAIgD,YAAa,QAE5BpD,KAAC,OAAIF,UAAU,iBACbC,SAAA,CAAAF,MAAC,MAAGC,UAAW,gDACZC,SAAAkG,EAAWtH,KAAKkC,SAEnBhB,IAAC,OAAIC,UAAU,2FACbC,eAAC,QAAKD,UAAU,eAAeC,SAAA,iBAZhCkG,EAAWxD,eAyBhCiD,GAAaD,YAAc,eC5K3B,MAAMkB,GAA8CnF,OAAK,EACvDoF,aACAC,iBACA5H,QACAM,SACAF,eACAM,WACAC,UACAkH,gBAEA,MAAMC,EAAcC,cAAY,KAC9BH,EAAe,KACd,CAACA,IAwBJ,SACE7G,KAAC,OAAIF,UAAU,cAEbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,mCACbC,SAAA,CAAAC,OAAC,OAAIF,UAAW,iGAxBhBT,EACY,oBAAVJ,EACK,6GAEF,oHAEFM,EAAS,8BAAgC,6BAoB1CQ,SAAA,CAAAF,MAACoH,EAAA,CAAO7G,KAAM,GAAIN,UAAWF,IAG7BC,MAAC,SACCsG,KAAK,OACLe,MAAON,EACPO,SAAWtE,GAAMgE,EAAehE,EAAEuE,OAAOF,OACzCG,YAAY,UACZvH,UAAW,4DAA4DH,iBAAwBC,MAIhGgH,GACC/G,MAAC,UACCuB,QAAS2F,EACTjH,UAAW,oCA9BjBT,EACY,oBAAVJ,EACK,0PAEF,+QAEFM,EAAS,oBAAsB,sBAyB5B,aAAW,OAEXQ,WAAAF,IAACwD,EAAA,CAAEjD,KAAM,GAAIN,UAAWF,SAM7BkH,GACCjH,MAAC,UACCuB,QAAS0F,EACThH,UAAW,8FAA8FT,EAC1F,oBAAVJ,EACC,kRACA,uSACDM,EAAS,qDAAuD,mFAGrEQ,SAAAF,MAACyH,EAAA,CAAKlH,KAAM,UAMjBwG,KACC5G,KAAC,OAAIF,UAAW,gBAAgBF,IAAWG,SAAA,SACnC6G,EAAW,YAO3BD,GAAclB,YAAc,gBCR5B,MAAM8B,GAAgD/H,EAAMgC,KAAK,EAC/DgG,aACAC,eACAC,YACAC,SAAS,GACTC,WAAW,GACXC,eACAC,kBACApG,iBACAC,eACAC,iBACAC,kBACAC,kBACA9C,eACA+C,cACAC,YACAC,aACAC,cACA6F,aACAC,oBACAC,eACAC,mBACAC,gBACAC,sBACAnJ,QACAS,SACAC,WACAC,UACAL,SACAF,eACAgJ,aACAC,WACAC,iBACAzB,YACA0B,uBACAC,wBAIA,MAAO7B,EAAY8B,GAAiBpG,WAAS,KAGtCF,EAAeC,GAAoBC,WAExCmF,EAAalF,OAAO,CAACC,EAAK7D,KACxB6D,EAAI7D,EAAK8D,KAAM,EACRD,GACN,MAIEmG,EAAaC,GAAkBtG,WAAsB,IAAIuG,MAGzDC,EAAaC,GAAkBzG,WAA+D,aAG9F0G,EAAYC,IAAiB3G,WAAsD,QAGnFH,GAAa+G,IAAkB5G,WAA0B,QAG1D6G,GAAYnC,cAAavF,GACtB,IAAIA,GAAO2H,KAAK,CAACC,EAAGC,aACzB,OAAQR,GACN,IAAK,WACH,MAAMS,EAAgB,CAAEC,KAAM,EAAGC,OAAQ,EAAGC,IAAK,GACjD,OAAQH,EAAcF,EAAE1F,WAA2C,IAC3D4F,EAAcD,EAAE3F,WAA2C,GACrE,IAAK,UACH,MAAMgG,GAAQ,OAAA3E,EAAAqE,EAAE7F,eAAF,EAAAwB,EAAY4E,MAAO,IAAIC,KAAKR,EAAE7F,SAASoG,MAAQ,IAAIC,KAAK,QAChEC,GAAQ,OAAAC,EAAAT,EAAE9F,eAAF,EAAAuG,EAAYH,MAAO,IAAIC,KAAKP,EAAE9F,SAASoG,MAAQ,IAAIC,KAAK,QACtE,OAAOF,EAAMK,UAAYF,EAAME,UACjC,IAAK,eACH,MAAMC,EAAWZ,EAAEa,UAAY,IAAIL,KAAKR,EAAEa,WAAa,IAAIL,KAAK,GAEhE,OADiBP,EAAEY,UAAY,IAAIL,KAAKP,EAAEY,WAAa,IAAIL,KAAK,IAChDG,UAAYC,EAASD,UACvC,IAAK,WAKH,OAJkBX,EAAEtG,UAAY,IAC9BsG,EAAEpE,SAAYoE,EAAEpE,SAASK,OAAOH,GAAMA,EAAGpC,WAAWiB,OAASqF,EAAEpE,SAASjB,OAAU,IAAM,IACxEsF,EAAEvG,UAAY,IAC9BuG,EAAErE,SAAYqE,EAAErE,SAASK,OAAOH,GAAMA,EAAGpC,WAAWiB,OAASsF,EAAErE,SAASjB,OAAU,IAAM,GAE5F,QACE,OAAO,KAGZ,CAAC8E,IAGEqB,GAAsBnD,cAAavF,IACvC,OAAQuH,GACN,IAAK,YACH,OAAOvH,EAAM6D,OAAO3G,GAAQA,EAAKoE,WACnC,IAAK,UACH,OAAOtB,EAAM6D,OAAO3G,IAASA,EAAKoE,YAAcqH,GAAczL,IAChE,IAAK,UACH,OAAO8C,EAAM6D,OAAO3G,IAASA,EAAKoE,WAAaqH,GAAczL,IAC/D,QACE,OAAO8C,IAEV,CAACuH,IAWEqB,GAAkBxF,IACtB+D,KAAuB,IAAIC,IAAI/D,GAAMwF,IAAIzF,KAarC0F,GAAcvD,cAAY,CAACvF,EAAcmF,KAC7C,IAAKA,EAAW4D,OAAQ,OAAO/I,EAE/B,MAAMgJ,EAAc7D,EAAW8D,cAC/B,OAAOjJ,EAAM6D,OAAO3G,cAElB,SAAI,OAAAqG,IAAK2F,WAAL,EAAA3F,EAAW0F,cAAcE,SAASH,QAClC,OAAAV,IAAKnG,YAAL,EAAAmG,EAAYW,cAAcE,SAASH,QACnC,OAAAI,IAAKhK,WAAL,EAAAgK,EAAWH,cAAcE,SAASH,OAGlC9L,EAAKsG,UACAtG,EAAKsG,SAAS6F,KAAM3F,UACzB,cAAAH,EAAAG,EAAGvB,YAAH,EAAAoB,EAAU0F,cAAcE,SAASH,QAMtC,IAGGM,GAAqBC,UAAQ,KACjC,IAAIC,EAAWV,GAAY/C,EAAYZ,GAGvC,OAFAqE,EAAWd,GAAoBc,GAC/BA,EAAW9B,GAAU8B,GACdA,GACN,CAACzD,EAAYZ,EAAY2D,GAAaJ,GAAqBhB,KAExD+B,GAAuBF,UAAQ,KACnC,IAAIC,EAAWV,GAAY9C,EAAcb,GAGzC,OAFAqE,EAAWd,GAAoBc,GAC/BA,EAAW9B,GAAU8B,GACdA,GACN,CAACxD,EAAcb,EAAY2D,GAAaJ,GAAqBhB,KAE1DgC,GAAoBH,UAAQ,IAC3BtD,EACE,CACL0D,QAASjC,GAAUoB,GAAY7C,EAAU/B,cAAgB,GAAIiB,IAC7D7D,UAAWwH,GAAY7C,EAAU9B,gBAAkB,GAAIgB,GACvDyE,UAAWd,GAAY7C,EAAU7B,gBAAkB,GAAIe,IAJlC,CAAEwE,QAAS,GAAIrI,UAAW,GAAIsI,UAAW,IAM/D,CAAC3D,EAAWd,EAAY2D,GAAapB,KAGlCiB,GAAiBzL,IACrB,IAAKA,EAAK6E,WAAa7E,EAAK6E,SAASC,SAAW9E,EAAKoE,WAAapE,EAAKsE,UACrE,OAAO,EAGT,MAAMqI,EAAe3M,EAAK6E,SAASoG,KAC7B2B,EAAe5M,EAAK6E,SAASE,KAEnC,IAAK4H,EACH,OAAO,EAIT,MACME,EAAmB,IAAI3B,KADT0B,EAAe,GAAGD,KAAgBC,IAAiB,GAAGD,cAK1E,WAHgBzB,KAGH2B,GAITC,GAAyBT,UAAQ,IAC9BxD,EAAWlC,OAAO3G,IAASA,EAAKoE,YAAcpE,EAAKsE,WAAamH,GAAczL,IAAOqF,OAC3F,CAACwD,IAE0BwD,UAAQ,IAC7BvD,EAAanC,OAAO3G,IAASA,EAAKoE,YAAcpE,EAAKsE,WAAamH,GAAczL,IAAOqF,OAC7F,CAACyD,IAEJ,MAAMiE,GAA0BV,UAAQ,KACjC,MAAAtD,OAAA,EAAAA,EAAW/B,cACT+B,EAAU/B,aAAaL,OAAQ3G,IAEpC,GAAIA,EAAK6E,UAAY7E,EAAK6E,SAASC,SAA2B,cAAhB9E,EAAK2H,OAAwB,CACzE,MAAMgF,EAAe3M,EAAK6E,SAASoG,KAC7B2B,EAAe5M,EAAK6E,SAASE,KAEnC,IAAK4H,EACH,OAAO,EAGT,MACME,EAAmB,IAAI3B,KADT0B,EAAe,GAAGD,KAAgBC,IAAiB,GAAGD,cAI1E,WAFgBzB,KAEH2B,CACf,CACA,OAAO,IACNxH,OAlBkC,EAmBpC,CAAC0D,IAGEiE,GAA0BX,UAAQ,KACjC,MAAAtD,OAAA,EAAAA,EAAW/B,cACT+B,EAAU/B,aAAa3B,OADO,EAEpC,CAAC0D,IAGEkE,GAAeZ,UAAQ,aAC3B,GAAqB,UAAjBnD,EAA0B,CAC5B,MAAM9E,EAAYyE,EAAWlC,OAAO3G,GAAQA,EAAKoE,WAAWiB,OACtD6H,EAAQrE,EAAWxD,OAEzB,MAAO,CAAE8H,WADUD,EAAQ,EAAI,GAAGzG,KAAKC,MAAOtC,EAAY8I,EAAS,QAAU,KACxD9I,YAAW8I,QAClC,IAA4B,SAAjBhE,GAA4C,YAAjBA,EAA4B,CAChE,MAAMkE,EAActE,EAAazD,OACjC,GAAoB,IAAhB+H,EAAmB,MAAO,CAAED,WAAY,KAAM/I,UAAW,EAAG8I,MAAO,GAEvE,MAAMG,EAAkBvE,EAAalF,OAAO,CAAC2C,EAAKvG,IAC5CA,EAAKoE,UACAmC,EAAM,EAKNA,GAHiBvG,EAAKsG,SACzBtG,EAAKsG,SAASK,OAAOH,GAAMA,EAAGpC,WAAWiB,OAASrF,EAAKsG,SAASjB,OAChE,GAGL,GAIH,MAAO,CAAE8H,WAFU,GAAG1G,KAAKC,MAAO2G,EAAkBD,EAAe,QAE9ChJ,UADH0E,EAAanC,OAAO3G,GAAQA,EAAKoE,WAAWiB,OAC9B6H,MAAOE,EACzC,CAAO,CACL,MAAMhJ,GAAY,OAAAiC,EAAA,MAAA0C,OAAA,EAAAA,EAAW9B,qBAAX,EAAAZ,EAA2BhB,SAAU,EACjD6H,IAAS,OAAA9B,EAAA,MAAArC,OAAA,EAAAA,EAAW/B,mBAAX,EAAAoE,EAAyB/F,SAAU,GAAKjB,EAEvD,MAAO,CAAE+I,WADUD,EAAQ,EAAI,GAAGzG,KAAKC,MAAOtC,EAAY8I,EAAS,QAAU,KACxD9I,YAAW8I,QAClC,GACC,CAAChE,EAAcL,EAAYC,EAAcC,IAGtCuE,GAAyBjF,cAAanC,IAC1C,IAAKmD,IAAsBN,EAAW,OAEtC,MAAMwE,EAAiBxE,EAAU/B,aAAawG,KAAMC,GAAWA,EAAE3J,KAAOoC,GACxE,IAAKqH,EAAgB,OAErB,MAAMG,EAAsB3E,EAAU/B,aAAaL,OAAQ8G,GAAWA,EAAE3J,KAAOoC,GACzEyH,EAAgB,IACjBJ,EACH5F,OAAQ,YACRiG,aAAA,IAAiB1C,MAAO2C,eAEpBC,EAAwB,IAAI/E,EAAU9B,eAAgB0G,GAE5DtE,EAAkB,CAChBrC,aAAc0G,EACdzG,eAAgB6G,IAIlB,MAAMC,EAAgB,IAAIC,MAAM,2BAChCD,EAAcE,OAAS,GACvBF,EAAcG,OAAOC,MAAM,SAC1B,CAAC9E,EAAmBN,IAGjBqF,GAAwB/F,cAAanC,IACzC,IAAKmD,IAAsBN,EAAW,OAEtC,MAAMsF,EAAgBtF,EAAU/B,aAAawG,KAAMC,GAAWA,EAAE3J,KAAOoC,GACvE,IAAKmI,EAAe,OAEpB,MAAMX,EAAsB3E,EAAU/B,aAAaL,OAAQ8G,GAAWA,EAAE3J,KAAOoC,GACzEoI,EAAgB,IACjBD,EACH1G,OAAQ,YACR4G,aAAA,IAAiBrD,MAAO2C,eAEpBW,EAAwB,IAAKzF,EAAU7B,gBAAkB,GAAKoH,GAEpEjF,EAAkB,CAChBrC,aAAc0G,EACdxG,eAAgBsH,KAEjB,CAACnF,EAAmBN,IAEvB,SACE1H,KAAC,OAAIF,UAAU,YAEbC,SAAA,CAAAC,OAAC,OAAIF,UAAW,GAAGJ,mEACjBK,SAAA,GAAAC,KAAC,OAAIF,UAAU,kEACbC,SAAA,CAAAC,OAAC,UACCoB,QAAS,IAAM0G,EAAgB,SAC/BhI,UAAW,yIACQ,UAAjB+H,EACKxI,EACY,oBAAVJ,EACC,+GACA,sHACDM,EAAS,yBAA2B,yBACtCF,EACY,oBAAVJ,EACC,wQACA,6RACDM,EAAS,oCAAsC,uCAGxDQ,SAAA,GAAAF,IAACuN,EAAA,CAAShN,KAAM,KAAM,QACrBqL,GAAyB,GACxBzL,OAAC,QAAKF,UAAU,yDACdC,SAAA,GAAAF,IAAC,QAAKC,UAAU,6FACf,QAAKA,UAAU,mHACbC,SAAA0L,GAAyB,EAAI,KAAOA,WAK7CzL,OAAC,UACCoB,QAAS,IAAM0G,EAAgB,WAC/BhI,UAAW,yIACQ,YAAjB+H,EACKxI,EACY,oBAAVJ,EACC,gHACA,uHACDM,EAAS,0BAA4B,0BACvCF,EACY,oBAAVJ,EACC,yQACA,8RACDM,EAAS,oCAAsC,uCAGxDQ,SAAA,GAAAF,IAACwN,EAAA,CAAOjN,KAAM,KAAM,WAEtBJ,OAAC,UACCoB,QAAS,IAAM0G,EAAgB,UAC/BhI,UAAW,yIACQ,WAAjB+H,EACKxI,EACY,oBAAVJ,EACC,iHACA,wHACDM,EAAS,2BAA6B,2BACxCF,EACY,oBAAVJ,EACC,0QACA,+RACDM,EAAS,oCAAsC,uCAGxDQ,SAAA,GAAAF,IAACM,EAAA,CAASC,KAAM,KAAM,SACpBsL,GAA0B,GAAKC,GAA0B,IACzD3L,OAAC,QAAKF,UAAU,yDACdC,SAAA,GAAAF,IAAC,QAAKC,UAAU,uFAChBD,MAAC,QAAKC,UAAU,mHACbC,SAAA4L,GAA0B,EACtBA,GAA0B,EAAI,KAAOA,GACtC,UAKZ3L,OAAC,UACCoB,QAASoH,EACT1I,UAAW,yIACTT,EACe,oBAAVJ,EACC,2QACA,gSACDM,EAAS,4BAA8B,6BAG9CQ,SAAA,GAAAF,IAACyH,EAAA,CAAKlH,KAAM,KAAM,SAEnBiI,GACCxI,MAAC2G,EAAA,CACCC,OAAO,QACPV,YAAasC,EACbjI,KAAM,GACNsG,QAAQ,QACR5G,UAAU,4BAMhBE,KAAC,OAAIF,UAAU,wCACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,iDACbC,SAAAC,OAAC,QAAKF,UAAWF,EAASG,SAAA,WAAOF,MAAC,QAAKC,UAAU,aAAcC,YAAa+L,aAAkB,MAAC9L,KAAC,QAAKF,UAAU,aAAcC,SAAA,CAAA6L,GAAa7I,UAAU,MAAI6I,GAAaC,SAAa,iBAEpLhM,IAAC,OAAIC,UAAW,8CAA6CT,EAA0B,oBAAVJ,EAA8B,iGAAmG,wGAA4GM,EAAS,gGAAkG,2GACnaQ,SAAAF,MAAC,OACCC,UAAU,uEACVG,MAAO,CAAEmE,MAAOwH,GAAaE,sBAOrC9L,OAAC,OAAIF,UAAW,GAAGJ,mEAEjBK,SAAA,GAAAC,KAAC,OAAIF,UAAU,0BACbC,SAAA,CAAAF,MAAC,SAAMC,UAAU,sCAAsCC,SAAA,QACvDC,OAAC,UACCkH,MAAO4B,EACP3B,SAAWtE,GAAMkG,EAAelG,EAAEuE,OAAOF,OACzCpH,UAAW,wCAAuCT,EAA0B,oBAAVJ,EAA8B,8CAAgD,8CAAiDM,EAAS,4CAA8C,0CAExPQ,SAAA,CAAAF,MAAC,UAAOqH,MAAM,WAAWnH,SAAA,SACzBF,MAAC,UAAOqH,MAAM,UAAUnH,SAAA,UACxBF,MAAC,UAAOqH,MAAM,eAAenH,SAAA,UAC7BF,MAAC,UAAOqH,MAAM,WAAWnH,SAAA,gBAK7BC,KAAC,OAAIF,UAAU,0BACbC,SAAA,CAAAF,MAAC,SAAMC,UAAU,sCAAsCC,SAAA,QACvDC,OAAC,UACCkH,MAAO8B,EACP7B,SAAWtE,GAAMoG,GAAcpG,EAAEuE,OAAOF,OACxCpH,UAAW,wCAAuCT,EAA0B,oBAAVJ,EAA8B,8CAAgD,8CAAiDM,EAAS,4CAA8C,0CAExPQ,SAAA,CAAAF,MAAC,UAAOqH,MAAM,MAAMnH,SAAA,SACpBF,MAAC,UAAOqH,MAAM,UAAUnH,SAAA,QACxBF,MAAC,UAAOqH,MAAM,YAAYnH,SAAA,QAC1BF,MAAC,UAAOqH,MAAM,UAAUnH,SAAA,eAK5BC,KAAC,OAAIF,UAAU,0BACbC,SAAA,CAAAF,MAAC,SAAMC,UAAU,sCAAsCC,SAAA,UACvDC,KAAC,OAAIF,UAAU,aACbC,SAAA,CAAAF,MAAC,UACGuB,QAAS,IAAM8H,GAAe,QAC9BpJ,UAAW,gDAA+D,SAAhBqC,GAA0B9C,EAA0B,oBAAVJ,EAA8B,+GAAiH,sHAA0HM,EAAS,yBAA2B,yBAA8BF,EAA0B,oBAAVJ,EAA8B,mGAAqG,0GAA8GM,EAAS,oCAAsC,uCAChuBQ,SAAA,OAGDF,MAAC,UACCuB,QAAS,IAAM8H,GAAe,QAC9BpJ,UAAW,gDAA+D,SAAhBqC,GAA0B9C,EAA0B,oBAAVJ,EAA8B,+GAAiH,sHAA0HM,EAAS,yBAA2B,yBAA8BF,EAA0B,oBAAVJ,EAA8B,mGAAqG,0GAA8GM,EAAS,oCAAsC,uCAChuBQ,SAAA,gBAQTF,MAAC8G,GAAA,CACCC,aACAC,eAAgB6B,EAChBzJ,QACAM,SACAF,eACAM,WACAC,UACAkH,cAIgB,UAAjBe,GACChI,MAAC0B,GAAA,CACCE,MAAOsJ,GACPzK,SAAS,QACToB,iBACAC,eACAC,iBACAC,kBACAC,kBACA9C,eACA+C,cACAC,YACAC,aACAC,cACAxC,SACAC,WACAV,QACAM,SACAF,eACA8C,iBAIc,SAAjB0F,GACChI,MAAC0B,GAAA,CACCE,MAAOyJ,GACP5K,SAAS,OACToB,iBACAC,eACAC,iBACAC,kBACAC,kBACA9C,eACA+C,cACAC,YACAC,aACAC,cACAxC,SACAC,WACAV,QACAM,SACAF,eACA8C,iBAIc,YAAjB0F,GACC7H,OAAC,OAAIF,UAAW,GAAGJ,sEACjBK,SAAA,CAAAF,MAAC,OAAIC,UAAU,yCACbC,SAAAC,OAAC,OAAIF,UAAU,mFACbC,SAAA,GAAAF,IAACsB,EAAA,CAAMf,KAAM,KAAK,eAGtBJ,KAAC,OAAIF,UAAU,YACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,wBAAwBC,SAAA,4CAKvCC,KAAC,OAAIF,UAAU,uDACbC,SAAA,CAAAC,OAAC,OAAIF,UAAW,GAAGJ,sEACjBK,SAAA,GAAAC,KAAC,OAAIF,UAAU,yCACbC,SAAA,CAAAF,MAAC,MAAGC,UAAU,oCAAoCC,SAAA,QAClDF,MAAC,QAAKC,UAAU,wBACdC,gBAAC,OAAIoE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QAAQ1E,SAAA,CAAAF,MAAC,UAAOyN,GAAG,KAAKC,GAAG,KAAKC,EAAE,SAAc3N,IAAC,YAAS6E,OAAO,6BAG/O7E,MAAC,KAAEC,UAAU,kCAAkCC,SAAA,OAC/CF,MAAC,KAAEC,UAAU,wBAAwBC,SAAA,iBAGvCC,OAAC,OAAIF,UAAW,GAAGJ,sEACjBK,SAAA,GAAAC,KAAC,OAAIF,UAAU,yCACbC,SAAA,CAAAF,MAAC,MAAGC,UAAU,oCAAoCC,SAAA,UAClDF,MAAC,QAAKC,UAAU,wBACdC,gBAAC,OAAIoE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QAAQ1E,SAAA,CAAAF,MAAC,UAAOyN,GAAG,KAAKC,GAAG,KAAKC,EAAE,SAAc3N,IAAC,YAAS6E,OAAO,6BAG/O7E,MAAC,KAAEC,UAAU,kCAAkCC,SAAA,MAC/CF,MAAC,KAAEC,UAAU,wBAAwBC,SAAA,cAGvCC,OAAC,OAAIF,UAAW,GAAGJ,sEACjBK,SAAA,GAAAC,KAAC,OAAIF,UAAU,yCACbC,SAAA,CAAAF,MAAC,MAAGC,UAAU,oCAAoCC,SAAA,WAClDF,MAAC,QAAKC,UAAU,wBACdC,gBAAC,OAAIoE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QAAQ1E,SAAA,CAAAF,MAAC,UAAOyN,GAAG,KAAKC,GAAG,KAAKC,EAAE,SAAc3N,IAAC,YAAS6E,OAAO,6BAG/O7E,MAAC,KAAEC,UAAU,kCAAkCC,SAAA,WAC/CF,MAAC,KAAEC,UAAU,wBAAwBC,SAAA,eAGvCC,OAAC,OAAIF,UAAW,GAAGJ,sEACjBK,SAAA,GAAAC,KAAC,OAAIF,UAAU,yCACbC,SAAA,CAAAF,MAAC,MAAGC,UAAU,oCAAoCC,SAAA,SAClDF,MAAC,QAAKC,UAAU,wBACdC,gBAAC,OAAIoE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QAAQ1E,SAAA,GAAAF,IAAC,QAAKkF,EAAE,oDAAoD,UAAOuI,GAAG,IAAIC,GAAG,IAAIC,EAAE,QAAa3N,IAAC,QAAKkF,EAAE,iCAAoClF,IAAC,QAAKkF,EAAE,wCAG1UlF,IAAC,KAAEC,UAAU,kCAAmCC,cAAK0N,IAAI,EAAGrI,KAAKC,MAAOoC,EAAanC,OAAO3G,GAAQA,EAAKoE,WAAWiB,OAASoB,KAAKqI,IAAI,EAAGhG,EAAazD,QAAW,IAAmF,GAA5EyD,EAAazD,OAASyD,EAAanC,OAAO3G,GAAQA,EAAKoE,WAAWiB,YAC1OnE,MAAC,KAAEC,UAAU,wBAAwBC,SAAA,2BAKxC,OACCA,SAAA,GAAAC,KAAC,OAAIF,UAAU,yCACbC,SAAA,CAAAF,MAAC,MAAGC,UAAU,wCAAwCC,SAAA,SACtDF,MAAC,OAAIC,UAAU,iBAEZC,SAAAsI,GACCxI,MAAC,UACCuB,QAAS,IAAMiH,EAAW,YAC1BvI,UAAU,sFACV,aAAW,KACX8D,MAAM,OAEN7D,gBAAC,OAAIoE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QAAQ1E,SAAA,CAAAF,MAAC,UAAOyN,GAAG,KAAKC,GAAG,KAAKC,EAAE,SAAc3N,IAAC,QAAKkF,EAAE,2CAA8ClF,IAAC,QAAKkF,EAAE,+BAO/R,OAAIjF,UAAU,sBACZC,SAAA0H,EAAa/E,IAAI/D,UAChBqB,cAAC,OAECF,UAAW,+FAA+FnB,EAAKoE,UAAY,yBAA2BxD,EAAS,iBAAmB,gBAAkB,MAAMG,KAAWf,EAAKoE,UAAoDxD,EAAS,kBAAoB,mBAArE,uCAEtOQ,SAAA,CAAAF,MAAC,OAAIC,UAAU,0BACbC,SAAAC,OAAC,OAAIF,UAAU,0BACbC,SAAA,CAAAF,MAAC,UAAOuB,QAAUyB,GAAMnB,EAAe/C,EAAMkE,GAAI/C,UAAW,wGAAuGnB,EAAKoE,UAAY,4DAA+DxD,EAAS,6EAA+E,wFACxUQ,SAAApB,EAAKoE,iBAAc,OAAIoB,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QAAQ1E,SAAAF,MAAC,YAAS6E,OAAO,yBAExN1E,KAAC,OAAIF,UAAU,SACbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,2CACZC,SAAA,CAAApB,EAAKsG,WAAatG,EAAKoE,WACtBlD,MAAC,UACCuB,QAAS,KAAMwD,OA7gBjBC,EA6gBoClG,EAAK8D,QA5gBnEJ,EAAiByC,IAAA,IACZA,EACHD,CAACA,IAAUC,EAAKD,MAHO,IAACA,GA8gBE/E,UAAU,oGACV8D,MAAOxB,EAAczD,EAAK8D,IAAM,QAAU,QAEzC1C,SAAAqC,EAAczD,EAAK8D,IAClB5C,MAAC,OAAIsE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QACxK1E,SAAAF,MAAC,QAAKkF,EAAE,mBAGVlF,MAAC,OAAIsE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QACxK1E,SAAAF,MAAC,QAAKkF,EAAE,wBAKhBlF,MAAC,MAAGC,UAAW,aAAanB,EAAKoE,UAAY,6BAA+BpD,IACzEI,SAAApB,EAAKkC,OAERhB,MAAC,UAAOuB,QAAS,IAAMQ,EAAejD,GAAOmB,UAAU,8FAA8FC,SAAAF,MAACqE,EAAA,CAAM9D,KAAM,YAGpKJ,KAAC,OAAIF,UAAU,6EACbC,SAAA,GAAAC,KAAC,QAAKF,UAAU,kBAAkBC,SAAA,QAAKpB,EAAK2E,QAC5CtD,KAAC,QAAKF,UAAU,kBAAkBC,SAAA,QAAKpB,EAAK4E,UAC5CvD,KAAC,QAAKF,UAAU,gBAAgBC,SAAA,OAAI,OAAAiF,EAAArG,EAAKsG,eAAL,EAAAD,EAAezC,OAAO,CAAC2C,EAAKC,IAAOD,EAAMC,EAAGjE,SAAU,GAAG,SAC5FvC,EAAK6E,UAAY7E,EAAK6E,SAASC,SAAW9E,EAAK6E,SAASE,MACvD1D,OAAC,QAAKF,UAAU,iBAAiBC,SAAA,OAAIpB,EAAK6E,SAASE,UAErD1D,KAAC,QAAKF,UAAU,0BACdC,SAAA,CAAAF,MAAC,QAAKC,UAAgC,SAAlBnB,EAAKgF,SAAsB,eAAmC,WAAlBhF,EAAKgF,SAAwB,kBAAoB,iBAC9G5D,SAAkB,WAAb4D,SAAsB,KAAyB,WAAlBhF,EAAKgF,SAAwB,IAAM,SAExE9D,IAAC,QAAKC,UAAU,gBAAiBC,SAAkB,SAAlBpB,EAAKgF,SAAsB,IAAwB,WAAlBhF,EAAKgF,SAAwB,IAAM,WAEvG3D,KAAC,QAAKF,UAAU,0BACdC,SAAA,CAAAF,MAAC,OAAIsE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QAAQ3E,UAAU,gBAAgBC,SAAAF,MAAC,YAAS6E,OAAO,wCAC7N7E,IAAC,QAAKC,UAAU,gBAAiBC,SAAApB,EAAKoE,UAAY,MAAQ4F,EAAY+E,IAAI/O,EAAK8D,IAAM,MAAQ,eAI/F9D,EAAKoE,WAAapE,EAAKsG,UACvBjF,OAAC,OAAIF,UAAU,SACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,+CACbC,SAAAC,OAAC,QAAKF,UAAU,0BAA2BC,SAAA,CAAAqF,KAAKC,MAAO1G,EAAKsG,SAASK,OAAOH,GAAMA,EAAGpC,WAAWiB,OAASrF,EAAKsG,SAASjB,OAAU,KAAK,SAExInE,MAAC,OAAIC,UAAW,4CAA2CT,EAAe,wGAA0GE,EAAS,2BAA6B,2GACxNQ,SAAAF,MAAC,OACCC,UAAU,uEACVG,MAAO,CAAEmE,MAAWzF,EAAKsG,SAASK,OAAOH,GAAMA,EAAGpC,WAAWiB,OAASrF,EAAKsG,SAASjB,OAAU,IAA9E,iBAM1BhE,KAAC,OAAIF,UAAU,mCACZC,SAAA,EAACpB,EAAKoE,WACLlD,MAAC,UAAOuB,QAAUyB,GAAMlB,EAAahD,EAAK8D,GAAII,GAAI/C,UAAU,0IAA0I8D,MAAM,aAC1M7D,eAACsD,EAAA,CAAEjD,KAAM,OAGbP,MAAC,UAAOuB,QAAS,KAAQpC,EAAaL,EAAKuC,UAAY,IAAKmJ,GAAe1L,EAAK8D,KAAQS,SAAUvE,EAAKoE,UAAWjD,UAAW,2GAA2GP,EAAS,mCAAqC,yEACpRQ,SAAAF,MAAC,OAAIsE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,eAAeS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QAAQ1E,eAAC,WAAQ2E,OAAO,mCAMjN/F,EAAKsG,WAAatG,EAAKoE,WAAaX,EAAczD,EAAK8D,KACtD5C,MAAC,OAAIC,UAAW,kCAAiCT,EAA0B,oBAAVJ,EAA8B,gCAAkC,gCAAmCM,EAAS,iCAAmC,gCAC7MQ,SAAApB,EAAKsG,SAASvC,IAAKyC,IAClB,IAAII,EAAmB,mHAYvB,OARIA,GAFAlG,EACY,oBAAVJ,EACkB,kKAEA,kLAGFM,EAAS,oBAAsB,mEAInDS,OAAC,OAECF,UAAWyF,EAEXxF,SAAA,GAAAC,KAAC,OAAIF,UAAU,yCACbC,SAAA,CAAAF,MAAC,UAAOuB,QAAUyB,GAAMhB,EAAgBlD,EAAK8D,GAAI0C,EAAG1C,IAAK3C,UAAW,2FAA0FqF,EAAGpC,UAAY,+CAAkDxD,EAAS,4DAA8D,sDACnSQ,SAAAoF,EAAGpC,WAAalD,MAAC,OAAIsE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QAAQ1E,eAAC,YAAS2E,OAAO,uBAEtN7E,MAAC,QAAKC,UAAW,oBAAoBqF,EAAGpC,UAAY,6BAA+BpD,mBAChFI,SAAAoF,EAAGtE,YAIRb,KAAC,OAAIF,UAAU,0FACbC,SAAA,GAAAC,KAAC,QAAKF,UAAU,kBAAkBC,SAAA,KAAEoF,EAAG7B,QACvCtD,KAAC,QAAKF,UAAU,kBAAkBC,SAAA,KAAEoF,EAAG5B,UACvCvD,KAAC,QAAKF,UAAU,gBAAiBC,SAAA,CAAAoF,EAAGjE,SAAS,gBAE9C,OAAIpB,UAAU,qCACbC,SAAAF,MAAC,UAAOuB,QAAS,KAAQpC,EAAamG,EAAGjE,UAAY,IAAKmJ,GAAe1L,EAAK8D,KAAQ3C,UAAW,2EAA2EP,EAAS,mCAAqC,wEACxNQ,SAAAF,MAAC,OAAIsE,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYR,KAAK,OAAOS,OAAO,eAAenB,YAAY,IAAIoB,cAAc,QAAQC,eAAe,QAAQ1E,eAAC,WAAQ2E,OAAO,+BAnBjMS,EAAG1C,UAhGb9D,EAAK8D,iBAmIN,WAAjBoF,GACC7H,OAAC,OAAIF,UAAU,YAEbC,SAAA,GAAAF,IAAC,OAAIC,UAAU,SACbC,SAAAF,MAAC8N,GAAA,CACC1O,QACAyI,YACAK,aACAC,oBACAI,0BAKJvI,MAAC6F,GAAA,CACCC,aAAcwF,GAAkBC,QAChCxF,eAAgBuF,GAAkBpI,UAClC8C,eAAgBsF,GAAkBE,UAClC3J,eAAgBuK,GAChBnG,cAAeiH,GACf/N,eACA4C,iBACAmE,YAAasC,EACb3I,SACAC,WACAV,QACAM,SACAF,yBAQZkI,GAAe9B,YAAc,iBCh3BtB,MAAMmI,GAAmB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAM,IAAM,IAAM,KCa1EC,GAA8C,EAClDC,SACAC,SACAC,WACA/O,QACAM,SACAF,eACA4O,uBAEA,MAAOC,EAAWC,GAAgB7L,WAAS,IAQ3C,OANA7C,YAAU,KACJqO,GACFK,EAAa,KAEd,CAACL,IAECA,IAUHjO,IAAC,OAAIC,UAAU,2FACbC,SAAAF,MAAC,OACCC,UAAW,6DAA4DT,EAC1D,oBAAVJ,EACC,kHACA,0HACFM,EAAS,2DAA6D,iDAExEQ,WAAAC,KAAC,QAAKoO,SAhBUvL,IACpBA,EAAEwL,iBACEH,EAAU1D,QACZuD,EAAOG,EAAU1D,SAae1K,UAAU,MACtCC,SAAA,GAAAC,KAAC,OAAIF,UAAU,yCACbC,SAAA,CAAAF,MAAC,MAAGC,UAAW,sBAAqBP,EAAS,aAAeF,EAAe,gBAAkB,kBAAoBU,SAAA,UAGjHF,MAAC,UACCsG,KAAK,SACL/E,QAAS4M,EACTlO,UAAW,sBAAqBP,EAAS,iCAAmCF,EAAe,oCAAsC,uCAClIU,SAAA,SAKHF,MAAC,OAAIC,UAAU,YACbC,gBAAC,OACCA,SAAA,CAAAF,MAAC,SAAMC,UAAU,gDAAgDC,SAAA,SACjEF,MAAC,SACCsG,KAAK,OACLe,MAAOgH,EACP/G,SAAWtE,GAAMsL,EAAatL,EAAEuE,OAAOF,OACvCpH,UAAW,qDAAoDT,GAA0B,oBAAVJ,EAA8B,6BAAkE,iCAC/KoI,YAAY,YACZiH,UAAW,GACXC,WAAS,WAKfvO,KAAC,OAAIF,UAAU,8BACbC,SAAA,CAAAF,MAAC,UACCsG,KAAK,SACL/E,QAAS4M,EACTlO,UAAW,6CAA4CT,EAA0B,oBAAVJ,EAA8B,2CAA6C,2CAA8CM,EAAS,2CAA6C,4CACvPQ,SAAA,OAGDF,MAAC,UACCsG,KAAK,SACLrG,UAAW,6CAA4CT,EAA0B,oBAAVJ,EAA8B,2CAA6C,2CAA8CM,EAAS,2CAA6C,4CACvPQ,SAAA,iBA1DS,MCnBhByO,GAA0ChN,OAAK,EACnDiN,YACAC,eACAC,aACAC,gBACAC,mBACAC,sBACAC,UACAC,aACAC,qBACAC,eACAC,eACAC,aACArN,cACAE,aACAoG,aACApJ,QACAM,SACAF,eACAK,SACAC,WACAC,UACAqO,mBACAoB,oBACAC,SAAS,CAAC,KAAM,OAAQ,OAAQ,KAAM,OAAQ,OAAQ,WACtDC,YACAC,gBACAC,mBACAC,eACAC,kBACAC,oBACAC,2BAGA,MAAOjJ,EAAY8B,GAAiBlJ,EAAM8C,SAAS,KAG5CwN,EAAcC,GAAmBzN,WAAwB,OACzD0N,EAAmBC,GAAwB3N,WAAS,KAEpD4N,EAAmBC,GAAwB7N,YAAS,GAGrD8N,EAAiB,CAACC,EAAmBC,IACrCD,EACKC,EAAY,uCAAyC,yCAE1DjR,EAaK,GAZmB,oBAAVJ,EAA8B,eAAiB,kBACjC,oBAAVA,EAA8B,mBAAqB,sBACzC,oBAAVA,EAChB,0EACA,oFAC+B,oBAAVA,EACrB,kFACA,8FACgC,oBAAVA,EACtB,6FACA,uGAEwFgP,EAAiBsC,aAExGhR,EAAS,kEAAoE,kEAIhFiR,EAAoBxF,UAAQ,IACzByD,EAAUnJ,OAAOmL,IAEtB,GAAmB,UAAf9B,GACF,IAAgB,IAAZ8B,EAAEC,MAAgB,OAAO,OAC/B,GAA0B,QAAf/B,GACL8B,EAAEnQ,WAAaqO,EAAY,OAAO,EAIxC,GAAI/H,EAAY,CACd,MAAM+J,EAAkB/J,EAAW8D,cACnC,OAAO+F,EAAE9F,KAAKD,cAAcE,SAAS+F,IAC9BF,EAAEG,YAAYlG,cAAcE,SAAS+F,IACrCF,EAAEnQ,SAASoK,cAAcE,SAAS+F,EAC3C,CAEA,OAAO,IAER,CAAClC,EAAWE,EAAY/H,IAErBiK,EAAkB7F,UAAQ,IACvB,IAAIwF,GAAmBpH,KAAK,CAACC,EAAGC,KACrC,MAAMwH,EAAQzH,EAAE0H,eAAiB,EAC3BC,EAAQ1H,EAAEyH,eAAiB,EACjC,OAAID,IAAUE,EAAcA,EAAQF,EAC7BzH,EAAE4H,KAAO3H,EAAE2H,OAEnB,CAACT,IAGEU,EAAalG,UAAQ,KACzB,MAAMmG,EAAiB,CACrB,CAAE1O,GAAI,MAAO2O,MAAO,KAAMC,MAAO5C,EAAUzK,WACxCsL,EAAO5M,IAAI4O,IAAA,CACZ7O,GAAI6O,EACJF,MAAOE,EACPD,MAAO5C,EAAUnJ,UAAYmL,EAAEnQ,WAAagR,GAAOtN,OACnDuN,UAAU,MAiBd,OAZI1C,IAAqBW,EACvB2B,EAAeK,KACb,CAAE/O,GAAI,WAAY2O,MAAO,KAAMC,MAAOzD,GAAiB5J,QACvD,CAAEvB,GAAI,QAAS2O,MAAO,MAAOC,MAAO5C,EAAUnJ,OAAOmL,GAAKA,EAAEC,OAAO1M,SAE3D6K,GACVsC,EAAeK,KACb,CAAE/O,GAAI,WAAY2O,MAAO,KAAMC,MAAOzD,GAAiB5J,QACvD,CAAEvB,GAAI,QAAS2O,MAAO,MAAOC,MAAO5C,EAAUnJ,OAAOmL,GAAKA,EAAEC,OAAO1M,SAIhEmN,GACN,CAAC1C,EAAWa,EAAQT,EAAkBW,IASnCiC,GAAgB,KAChB3B,GAAgBE,EAAkBxF,QAAUwF,IAAsBF,IAEpEP,GAAaA,EAAWzK,GACtBA,EAAKpC,IAAIgP,GAAKA,IAAM5B,EAAeE,EAAkBxF,OAASkH,IAIhEhD,KACE5J,EAAKpC,IAAIiP,GACPA,EAAKrR,WAAawP,EAAe,IAAK6B,EAAMrR,SAAU0P,EAAkBxF,QAAWmH,IAIvFC,OAKEA,GAAkB,KACtB7B,EAAgB,MAChBE,EAAqB,KAkBvB,SACEjQ,KAAC,OAAIF,UAAU,8BAEbC,SAAA,QAAC,OAAID,UAAW,0BAA0BJ,uBAExCK,SAAA,GAAAC,KAAC,OAAIF,UAAU,yCACbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,0BACbC,SAAA,OAAC8R,EAAA,CAAYzR,KAAM,GAAIN,UAAU,0BAChC,QAAKA,UAAW,qBAAqBH,IAAYI,SAAA,eAGpDF,MAAC2G,GAAiBC,OAAO,OAAOV,YAAasC,EAAYjI,KAAM,GAAIN,UAAU,yDAI7E+O,GACA7O,OAAC,OAAIF,UAAU,+CACbC,SAAA,CAAAF,MAAC,SACCsG,KAAK,OACLkB,YAAY,UACZH,MAAON,EACPO,SAAWtE,GAAM6F,EAAc7F,EAAEuE,OAAOF,OACxCpH,UAAW,wIAAuIT,EAA0B,oBAAVJ,EAA8B,6OAA+O,iQAAqQM,EAAS,mEAAqE,0EAEnwB,QAAKO,UAAU,8DAA8DC,SAAA,gBAKjF,OAAID,UAAU,wCACZC,SAAAmR,EAAWxO,IAAIoP,SACb,OAAehS,UAAU,2BACvBC,SAAA+P,IAAiBgC,EAAEV,QAElBpR,KAAC,OAAIF,UAAU,0BACbC,SAAA,CAAAF,MAAC,SACCsG,KAAK,OACLe,MAAO8I,EACP7I,SAAWtE,GAAMoN,EAAqBpN,EAAEuE,OAAOF,OAC/C6K,OAAQN,GACRO,UAAYnP,GAAgB,UAAVA,EAAEoP,KAAmBR,KACvC3R,UAAW,mFAAmFsQ,GAAe,KAC7G7B,WAAS,IAEX1O,MAAC,UACCuB,QAASqQ,GACT3R,UAAU,6DACXC,SAAA,MAGDF,MAAC,UACCuB,QAASwQ,GACT9R,UAAU,4DACXC,SAAA,SAMHC,OAAC,UAECoB,QAAS,IAAMwN,EAAckD,EAAErP,IAC/B3C,UAAW,mIAAmIsQ,EAAezB,IAAemD,EAAErP,MAC9KxC,MAAO,CAAEiS,SAAU,SAElBnS,SAAA,CAAA+R,EAAEV,MAAM,MAACpR,KAAC,QAAKF,UAAU,wBAAwBC,SAAA,KAAE+R,EAAET,MAAM,OAC3DS,EAAEP,UAAY1C,GACb7O,OAAC,OAAIF,UAAU,yBACbC,SAAA,CAAAF,MAAC,UACCuB,QAAUyB,IAlHR,IAACqL,EAmHDrL,EAAEG,kBAnHDkL,EAoHe4D,EAAEV,MAnHxCrB,EAAgB7B,GAChB+B,EAAqB/B,IAoHDpO,UAAW,sFAAqFT,EAA0B,oBAAVJ,EAA8B,wQAA0Q,mSAAsS,4CAE9rBc,SAAAF,MAACsS,EAAA,CAAM/R,KAAM,OAEfP,MAAC,UACCuB,QAAUyB,IA5FN,IAACqL,EA6FHrL,EAAEG,kBA7FCkL,EA8Fe4D,EAAEV,MA7FtCgB,OAAOC,QAAQ,YAAYnE,gCAE7BqB,GAAaA,EAAWzK,GAAmBA,EAAKQ,OAAOoM,GAAKA,IAAMxD,IAGlEQ,KACE5J,EAAKpC,IAAIiP,GACPA,EAAKrR,WAAa4N,EAAY,IAAKyD,EAAMrR,SAAU,MAASqR,MAwF9C7R,UAAW,sFAAqFT,EAA0B,oBAAVJ,EAA8B,uQAAyQ,kSAAqS,0CAE5rBc,SAAAF,MAACyS,EAAA,CAAOlS,KAAM,YAxBf0R,EAAErP,KA7BHqP,EAAErP,SAgEhBzC,KAAC,OAAIF,UAAU,oDACbC,SAAA,QAAC,OAAID,UAAW,WAAWF,4BACzBG,SAAA,OAACwS,EAAA,CAAOnS,KAAM,GAAIN,UAAU,oBAAmB,SAAOsF,KAAKoN,MAAMzD,QAEnE/O,KAAC,OAAIF,UAAU,0BACZC,SAAA,CAAA8O,GACC7O,OAAAyS,WAAA,CACE1S,SAAA,CAAAC,OAAC,UACCoB,QAAS8N,EACTpP,UAAW,8FAA8FsQ,GAAe,GAAO,uBAE/HrQ,SAAA,GAAAF,IAACyH,EAAA,CAAKlH,KAAM,KAAK,YAEnBJ,OAAC,UACCoB,QAAS,KACP+O,GAAqB,IAEvBrQ,UAAW,8FAA8FsQ,GAAe,GAAO,uBAE/HrQ,SAAA,GAAAF,IAACyH,EAAA,CAAKlH,KAAM,KAAK,cAIvBJ,OAAC,UACCoB,QAAS,IAAM0N,GAAqBD,GACpC/O,UAAW,8FAA8FsQ,EAAevB,GAAkB,uBAEzI9O,SAAA,CAAA8O,EAAmBhP,MAAC6S,GAAYtS,KAAM,OAAQP,IAAC8S,EAAA,CAAOvS,KAAM,KAC5DyO,EAAmB,OAAS,gBAMnChP,MAACgO,GAAA,CACCC,OAAQoC,EACRnC,OAASG,IACPyB,GAAmBA,EAAgBzB,GACnC0B,GAAqBA,IACrBO,GAAqB,IAEvBnC,SAAU,KACRmC,GAAqB,IAEvBlR,QACAM,SACAF,eACA4O,wBAOY,aAAfU,EACC9O,MAAC,OAAIC,UAAU,sEACZC,SAAA6N,GAAiBlL,IAAI,CAACkQ,EAAOjQ,IAC5B9C,MAAC,OAECC,UAAW,yBAAyBT,EAAe,GAAG4O,EAAiB4E,MAAM5E,EAAiB3M,UAAU2M,EAAiB6E,UAAU7E,EAAiB8E,eAAe9E,EAAiBsC,aAAe,mCAEnMxQ,SAAAC,OAAC,OAAIF,UAAU,cACbC,SAAA,OAAC,OAAID,UAAU,gBAAgBC,SAAA,cAC9B,OAAID,UAAW,qBAAqBH,IAAYI,SAAA,KAAE6S,YAClD,OAAI9S,UAAW,WAAWF,SAAgBG,SAAA,OAAY,GAAR6S,EAAY,IAAU,IAARA,EAAY,QAEzE/S,MAAC,UACCuB,QAAUyB,GAAMoM,EAAmB2D,EAAO/P,GAC1C/C,UAAW,kFAAiFT,EAAe4O,EAAiB4E,GAAK,qCAAuC,iHACzK9S,SAAA,WAXE4C,MAoBX9C,MAAC,OAAIC,UAAU,sEACZC,WAAgB2C,IAAI,CAACiP,EAAMhP,KAC1B,MAAMqQ,GAAS,MAAArB,OAAA,EAAAA,EAAMlP,KAAM,QAAQE,IACnC,OACE3C,OAAC,OAECF,UAAW,gFAAgFT,EAAe,GAAG4O,EAAiB4E,MAAM5E,EAAiB3M,UAAU2M,EAAiB6E,UAAU7E,EAAiB8E,eAAe9E,EAAiBsC,0BAA0BtC,EAAiBgF,eAAiB,qBAAmC,aAAdtB,EAAKxL,MAAuBwL,EAAKjB,MAAQ,aAAe,MAAM7B,EAAmB,oBAAsB,oBACna5O,MAAO,CAAEiT,UAAW,SAGnBnT,SAAA,CAAA8O,GACC7O,OAAC,OAAIF,UAAU,yCACbC,SAAA,CAAAF,MAAC,UACCuB,QAAUyB,IAAQA,EAAEG,kBAAmBoM,EAAW,IAAIuC,KACtD7R,UAAW,sFAAqFT,EAA0B,oBAAVJ,EAA8B,wQAA0Q,mSAAsS,4CAE9rBc,SAAAF,MAACsS,EAAA,CAAM/R,KAAM,OAEfP,MAAC,UACCuB,QAAUyB,GAAMsM,EAAatM,EAAG8O,EAAKlP,IACrC3C,UAAW,sFAAqFT,EAA0B,oBAAVJ,EAA8B,uQAAyQ,kSAAqS,0CAE5rBc,SAAAF,MAACyS,EAAA,CAAOlS,KAAM,UAOnBuR,EAAKwB,OAASxB,EAAKwB,MAAMvI,SAAS,uBACjC5K,OAAC,OAAIF,UAAU,wDACbC,SAAA,CAAAF,MAAC,OACCuT,IAAKzB,EAAKwB,MACVE,IAAK1B,EAAKhH,KACV7K,UAAU,+EACVwT,QAAUzQ,UACR,MAAMuE,EAASvE,EAAEuE,OACjBA,EAAOnH,MAAMsT,QAAU,OACvB,MAAMC,EAAc,OAAAxO,EAAAoC,EAAOqM,oBAAP,EAAAzO,EAAsB0O,uBAAuB,eAAe,GAC5EF,IAAaA,EAAYvT,MAAMsT,QAAU,SAM/CI,OAAS9Q,UACP,MAAMuE,EAASvE,EAAEuE,OACjBA,EAAOnH,MAAMsT,QAAU,QACvB,MAAMC,EAAc,OAAAxO,EAAAoC,EAAOqM,oBAAP,EAAAzO,EAAsB0O,uBAAuB,eAAe,GAC5EF,IAAaA,EAAYvT,MAAMsT,QAAU,WAGjD1T,MAAC,OAAIC,UAAU,gEAAgEG,MAAO,CAAEsT,QAAS,OAAQ3S,gBAAiBrB,EAAS,UAAY,WAC7IQ,SAAAF,MAAC,OAAIC,UAAU,WAEZC,SAAqB,iBAAd4R,EAAKiC,KAAoB,KAAOjC,EAAKiC,YAMnD/T,MAAC,OAAIC,UAAU,wDAAwDG,MAAO,CAAEW,gBAAiBrB,EAAS,UAAY,WACpHQ,eAAC,OAAID,UAAU,WAEZC,SAAqB,iBAAd4R,EAAKiC,KAAoB,KAAOjC,EAAKiC,WAMnD/T,IAAC,OAAIC,UAAU,kGAAkGG,MAAO,CACtH4T,WAAYtU,EACV,4HACA,0IAIJS,OAAC,OAAIF,UAAU,2EAA2EG,MAAO,CAAE6T,UAAW,OAAQzP,OAAQ,qBAC5HtE,SAAA,CAAAC,OAAC,OAECD,SAAA,CAAAC,OAAC,OAAIF,UAAW,uFAAsFP,EAAS,+DAAiE,+BAAiCQ,SAAA,KAC7M4R,EAAKV,QAITpR,MAAC,MAAGC,UAAW,wEAAyEG,MAAO,CAAC8T,WAAY,6BACzGhU,SAAA4R,EAAKhH,YAIgB,IAAvBgH,EAAKqC,eAA+BrC,EAAKqC,cAAgB,GACxDhU,OAAC,QAAKF,UAAW,WAAWP,EAAS,gBAAkB,4BAA6BQ,SAAA,SAC5E4R,EAAKqC,uBAKd,KAAElU,UAAW,WAAWP,EAAS,gBAAkB,kFAAmFU,MAAO,CAAC8T,WAAYxU,EAAS,4BAA8B,mCAC/LQ,WAAK6Q,iBAKV/Q,MAAC,UACCuB,QAAUyB,GAAMmM,EAAW2C,EAAM9O,GACjC/C,UAAW,kHAA+H,aAAd6R,EAAKxL,MAAuBwL,EAAKjB,MAAQ,oDAAuDnR,EAAS,kGAAoG,mGAExUQ,SAAc,aAAd4R,EAAKxL,MAAuBwL,EAAKjB,MAAQ,MAAQ,YAtGjDsC,YAkHrBxE,GAAY/I,YAAc,cAI1B+I,GAAY/I,YAAc,cChd1B,MAAMwO,GAAsC,EAC1CC,OACAC,UACAC,cACAC,gBACA9U,SACAF,eACAJ,QACAU,WACAC,aAEKsU,QAGF,OAAIpU,UAAU,6HACbC,SAAAC,OAAC,OAAIF,UAAW,6GACdC,SAAA,GAAAF,IAAC,OAAIC,UAAU,qFACfE,KAAC,OAAIF,UAAU,yCACbC,SAAA,GAAAC,KAAC,MAAGF,UAAU,yDACZC,SAAA,CAAAF,MAAC0S,EAAA,CAAOzS,UAAU,iBAAiBM,KAAM,KAAM,cAGjDP,IAAC,UAAOuB,QAAS+S,EAASrU,UAAU,mDAClCC,SAAAF,MAACyU,EAAA,CAAQlU,KAAM,YAInBJ,KAAC,OAAIF,UAAU,YACbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,wCACbC,SAAA,CAAAC,OAAC,OAAIF,UAAW,0BAAyBT,EAA0B,oBAAVJ,EAA8B,wGAA0G,+GAAmHM,EAAS,8BAAgC,6BAC3VQ,SAAA,CAAAF,MAAC,OAAIC,UAAW,oCAAoCF,IAAWG,SAAA,WAC/DC,KAAC,OAAIF,UAAU,sCAAuCC,SAAA,CAAAqU,EAAYrF,QAAQ,cACzE,OAAIjP,UAAW,gBAAgBF,IAAWG,SAAA,kBAE7CC,OAAC,OAAIF,UAAW,0BAAyBT,EAA0B,oBAAVJ,EAA8B,wGAA0G,+GAAmHM,EAAS,8BAAgC,6BAC3VQ,SAAA,CAAAF,MAAC,OAAIC,UAAW,oCAAoCF,IAAWG,SAAA,WAC/DC,KAAC,OAAIF,UAAU,qCAAsCC,SAAA,CAAAqU,EAAYG,oBAAoB,cACpF,OAAIzU,UAAW,gBAAgBF,IAAWG,SAAA,oBAI/CC,KAAC,OAAIF,UAAU,YACbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,oCACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,wBAAwBC,SAAA,aACvCF,MAAC,OAAIC,UAAU,kCAAmCC,WAAYyU,wBAEhExU,KAAC,OAAIF,UAAU,oCACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,wBAAwBC,SAAA,aACvCC,KAAC,OAAIF,UAAU,mCAAoCC,SAAA,CAAAqF,KAAKoN,MAA4B,IAAtB4B,EAAYrF,SAAgB,gBAI9F/O,KAAC,OAAIF,UAAU,sBACbC,SAAA,CAAAF,MAAC,UACCuB,QAASiT,EACTvU,UAAW,6CAA4CT,EACpD+U,EAAYrF,QAAU,EACX,oBAAV9P,EAA8B,kHAAoH,yHAElJM,EAAS,4BAA8B,8BAExC6U,EAAYrF,SAAW,EACtBxP,EAAS,4BAA8B,8BAEvCA,EAAS,uDAAyD,kDAGtE2D,SAAUkR,EAAYrF,SAAW,EAClChP,SAAA,WAGDF,MAAC,UACCuB,QAAS+S,EACTrU,UAAW,6CAA4CT,EAC3C,oBAAVJ,EAA8B,qGAAuG,4GAErIM,EAAS,8CAAgD,qEAE5DQ,SAAA,kBAnEO,KChBd0U,GAA4D,EAChEP,OACAQ,OACAC,UACAC,YACAC,eACAC,gBACAC,mBACAlW,gBAEKqV,QAGF,OAAIpU,UAAU,6HACbC,SAAAC,OAAC,OAAIF,UAAU,+GACbC,SAAA,GAAAF,IAAC,OAAIC,UAAU,mFACL,IAAT4U,GACC1U,OAAC,OAAIF,UAAU,6CACbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,+BAA+BC,SAAA,CAAAF,MAACmV,EAAA,CAAI5U,KAAM,GAAIN,UAAU,qBAAoBD,MAAC,MAAGC,UAAU,iCAAiCC,SAAA,uBAC1IF,MAAC,KAAEC,UAAU,wBAAwBC,SAAA,mCACrCC,KAAC,OAAIF,UAAU,iBACbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,oEACbC,SAAA,GAAAF,IAAC,QAAKE,SAAA,qBACL,QAAMA,SAAA,CAAA6U,EAAU,SACjB/U,IAAC,QAAKE,SAAA,iBAERF,MAAC,SACCsG,KAAK,QACL8O,IAAI,IACJxH,IAAI,MACJvG,MAAO0N,EACPzN,SAAWtE,GAAMgS,EAAaK,SAASrS,EAAEuE,OAAOF,QAChDpH,UAAU,2FAGdE,OAAC,UACCoB,QAAS,IAAMuT,EAAQ,GACvB7U,UAAU,uIACXC,SAAA,aACQF,IAACsV,EAAA,CAAa/U,KAAM,WAIvB,IAATsU,GACC1U,OAAC,OAAIF,UAAU,6CACbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,+BAA+BC,SAAA,CAAAF,MAACuV,EAAA,CAAUhV,KAAM,GAAIN,UAAU,iBAAgBD,MAAC,MAAGC,UAAU,iCAAiCC,SAAA,0BAC5IF,MAAC,KAAEC,UAAU,wBAAwBC,SAAA,kCACrCF,MAAC,SACC0O,WAAS,EACTrH,MAAO4N,EACP3N,SAAUtE,GAAKkS,EAAiBlS,EAAEuE,OAAOF,OACzCG,YAAY,gBACZvH,UAAU,4IACVkS,UAAWnP,GAAe,UAAVA,EAAEoP,KAAmB0C,EAAQ,KAE/C3U,OAAC,UACCoB,QAAS,IAAMuT,EAAQ,GACvBzR,UAAW4R,EAActK,OACzB1K,UAAU,2JACXC,SAAA,WACMF,IAACsV,EAAA,CAAa/U,KAAM,WAIrB,IAATsU,GACC1U,OAAC,OAAIF,UAAU,yDACbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,wCACbC,SAAA,CAAAF,MAACwV,EAAA,CAASjV,KAAM,GAAIN,UAAU,gCAC9BD,MAAC,MAAGC,UAAU,2DAA2DC,SAAA,YAE3EF,MAAC,OAAIC,UAAU,4EAA4EC,SAAA,gDAG3FF,MAAC,UACCuB,QAASvC,EACTiB,UAAU,oNACXC,SAAA,4BAlEO,KCVduV,GAA8C,EAClDC,iBACApB,UACAqB,UACAnW,eACAJ,QACAM,SACAI,WACAC,aAEK2V,QAGF,OAAIzV,UAAU,oIACbC,SAAAC,OAAC,OAAIF,UAAW,qFAAoFT,EAA0B,oBAAVJ,EAA8B,2FAA6F,kGAAsGM,EAAS,yBAA2B,uBACvXQ,SAAA,GAAAF,IAAC,OAAIC,UAAU,wFACbC,SAAAF,MAAC4V,GAAKrV,KAAM,GAAIN,UAAU,2BAE3B,OACCC,SAAA,CAAAF,MAAC,MAAGC,UAAW,4BAA4BH,IAAYI,SAAA,UACvDF,MAAC,KAAEC,UAAW,sBAAqBP,EAAS,gBAAkB,iBAAoBQ,SAAAwV,EAAe3R,cAChG,KAAE9D,UAAW,gBAAgBF,IAAWG,SAAA,6BAE3CC,KAAC,OAAIF,UAAU,oBACbC,SAAA,CAAAF,MAAC,UACCuB,QAAS+S,EACTrU,UAAW,sDAAqDT,EAA0B,oBAAVJ,EAA8B,qGAAuG,4GAA+G,6BACrUc,SAAA,QAGDF,MAAC,UACCuB,QAAS,IAAMoU,EAAQ,MAAAD,OAAA,EAAAA,EAAgBrU,UACvCpB,UAAW,4HACZC,SAAA,iBAvBmB,KCqBxB2V,GAAkD,EACtD5H,SACAqG,UACAwB,SACAC,gBACAC,eACAC,kBACAC,cACAC,YACAC,eACAC,gBACAC,mBACAC,kBACAC,qBACAC,kBACAC,qBACAC,cACAC,iBACAC,kBACAC,qBACArL,eACAsL,kBACArL,eACAsL,kBACAC,iBACAC,oBACAC,mBACAC,sBACAC,sBACAC,yBACAC,yBACAC,4BACAC,qBACAC,mBACAlY,eACAmY,mBACAvY,QACAM,SACAI,cAEKmO,GAELtO,EAAMC,UAAU,KACVkW,GACFA,KAED,CAACA,UAGD,OAAI7V,UAAU,6GACbC,SAAAC,OAAC,OAAIF,UAAW,2CAA0CT,EAA0B,oBAAVJ,EAA8B,uGAAyG,8GAAkHM,EAAS,wBAA0B,sBACpWQ,SAAA,GAAAC,KAAC,OAAIF,UAAU,yCACbC,SAAA,CAAAF,MAAC,MAAGC,UAAW,aAAaH,IAAaI,SAAA6V,EAAgB,OAAS,UAClE/V,MAAC,UACCuB,QAAS+S,EACTrU,UAAW,oCAAmCT,EAAgBmY,EAAmB,uFAAyF,8FAAiG,sBAE3QzX,WAAAF,IAACwD,EAAA,CAAEjD,KAAM,GAAIN,UAAWH,WAI5BK,KAAC,OAAIF,UAAU,YACbC,SAAA,CAAAC,OAAC,OACCD,SAAA,CAAAF,MAAC,SAAMC,UAAW,oCAAmCP,EAAS,gBAAkB,kBAAoBQ,SAAA,SACpGF,MAAC,SAAM0O,WAAS,EAACrH,MAAO2O,EAAc1O,SAAUtE,GAAKiT,EAAgBjT,EAAEuE,OAAOF,OAAQpH,UAAW,qCAAqCH,KAAYN,EAA0B,oBAAVJ,EAA8B,4HAA8H,mIAAuIM,EAAS,iCAAmC,oCAAsC8H,YAAY,iBAGphB,WAAhB0O,GAA4BoB,KAC3BnX,KAAC,OACCD,SAAA,CAAAF,MAAC,SAAMC,UAAW,oCAAmCP,EAAS,gBAAkB,kBAAoBQ,SAAA,SACpGC,OAAC,UACCkH,MAAOgQ,EACP/P,SAAUtE,GAAKsU,EAAuBtU,EAAEuE,OAAOF,OAC/CpH,UAAW,4BAA4BH,KAAYN,EAA0B,oBAAVJ,EAA8B,6HAA+H,oIAAwIM,EAAS,0CAA4C,6CAE7ZQ,SAAA,CAAAF,MAAC,UAAOqH,MAAM,SAASnH,SAAA,UACvBF,MAAC,UAAOqH,MAAM,aAAanH,SAAA,SAC3BF,MAAC,UAAOqH,MAAM,UAAUnH,SAAA,iBAKZ,UAAhBgW,GAA2C,SAAhBA,GAA0C,YAAhBA,GAA6C,WAAhBA,IAClF/V,OAAAyS,WAAA,CACE1S,SAAA,GAAAC,KAAC,OAAIF,UAAU,yBACbC,SAAA,CAAAC,OAAC,OAAID,SAAA,CAAAF,MAAC,SAAMC,UAAW,gBAAeP,EAAS,gBAAkB,kBAAoBQ,SAAA,SAAYF,MAAC,SAAMsG,KAAK,SAASe,MAAO8O,EAAW7O,SAAUtE,GAAKoT,EAAapT,EAAEuE,OAAOF,OAAQpH,UAAW,qCAAqCH,KAAYN,EAA0B,oBAAVJ,EAA8B,4HAA8H,mIAAuIM,EAAS,iCAAmC,gDAC/kB,OAAIQ,SAAA,CAAAF,MAAC,SAAMC,UAAW,gBAAeP,EAAS,gBAAkB,kBAAoBQ,SAAA,SAAYF,MAAC,SAAMsG,KAAK,SAASe,MAAOgP,EAAe/O,SAAUtE,GAAKsT,EAAiBtT,EAAEuE,OAAOF,OAAQpH,UAAW,qCAAqCH,KAAYN,EAA0B,oBAAVJ,EAA8B,4HAA8H,mIAAuIM,EAAS,iCAAmC,gDACvlB,OAAIQ,SAAA,CAAAF,MAAC,SAAMC,UAAW,gBAAeP,EAAS,gBAAkB,kBAAoBQ,SAAA,YAAeF,MAAC,SAAMsG,KAAK,SAASe,MAAOkP,EAAiBjP,SAAUtE,GAAKwT,EAAmBxT,EAAEuE,OAAOF,OAAQpH,UAAW,qCAAqCH,KAAYN,EAA0B,oBAAVJ,EAA8B,4HAA8H,mIAAuIM,EAAS,iCAAmC,gDAC9lB,OAAIQ,SAAA,CAAAF,MAAC,SAAMC,UAAW,gBAAeP,EAAS,gBAAkB,kBAAoBQ,SAAA,QAAWC,OAAC,UAAOkH,MAAOoP,EAAiBnP,SAAUtE,GAAK0T,EAAmB1T,EAAEuE,OAAOF,OAAqCpH,UAAW,qCAAqCH,KAAYN,EAA0B,oBAAVJ,EAA8B,4HAA8H,mIAAuIM,EAAS,iCAAmC,oCAAsCQ,SAAA,CAAAF,MAAC,UAAOqH,MAAM,OAAOnH,SAAA,MAAUF,MAAC,UAAOqH,MAAM,SAASnH,SAAA,MAAUF,MAAC,UAAOqH,MAAM,MAAMnH,SAAA,eAIvuBC,OAAC,OAAIF,UAAW,wCAAuCT,EAA0B,oBAAVJ,EAA8B,0EAA4E,gFAAoFM,EAAS,iCAAmC,gCAC/SQ,SAAA,GAAAC,KAAC,OAAIF,UAAU,yCACbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,0BACbC,SAAA,CAAAF,MAAC4V,EAAA,CAAKrV,KAAM,GAAIN,UAAU,kBAC1BD,MAAC,SAAMC,UAAW,oCAAmCP,EAAS,gBAAkB,kBAAoBQ,SAAA,YAEtGF,MAAC,UACCuB,QAAS,IAAMuV,GAAoBD,GACnC5W,UAAW,iCAAiCT,GAA0B,oBAAVJ,EAA8ByX,EAAkB,cAAgB,cAAoEA,EAAkB,cAAgB,gDAElO3W,SAAAF,MAAC,OAAIC,UAAW,oEAAoET,EAA0B,oBAAVJ,EAA8B,qFAAuF,wFAA2F,0DAA0DyX,EAAkB,cAAgB,wBAIpZ1W,KAAC,OAAIF,UAAU,qEACbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,yBACbC,SAAA,CAAAC,OAAC,OACCD,SAAA,CAAAF,MAAC,SAAMC,UAAW,0BAAyBP,EAAS,gBAAkB,kBAAoBQ,SAAA,SAC1FF,MAAC,SACCsG,KAAK,OACLe,MAAOoE,EACPnE,SAAUtE,GAAK+T,EAAgB/T,EAAEuE,OAAOF,OACxCpH,UAAW,sCAAsCH,KAAYN,EAA0B,oBAAVJ,EAA8B,6HAA+H,oIAAuI,wDAGpX,OACCc,SAAA,CAAAF,MAAC,SAAMC,UAAW,0BAAyBP,EAAS,gBAAkB,kBAAoBQ,SAAA,SAC1FF,MAAC,SACCsG,KAAK,OACLe,MAAOqE,EACPpE,SAAUtE,GAAKgU,EAAgBhU,EAAEuE,OAAOF,OACxCpH,UAAW,sCAAsCH,KAAYN,EAA0B,oBAAVJ,EAA8B,6HAA+H,oIAAuI,2DAKtX,OACCc,SAAA,CAAAF,MAAC,SAAMC,UAAW,0BAAyBP,EAAS,gBAAkB,kBAAoBQ,SAAA,WAC1FC,KAAC,OAAIF,UAAU,aACbC,SAAA,CAAAC,OAAC,UACCkH,MAAO4P,EACP3P,SAAUtE,GAAKkU,EAAkBlU,EAAEuE,OAAOF,OAC1CpH,UAAW,sCAAsCH,KAAYN,EAA0B,oBAAVJ,EAA8B,6HAA+H,oIAAuI,4CAEjXc,SAAA,CAAAF,MAAC,UAAOqH,MAAM,OAAOnH,SAAA,QACrBF,MAAC,UAAOqH,MAAM,QAAQnH,SAAA,SACtBF,MAAC,UAAOqH,MAAM,SAASnH,SAAA,SACvBF,MAAC,UAAOqH,MAAM,UAAUnH,SAAA,SACxBF,MAAC,UAAOqH,MAAM,SAASnH,SAAA,YAEL,WAAnB+W,GACC9W,OAAC,OAAIF,UAAU,0DACbC,SAAA,CAAAF,MAAC,SACCsG,KAAK,SACL8O,IAAI,IACJ/N,MAAO8P,EACP7P,SAAUtE,GAAKoU,EAAoBpU,EAAEuE,OAAOF,OAC5CpH,UAAW,gDAAgDH,KAAYN,EAA0B,oBAAVJ,EAA8B,wHAA0H,+HAAkI,8CAEnXY,MAAC,QAAKC,UAAU,4BAA4BC,SAAA,wBAStC,SAAhBgW,GAA0C,YAAhBA,IAC1B/V,OAAC,OAAIF,UAAU,YACbC,SAAA,GAAAC,KAAC,OAAIF,UAAU,oCACbC,SAAA,CAAAF,MAAC,SAAMC,UAAW,oCAAmCP,EAAS,gBAAkB,kBAAoBQ,SAAA,QACpGC,OAAC,UACCoB,QAAS,KACPiW,EAA0B,IAAID,EAAwB,CACpD3U,GAAI,OAAOoH,KAAK4N,QAChB7T,MAAO,GACPb,WAAW,EACX7B,SAAU,OAGdpB,UAAW,sDAAqDT,EAA0B,oBAAVJ,EAA8B,sRAAwR,2SAA8S,4CAEprBc,SAAA,GAAAF,IAACyH,EAAA,CAAKlH,KAAM,KAAK,eAIpBgX,EAAuB1U,IAAI,CAACgV,EAAS/U,IACpC3C,OAAC,OAAqBF,UAAU,yBAC9BC,SAAA,CAAAF,MAAC,SACCsG,KAAK,OACLe,MAAOwQ,EAAQ9T,MACfuD,SAAWtE,IACT,MAAM8U,EAAc,IAAIP,GACxBO,EAAYhV,GAAS,IAAKgV,EAAYhV,GAAQiB,MAAOf,EAAEuE,OAAOF,OAC9DmQ,EAA0BM,IAE5BtQ,YAAa,OAAO1E,EAAQ,UAC5B7C,UAAW,qCAAqCH,KAAYN,EAA0B,oBAAVJ,EAA8B,4HAA8H,mIAAuIM,EAAS,iCAAmC,sCAE7ZM,MAAC,SACCsG,KAAK,SACLe,MAAOwQ,EAAQxW,SACfiG,SAAWtE,IACT,MAAM8U,EAAc,IAAIP,GACxBO,EAAYhV,GAAS,IAAKgV,EAAYhV,GAAQzB,SAAUgU,SAASrS,EAAEuE,OAAOF,QAAU,IACpFmQ,EAA0BM,IAE5BtQ,YAAY,QACZvH,UAAW,mCAAmCH,KAAYN,EAA0B,oBAAVJ,EAA8B,4HAA8H,mIAAuIM,EAAS,iCAAmC,sCAE3ZM,MAAC,UACCuB,QAAS,KACPiW,EAA0BD,EAAuB9R,OAAO,CAACsS,EAAGnH,IAAMA,IAAM9N,KAE1E7C,UAAW,QAAOT,EAA0B,oBAAVJ,EAA8B,6RAA+R,kTAAqT,mCAEppBc,SAAAF,MAACyS,EAAA,CAAOlS,KAAM,SA7BRsX,EAAQjV,UAqCxBzC,KAAC,OAAIF,UAAU,YACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,0BACbC,WAAAF,IAAC,SAAMC,UAAW,oCAAmCP,EAAS,gBAAkB,kBAAoBQ,SAAA,WAEtGF,MAAC,YACCqH,MAAOsP,EACPrP,SAAUtE,GAAK4T,EAAe5T,EAAEuE,OAAOF,OACvCG,YAAY,YACZvH,UAAW,yCAAyCH,KAAYN,EAA0B,oBAAVJ,EAA8B,oIAAsI,2IAA+IM,EAAS,qDAAuD,+DAM3cS,KAAC,OAAIF,UAAU,8BACbC,SAAA,GAAAF,IAAC,UAAOuB,QAAS+S,EAASrU,UAAW,gCAA+BT,EAA0B,oBAAVJ,EAA8B,8RAAgS,mTAAsT,kCAAoCc,SAAA,SAC5uBF,IAAC,UAAOuB,QAASwU,EAAgB0B,EAAqBC,EAAkBzX,UAAW,wCAAuCT,EAA0B,oBAAVJ,EAA8B,mRAAqR,2SAA8S,4CAA8Cc,SAAA,mBAjM/wB,KC3DT8X,GAA2B,CAEtC,CAAEpV,GAAI,UAAWkI,KAAM,gBAAiBiG,YAAa,SAAUK,KAAM,KAAM9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACiY,EAAA,CAAW1X,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,KAAM6S,MAAO,qFAC3L,CAAE1Q,GAAI,UAAWkI,KAAM,iBAAkBiG,YAAa,UAAWK,KAAM,KAAO9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACkY,EAAA,CAAO3X,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,KAAM6S,MAAO,qFAC1L,CAAE1Q,GAAI,UAAWkI,KAAM,OAAQiG,YAAa,YAAaK,KAAM,IAAM9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACmY,EAAA,CAAW5X,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,KAAM6S,MAAO,qFACrL,CAAE1Q,GAAI,UAAWkI,KAAM,OAAQiG,YAAa,SAAUK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACoY,EAAA,CAAO7X,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,qFAC/K,CAAE1Q,GAAI,UAAWkI,KAAM,aAAciG,YAAa,QAASK,KAAM,KAAM9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACqY,EAAA,CAAO9X,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,qFACrL,CAAE1Q,GAAI,UAAWkI,KAAM,UAAWiG,YAAa,OAAQK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACmY,EAAA,CAAW5X,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,KAAM6S,MAAO,kFAClL,CAAE1Q,GAAI,UAAWkI,KAAM,cAAeiG,YAAa,UAAWK,KAAM,KAAM9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACkY,EAAA,CAAO3X,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,KAAM6S,MAAO,qFACtL,CAAE1Q,GAAI,WAAYkI,KAAM,OAAQiG,YAAa,OAAQK,KAAM,KAAM9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACsY,EAAA,CAAO/X,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,kFAC/K,CAAE1Q,GAAI,WAAYkI,KAAM,QAASiG,YAAa,YAAaK,KAAM,KAAM9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACoY,EAAA,CAAO7X,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,KAAM6S,MAAO,qFACnL,CAAE1Q,GAAI,WAAYkI,KAAM,QAASiG,YAAa,QAASK,KAAM,KAAM9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACuY,GAAA,CAAKhY,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,KAAM6S,MAAO,qFAG7K,CAAE1Q,GAAI,WAAYkI,KAAM,QAASiG,YAAa,SAAUK,KAAM,KAAM9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACwY,GAAA,CAASjY,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,qFACpL,CAAE1Q,GAAI,WAAYkI,KAAM,OAAQiG,YAAa,UAAWK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACyY,GAAA,CAAKlY,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,qFAC/K,CAAE1Q,GAAI,WAAYkI,KAAM,WAAYiG,YAAa,WAAYK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAAC0Y,GAAA,CAAWnY,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,UAAW6S,MAAO,kFAC/L,CAAE1Q,GAAI,WAAYkI,KAAM,QAASiG,YAAa,UAAWK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAAC2Y,GAAA,CAAQpY,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,UAAW6S,MAAO,qFACtL,CAAE1Q,GAAI,WAAYkI,KAAM,OAAQiG,YAAa,YAAaK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAAC4Y,GAAA,CAAIrY,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,qFAGhL,CAAE1Q,GAAI,WAAYkI,KAAM,OAAQiG,YAAa,aAAcK,KAAM,EAAG9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC6Y,GAAA,CAAStY,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,KAAM6S,MAAO,qFAChL,CAAE1Q,GAAI,WAAYkI,KAAM,MAAOiG,YAAa,SAAUK,KAAM,EAAG9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC8Y,GAAA,CAAOvY,KAAM,GAAIN,UAAU,mBAAoBQ,SAAU,KAAM6S,MAAO,qFAC3K,CAAE1Q,GAAI,WAAYkI,KAAM,QAASiG,YAAa,QAASK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC+Y,GAAA,CAAKxY,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,qFAC5K,CAAE1Q,GAAI,WAAYkI,KAAM,QAASiG,YAAa,QAASK,KAAM,EAAG9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC8Y,GAAA,CAAOvY,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,KAAM6S,MAAO,qFAC3K,CAAE1Q,GAAI,WAAYkI,KAAM,MAAOiG,YAAa,OAAQK,KAAM,IAAK9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC6Y,GAAA,CAAStY,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,KAAM6S,MAAO,kFAC3K,CAAE1Q,GAAI,WAAYkI,KAAM,KAAMiG,YAAa,OAAQK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC6Y,GAAA,CAAStY,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,kFAC5K,CAAE1Q,GAAI,WAAYkI,KAAM,KAAMiG,YAAa,OAAQK,KAAM,IAAK9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAACgZ,GAAA,CAAKzY,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,KAAM6S,MAAO,qFACvK,CAAE1Q,GAAI,YAAakI,KAAM,KAAMiG,YAAa,OAAQK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC6Y,GAAA,CAAStY,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,qFAC7K,CAAE1Q,GAAI,YAAakI,KAAM,KAAMiG,YAAa,OAAQK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC8Y,GAAA,CAAOvY,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,KAAM6S,MAAO,qFACzK,CAAE1Q,GAAI,YAAakI,KAAM,OAAQiG,YAAa,OAAQK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC6Y,GAAA,CAAStY,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,KAAM6S,MAAO,kFAC5K,CAAE1Q,GAAI,YAAakI,KAAM,QAASiG,YAAa,OAAQK,KAAM,KAAM9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC6Y,GAAA,CAAStY,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,KAAM6S,MAAO,qFAG/K,CAAE1Q,GAAI,UAAWkI,KAAM,SAAUiG,YAAa,UAAWK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAACiZ,GAAA,CAAS1Y,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,OAAQ6S,MAAO,kFACpL,CAAE1Q,GAAI,UAAWkI,KAAM,UAAWiG,YAAa,WAAYK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAACkZ,GAAA,CAAM3Y,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,OAAQ6S,MAAO,qFAChL,CAAE1Q,GAAI,UAAWkI,KAAM,SAAUiG,YAAa,WAAYK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAACiZ,GAAA,CAAS1Y,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,OAAQ6S,MAAO,kFACrL,CAAE1Q,GAAI,UAAWkI,KAAM,UAAWiG,YAAa,UAAWK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAACkZ,GAAA,CAAM3Y,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,OAAQ6S,MAAO,qFAG/K,CAAE1Q,GAAI,WAAYkI,KAAM,KAAMiG,YAAa,QAASK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAACmZ,GAAA,CAAS5Y,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,OAAQ6S,MAAO,kFAC7K,CAAE1Q,GAAI,UAAWkI,KAAM,OAAQiG,YAAa,YAAaK,KAAM,IAAK9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAACwY,GAAA,CAASjY,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,OAAQ6S,MAAO,qFACnL,CAAE1Q,GAAI,YAAakI,KAAM,OAAQiG,YAAa,YAAaK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAACiZ,GAAA,CAAS1Y,KAAM,GAAIN,UAAU,mBAAoBQ,SAAU,OAAQ6S,MAAO,qFAGrL,CAAE1Q,GAAI,WAAYkI,KAAM,UAAWiG,YAAa,QAASK,KAAM,IAAK9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACoZ,GAAA,CAAO7Y,KAAM,GAAIN,UAAU,mBAAoBQ,SAAU,OAAQ6S,MAAO,kFACjL,CAAE1Q,GAAI,WAAYkI,KAAM,MAAOiG,YAAa,YAAaK,KAAM,GAAI9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACkZ,GAAA,CAAM3Y,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,OAAQ6S,MAAO,qFAC7K,CAAE1Q,GAAI,WAAYkI,KAAM,QAASiG,YAAa,YAAaK,KAAM,IAAK9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACqZ,GAAA,CAAM9Y,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,OAAQ6S,MAAO,qFAGnL,CAAE1Q,GAAI,UAAWkI,KAAM,cAAeiG,YAAa,OAAQK,KAAM,GAAI9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACqZ,GAAA,CAAM9Y,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,OAAQ6S,MAAO,qFAC/K,CAAE1Q,GAAI,UAAWkI,KAAM,WAAYiG,YAAa,YAAaK,KAAM,IAAK9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACsZ,GAAA,CAAS/Y,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,OAAQ6S,MAAO,qFACtL,CAAE1Q,GAAI,UAAWkI,KAAM,SAAUiG,YAAa,YAAaK,KAAM,GAAI9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACiZ,GAAA,CAAS1Y,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,OAAQ6S,MAAO,qFACrL,CAAE1Q,GAAI,UAAWkI,KAAM,OAAQiG,YAAa,YAAaK,KAAM,GAAI9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACuZ,GAAA,CAAMhZ,KAAM,GAAIN,UAAU,mBAAoBQ,SAAU,OAAQ6S,MAAO,qFAC/K,CAAE1Q,GAAI,UAAWkI,KAAM,SAAUiG,YAAa,WAAYK,KAAM,IAAK9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACiZ,GAAA,CAAS1Y,KAAM,GAAIN,UAAU,mBAAoBQ,SAAU,OAAQ6S,MAAO,qFACpL,CAAE1Q,GAAI,UAAWkI,KAAM,QAASiG,YAAa,WAAYK,KAAM,IAAK9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACuZ,GAAA,CAAMhZ,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,OAAQ6S,MAAO,qFAC/K,CAAE1Q,GAAI,UAAWkI,KAAM,SAAUiG,YAAa,YAAaK,KAAM,GAAI9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACuZ,GAAA,CAAMhZ,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,OAAQ6S,MAAO,qFAChL,CAAE1Q,GAAI,UAAWkI,KAAM,SAAUiG,YAAa,WAAYK,KAAM,IAAK9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACiZ,GAAA,CAAS1Y,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,OAAQ6S,MAAO,qFACnL,CAAE1Q,GAAI,WAAYkI,KAAM,SAAUiG,YAAa,WAAYK,KAAM,IAAK9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACuZ,GAAA,CAAMhZ,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,OAAQ6S,MAAO,qFAGnL,CAAE1Q,GAAI,WAAYkI,KAAM,QAASiG,YAAa,OAAQK,KAAM,GAAI9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACwZ,GAAA,CAAKjZ,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,OAAQ6S,MAAO,kFAC1K,CAAE1Q,GAAI,cAAekI,KAAM,WAAYiG,YAAa,OAAQK,KAAM,GAAI9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACwZ,GAAA,CAAKjZ,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,OAAQ6S,MAAO,kFAChL,CAAE1Q,GAAI,WAAYkI,KAAM,QAASiG,YAAa,YAAaK,KAAM,IAAK9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACyZ,GAAA,CAAIlZ,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,OAAQ6S,MAAO,kFAGjL,CAAE1Q,GAAI,WAAYkI,KAAM,SAAUiG,YAAa,YAAaK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAAC0Z,GAAA,CAASnZ,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,qFACvL,CAAE1Q,GAAI,WAAYkI,KAAM,OAAQiG,YAAa,YAAaK,KAAM,IAAK9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC2Z,GAAA,CAASpZ,KAAM,GAAIN,UAAU,mBAAoBQ,SAAU,OAAQ6S,MAAO,qFACrL,CAAE1Q,GAAI,WAAYkI,KAAM,OAAQiG,YAAa,UAAWK,KAAM,KAAM9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACiY,EAAA,CAAW1X,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,KAAM6S,MAAO,qFACpL,CAAE1Q,GAAI,WAAYkI,KAAM,MAAOiG,YAAa,SAAUK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAAC8Y,GAAA,CAAOvY,KAAM,GAAIN,UAAU,mBAAoBQ,SAAU,KAAM6S,MAAO,qFAC9K,CAAE1Q,GAAI,WAAYkI,KAAM,MAAOiG,YAAa,SAAUK,KAAM,GAAI9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACsZ,GAAA,CAAS/Y,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,qFAChL,CAAE1Q,GAAI,WAAYkI,KAAM,SAAUiG,YAAa,WAAYK,KAAM,IAAK9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACkZ,GAAA,CAAM3Y,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,OAAQ6S,MAAO,qFAChL,CAAE1Q,GAAI,WAAYkI,KAAM,OAAQiG,YAAa,SAAUK,KAAM,IAAK9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACiZ,GAAA,CAAS1Y,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,OAAQ6S,MAAO,qFAChL,CAAE1Q,GAAI,WAAYkI,KAAM,QAASiG,YAAa,YAAaK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACqZ,GAAA,CAAM9Y,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,OAAQ6S,MAAO,qFACrL,CAAE1Q,GAAI,WAAYkI,KAAM,OAAQiG,YAAa,UAAWK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAAC4Z,GAAA,CAAMrZ,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,UAAW6S,MAAO,qFACnL,CAAE1Q,GAAI,YAAakI,KAAM,OAAQiG,YAAa,QAASK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACgZ,GAAA,CAAKzY,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,kFAI9K,CAAE1Q,GAAI,WAAYkI,KAAM,SAAUiG,YAAa,SAAUK,KAAM,KAAM9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAAC6Y,GAAA,CAAStY,KAAM,GAAIN,UAAU,mBAAoBQ,SAAU,KAAM6S,MAAO,kFACpL,CAAE1Q,GAAI,WAAYkI,KAAM,OAAQiG,YAAa,SAAUK,KAAM,KAAM9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAAC6Y,GAAA,CAAStY,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,KAAM6S,MAAO,kFAGjL,CAAE1Q,GAAI,eAAgBkI,KAAM,OAAQiG,YAAa,OAAQK,KAAM,IAAQ9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAAC6Z,GAAA,CAAKtZ,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,KAAM6S,MAAO,qFAGhL,CAAE1Q,GAAI,UAAWkI,KAAM,OAAQiG,YAAa,QAASK,KAAM,KAAQ9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAAC8Z,GAAA,CAAIvZ,KAAM,GAAIN,UAAU,mBAAoBQ,SAAU,KAAM6S,MAAO,qFAG7K,CAAE1Q,GAAI,YAAakI,KAAM,QAASiG,YAAa,gBAAiBK,KAAM,IAAK9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC6Y,GAAA,CAAStY,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,KAAM6S,MAAO,kFACvL,CAAE1Q,GAAI,YAAakI,KAAM,WAAYiG,YAAa,UAAWK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC6Y,GAAA,CAAStY,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,kFACtL,CAAE1Q,GAAI,YAAakI,KAAM,WAAYiG,YAAa,SAAUK,KAAM,IAAK9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC6Y,GAAA,CAAStY,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,kFACtL,CAAE1Q,GAAI,YAAakI,KAAM,SAAUiG,YAAa,WAAYK,KAAM,IAAK9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAACgZ,GAAA,CAAKzY,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,KAAM6S,MAAO,qFAChL,CAAE1Q,GAAI,YAAakI,KAAM,SAAUiG,YAAa,WAAYK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAACgZ,GAAA,CAAKzY,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,KAAM6S,MAAO,qFAC/K,CAAE1Q,GAAI,YAAakI,KAAM,OAAQiG,YAAa,SAAUK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC6Y,GAAA,CAAStY,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,KAAM6S,MAAO,kFAGjL,CAAE1Q,GAAI,WAAYkI,KAAM,OAAQiG,YAAa,UAAWK,KAAM,KAAO9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAAC2Z,GAAA,CAASpZ,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,OAAQ6S,MAAO,qFACnL,CAAE1Q,GAAI,WAAYkI,KAAM,OAAQiG,YAAa,UAAWK,KAAM,IAAM9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACuZ,GAAA,CAAMhZ,KAAM,GAAIN,UAAU,mBAAoBQ,SAAU,OAAQ6S,MAAO,qFAGhL,CAAE1Q,GAAI,cAAekI,KAAM,OAAQiG,YAAa,WAAYK,KAAM,KAAM9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAAC+Z,GAAA,CAAMxZ,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,OAAQ6S,MAAO,qFAGlL,CAAE1Q,GAAI,YAAakI,KAAM,KAAMiG,YAAa,UAAWK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC2Z,GAAA,CAASpZ,KAAM,GAAIN,UAAU,mBAAoBQ,SAAU,OAAQ6S,MAAO,qFACjL,CAAE1Q,GAAI,YAAakI,KAAM,KAAMiG,YAAa,UAAWK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC0Y,GAAA,CAAWnY,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,OAAQ6S,MAAO,qFAClL,CAAE1Q,GAAI,YAAakI,KAAM,KAAMiG,YAAa,WAAYK,KAAM,GAAI9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAACsZ,GAAA,CAAS/Y,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,OAAQ6S,MAAO,qFAGhL,CAAE1Q,GAAI,YAAakI,KAAM,OAAQiG,YAAa,OAAQK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAAC4Z,GAAA,CAAMrZ,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,UAAW6S,MAAO,qFACnL,CAAE1Q,GAAI,YAAakI,KAAM,OAAQiG,YAAa,OAAQK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAAC4Z,GAAA,CAAMrZ,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,UAAW6S,MAAO,kFACjL,CAAE1Q,GAAI,YAAakI,KAAM,OAAQiG,YAAa,SAAUK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACuZ,GAAA,CAAMhZ,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,UAAW6S,MAAO,kFACnL,CAAE1Q,GAAI,YAAakI,KAAM,OAAQiG,YAAa,SAAUK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACuZ,GAAA,CAAMhZ,KAAM,GAAIN,UAAU,mBAAoBQ,SAAU,UAAW6S,MAAO,kFAGpL,CAAE1Q,GAAI,WAAYkI,KAAM,OAAQiG,YAAa,WAAYK,KAAM,IAAM9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAAC+Y,GAAA,CAAKxY,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,OAAQ6S,MAAO,kFAGnL,CAAE1Q,GAAI,YAAakI,KAAM,OAAQiG,YAAa,UAAWK,KAAM,EAAG9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAAC6Y,GAAA,CAAStY,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,KAAM6S,MAAO,qFAC9K,CAAE1Q,GAAI,WAAYkI,KAAM,YAAaiG,YAAa,YAAaK,KAAM,KAAM9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAAC2Z,GAAA,CAASpZ,KAAM,GAAIN,UAAU,mBAAoBQ,SAAU,OAAQ6S,MAAO,qFAC1L,CAAE1Q,GAAI,WAAYkI,KAAM,YAAaiG,YAAa,YAAaK,KAAM,IAAM9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAAC2Z,GAAA,CAASpZ,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,OAAQ6S,MAAO,qFACzL,CAAE1Q,GAAI,WAAYkI,KAAM,YAAaiG,YAAa,YAAaK,KAAM,IAAO9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACga,GAAA,CAAMzZ,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,OAAQ6S,MAAO,qFAGzL,CAAE1Q,GAAI,UAAWkI,KAAM,KAAMiG,YAAa,YAAaK,KAAM,IAAK9K,KAAM,UAAWuK,OAAO,EAAOkD,KAAM/T,MAACwY,GAAA,CAASjY,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,OAAQ6S,MAAO,qFACjL,CAAE1Q,GAAI,WAAYkI,KAAM,SAAUiG,YAAa,WAAYK,KAAM,GAAI9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACuZ,GAAA,CAAMhZ,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,OAAQ6S,MAAO,qFAClL,CAAE1Q,GAAI,YAAakI,KAAM,MAAOiG,YAAa,YAAaK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACia,GAAA,CAAQ1Z,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,UAAW6S,MAAO,kFACvL,CAAE1Q,GAAI,YAAakI,KAAM,KAAMiG,YAAa,SAAUK,KAAM,GAAI9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACmZ,GAAA,CAAS5Y,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,UAAW6S,MAAO,qFACrL,CAAE1Q,GAAI,YAAakI,KAAM,OAAQiG,YAAa,YAAaK,KAAM,IAAK9K,KAAM,WAAYuK,OAAO,EAAOkD,KAAM/T,MAACmZ,GAAA,CAAS5Y,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,UAAW6S,MAAO,kFACxL,CAAE1Q,GAAI,WAAYkI,KAAM,cAAeiG,YAAa,SAAUK,KAAM,IAAM9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACuZ,GAAA,CAAMhZ,KAAM,GAAIN,UAAU,mBAAoBQ,SAAU,OAAQ6S,MAAO,qFACtL,CAAE1Q,GAAI,WAAYkI,KAAM,cAAeiG,YAAa,SAAUK,KAAM,IAAM9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACuZ,GAAA,CAAMhZ,KAAM,GAAIN,UAAU,kBAAmBQ,SAAU,OAAQ6S,MAAO,qFACrL,CAAE1Q,GAAI,WAAYkI,KAAM,cAAeiG,YAAa,SAAUK,KAAM,IAAM9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACuZ,GAAA,CAAMhZ,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,OAAQ6S,MAAO,qFACvL,CAAE1Q,GAAI,WAAYkI,KAAM,eAAgBiG,YAAa,SAAUK,KAAM,IAAO9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACuZ,GAAA,CAAMhZ,KAAM,GAAIN,UAAU,oBAAqBQ,SAAU,OAAQ6S,MAAO,qFACzL,CAAE1Q,GAAI,WAAYkI,KAAM,eAAgBiG,YAAa,SAAUK,KAAM,IAAO9K,KAAM,SAAUuK,OAAO,EAAOkD,KAAM/T,MAACuZ,GAAA,CAAMhZ,KAAM,GAAIN,UAAU,iBAAkBQ,SAAU,OAAQ6S,MAAO,sFC1ClL4G,GAAoC,EACtChL,UAASiL,kBAAiBrS,SAAQC,WAAUqS,aAAYC,eAAcC,gBAAeC,gBAAeC,gBAAeC,kBAAiBC,kBAAiBC,aAAYC,eAAcC,aAAYC,kBAAiBvS,sBAAqBwS,sBAAqBC,aACtPC,gBAAeC,mBAAkBC,mBAAkBC,uBAAsBC,0BAAyBC,kBAAiBC,gBAAeC,qBAAoB/X,KAAIgY,cAAYC,iBAAeC,aAAWC,gBAChMC,gBAAe,GAAI/Z,gBAAcga,sBAAoBC,wBAAsBC,kBAAgBpT,qBAAmBqT,cAAYC,gBAE1HC,YAAU3L,YAAUnP,YAAUiH,iBAAe8T,gBAAc/T,oBAAkBgU,oBAAkBC,oBAE/FC,eAAa7T,kBAAgB8T,iCAE7BC,YAAW,GAEX5U,aACAK,cACAE,gBACAsU,iBACAC,oBACAC,oBACAC,sBACA1U,qBACA2U,iBAEAC,qBAEF,MAAM3d,MAAEA,IAAU4d,IACZtd,GAASN,GAAM2L,SAAS,QACxBvL,GAAeJ,GAAMK,WAAW,cAChCkY,GAA6B,oBAAVvY,GACnBqJ,IAAA,IAAeuB,MAAOiT,qBACtBnd,GAAWod,GAAaxd,GAAQF,GAAc,QAC9CO,GAAUmd,GAAaxd,GAAQF,GAAc,OAG7C4O,GAAmB+O,GAAoBxF,IAGvCyF,GAAsB,CAAC5M,EAAmBC,IACvCF,GAAeC,EAAUC,EAAWjR,GAAcJ,GAAOM,IAI5DG,GAASwd,GAAe7d,GAAcJ,GAAOM,KAE5C4d,GAAOC,IAAY9a,WAAS,IAC5B+a,GAASC,IAAchb,WAAS,GAEjCib,GAAsBC,SAA+B,OAEpDC,GAASC,IAAcpb,WAAuC,IAAMoY,GAAc,WAClF7S,GAAcC,IAAmBxF,WAAkDqY,GAAmB,YAGvGlM,UACJA,GAAAC,aACAA,GAAAG,iBACAA,GAAAC,oBACAA,GAAAH,WACAA,GAAAC,cACAA,GAAAS,kBACAA,GAAAsO,eACAA,GAAAC,kBACAA,GAAAC,YACAA,GAAAC,eACAA,GAAAC,eACAA,GAAAC,uBACAA,GAAAC,iBACAA,GAAAC,mBACAA,GAAAC,iBACAA,GAAAvO,kBACAA,GAAAC,qBACAA,GAAAuO,gBACAA,GAAAC,kBACAA,GAAA7O,cACAA,GAAAC,iBACAA,GAAAC,aACAA,GAAAC,gBACAA,GAAAL,OACAA,GAAAC,UACAA,GAAA+O,oBACAA,GAAAC,mBACAA,ICtLmB,GACnBxP,UACAiL,kBACA5R,sBACA+U,QACA7Z,KACA+Z,cAEA,MAAO5O,EAAWC,GAAgBpM,WAAgBuV,KAC3ChJ,EAAkBC,GAAuBxM,YAAS,IAClDqM,EAAYC,GAAiBtM,WAA2E,QACxG+M,EAAmBmP,GAAwBlc,WAAqB,OAChEqb,EAAgBC,GAAqBtb,YAAS,IAC9Cub,EAAaC,GAAkBxb,WAAc,OAC7Cmc,EAAkBC,GAAuBpc,WAAwB,OACjEgN,EAAQC,GAAajN,WAAmB,CAAC,KAAM,OAAQ,OAAQ,KAAM,OAAQ,OAAQ,aACrFkN,EAAeC,GAAoBnN,YAAS,IAC5CoN,EAAcC,GAAmBrN,WAAS,IAGjD7C,YAAU,KACsBkf,WACxB,MAAMC,EAAQC,aAAaC,QAAQ,sBACnC,IAAIC,EAAalH,GAEjB,GAAI+G,EACA,IACI,MACMI,EADOC,KAAKC,MAAMN,GACFnQ,WAAa,GAC7B0Q,EAAW,IAAIC,IAAiBJ,EAAStc,IAAK+N,GAAW,CAACA,EAAEhO,GAAIgO,KAEtEsO,EAAalH,GAAanV,IAAI2c,IAC1B,MAAMC,EAAYH,EAASI,IAAIF,EAAQ5c,IACvC,OAAI6c,EACO,IACAD,EACH3O,MAAO4O,EAAU5O,MACjBsD,cAAesL,EAAUtL,eAAiB,EAC1CjD,cAAeuO,EAAUvO,eAAiB,EAE1CoC,MAAOkM,EAAQlM,OAGhBkM,IAEX,MAAMG,EAAa,IAAI3W,IAAIgP,GAAanV,IAAI+N,GAAKA,EAAEhO,KAC7Cgd,EAAcT,EAAS1Z,OAAQmL,IAAY+O,EAAW9R,IAAI+C,EAAEhO,KAClEsc,EAAa,IAAIA,KAAeU,EACpC,OAAS5c,GAAgB,CAIrC,MAAM6c,EAAmBX,EAAWrc,IAAIiP,IAEpC,GAAIA,EAAKwB,QAAUxB,EAAKwB,MAAMvI,SAAS,wBAA0B+G,EAAKwB,MAAMvI,SAAS,kBAAmB,CAEpG,MAAM+U,EAAc9H,GAAa1L,QAAgBkT,EAAQ5c,KAAOkP,EAAKlP,IACrE,OAAIkd,GAAeA,EAAYxM,MACpB,IACAxB,EACHwB,MAAOwM,EAAYxM,OAIpB,IACAxB,EACHwB,MAAO,GAEf,CACA,OAAOxB,IAGXjD,EAAagR,EAAiBhd,IAAIiP,IAAA,IAC3BA,EACHxL,KAAMwL,EAAKxL,KACX7F,SAAUqR,EAAKrR,cAIfsf,IACD,IAGHngB,YAAU,KACNof,aAAagB,QAAQ,qBAAsBZ,KAAKa,UAAU,CAAE3C,QAAO7Z,KAAImL,YAAW4O,cACnF,CAACF,EAAO7Z,EAAImL,EAAW4O,IAE1B,MAAMW,EAAyBhX,cAAY,CAAC4L,EAAe/P,KAEvD,GADAA,EAAEG,kBACE6L,EAAkB,OAEtB,GAAIE,EAAU6D,EAEV,YADAxK,EAAoB,OAAQ,eAAgBvF,EAAEkd,QAASld,EAAEmd,SAK7D,MAAMC,EAAgB,IAAItT,MAAM,2BAChCsT,EAAcrT,OAAS,GACvBqT,EAAcpT,OAAOC,MAAM,QAG3BoT,EAAS,CACLC,cAAe,IACfC,OAAQ,GACRC,OAAQ,CAAEC,EAAGzd,EAAEkd,QAAU3N,OAAOmO,WAAYC,EAAG3d,EAAEmd,QAAU5N,OAAOqO,eAGtE,MAAMC,EAAmB,GAAR9N,EACX+N,EAAmB,IAAR/N,EACXgO,EAAsB,EAARhO,EACdiO,EAAWzb,KAAK0b,SAAW,IAE3BC,EAAgBtS,EAAUnJ,OAAOqM,GAC/BkP,EACOlP,EAAKV,OAAS2P,EAEdjP,EAAKV,MAAQyP,GAAY/O,EAAKV,MAAQ0P,GAIrD,GAA6B,IAAzBI,EAAc/c,OAEd,YADAoE,EAAoB,aAAc,eAAgBvF,EAAEkd,QAASld,EAAEmd,SAInE,MACMgB,EAAeD,EADD3b,KAAKoN,MAAMpN,KAAK0b,SAAWC,EAAc/c,SAG7DgW,GAAiBpH,EAAO,SAASA,OAEjClE,EAAa5J,GAAQA,EAAKpC,IAAI+N,GACtBA,EAAEhO,KAAOue,EAAave,GACf,IACAgO,EACHC,OAAO,EACPsD,eAAgBvD,EAAEuD,eAAiB,GAAK,EACxCjD,cAAelH,KAAK4N,MACpBtE,MAAO1C,EAAE0C,OAAS,IAGnB1C,IAGX+N,EAAqBwC,GACrBC,WAAW,IAAMzC,EAAqB,MAAO,KAE7CpW,EAAoB,KAAKyY,EAAW,MAAQ,OAAOG,EAAarW,OAAQ,kBAAmB9H,EAAEkd,QAASld,EAAEmd,UACzG,CAACjR,EAASF,EAAkBJ,EAAWrG,EAAqB4R,IAEzD+D,EAAiB/W,cAAY,CAAC2K,EAAW9O,KAE3C,GADAA,EAAEG,kBACE6L,EAAkB,OAEtB,GAAIE,EAAU4C,EAAKV,KAEf,YADA7I,EAAoB,OAAQ,eAAgBvF,EAAEkd,QAASld,EAAEmd,SAI7DhG,GAAiBrI,EAAKV,KAAM,OAAOU,EAAKhH,QAExC,MAAMsV,EAAgB,IAAItT,MAAM,2BAChCsT,EAAcrT,OAAS,GACvBqT,EAAcpT,OAAOC,MAAM,QAE3BoT,EAAS,CACLC,cAAe,IACfC,OAAQ,GACRC,OAAQ,CAAEC,EAAGzd,EAAEkd,QAAU3N,OAAOmO,WAAYC,EAAG3d,EAAEmd,QAAU5N,OAAOqO,eAGtE/R,EAAa5J,GAAQA,EAAKpC,IAAI+N,GACtBA,EAAEhO,KAAOkP,EAAKlP,GACP,IACAgO,EACHC,OAAO,EACPsD,eAAgBvD,EAAEuD,eAAiB,GAAK,EACxCjD,cAAelH,KAAK4N,MACpBtE,MAAO1C,EAAE0C,OAAS,IAGnB1C,IAGX+N,EAAqB7M,GACrBsP,WAAW,IAAMzC,EAAqB,MAAO,MAC9C,CAACzP,EAASF,EAAkBzG,EAAqB4R,IAE9CiE,EAAmBjX,cAAY,CAACnE,EAAqBJ,KACvDI,EAAEG,kBACEoP,OAAOC,QAAQ,eACf3D,KAAqB5J,EAAKQ,UAAYmL,EAAEhO,KAAOA,KAEpD,IAEGyb,EAAqBlX,cAAY,KACnC,GAAI6W,EAAa,CAEb,IAAIqD,EAAerD,EAAY1K,OAAS,IAEpC+N,EAAatW,SAAS,wBAA0BsW,EAAatW,SAAS,oBACtEsW,EAAe,IAGfA,EAAatW,SAAS,yBACtBsW,EAAe,IAGnB,MAAMC,EAAc,IAAKtD,EAAa1K,MAAO+N,GAEzCzS,EAAUtC,KAAKsE,GAAKA,EAAEhO,KAAOob,EAAYpb,IACzCiM,EAAa5J,GAAQA,EAAKpC,IAAI+N,GACtBA,EAAEhO,KAAOob,EAAYpb,GACd0e,EAEJ1Q,IAGX/B,EAAa5J,GAAQ,IAAIA,EAAMqc,GAEvC,CACAvD,GAAkB,GAClBE,EAAe,OAChB,CAACD,EAAapP,IAEX0P,EAAmBnX,cAAY,KACjC8W,EAAe,CACXrb,GAAIoH,KAAK4N,MAAM2J,WACfzW,KAAM,GACNiG,YAAa,GACbK,KAAM,GACN9K,KAAM,UACNyN,KAAM,KACNT,MAAO,GACPa,cAAe,EACfjD,cAAe,IAEnB6M,GAAkB,IACnB,IAEGhO,EAAoB5I,cAAY,KAC9B0I,EAAalF,SAAW8E,EAAO1E,SAAS8E,EAAalF,UACrD+E,KAAkB,IAAIzK,EAAM4K,EAAalF,SACzCmF,EAAgB,IAChBF,GAAiB,KAEtB,CAACC,EAAcJ,IAEZO,EAAuB7I,cAAY,KACrC2I,EAAgB,IAChBF,GAAiB,IAClB,IAGG2O,EAAkBpX,cAAakH,MAElC,IAGGmQ,EAAoBrX,cAAakH,MAEpC,IAEGoQ,EAAsBtX,cAAarE,IAChCkM,GACL6P,EAAoB/b,IACrB,CAACkM,IAEE0P,EAAqBvX,cAAY,CAACnE,EAAoBF,KACxDE,EAAEwL,iBACGQ,GAAyC,OAArB4P,GAA6BA,IAAqB9b,IAE3E+L,EAAa5J,IACT,MAAMuc,EAAe,IAAIvc,GACnBwc,EAAcD,EAAa5C,GAGjC,OAFA4C,EAAaE,OAAO9C,EAAkB,GACtC4C,EAAaE,OAAO5e,EAAO,EAAG2e,GACvBD,IAEX3C,EAAoB/b,KACrB,CAACkM,EAAkB4P,IAEtB,MAAO,CACHhQ,YACAC,eACAG,mBACAC,sBACAH,aACAC,gBACAS,oBACAmP,uBACAb,iBACAC,oBACAC,cACAC,iBACAC,iBACAC,yBACAC,mBACAC,qBACAC,mBACAvO,oBACAC,uBACAuO,kBACAC,oBACA7O,gBACAC,mBACAC,eACAC,kBACAL,SACAC,YACA+O,sBACAC,uBDhIFiD,CAAQ,CACVzS,UACAiL,kBACA5R,sBACA+U,SACA7Z,KACA+Z,aAG8C/a,YAAS,GAEzD,MAAOmf,GAAeC,IAAoBpf,YAAS,IAC5CuT,GAAcC,IAAmBxT,WAAS,KAC1C4T,GAAeC,IAAoB7T,WAAS,OAC5C0T,GAAWC,IAAgB3T,WAAS,OACpC8T,GAAiBC,IAAsB/T,WAAS,OAChDqf,GAAaC,IAAkBtf,WAA6Buf,EAAcC,SAC1E/L,GAAagM,IAAkBzf,WAAkD,UACjF4U,GAAqBC,IAA0B7U,WAAuB,WACtEkU,GAAaC,IAAkBnU,WAAS,KACxCsT,GAAeoM,IAAoB1f,WAAwB,OAC3D8U,GAAwBC,IAA6B/U,WAAoB,KAGzEoU,GAAiBC,IAAsBrU,YAAS,IAChDgJ,GAAcsL,IAAmBtU,WAAS,KAC1CiJ,GAAcsL,IAAmBvU,WAAS,KAC1CwU,GAAgBC,IAAqBzU,WAA6D,SAClG0U,GAAkBC,IAAuB3U,WAAS,MAGnDiT,eAAEA,qBAAgB0M,IE5ME,EAC1Bta,EACAC,EACAwS,EACAE,KAEA,MAAO/E,EAAgB0M,GAAqB3f,WAA8B,OACnE4f,EAAiBC,GAAsB7f,WAAyB,KAChE8f,EAAkBC,GAAuB/f,WAA2B,CACzEggB,4BAA4B,EAC5BC,0BAA0B,EAC1BC,0BAA0B,EAC1BC,kBAAmB,CACjBjZ,KAAM,gCACNC,OAAQ,2BACRC,IAAK,8BAKHgZ,EAA8B1b,cAAY,KAC1C,iBAAkBoL,QACY,YAA5BuQ,aAAaC,YACfD,aAAaE,qBAGhB,IAGGC,EAA0B9b,cAAY,CAACpD,EAAemf,KACtD,iBAAkB3Q,QAAsC,YAA5BuQ,aAAaC,YAC3C,IAAID,aAAa/e,EAAO,CACtBof,KAAMD,EACNnP,KAAM,eACNqP,MAAO,kBAGV,IAGGC,EAA0Blc,cAAY,CAACpD,EAAeD,EAAsC,WAC/Eye,EAAiBK,kBAAkB9e,GACpCwf,QAAQ,UAAWvf,GAClC,CAACwe,EAAiBK,oBAGfW,EAAkBpc,cAAY,CAACpD,EAAenB,EAAY0D,EAA2B3C,EAAeG,EAAsC,SAAUzC,KACxJ,MAAMuW,MAAU5N,KACVwZ,EAAoB7f,EAAS8f,cAAgB,IAAIzZ,KAAKrG,EAAS8f,eAAiB,KAGtF,IAFyBD,GAAqB5L,EAAIzN,UAAYqZ,EAAkBrZ,WAAA,IAA2B,MAEpF,EAAG,CAExB,MAAMuZ,EAAkBL,EAAwBtf,EAAOD,GAGnDye,EAAiBG,0BACnBiB,EAAarkB,gBAAgB,gBAI3BijB,EAAiBE,4BACnBQ,EAAwB,OAAQS,GAIlC,MAAME,EAA6B,CACjC7f,QACAnB,KACA0D,OACAxC,WACAzC,WACAwiB,iBAAkBH,GAGpBtB,EAAkBwB,GAGlBtB,EAAmBrd,GAAQ,CAAC2e,KAAiB3e,GAAM6e,MAAM,EAAG,KAE5D,MAAMC,EAAc,IACfpgB,EACH8f,cAAe7L,EAAIjL,eAGR,UAATrG,EACFiU,EAAc3X,EAAI,CAAEe,SAAUogB,IAE9BtJ,EAAgB7X,EAAI,CAAEe,SAAUogB,GAEpC,GACC,CAACxB,EAAkBc,EAAyBJ,EAAyB1I,EAAeE,IAGjFuJ,EAAiB7c,cAAY,KACjC,MAAMyQ,MAAU5N,KACM4N,EAAIqF,mBAAmB,SAC7C,MAAMgH,EAAiBrM,EAAIjL,cAAcuX,MAAM,KAAK,GAC9CC,EAAiBvM,EAAIwM,WAAW7C,WAAW8C,SAAS,EAAG,KAAO,IAAMzM,EAAI0M,aAAa/C,WAAW8C,SAAS,EAAG,KAGlHvc,EAAOyc,QAAQC,UACb,IAAI,OAAArf,IAAMxB,eAAN,EAAAwB,EAAgBvB,UAAW4gB,EAAM7gB,SAASE,OAASsgB,EAAgB,CACrE,MAAMpa,KAAEA,EAAA0a,OAAMA,GAAWD,EAAM7gB,SAE/B,GAAe,SAAX8gB,EACE1a,IAASka,GAAgBV,EAAgBiB,EAAM1Z,KAAM0Z,EAAM5hB,GAAI,QAAS4hB,EAAM7gB,SAAU6gB,EAAM1gB,eACpG,GAAsB,UAAX2gB,EACTlB,EAAgBiB,EAAM1Z,KAAM0Z,EAAM5hB,GAAI,QAAS4hB,EAAM7gB,SAAU6gB,EAAM1gB,eACvE,GAAsB,WAAX2gB,EAAqB,CAC9B,MAAMhZ,EAAe1B,EAAO,IAAIC,KAAKD,GAAQ,KACzC0B,GAAgBA,EAAaiZ,WAAa9M,EAAI8M,UAAUnB,EAAgBiB,EAAM1Z,KAAM0Z,EAAM5hB,GAAI,QAAS4hB,EAAM7gB,SAAU6gB,EAAM1gB,SACnI,SAAsB,YAAX2gB,EAAsB,CAC/B,MAAMhZ,EAAe1B,EAAO,IAAIC,KAAKD,GAAQ,KACzC0B,GAAgBA,EAAakZ,YAAc/M,EAAI+M,WAAWpB,EAAgBiB,EAAM1Z,KAAM0Z,EAAM5hB,GAAI,QAAS4hB,EAAM7gB,SAAU6gB,EAAM1gB,SACrI,CACF,IAIFiE,EAASwc,QAAQK,IACf,MAAMjhB,EAAYihB,EAAgBjhB,SAClC,IAAI,MAAAA,OAAA,EAAAA,EAAUC,UAAWD,EAASE,OAASsgB,EAAgB,CACzD,MAAMpa,KAAEA,EAAA0a,OAAMA,GAAW9gB,EAEzB,GAAe,SAAX8gB,EACE1a,IAASka,GAAgBV,EAAgBqB,EAAQ9Z,KAAM8Z,EAAQhiB,GAAI,UAAWe,EAAUihB,EAAQ9gB,SAAU8gB,EAAQvjB,eACxH,GAAsB,UAAXojB,EACTlB,EAAgBqB,EAAQ9Z,KAAM8Z,EAAQhiB,GAAI,UAAWe,EAAUihB,EAAQ9gB,SAAU8gB,EAAQvjB,eAC3F,GAAsB,WAAXojB,EAAqB,CAC9B,MAAMI,EAAQ9a,EAAO,IAAIC,KAAKD,GAAQ,KAClC8a,GAASA,EAAMH,WAAa9M,EAAI8M,UAAUnB,EAAgBqB,EAAQ9Z,KAAM8Z,EAAQhiB,GAAI,UAAWe,EAAUihB,EAAQ9gB,SAAU8gB,EAAQvjB,SACzI,SAAsB,YAAXojB,EAAsB,CAC/B,MAAMI,EAAQ9a,EAAO,IAAIC,KAAKD,GAAQ,KAClC8a,GAASA,EAAMF,YAAc/M,EAAI+M,WAAWpB,EAAgBqB,EAAQ9Z,KAAM8Z,EAAQhiB,GAAI,UAAWe,EAAUihB,EAAQ9gB,SAAU8gB,EAAQvjB,SAC3I,CACF,KAED,CAACyG,EAAQC,EAAUwb,IAGhBuB,EAAsB3d,cAAY,KACtC,MAAMyQ,MAAU5N,KACO4N,EAAIwM,WAAW7C,WAAW8C,SAAS,EAAG,KAAazM,EAAI0M,aAAa/C,WAAW8C,SAAS,EAAG,KAGlH,MAAMU,EAAqB,CAACnjB,EAAc0E,KACxC1E,EAAM2iB,QAAQzlB,UACZ,KAAK,OAAAqG,EAAArG,EAAK6E,eAAL,EAAAwB,EAAevB,UAAW9E,EAAKoE,UAAW,OAE/C,MAAM6G,KAAEA,EAAAlG,KAAMA,GAAS/E,EAAK6E,SAC5B,IAAKoG,IAASlG,EAAM,OAEpB,MAEMmhB,GAFmB,IAAIhb,KAAK,GAAGD,KAAQlG,KACFsG,UAAYyN,EAAIzN,WAChC,KAG3B,GAAsB,SAAlBrL,EAAKgF,UAAuBkhB,EAAqB,GAAKA,GAAsB,EAAG,CACjF,MAAMC,EAAkBnmB,EAAK6E,SAASshB,gBAAkB,IAAIjb,KAAKlL,EAAK6E,SAASshB,iBAAmB,KAGlG,IAFkCA,GAAmBrN,EAAIzN,UAAY8a,EAAgB9a,WAAA,KAAgC,MAErF,EAAG,CACjC,MAAMuZ,EAAkB,mBAAmB5kB,EAAKgM,MAAQhM,EAAKkC,wBAEzDuhB,EAAiBG,0BACnBiB,EAAarkB,gBAAgB,gBAG3BijB,EAAiBE,4BACnBQ,EAAwB,OAAQS,GAGlC,MAAMK,EAAc,IACfjlB,EAAK6E,SACRshB,gBAAiBrN,EAAIjL,eAGV,UAATrG,EACFiU,EAAczb,EAAK8D,GAAI,CAAEe,SAAUogB,IAEnCtJ,EAAgB3b,EAAK8D,GAAI,CAAEe,SAAUogB,GAEzC,CACF,KAIJgB,EAAmBjd,EAAQ,SAC3Bid,EAAmBhd,EAAU,YAC5B,CAACD,EAAQC,EAAUwS,EAAeE,EAAiB8H,EAAkBU,IAExErjB,YAAU,KACRijB,IAEA,MAAMqC,EAAQC,YAAY,KACxBnB,IACAc,KACC,MAEGM,EAAyB,KACI,YAA7BC,SAASC,kBACXtB,IACAc,MAMJ,OAFAO,SAASE,iBAAiB,mBAAoBH,GAEvC,KACLI,cAAcN,GACdG,SAASI,oBAAoB,mBAAoBL,KAElD,CAACpB,EAAgBc,EAAqBjC,IAGzC,MAAM6C,EAAyBve,cAAasV,IAC1C+F,UAAkCvd,KAASwX,MAC1C,IAGGkJ,EAAuBxe,cAAY,KACvCmb,EAAmB,KAClB,IAEH,MAAO,CACL5M,iBACA0M,oBACA4B,iBACAc,sBACAzC,kBACAE,mBACAmD,yBACAC,yBF7B4CC,CAAa9d,EAAQC,EAAUwS,EAAeE,IAGtFoL,aACJA,GAAAC,WACAA,IGnN6B,GAC7BvL,gBACAE,kBACAE,aACAC,eACAJ,gBACAE,kBACAP,kBACA5R,sBACAL,aACApG,eACAoZ,mBACAnT,WACAD,SACAW,WACAoT,mBAgEO,CACHgK,aA9DiB1e,cAAY,CAACrI,EAAWkE,KACzC,IAAIlE,EAAKsE,UAsBT,GAnBItE,EAAKwH,OAASyf,EAASC,MACvBC,EAAsB3mB,gBAAgB,gBAC/BR,EAAKwH,OAASyf,EAASG,MAC9BD,EAAsB3mB,gBAAgB,oBAGtC0D,GAEAmjB,EAAArH,UAAA,MAAAsH,QAAA/F,SAAAgG,OAAO,0BAAiB,OAAAD,QAAA/F,IAAAiG,eAAAC,KAAEC,KAAK,EAAGJ,QAAS/F,MACvCA,EAAS,CACLC,cAAe,IACfC,OAAQ,GACRC,OAAQ,CAAEC,EAAGzd,EAAEkd,QAAU3N,OAAOmO,WAAYC,EAAG3d,EAAEmd,QAAU5N,OAAOqO,iBAEvE3T,MAAMwZ,IACLC,QAAQD,MAAM,2BAA4BA,KAI9C3nB,EAAKwH,OAASyf,EAASC,MAAO,CAE9B,MAAMW,IAAyB7nB,EAAKoE,UAE9B0jB,GAAqBD,EAE3BpM,EAAczb,EAAK8D,GAAI,CAAEikB,QAAS,IAAK/nB,EAAKgoB,aAAaD,QAASpe,CAACA,GAAWme,KAE9E,MAAMG,EAASJ,GAAwB7nB,EAAK4E,KAAO5E,EAAK4E,KAClDsjB,EAASL,EAAuB,WAAW7nB,EAAKkC,OAAS,SAASlC,EAAKkC,OAC7EmZ,EAAgB4M,EAAQC,GACxBze,EAAoB,GAAGwe,EAAS,EAAI,IAAM,KAAKA,SAAeA,EAAS,EAAI,kBAAoB,eAAgB,MAAA/jB,OAAA,EAAAA,EAAGkd,cAASld,WAAGmd,QAClI,SAAWrhB,EAAKwH,OAASyf,EAASG,KAAM,CAEpC,MAAMS,IAAyB7nB,EAAKoE,UAE9B+jB,EAAYN,EAAuB,SAAW,YACpDlM,EAAgB3b,EAAK8D,GAAI,CAAE6D,OAAQwgB,IAEnC,MAAMF,EAASJ,GAAwB7nB,EAAK4E,KAAO5E,EAAK4E,KAClDsjB,EAASL,EAAuB,WAAW7nB,EAAKkC,OAAS,SAASlC,EAAKkC,OAC7EmZ,EAAgB4M,EAAQC,GACxBze,EAAoB,GAAGwe,EAAS,EAAI,IAAM,KAAKA,SAAeA,EAAS,EAAI,kBAAoB,eAAgB,MAAA/jB,OAAA,EAAAA,EAAGkd,cAASld,WAAGmd,QAClI,GACD,CAAC5F,EAAeE,EAAiBN,EAAiB5R,EAAqBE,IAgBtEqd,WAde3e,cAAY,CAACnC,EAAgBhC,KAC5CA,EAAEG,kBAGF8iB,EAAsB3mB,gBAAgB,cAGlCwC,GACAA,EAAakD,IAElB,CAAClD,MHuIFolB,CAAkB,CACpB3M,gBACAE,kBACAE,aACAC,eACAJ,gBACAE,kBACAP,kBACA5R,sBACAL,cACApG,gBACAoZ,mBACAnT,WACAD,SACAW,YACAoT,mBAGKsL,GAAmBC,IAAwB3kB,YAAS,IACpD4kB,GAAeC,IAAoB7kB,WAAsC,UAEtCA,YAAS,GAEnD,MAAO8kB,IAAyC9kB,YAAS,IAClD+kB,GAAaC,IAAkBhlB,WAASyM,IAExCuH,GAAiBC,IAAsBjU,WAAoC,WAG5EJ,YAAEA,GAAAqlB,gBAA+BA,GAAAC,cAAiBA,GAAAC,eAAeA,II1P3C,GAC5BxN,aACAC,eACAyB,qBACAC,2BAEA,MAAO1Z,EAAawlB,GAAkBplB,WAAc,OAC7CqlB,EAAkBC,GAAuBtlB,WAAwB,MA8CxE,MAAO,CACLJ,cACAylB,mBACAJ,gBA1CsB,CAAC5oB,EAAWgE,KAClC+kB,EAAe/oB,GACfipB,EAAoBjlB,IAyCpB6kB,cAnCoB,KACpBE,EAAe,MACfE,EAAoB,OAkCpBH,eA1BqB,CAAC5kB,EAAoBglB,KAE1C,GADAhlB,EAAEwL,iBACuB,OAArBsZ,GAA6BA,IAAqBE,GAAgB3lB,EAEtE,GAAIA,EAAYiE,OAASyf,EAASC,OAASlK,EAAoB,CAE7D,MAAMmM,EAAW,IAAI7N,IACd8N,GAAaD,EAASvG,OAAOoG,EAAkB,GACtDG,EAASvG,OAAOsG,EAAa,EAAGE,GAChCpM,EAAmBmM,GACnBF,EAAoBC,EACtB,SAAW3lB,EAAYiE,OAASyf,EAASG,MAAQnK,EAAsB,CAErE,MAAMkM,EAAW,IAAI5N,IACd6N,GAAaD,EAASvG,OAAOoG,EAAkB,GACtDG,EAASvG,OAAOsG,EAAa,EAAGE,GAChCnM,EAAqBkM,GACrBF,EAAoBC,EACtB,KJwMwFG,CAAe,CACvG/N,aACAC,eACAyB,sBACAC,2BAIKqM,GAAgBC,IAAqB5lB,WAAS,GACDA,YAAS,GAE7D,MAAO6lB,GAAYC,IAAiB9lB,WAAwB,OAErD+lB,GAAcC,IAAmBhmB,YAAS,IAC1CimB,GAAcC,IAAmBlmB,WAAS,IAC1CsS,GAAWC,IAAgBvS,WAAS,KACpCwS,GAAeC,IAAoBzS,WAAS,KAG5CmmB,GAAeC,IAAoBpmB,YAAS,IAC5C8R,GAAauU,IAAkBrmB,WAAS,CAC7CyM,QAAS,EACTwF,oBAAqB,EACrBC,kBAAA,IAAsB3K,MAAOiT,wBAIzB8L,QAAEA,cAASC,GAAYC,iBAAkBC,GAAgBC,YAAaC,IAAsB7pB,IACjFoe,SAAgC,MAGjD/d,YAAU,KACH2nB,IACHE,GAAevY,IAEhB,CAACA,EAASqY,KAGb3nB,YAAU,KACJke,GACFf,IAAiBA,IAAc,GAE/BA,IAAiBA,IAAc,IAEhC,CAACe,KAGJle,YAAU,KACJunB,GACFpK,IAAiBA,IAAc,GAE/BA,IAAiBA,IAAc,IAEhC,CAACoK,KAGJ,MAAMkC,GAAgB1L,SAAO9C,GAC7Bjb,YAAU,KAEJypB,GAAcC,UAAYzO,IAC5BwO,GAAcC,QAAUzO,EACpBA,GACFgD,GAAWhD,KAGd,CAACA,IAEJ,MAYM0O,GAAenP,EAAWvX,IAAID,GAAMkF,EAAOwE,KAAKkd,GAAKA,EAAE5mB,KAAOA,IAAK6C,OAAO+jB,QAAW,IAANA,GAE/E7hB,GAAawD,UAAQ,IAClBoe,GAAa1mB,IAAI2mB,IAAA,CACpB5mB,GAAI4mB,EAAE5mB,GAAI5B,KAAMwoB,EAAE1e,KAAM2e,KAAMD,EAAEC,MAAQ,MAAOhmB,GAAI+lB,EAAE/lB,IAAM8B,KAAKmkB,KAAgB,IAAXF,EAAEG,QAAejmB,KAAM8lB,EAAEG,OAAQtoB,SAAUmoB,EAAEnoB,UAAY,EAC9HiF,KAAMyf,EAASC,MAAO9iB,YAAasmB,EAAE3C,QAAQpe,IAAW/B,UAAW,QAAkBogB,aAAc0C,EACnGpmB,UAAWyY,GAAa9Q,SAASye,EAAE5mB,IACnCkB,SAAU0lB,EAAE1lB,SACZH,SAAU6lB,EAAE7lB,YACZ4F,KAAK,CAACC,EAAGC,IACLD,EAAEpG,YAAcqG,EAAErG,UAAkB,GACnCoG,EAAEpG,WAAaqG,EAAErG,WAAkB,EACjCwmB,OAAOpgB,EAAEtG,WAAa0mB,OAAOngB,EAAEvG,YAEzC,CAACqmB,GAAc9gB,GAAUoT,GAAc/T,EAAQsS,IAG5CyP,GAAiBxP,EAAaxX,IAAID,GAAMmF,EAASuE,KAAKwd,GAAKA,EAAElnB,KAAOA,IAAK6C,OAAOqkB,QAAW,IAANA,GAErFliB,GAAeuD,UAAQ,IACpB0e,GAAehnB,IAAIinB,IAEtB,MACMC,EAAexkB,KAAKmkB,KAAKM,IACTF,EAAE1kB,SAAS1C,OAAO,CAAC2C,EAAKC,IAAOD,EAAMC,EAAGjE,SAAU,IAGxE,MAAM4oB,EAAe1kB,KAAKqI,IAAIkc,EAAE1kB,SAASjB,OAAQ,GAC3C+lB,EAAQ3kB,KAAKmkB,KAAKK,EAAeE,GACjCE,EAAU5kB,KAAKmkB,KAPE,GAOoBO,GAE3C,MAAO,CACHrnB,GAAIknB,EAAElnB,GAAI5B,KAAM8oB,EAAEhf,KAAM2e,KAAMK,EAAEL,MAAQ,MAAOhmB,GAAIsmB,EAAcrmB,KAV9C,GAUoE4C,KAAMyf,EAASG,KACtGhjB,UAAwB,cAAb4mB,EAAErjB,OAAwBC,UAAW,OAAiB0jB,YAAY,EAC7EtmB,SAAUgmB,EAAEhmB,SACZgjB,aAAcgD,EACdnmB,SAAUmmB,EAAEnmB,SACZyB,SAAU0kB,EAAE1kB,SAASvC,IAAIyC,IAAA,CACrB1C,GAAI0C,EAAG1C,GAAI5B,KAAMsE,EAAGvB,MAAOb,UAAWoC,EAAGpC,UACzCO,GAAIymB,EACJxmB,KAAMymB,EACN9oB,SAAUiE,EAAGjE,UAAY,GACzByC,SAAUwB,EAAGxB,eAGtByF,KAAK,CAACC,EAAGC,IAAMmgB,OAAOpgB,EAAEtG,WAAa0mB,OAAOngB,EAAEvG,YAChD,CAAC2mB,KAGJjqB,YAAU,KACkBkf,WACxB,MAAMC,EAAQC,aAAaC,QAAQ,sBACnC,GAAIF,EACF,IACE,MAAMsL,EAAOjL,KAAKC,MAAMN,GACxBxB,GAAS8M,EAAK/M,OAAS,GACvBG,GAAW4M,EAAK7M,SAAW,EAC7B,OAASxa,GAAyB,GAItCsnB,IACC,IAEH1qB,YAAU,KACRof,aAAagB,QAAQ,qBAAsBZ,KAAKa,UAAU,CAAE3C,SAAO7Z,KAAImL,aAAW4O,eACjF,CAACF,GAAO7Z,EAAImL,GAAW4O,KAG1B,MA+DM+M,GAAgBzrB,UAClBqjB,GAAiBrjB,EAAK8D,IACtBqT,GAAgBnX,EAAKkC,MACrBsV,IAAkBxX,EAAK4E,MAAQ,GAAG6d,YAClCnL,IAActX,EAAK2E,IAAM,IAAI8d,YAC7B/K,IAAoB1X,EAAKuC,UAAY,IAAIkgB,YACzCW,GAAepjB,EAAKwH,OAASxH,EAAK2B,SAAW,SAAW,UACxDiW,GAAmB5X,EAAKgF,UAAY,UAEhChF,EAAK2B,UACL6W,GAAuBxY,EAAK2B,UAIhC,IAAI+pB,EAAe,KACnB,GAAI1rB,EAAKwH,OAASyf,EAASC,MAAO,CAC9B,MAAMxB,EAAQ1c,EAAOwE,QAAUkd,EAAE5mB,KAAO9D,EAAK8D,IAC7C4nB,EAAe,MAAAhG,OAAA,EAAAA,EAAO7gB,QAC1B,SAAW7E,EAAKwH,OAASyf,EAASG,MAAsB,YAAdpnB,EAAKwH,KAAoB,CAC/D,MAAMse,EAAU7c,EAASuE,QAAUwd,EAAElnB,KAAO9D,EAAK8D,IACjD4nB,EAAe,MAAA5F,OAAA,EAAAA,EAASjhB,QAC5B,MAAW7E,EAAK6E,WAEZ6mB,EAAe1rB,EAAK6E,UAiBxB,GAdI6mB,GACA1T,GAAmB0T,EAAa5mB,SAChCmT,GAAgByT,EAAazgB,MAAQ,IACrCiN,GAAgBwT,EAAa3mB,MAAQ,IACrCqT,GAAkBsT,EAAa/F,QAAU,QACzCrN,IAAoB,OAAAjS,EAAAqlB,EAAaC,qBAAb,EAAAtlB,EAA6Boc,aAAc,OAE/DzK,IAAmB,GACnBC,GAAgB,IAChBC,GAAgB,IAChBE,GAAkB,QAClBE,GAAoB,MAGpBtY,EAAKwH,OAASyf,EAASG,KAAM,CAC7B,MAAM4D,EAAI/hB,EAASuE,QAAaoe,EAAK9nB,KAAO9D,EAAK8D,IAC9CknB,GAAGtS,GAA0B,IAAIsS,EAAE1kB,UAC1C,MACIoS,GAA0B,IAE9BqK,IAAiB,IAmLrB,SACM1hB,KAAC,OAAIF,UAAW,gDAGZC,SAAA,CAAAF,MAACyV,GAAA,CACGC,kBACApB,QAAS,IAAM8N,GAAkB,MACjCzM,QAAUtU,IACN+gB,GAAkB,MAGlB/Z,GADqBhH,GAAY,IAGjCiH,KAEAI,IAAe,IAEnBlJ,gBACAJ,SACAM,UACAI,YACAC,aAIJC,MAAC2qB,EAAA,CACCrC,cACAsC,cACAtW,QAAS,IAAMiU,GAAc,MAC7B1oB,UACAC,YACAC,WACA8qB,cAASpO,aAA2BqO,kBAAmB,CACrDC,SAAU,SACVC,aAAc,SACdC,gBAAiB,SACjBC,yBAAyB,MAK5B,MAAArjB,QAAA,EAAAA,GAAWsjB,gBACRnrB,MAACnB,GAAA,CACGC,KAAM+I,GAAUsjB,cAChBpsB,WAAY8I,GAAU9I,WACtBC,WAAY,KACRoJ,IAAgBA,GAAa,aAC7B2U,IAAiBA,IAAc,IAEnC9d,QAAS,KACLmJ,IAAgBA,GAAa,SAC7B2U,IAAiBA,IAAc,IAEnC7d,OAAQ,KACJkJ,IAAgBA,GAAa,WAC7B2U,IAAiBA,IAAc,IAEnC5d,aAAekC,IACXgH,GAAiBhH,GACjBiH,KAEAI,IAAe,IAEnBtJ,SACAC,YAAa,IAAM0d,IAAiBA,IAAc,KAK7DvN,MACGxP,IAAC,OAAIC,UAAU,0FAEXC,gBAAC,OAAID,UAAW,sJAAqJT,GAA0B,oBAAVJ,GAA8B,gCAAkC,gCAAmCM,GAAS,6CAA+C,uCAE3UQ,SAAA,CAAAsP,GAAkB8D,OACftT,MAAC,OAAIC,UAAU,uBACXC,SAAAF,MAAC,OACGuT,IAAK/D,GAAkB8D,MACvBE,IAAKhE,GAAkB1E,KACvB7K,UAAU,mCAMtBD,IAAC,OAAIC,UAAU,uFAGfE,KAAC,OAAIF,UAAU,6FACXC,SAAA,CAAAF,MAAC,MAAGC,UAAU,+BAA+BC,SAAA,WAC7CC,KAAC,OAAIF,UAAU,oCAAoCC,SAAA,OAAIsP,GAAkB1E,UACzE3K,KAAC,OAAIF,UAAW,iCAAkCC,SAAA,SAAMsP,GAAkB4B,KAAK,SAC/EjR,KAAC,OAAIF,UAAW,mCAAoCC,SAAA,SAAMgP,EAAQ,eAOlFlP,MAAC4U,GAAA,CACGP,KAAMmU,GACN3T,KAAM6T,GACN5T,QAAS6T,GACT5T,aACAC,gBACAC,iBACAC,oBACAlW,WA5dqB,KAC3Bmb,EAAgB,GAAI,kBAAkBpF,QACtC6G,GAAa3G,IACbwT,IAAgB,GAChBE,GAAgB,GAChBzT,GAAiB,IACjB3M,EAAoB,YAAa,mBA0d/BvI,MAACoU,GAAA,CACGC,KAAMuU,GACNtU,QAAS,IAAMuU,IAAiB,GAChCtU,eACAC,cAAe,KACX,GAAID,GAAYrF,QAAU,EAAG,CACzBiL,EAAgB5F,GAAYrF,QAAS,UACrC,MAAMkc,EAAiB,IAAK7W,GAAarF,QAAS,GAClD4Z,GAAesC,GACfpM,aAAagB,QAAQ,iBAAkBZ,KAAKa,UAAUmL,IACtDvC,IAAiB,EACrB,GAEJnpB,UACAF,gBACAJ,SACAU,YACAC,eAGJI,KAAC,OAAIF,UAAU,8DACVC,SAAA,CAAY,WAAZ0d,IACC5d,MAACqrB,EAAA,CAAiBC,IAAK5N,GAAqBte,SAAcqE,KAAQyL,UAAkB8L,aAAwBuQ,WAAYxQ,EAAqBQ,gBAA8BC,qBAAwCrB,kBAAkC2C,iBAEnPX,YACA3L,YACAnP,YACAiH,iBACA8T,gBACA/T,oBACAgU,oBACAC,oBAEAyM,WACAG,kBACAsC,aAAcxC,GACdyC,cAAerC,GAEfsC,sBAAwBC,IAChBA,GACA/iB,IAAkB,GAEtBF,GAAeijB,IAGnBnP,iCAEAtW,YAAaqiB,GAEb9L,cAGS,WAAZmB,IACGzd,OAAC,OAAIF,UAAU,2CAEXC,SAAA,CAAAC,OAAC,OAAIF,UAAW,GAAGJ,gCACfK,SAAA,CAAAF,MAAC,OAAIC,UAAU,yCACXC,SAAAC,OAAC,OAAIF,UAAU,oEACXC,SAAA,GAAAF,IAACsB,EAAA,CAAMf,KAAM,KAAK,iBAK1BJ,KAAC,OAAIF,UAAU,wCAEXC,SAAA,CAAAC,OAAC,OAAIF,UAAW,GAAGJ,sHACfK,SAAA,GAAAC,KAAC,OAAIF,UAAU,oCACXC,SAAA,GAAAC,KAAC,OAAIF,UAAU,oEACXC,SAAA,GAAAF,IAACwV,EAAA,CAASjV,KAAM,KAAK,aAEzBP,MAAC,OAAIC,UAAU,wBAAwBC,SAAA,YAM3CF,IAAC,OAAIC,UAAU,uBACXC,eAAC0rB,EAAA,CAAoBrnB,MAAM,OAAOC,OAAQ,GACtCtE,SAAAC,OAAC0rB,EAAA,CACGxB,WACI,MAAMA,EAAO,GACb,QAASzZ,EAAI,EAAGA,GAAK,EAAGA,IAAK,CACzB,MAAM7G,MAAWC,KACjBD,EAAK+hB,QAAQ/hB,EAAK4a,UAAY/T,GAC9B,MAAMmb,EAAShiB,EAAKkT,mBAAmB,QAAS,CAAE+O,IAAK,YAGvD,IAAIC,EAAe,EAEnB,MAAMC,EAASC,OAAOC,KAAKlQ,IAAc5P,KAAK8F,IAC1C,MAAMia,MAAgBriB,KAEtB,OADAqiB,EAAUP,QAAQO,EAAU1H,WAAa,EAAI/T,IACtCyE,SAASjD,KAASia,EAAU1H,YAGnCuH,EACAD,EAAe/P,GAAa7G,SAAS6W,IAASD,aACjC,IAANrb,IAEPqb,SAAehQ,aAAYgQ,eAAgB,GAG/C5B,EAAK1Y,KAAK,CACN5H,KAAMgiB,EACNE,gBAER,CACA,OAAO5B,CACX,KAEAnqB,SAAA,CAAAF,MAACssB,EAAA,CAAcC,gBAAgB,MAAM7nB,OAAQhF,GAAS,UAAY,UAAW8sB,UAAU,IACvFxsB,MAACysB,EAAA,CACGC,QAAQ,OACRhoB,OAAiB,UACjBqmB,SAAU,EACV4B,UAAU,IAEd3sB,MAAC4sB,EAAA,CACGloB,OAAiB,UACjBqmB,SAAU,EACV4B,UAAU,EACVE,OAAQ,CAAC,EAAG,gBACZC,cAAgBzlB,GAAU,GAAGA,OAC7B0lB,MAAI,IAER/sB,MAACgtB,EAAA,CACGC,aAAc,CACVlsB,gBAAiBrB,GAAS,UAAY,OACtCwtB,YAAaxtB,GAAS,OAAS,UAC/B8B,MAAO9B,GAAS,OAAS,OACzBqrB,SAAU,OACVoC,QAAS,OAEbC,UAAY/lB,GAAU,CAAC,GAAGA,OAAY,UAE1CrH,MAACqtB,EAAA,CACG/mB,KAAK,WACLomB,QAAQ,eACRhoB,OAAiB,UACjBnB,YAAa,IACb+pB,IAAK,CAAErpB,KAAe,UAAuB0J,EAAG,GAChD4f,UAAW,CAAE5f,EAAG,YAOhC3N,MAAC,OAAIC,UAAU,iDACXC,WAAAF,IAAC,OAAIC,UAAU,0BACXC,SAAAC,OAAC,QAAKF,UAAU,gBAAgBC,SAAA,aACrBC,KAAC,QAAKF,UAAU,aAAeC,SAAA,OAElC,MAAM8L,EAAQmgB,OAAOqB,OAAOtR,IAAcxZ,OAAO,CAAC2C,EAAKooB,IAAepoB,GAAOooB,EAAMxB,cAAgB,GAAI,WAAMhQ,aAAYgQ,eAAgB,GACnIyB,EAAOnoB,KAAK6P,IAAI+W,OAAOC,KAAKlQ,IAAc/X,OAAS,EAAG,GAC5D,OAAOoB,KAAKC,MAAMwG,EAAQ0hB,IAAS,CACvC,EALsC,GAKjC,UAAW,aAAQvtB,KAAC,QAAKF,UAAU,aAAcC,SAAA,QAAA+b,aAAYgQ,eAAgB,EAAE,oBAQpG9rB,OAAC,OAAIF,UAAW,GAAGJ,4GACfK,SAAA,GAAAC,KAAC,OAAIF,UAAU,yCACXC,SAAA,GAAAC,KAAC,OAAIF,UAAU,oFACXC,SAAA,GAAAF,IAAC0Z,GAAA,CAASnZ,KAAM,KAAK,WAExBkc,IAAY,oBAAqBA,IAAYA,GAASqO,mBACnD9qB,IAAC2G,EAAA,CAAiBC,OAAO,UAAUV,YAAaqiB,GAAehoB,KAAM,GAAIN,UAAU,6BAK3FD,IAAC,OAAIC,UAAU,2BACXC,SAAAF,MAAC,UACGuB,QAAS,KAEL,MAAMosB,GAAA,IAAgB3jB,MAAOiT,qBACvB2Q,EAAcxO,KAAKC,MAAML,aAAaC,QAAQ,6BAA+B,MAGnF,IAAK2O,EAAYD,GAAY,CAEzBC,EAAYD,IAAa,EACzB3O,aAAagB,QAAQ,2BAA4BZ,KAAKa,UAAU2N,IAGhE,MAAMhW,MAAU5N,KACVgiB,EAAMpU,EAAI8M,SACVmJ,EAAOjW,EAAI+M,UAAYqH,GAAe,IAARA,GAAY,EAAK,GAC/C8B,EAAS,IAAI9jB,KAAK4N,EAAIkU,QAAQ+B,IAC9BE,EAAY,GAClB,QAASnd,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,MAAM7G,EAAO,IAAIC,KAAK8jB,GACtB/jB,EAAK+hB,QAAQgC,EAAOnJ,UAAY/T,GAChCmd,EAAUpc,KAAK5H,EAAKkT,qBACxB,CACA,MAAM+Q,EAAkBD,EAAUtoB,UAAemoB,EAAY7jB,IAAO5F,OAC9D8pB,EAAa,GAAwB,EAAlBD,EACnBE,EAAW,GAAwB,EAAlBF,EAGvB7T,EAAgB8T,EAAY,QAG5B1lB,EAAoB,QAAS,iBAAkBgK,OAAOmO,WAAa,GAGnEU,WAAW,KACP7Y,EAAoB,IAAI0lB,OAAiB,kBAAmB1b,OAAOmO,WAAa,EAAI,KACrF,KACHU,WAAW,KACP7Y,EAAoB,IAAI2lB,OAAe,gBAAiB3b,OAAOmO,WAAa,EAAI,KACjF,KAGHL,EAAS,CACLC,cAAe,IACfC,OAAQ,GACRC,OAAQ,CAAEG,EAAG,IACbwN,OAAQ,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,aAIpE,MAAMC,EAAS7S,EAAgB,EAC/ByD,aAAagB,QAAQ,qBAAsBoO,EAAO7M,YAGlDH,WAAW,KAEPiH,GAAkBpjB,GAAQA,EAAO,IAClC,IACP,GAEJ5B,eACI,MAAMsqB,GAAA,IAAgB3jB,MAAOiT,qBAE7B,QADoBmC,KAAKC,MAAML,aAAaC,QAAQ,6BAA+B,MAC9D0O,EACzB,KACA1tB,UAAW,8HACP,MAAM0tB,GAAA,IAAgB3jB,MAAOiT,qBAG7B,OAFoBmC,KAAKC,MAAML,aAAaC,QAAQ,6BAA+B,MAEnE0O,GACLnuB,GACU,oBAAVJ,GACG,oKACA,2KACJ,uFAECI,GACU,oBAAVJ,GACG,4OACA,0PACJ,+IAIZc,eACE,MAAMytB,GAAA,IAAgB3jB,MAAOiT,qBAE7B,OADoBmC,KAAKC,MAAML,aAAaC,QAAQ,6BAA+B,MAChE0O,GACfxtB,OAAAyS,WAAA,CACI1S,SAAA,CAAAF,MAACsD,EAAA,CAAM/C,KAAM,GAAIgD,YAAa,IAC9BvD,MAAC,QAAKC,UAAU,aAAaC,SAAA,UAGjCC,OAAAyS,WAAA,CACI1S,SAAA,CAAAF,MAACquB,GAAA,CAAQ9tB,KAAM,GAAIgD,YAAa,IAChCvD,MAAC,QAAKC,UAAU,aAAaC,SAAA,SAGzC,WAKRF,IAAC,OAAIC,UAAU,yBACTC,eAEE,MAAM0X,MAAU5N,KACVgiB,EAAMpU,EAAI8M,SACVmJ,EAAOjW,EAAI+M,UAAYqH,GAAe,IAARA,GAAY,EAAK,GAC/C8B,EAAS,IAAI9jB,KAAK4N,EAAIkU,QAAQ+B,IAE9BE,EAAY,GAClB,QAASnd,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,MAAM7G,EAAO,IAAIC,KAAK8jB,GACtB/jB,EAAK+hB,QAAQgC,EAAOnJ,UAAY/T,GAChCmd,EAAUpc,KAAK5H,EACnB,CAEA,MAAM6jB,EAAcxO,KAAKC,MAAML,aAAaC,QAAQ,6BAA+B,MAE7EqP,OADYtkB,MACSiT,qBACrBsR,EAAW,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAG1CC,EAAW,CAACxuB,MAAC4Y,GAAA,CAAIrY,KAAM,KAAOP,MAAC8Y,GAAA,CAAOvY,KAAM,KAAOP,MAACiZ,GAAA,CAAS1Y,KAAM,KAAOP,MAACsZ,GAAA,CAAS/Y,KAAM,KAAOP,MAACuZ,GAAA,CAAMhZ,KAAM,KAAOP,MAACqZ,GAAA,CAAM9Y,KAAM,KAAOP,MAACyuB,GAAA,CAAKluB,KAAM,MAE3J,OAAOwtB,EAAUlrB,IAAI,CAACkH,EAAMjH,KACxB,MAAM4rB,EAAU3kB,EAAKkT,qBACf0R,IAAgBf,EAAYc,GAC5BE,EAAUF,IAAYJ,EAE5B,OACInuB,OAAC,OAEGF,UAAW,mEAAkE2uB,EAAU,YAAc,IAErG1uB,SAAA,CAAAC,OAAC,OAAIF,UAAW,sOAEV0uB,EACKnvB,GACc,oBAAVJ,GAA8B,wIAA0I,+IACzK,8FACJwvB,EACCpvB,GACc,oBAAVJ,GAA8B,sHAAwH,6HACvJ,qFACHI,GACc,oBAAVJ,GAA8B,sHAAwH,6HACtJM,GAAS,4CAA8C,uGAGjEQ,SAAA,CAAAyuB,SAAgBrrB,EAAA,CAAM/C,KAAM,GAAIgD,YAAa,EAAGtD,UAAU,mBACzD0uB,GAAeH,EAAS1rB,QAE9B9C,IAAC,OAAIC,UAAW,yBAAwB0uB,EAAc,mBAAqBC,EAAU,gBAAmBlvB,GAAS,gBAAkB,kBAC9HQ,SAAAquB,EAASzrB,OAtBTA,IA2BrB,MAzDyCslB,aAgEzDpoB,MAAC0H,GAAA,CACGC,cACAC,gBACAC,aACAG,gBACAC,mBACApG,eAAgBgkB,GAChB/jB,aAAcgkB,GACd/jB,eAAgBwoB,GAChBvoB,gBAtuBA,CAAC6sB,EAAmBC,KACtC,MAAMlK,EAAU7c,EAASuE,KAAKwd,GAAKA,EAAElnB,KAAOisB,GAC5C,IAAKjK,EAAS,OACd,MAAM/M,EAAU+M,EAAQxf,SAASkH,KAAKC,GAAKA,EAAE3J,KAAOksB,GACpD,IAAKjX,EAAS,OAEd,MAAMoP,GAAapP,EAAQ3U,UACrB4U,EAAc8M,EAAQxf,SAASvC,OAAS0J,EAAE3J,KAAOksB,EAAY,IAAKviB,EAAGrJ,UAAW+jB,GAAc1a,GAIpG,GAFAkO,EAAgBoU,EAAW,CAAEzpB,SAAU0S,IAEnCmP,EAAW,CAEX,MAAMpa,EAAgB,IAAIC,MAAM,2BAChCD,EAAcE,OAAS,GACvBF,EAAcG,OAAOC,MAAM,QAG3BoT,EAAS,CACLC,cAAe,GACfC,OAAQ,GACRC,OAAQ,CAAEC,EAAG,GAAKE,EAAG,IACrBwN,OAAQ,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,WAChEY,kBAAmB,KAE3B,GA8sBkB9sB,gBA3sBA,CAAC4sB,EAAmBC,KAEtC,MAAMlK,EAAU7c,EAASuE,KAAKwd,GAAKA,EAAElnB,KAAOisB,GAC5C,IAAKjK,EAAS,OAEd,IADgBA,EAAQxf,SAASkH,KAAKC,GAAKA,EAAE3J,KAAOksB,GACtC,OAEd,MAAMhX,EAAc8M,EAAQxf,SAASvC,IAAI0J,GAAKA,EAAE3J,KAAOksB,EAAY,IAAKviB,EAAGrJ,WAAW,EAAME,WAAW,GAASmJ,GAChHkO,EAAgBoU,EAAW,CAAEzpB,SAAU0S,IAGvC,MAAMkX,EAAc,IAAIliB,MAAM,yCAC9BkiB,EAAYjiB,OAAS,GACrBiiB,EAAYhiB,OAAOC,MAAM,QAGzBmU,WAAW,KACP,GAAIlZ,GAAY,CACZ,MAAM+mB,EAAS/mB,MACV+mB,EAAOC,SAAWD,EAAO/L,SAC1B3a,EAAoB0mB,EAAO/L,QAAS,eAE5C,GACD,MAqrBe/jB,aAjvBIkC,IAClBqc,GAAoB4L,UACpB5L,GAAoB4L,QAAQ6F,WAAW9tB,GACvCkH,EAAoB,QAAQlH,OAAe,sBA+uB7Ba,YAAawlB,GACbvlB,UAAWwlB,GACXvlB,WAAYwlB,GACZvlB,eACA6F,cACAC,qBACAC,gBACAC,oBACAC,iBACAC,sBACAnJ,SACAS,UACAC,YACAC,WACAL,UACAF,gBACAgJ,WAAY+f,GACZ9f,YACAC,kBACAzB,UAAW,KAEc,UAAjBe,GACAka,GAAe,SACS,YAAjBla,GACPka,GAAe,WACS,WAAjBla,IACPka,GAAe,UAGnBC,GAAiB,MACjBlM,GAAgB,IAChBK,GAAiB,MACjBF,GAAa,MACbI,GAAmB,MACnBE,GAAmB,UACnBE,GAAe,IACfE,IAAmB,GACnBC,GAAgB,IAChBC,GAAgB,IAChBE,GAAkB,QAClBE,GAAoB,KACpBI,GAA0B,IAC1BqK,IAAiB,GACjB9E,IAAiBA,IAAc,IAEnCpU,qBAAsB,KAClBye,IAAqB,GACrBrK,IAAiBA,IAAc,IAEnCnU,0BAOC,SAAZgV,IACG5d,MAAC2O,GAAA,CACGC,aACAC,gBACAC,cACAC,iBACAC,oBACAC,uBACAC,UACAC,WAAY+O,GACZ9O,mBAAoB+O,GACpB9O,aAAciP,GACdhP,aAAc8O,GACd7O,WAAauC,IAAWmM,GAAenM,GAAOiM,IAAkB,IAChE7b,YAAauc,GACbrc,WAAYsc,GACZlW,WAAY+f,GACZnpB,SACAM,UACAF,gBACAK,UACAC,YACAC,WACAqO,oBACAoB,qBACAC,UACAC,aACAC,iBACAC,oBACAC,gBACAC,mBACAC,qBACAC,wBACAuO,mBACAC,uBAGK,WAAZZ,IACGzd,OAAC,OAAIF,UAAU,8BACXC,SAAA,GAAAC,KAAC,OAAIF,UAAU,+BAA+BC,SAAA,CAAAF,MAAC,UAAOuB,QAAS,IAAMsc,GAAW,UAAW5d,UAAW,+DAA8DP,GAAS,qDAAuD,uCAAyCQ,SAAAF,MAACovB,GAAA,CAAU7uB,KAAM,GAAIN,UAAU,4DAA6D,MAAGA,UAAW,qBAAqBH,KAAYI,SAAA,oBACxZF,MAAC,OAAIC,UAAU,uDACVC,SAAA0O,GAAUnJ,OAAOmL,GAAgB,aAAXA,EAAEtK,MAAuBsK,EAAEC,OAAOhO,IAAIiP,GACzD3R,OAAC,OAAkBF,UAAW,4BAA2B6R,EAAKud,SAAW,uCAA0C3vB,GAAS,8BAAgC,6BACxJQ,SAAA,GAAAC,KAAC,OAAIF,UAAU,aAAaC,SAAA,CAAAF,MAAC,OAAIC,UAAU,WAAYC,SAAA4R,EAAKiC,cAAY,OAAI7T,SAAA,CAAAF,MAAC,OAAIC,UAAW,aAAaH,KAAaI,WAAK4K,OAAW9K,MAAC,OAAIC,UAAU,wBAAyBC,WAAK6Q,oBACnL/Q,MAAC,OAAIC,UAAU,kFAAkFC,SAAA,UAF3F4R,EAAKlP,aAalCukB,IACGnnB,MAAC,OAAIC,UAAU,6GACXC,gBAAC,OAAID,UAAW,oFAAoFJ,KAChGK,SAAA,CAAAC,OAAC,OAAIF,UAAW,4DAA2DP,GAAS,kBAAoB,oBACpGQ,SAAA,CAAAF,MAAC,MAAGC,UAAW,aAAaH,KAAYI,SAAA,WACxCF,MAAC,UAAOuB,QAAS,KACb6lB,IAAqB,GACrBrK,IAAiBA,IAAc,IAChC9c,UAAU,mCAAmCC,eAACsD,EAAA,CAAEjD,KAAM,iBAG5D,OAAIN,UAAW,aAAYP,GAAS,kBAAoB,oBACrDQ,SAAA,GAAAC,KAAC,UAAOoB,QAAS,IAAM+lB,GAAiB,UAAWrnB,UAAW,iHAAiHmd,GAAsC,WAAlBiK,MAA+BnnB,SAAA,GAAAF,IAACQ,EAAA,CAAMD,KAAM,KAAM,aACrPP,IAAC,UAAOuB,QAAS,IAAM+lB,GAAiB,QAASrnB,UAAW,0EAA0Emd,GAAsC,SAAlBiK,MAA6BnnB,SAAA,WACvLF,IAAC,UAAOuB,QAAS,IAAM+lB,GAAiB,SAAUrnB,UAAW,0EAA0Emd,GAAsC,UAAlBiK,MAA8BnnB,SAAA,cAG7LC,KAAC,OAAIF,UAAW,uCAEZC,SAAA,GAAAF,IAAC,OAAIC,UAAU,iFACXC,SAAAC,OAAC,UACGoB,QAAS,KACL2gB,GAAemF,IACfxF,IAAiB,IAErB5hB,UAAW,+FAA8FT,GAA0B,oBAAVJ,GAA8B,6QAA+Q,kSAAqS,kFAE3sBc,SAAA,GAAAF,IAACsvB,GAAA,CAAO/uB,KAAM,KAAM,gBAK5BJ,KAAC,OAAIF,UAAU,YACVC,SAAA,CAAkB,UAAlBmnB,IAA6Bvf,EAAOjF,IAAK2mB,UACrC,OAAevpB,UAAW,kDAAiDT,GAA0B,oBAAVJ,GAA8B,8GAAgH,qHAAyHM,GAAS,iCAAmC,gCAC3YQ,SAAA,CAAAF,MAAC,QAAKC,UAAW,WAAWH,KAAaI,WAAE4K,SAC3C3K,KAAC,OAAIF,UAAU,aACXC,SAAA,CAAAF,MAAC,UAAOuB,QAAS,KAAQgpB,GAAa,IAAIf,EAAGxoB,KAAKwoB,EAAE1e,KAAMxE,KAAK,QAAS5C,KAAK8lB,EAAEG,UAAa1pB,UAAcT,GAA0B,oBAAVJ,GAA8B,qSAAuS,0TAA6T,0EAA6Ec,SAAAF,MAACqE,EAAA,CAAM9D,KAAM,OACt1BP,MAAC,UAAOuB,QAAS,IAAMiZ,EAAcgP,EAAE5mB,IAAK3C,UAAcT,GAA0B,oBAAVJ,GAA8B,oSAAsS,yTAA4T,uEAA0Ec,SAAAF,MAACyS,EAAA,CAAOlS,KAAM,YAJhyBipB,EAAE5mB,KAQG,SAAlBykB,IAA4Btf,EAASlF,IAAKinB,UACtC,OAAe7pB,UAAW,kDAAiDT,GAA0B,oBAAVJ,GAA8B,8GAAgH,qHAAyHM,GAAS,iCAAmC,gCAC3YQ,SAAA,CAAAF,MAAC,QAAKC,UAAW,WAAWH,KAAaI,WAAE4K,SAC3C3K,KAAC,OAAIF,UAAU,aACXC,SAAA,CAAAF,MAAC,UAAOuB,QAAS,KAAQgpB,GAAa,IAAIT,EAAG9oB,KAAK8oB,EAAEhf,KAAMxE,KAAK,OAAQ5C,KAAK,OAAUzD,UAAcT,GAA0B,oBAAVJ,GAA8B,qSAAuS,0TAA6T,0EAA6Ec,SAAAF,MAACqE,EAAA,CAAM9D,KAAM,OACh1BP,MAAC,UAAOuB,QAAS,IAAMmZ,EAAgBoP,EAAElnB,IAAK3C,UAAcT,GAA0B,oBAAVJ,GAA8B,oSAAsS,yTAA4T,uEAA0Ec,SAAAF,MAACyS,EAAA,CAAOlS,KAAM,YAJlyBupB,EAAElnB,KAQG,WAAlBykB,IAA8Bxf,MAC3B7H,IAAA4S,WAAA,CAEK1S,gBAAOqvB,QAAQ1nB,GAAU2nB,UAAmC3sB,IAAI,EAAE4sB,EAAa7tB,MAC5E,GAAgC,IAA3BA,EAAgBuC,OAAc,OAAO,KAG1C,MAAMurB,EAAe,CACjBC,OAAQ,CAAEpe,MAAO,QAAS/P,MAAO,WACjCouB,WAAY,CAAEre,MAAO,OAAQ/P,MAAO,QACpCquB,QAAS,CAAEte,MAAO,QAAS/P,MAAO,WACpCiuB,IAA6C,CAAEle,MAAOke,EAAajuB,MAAO,QAC5E,SACIrB,KAAC,OAAsBF,UAAU,OAC7BC,SAAA,CAAAC,OAAC,MAAGF,UAAW,2BAA0BP,GAAS,gBAAkB,kBAChEQ,SAAA,CAAAF,MAAC,QAAKC,UAAW,6CAA6CyvB,EAAaluB,cAC1EkuB,EAAane,MAAM,KAAI3P,EAAgBuC,OAAO,OAEnDnE,MAAC,OAAIC,UAAU,YACTC,WAAgB2C,IAAI,CAAC/D,EAAMgE,IAErB3C,OAAC,OAAgBF,UAAW,kDAAiDT,GAA0B,oBAAVJ,GAA8B,8GAAgH,qHAAyHM,GAAS,iCAAmC,gCAC5YQ,SAAA,GAAAC,KAAC,OAAIF,UAAU,0BACXC,SAAA,CAAAF,MAAC,QAAKC,UAAW,WAAWH,KAAaI,WAAKc,OAC9ChB,MAAC,QAAKC,UAAW,4CAA4CyvB,EAAaluB,kBAAkBkuB,EAAaluB,aAAa9B,GAAS,MAAQgwB,EAAaluB,MAAQ,gBAAkBkuB,EAAaluB,MAAQ,OAAS,KACvMtB,SAAAwvB,EAAane,UAElBpR,KAAC,QAAKF,UAAW,2BAA4BC,SAAA,KAAEpB,EAAK4E,KAAK,SACzDvD,KAAC,QAAKF,UAAW,2BAA6BC,SAAA,CAAApB,EAAKuC,SAAS,YAEhElB,KAAC,OAAIF,UAAU,aACXC,SAAA,CAAAF,MAAC,UACGuB,QAAS,KACLgpB,GAAa,IAAIzrB,EAAM8D,GAAI9D,EAAK8D,GAAI0D,KAAM,SAAU5C,KAAM5E,EAAK4E,KAAMD,GAAI3E,EAAK2E,MAElFxD,UAAcT,GAA0B,oBAAVJ,GAA8B,qSAAuS,0TAA6T,0EAEhqBc,SAAAF,MAACqE,EAAA,CAAM9D,KAAM,OAEjBP,MAAC,UACGuB,QAAS,IAAMob,GAAiB7d,EAAK8D,GAAI9D,EAAK2B,UAC9CR,UAAcT,GAA0B,oBAAVJ,GAA8B,oSAAsS,yTAA4T,uEAE9pBc,SAAAF,MAACyS,EAAA,CAAOlS,KAAM,YAtBhBuC,QARhB2sB,kBAiD9CzvB,MAAC6V,GAAA,CACG5H,OAAQ2T,GACRtN,QAAS,KACLuN,IAAiB,GACjB9E,IAAiBA,IAAc,IAEnCjH,OAAQ,IAAMiH,IAAiBA,IAAc,GAC7ChH,iBACAC,gBACAC,mBACAC,eACAC,aACAC,gBACAC,iBACAC,oBACAC,mBACAC,sBACAC,mBACAC,sBACAC,eACAC,kBACAC,mBACAC,sBACArL,gBACAsL,mBACArL,gBACAsL,mBACAC,kBACAC,qBACAC,oBACAC,uBACAG,0BACAC,6BACAC,mBAx2BiB,KACvB,MAAMqY,EAAejZ,GAAkB,CACnCjT,SAAS,EACTmG,KAAM0B,GACN5H,KAAM6H,GACN+Y,OAAQxN,GACRwT,eAAgBpV,SAAS8B,KAAqB,QAC9C,EAEJ,GAAoB,UAAhBjB,GACAqE,EAAcxE,GAAgB,CAC1BjL,KAAMkL,GACN2T,OAAQtU,SAASgB,IACjB5S,GAAI4R,SAASc,IACb9U,SAAUgU,SAASkB,IACnBzS,SAAU2S,GACV9S,SAAUmsB,EACVC,KAAMpZ,UAEd,GAA2B,SAAhBT,IAA0C,YAAhBA,GACjCuE,EAAgB1E,GAAgB,CAC5BjL,KAAMkL,GACN5Q,SAAUmS,GACVzT,SAAU2S,GACV9S,SAAUmsB,EACVC,KAAMpZ,UAEd,GAA2B,WAAhBT,GACL,GAAI,MAAAH,QAAA,EAAAA,GAAetW,WAAW,WAAY,CAEtC,MAAMuwB,EAAkBja,GAAcuN,QAAQ,UAAW,IACnD2M,EAAU,CACZjvB,KAAMgV,GACNtS,KAAM2R,SAASgB,KAAkB,GACjC5S,GAAI4R,SAASc,KAAc,GAC3B9U,SAAUgU,SAASkB,KAAoB,GACvCkT,KAAM3H,GACNhe,SAAU2S,GACV9S,SAAUmsB,EACVC,KAAMpZ,IAEVuE,EAAiBgV,GAAYA,EAASrtB,IAAI/D,GAAQA,IAASkxB,EAAkB5Q,KAAKa,UAAUgQ,GAAWnxB,GAC3G,MAAWiX,IAEP6G,GAAiB7G,GAAesB,GAAqB,CACjDrW,KAAMgV,GACNtS,KAAM2R,SAASgB,KAAkB,GACjC5S,GAAI4R,SAASc,KAAc,GAC3B9U,SAAUgU,SAASkB,KAAoB,GACvCzS,SAAU2S,GACV9S,SAAUmsB,EACVC,KAAMpZ,KAIpBkL,IAAiB,GACjBM,GAAiB,OAizBXzK,iBA9yBe,KACrB,GAAK1B,GAAarL,OAAlB,CAUA,GAAoB,UAAhBuL,GAGQlM,KAAK4N,MAAM2J,WAenB5G,EAAW3E,GAAcX,SAASgB,KAAkB,SACxD,GAA2B,SAAhBH,IAA0C,YAAhBA,GAA2B,CAE5D,MAAMia,EAAsBtZ,GAAkB,CAC1CjT,SAAS,EACTmG,KAAM0B,GACN5H,KAAM6H,GACN+Y,OAAQxN,GACRwT,eAAgBpV,SAAS8B,KAAqB,GAC9C,CACAvT,SAAS,EACTC,KAAM,QACN4gB,OAAQ,SAGZ7J,EAAa,CACThY,GAAIoH,KAAK4N,MAAM2J,WACfzW,KAAMkL,GACNoa,WAAA,IAAepmB,MAAO2C,cAAcuX,MAAM,KAAK,GAC/CnT,YAAa,SACbtK,OAAQ,SACR4pB,KAAM,GACNC,WAAY,GACZlrB,SAAUmS,GACVgZ,MAAO,GACPC,kBAAmB,EACnB/G,KAAM3H,GACNhe,SAAU2S,GACV9S,SAAUwsB,EACVJ,KAAMpZ,IAEd,SAA2B,WAAhBT,GAA0B,CACjC,MAAM+Z,EAAU,CACZjvB,KAAMgV,GACNtS,KAAM2R,SAASgB,KAAkB,GACjC5S,GAAI4R,SAASc,KAAc,GAC3B9U,SAAUgU,SAASkB,KAAoB,GACvCkT,KAAMzH,EAAcC,OACpBxhB,SAAU4W,IAAuB,SACjCvT,SAAU2S,GACVsZ,KAAMpZ,IAEV+F,GAAcuT,GACd1nB,EAAoB,UAAW,kBACnC,CACAsZ,IAAiB,GACjB5L,GAAgB,IAChBK,GAAiB,MACjBF,GAAa,MACbI,GAAmB,MACnBuL,GAAeC,EAAcC,QAC7BvL,GAAmB,UACnBE,GAAe,IACfY,GAA0B,IAC1BV,IAAmB,GACnBC,GAAgB,IAChBC,GAAgB,IAChBE,GAAkB,QAClBE,GAAoB,IAtFM,GA8yBpBC,uBACAC,0BACA9X,gBACAmY,oBACAvY,SACAM,UACAI,cAIHge,IACG9d,MAAC,OAAIC,UAAU,6GACXC,SAAAC,OAAC,OAAIF,UAAW,uOAAsO0X,GAAmB,6FAA+F,IACpWzX,SAAA,GAAAC,KAAC,OAAIF,UAAU,iDACXC,SAAA,CAAAF,MAAC,MAAGC,UAAW,cAAa0X,GAAmB,aAAe,iBAAoBzX,SAAA8d,GAAYpb,GAAK,OAAS,UAC5G5C,MAAC,UACGuB,QAAS,KACLwc,IAAkB,IAEtB9d,UAAW,oCAAmCT,GAAgBmY,GAAmB,4PAA8P,mRAAsR,sBAErmBzX,SAAAF,MAACwD,GAAEjD,KAAM,GAAIN,UAAc0X,GAAmB,aAAe,yBAGrExX,KAAC,OAAIF,UAAU,YACXC,SAAA,CAAAC,OAAC,OACGD,SAAA,CAAAF,MAAC,SAAMC,UAAU,gDAAgDC,SAAA,SACjEF,MAAC,SACG0O,WAAS,EACTrH,MAAO2W,GAAYlT,KACnBxD,SAAUtE,GAAKib,GAAehZ,IAAA,IAAaA,EAAM6F,KAAM9H,EAAEuE,OAAOF,SAChEpH,UAAW,qDAAoD0X,GAAmB,6BAA+B,iCACjHnQ,YAAY,wBAGnB,OACGtH,SAAA,CAAAF,MAAC,SAAMC,UAAU,gDAAgDC,SAAA,SACjEF,MAAC,SACGqH,MAAO2W,GAAYjN,YACnBzJ,SAAUtE,GAAKib,GAAehZ,IAAA,IAAaA,EAAM8L,YAAa/N,EAAEuE,OAAOF,SACvEpH,UAAW,qDAAoD0X,GAAmB,6BAA+B,iCACjHnQ,YAAY,wBAGnB,OACGtH,SAAA,CAAAF,MAAC,SAAMC,UAAU,gDAAgDC,SAAA,aACjEF,MAAC,SACGsG,KAAK,SACLe,MAAO2W,GAAY5M,KACnB9J,SAAUtE,GAAKib,GAAehZ,QAAaA,EAAMmM,KAAMiE,SAASrS,EAAEuE,OAAOF,QAAU,KACnFpH,UAAW,qDAAoD0X,GAAmB,6BAA+B,iCACjHnQ,YAAY,wBAGnB,OACGtH,SAAA,CAAAF,MAAC,SAAMC,UAAU,gDAAgDC,SAAA,WACjEF,MAAC,SACGqH,MAAO2W,GAAY1K,OAAS,GAC5BhM,SAAUtE,GAAKib,GAAehZ,IAAA,IAAaA,EAAMqO,MAAOtQ,EAAEuE,OAAOF,SACjEpH,UAAW,qDAAoD0X,GAAmB,6BAA+B,iCACjHnQ,YAAY,mBAEhBxH,MAAC,KAAEC,UAAU,gCAAgCC,SAAA,gDAEjDC,KAAC,OAAIF,UAAU,8BACXC,SAAA,CAAAF,MAAC,UACGuB,QAAS,KACLwc,IAAkB,IAEtB9d,UAAW,sEAAqET,GAAgBmY,GAAmB,0QAA4Q,iSAAoS,kCACtqBzX,SAAA,OAGDF,MAAC,UACGuB,QAAS8c,GACTpe,UAAW,sEAAqET,GAAgBmY,GAAmB,uQAAyQ,8RAAiS,4CAChqBzX,SAAA","names":["FateGiftModal","task","isSpinning","onComplete","onLater","onSkip","onStartTimer","theme","onModalOpen","playSoundEffect","useGlobalAudio","isNeomorphic","startsWith","isDark","React","useEffect","cardBg","textMain","textSub","jsx","className","children","jsxs","style","boxShadow","Sparkles","size","Dice5","category","DiceCategory","HEALTH","EFFICIENCY","LEISURE","getTaskCategoryLabel","backgroundColor","text","Coins","_generatedGold","Star","_generatedXp","duration","Clock","onClick","color","border","TaskList","memo","tasks","onCompleteTask","onGiveUpTask","onOpenEditTask","onToggleSubTask","onGiveUpSubTask","onDragStart","onDragEnd","onDragOver","draggedTask","displayMode","expandedTasks","setExpandedTasks","useState","reduce","acc","id","map","index","draggable","e","onDoubleClick","completed","stopPropagation","isGivenUp","disabled","Check","strokeWidth","X","xp","gold","reminder","enabled","time","priority","title","Play","fill","renderTaskAsList","length","GripVertical","Edit3","xmlns","width","height","viewBox","stroke","strokeLinecap","strokeLinejoin","points","renderDailyTask","toggleTaskExpanded","taskId","prev","d","_a","subTasks","sum","st","Math","round","filter","subTaskCardClass","renderMainTask","displayName","DiceTaskList","pendingTasks","completedTasks","abandonedTasks","onAbandonTask","onHelpClick","renderTaskCard","taskRecord","isPending","type","generatedGold","generatedXp","status","frequency","GlobalHelpButton","helpId","variant","TaskSearchBar","searchTerm","onSearchChange","onAddTask","handleClear","useCallback","Search","value","onChange","target","placeholder","Plus","TaskManagement","habitTasks","projectTasks","diceState","habits","projects","taskCategory","setTaskCategory","onSpinDice","onUpdateDiceState","onDiceResult","onChangeDuration","onToggleTimer","onAddFloatingReward","onShowHelp","todayStr","setIsImmersive","onOpenTaskManagement","setIsNavCollapsed","setSearchTerm","activeTasks","setActiveTasks","Set","taskSorting","setTaskSorting","taskFilter","setTaskFilter","setDisplayMode","sortTasks","sort","a","b","priorityOrder","high","medium","low","dateA","date","Date","dateB","_b","getTime","createdA","createdAt","filterTasksByStatus","isTaskOverdue","startTaskTimer","add","filterTasks","trim","searchLower","toLowerCase","name","includes","_c","some","filteredHabitTasks","useMemo","filtered","filteredProjectTasks","filteredDiceTasks","pending","abandoned","reminderDate","reminderTime","reminderDateTime","overdueDailyTasksCount","overdueRandomTasksCount","pendingRandomTasksCount","taskProgress","total","percentage","totalWeight","overallProgress","handleDiceTaskComplete","taskToComplete","find","t","updatedPendingTasks","completedTask","completedAt","toISOString","updatedCompletedTasks","completeSound","Audio","volume","play","catch","handleDiceTaskAbandon","taskToAbandon","abandonedTask","abandonedAt","updatedAbandonedTasks","ListTodo","Target","cx","cy","r","max","has","FateDice","BLIND_BOX_PRICES","AddGroupModal","isOpen","onSave","onCancel","neomorphicStyles","groupName","setGroupName","onSubmit","preventDefault","maxLength","autoFocus","ShopCatalog","inventory","setInventory","shopFilter","setShopFilter","isManageShopMode","setIsManageShopMode","balance","onPurchase","onBlindBoxPurchase","onAddNewItem","onDeleteItem","onEditItem","justPurchasedItem","groups","setGroups","isAddingGroup","setIsAddingGroup","newGroupName","setNewGroupName","handleAddNewGroup","handleCancelAddGroup","editingGroup","setEditingGroup","newGroupNameValue","setNewGroupNameValue","showAddGroupModal","setShowAddGroupModal","getButtonStyle","isActive","isSpecial","transition","filteredInventory","i","owned","lowerSearchTerm","description","sortedInventory","timeA","lastPurchased","timeB","cost","categories","baseCategories","label","count","group","isCustom","push","saveGroupEdit","g","item","cancelGroupEdit","ShoppingBag","f","onBlur","onKeyDown","key","maxWidth","Edit2","window","confirm","Trash2","Wallet","floor","Fragment","CheckCircle","Hammer","price","bg","shadow","hoverShadow","itemId","activeShadow","minHeight","image","src","alt","onError","display","fallbackDiv","parentElement","getElementsByClassName","onLoad","icon","background","marginTop","textShadow","purchaseCount","BankModal","show","onClose","bankAccount","onWithdrawAll","XCircle","totalInterestEarned","lastInterestDate","MorningProtocolModal","step","setStep","readiness","setReadiness","protocolFocus","setProtocolFocus","Zap","min","parseInt","ChevronRight","Crosshair","Activity","ReminderPopup","activeReminder","onStart","Bell","TaskEditorModal","onOpen","editingTaskId","newTaskTitle","setNewTaskTitle","newTaskType","newTaskXP","setNewTaskXP","newTaskReward","setNewTaskReward","newTaskDuration","setNewTaskDuration","newTaskPriority","setNewTaskPriority","newTaskNote","setNewTaskNote","reminderEnabled","setReminderEnabled","setReminderDate","setReminderTime","reminderRepeat","setReminderRepeat","reminderInterval","setReminderInterval","newTaskDiceCategory","setNewTaskDiceCategory","editingProjectSubTasks","setEditingProjectSubTasks","handleSaveEditTask","handleAddNewTask","isNeomorphicDark","now","subTask","newSubTasks","_","SHOP_CATALOG","Smartphone","Laptop","Headphones","Layout","Camera","Tablet","Wind","Armchair","Sofa","Footprints","Glasses","Sun","Utensils","Coffee","Gift","Fish","BookOpen","Video","Scissors","Ticket","Music","Dumbbell","Users","Wifi","Box","Calendar","Mountain","Shirt","Home","Car","Heart","Globe","Palette","LifeGame","onUpdateBalance","habitOrder","projectOrder","onToggleHabit","onUpdateHabit","onDeleteHabit","onUpdateProject","onDeleteProject","onAddHabit","onAddProject","initialTab","initialCategory","totalTasksCompleted","totalHours","challengePool","setChallengePool","todaysChallenges","completedRandomTasks","onToggleRandomChallenge","onStartAutoTask","checkInStreak","onPomodoroComplete","weeklyGoal","setWeeklyGoal","todayGoal","setTodayGoal","givenUpTasks","onUpdateHabitOrder","onUpdateProjectOrder","isNavCollapsed","todayStats","statsHistory","timeLeft","onResetTimer","onUpdateTimeLeft","onUpdateIsActive","isImmersive","onInternalImmersiveModeChange","settings","onAddDiceTask","onDeleteDiceTask","onUpdateDiceTask","onUpdateDiceConfig","onLevelChange","setModalState","useTheme","toLocaleDateString","getTextStyle","getNeomorphicStyles","getButtonStyleLocal","getCardBgStyle","level","setLevel","savings","setSavings","characterProfileRef","useRef","mainTab","setMainTab","isEditItemOpen","setIsEditItemOpen","editingItem","setEditingItem","handlePurchase","handleBlindBoxPurchase","handleDeleteItem","handleEditItemSave","handleAddNewItem","handleEditGroup","handleDeleteGroup","handleShopDragStart","handleShopDragOver","setJustPurchasedItem","draggedShopIndex","setDraggedShopIndex","async","saved","localStorage","getItem","initialInv","savedInv","JSON","parse","savedMap","Map","catItem","savedItem","get","catalogIds","customItems","cleanedInventory","catalogItem","initializeInventory","setItem","stringify","clientX","clientY","purchaseSound","confetti","particleCount","spread","origin","x","innerWidth","y","innerHeight","minPrice","maxPrice","hiddenPrice","isHidden","random","eligibleItems","selectedItem","setTimeout","cleanedImage","cleanedItem","toString","newInventory","draggedItem","splice","useShop","isAddTaskOpen","setIsAddTaskOpen","newTaskAttr","setNewTaskAttr","AttributeType","WEALTH","setNewTaskType","setEditingTaskId","setActiveReminder","reminderHistory","setReminderHistory","reminderSettings","setReminderSettings","enableBrowserNotifications","enableSoundNotifications","enableEmailNotifications","reminderTemplates","checkNotificationPermission","Notification","permission","requestPermission","sendBrowserNotification","message","body","badge","generateReminderMessage","replace","triggerReminder","lastTriggeredDate","lastTriggered","reminderMessage","soundManager","reminderInfo","reminderTemplate","slice","newReminder","checkReminders","currentDateISO","split","currentTimeStr","getHours","padStart","getMinutes","forEach","habit","repeat","getDay","getDate","project","rDate","checkSmartReminders","checkUpcomingTasks","hoursUntilReminder","lastPreReminder","timer","setInterval","handleVisibilityChange","document","visibilityState","addEventListener","clearInterval","removeEventListener","updateReminderSettings","clearReminderHistory","useReminders","completeTask","giveUpTask","TaskType","DAILY","soundManagerOptimized","MAIN","__vitePreload","default","import","__VITE_PRELOAD__","url","then","error","console","isCurrentlyCompleted","newCompletedState","history","originalData","amount","reason","newStatus","useTaskOperations","isManageTasksOpen","setIsManageTasksOpen","manageTaskTab","setManageTaskTab","isEditingSavings","tempSavings","setTempSavings","handleDragStart","handleDragEnd","handleDragOver","setDraggedTask","draggedTaskIndex","setDraggedTaskIndex","targetIndex","newOrder","draggedId","useDragAndDrop","checkInUpdated","setCheckInUpdated","activeHelp","setActiveHelp","showProtocol","setShowProtocol","protocolStep","setProtocolStep","showBankModal","setShowBankModal","setBankAccount","isMuted","setIsMuted","currentBgMusicId","currentSoundId","playBgMusic","setCurrentSoundId","initialTabRef","current","sortedHabits","h","attr","ceil","reward","Number","sortedProjects","p","baseRewardXP","baseRewardGold","subTaskCount","avgXP","avgGold","isExpanded","data","checkAndFixImages","openEditTask","taskReminder","repeatInterval","proj","GlobalGuideCard","helpContent","config","guideCardConfig","fontSize","borderRadius","shadowIntensity","showUnderlyingPrinciple","currentResult","newBankAccount","CharacterProfile","ref","totalKills","onToggleMute","onSoundChange","onImmersiveModeChange","newIsImmersive","ResponsiveContainer","LineChart","setDate","dayStr","day","focusMinutes","dayKey","Object","keys","statsDate","CartesianGrid","strokeDasharray","vertical","XAxis","dataKey","tickLine","YAxis","domain","tickFormatter","hide","Tooltip","contentStyle","borderColor","padding","formatter","Line","dot","activeDot","values","stats","days","todayDate","checkInData","diff","monday","weekDates","consecutiveDays","goldReward","xpReward","colors","streak","Package","todayDateStr","dayNames","dayIcons","Moon","dateStr","isCheckedIn","isToday","projectId","subTaskId","animationDuration","giveUpSound","result","success","startTimer","ArrowLeft","equipped","Rocket","entries","taskPool","categoryKey","categoryInfo","health","efficiency","leisure","reminderData","note","originalTaskStr","newTask","prevPool","projectReminderData","startDate","logs","dailyFocus","fears","todayFocusMinutes"],"ignoreList":[],"sources":["../../../components/shared/FateGiftModal.tsx","../../../components/TaskManagement/TaskList.tsx","../../../components/TaskManagement/DiceTaskList.tsx","../../../components/TaskManagement/TaskSearchBar.tsx","../../../components/TaskManagement/index.tsx","../../../constants/blindBox.ts","../../../components/ShopCatalog/AddGroupModal.tsx","../../../components/ShopCatalog/index.tsx","../../../components/shared/BankModal.tsx","../../../components/shared/MorningProtocolModal.tsx","../../../components/shared/ReminderPopup.tsx","../../../components/TaskManagement/TaskEditorModal.tsx","../../../constants/shopCatalog.tsx","../../../components/LifeGame.tsx","../../../hooks/useShop.ts","../../../hooks/useReminders.ts","../../../hooks/useTaskOperations.ts","../../../hooks/useDragAndDrop.ts"],"sourcesContent":["import React from 'react';\nimport { Sparkles, Coins, Star, Clock, Dice5 } from 'lucide-react';\nimport { DiceCategory, DiceTask } from '../../types';\nimport { useGlobalAudio } from '../GlobalAudioManagerOptimized';\n\ninterface FateGiftModalProps {\n  task: DiceTask & { _generatedGold?: number; _generatedXp?: number };\n  isSpinning: boolean;\n  onComplete: () => void;\n  onLater: () => void;\n  onSkip: () => void;\n  onStartTimer: (duration: number) => void;\n  theme?: 'dark' | 'light' | 'neomorphic';\n  onModalOpen?: () => void;\n}\n\nconst FateGiftModal: React.FC<FateGiftModalProps> = ({\n  task,\n  isSpinning,\n  onComplete,\n  onLater,\n  onSkip,\n  onStartTimer,\n  theme = 'dark',\n  onModalOpen\n}) => {\n  const { playSoundEffect } = useGlobalAudio();\n  \n  const isNeomorphic = theme.startsWith('neomorphic');\n  const isDark = theme === 'neomorphic-dark';\n  \n  // onModalOpen\n  React.useEffect(() => {\n    if (onModalOpen) {\n      onModalOpen();\n    }\n  }, [onModalOpen]);\n  \n  // \n  const cardBg = isNeomorphic \n    ? (isDark ? 'bg-[#1e1e2e]' : 'bg-[#e0e5ec]') \n    : 'bg-transparent';\n  const textMain = isDark ? 'text-white' : 'text-slate-700';\n  const textSub = isDark ? 'text-zinc-400' : 'text-slate-500';\n\n  const getTaskCategoryLabel = (category: DiceCategory) => {\n    switch (category) {\n      case DiceCategory.HEALTH:\n        return '';\n      case DiceCategory.EFFICIENCY:\n        return '';\n      case DiceCategory.LEISURE:\n        return '';\n      default:\n        return '';\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-[99999] bg-black/80 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in\">\n      <div className={`w-full max-w-md p-8 rounded-2xl ${cardBg} relative transform transition-all duration-500 animate-in zoom-in`}\n           style={{\n             boxShadow: isNeomorphic \n               ? (isDark \n                   ? '10px 10px 20px rgba(10, 10, 20, 0.6), -10px -10px 20px rgba(40, 40, 60, 0.8), inset 1px 1px 2px rgba(90, 90, 110, 0.3), inset -1px -1px 2px rgba(10, 10, 20, 0.6)'\n                   : '10px 10px 20px rgba(163, 177, 198, 0.6), -10px -10px 20px rgba(255, 255, 255, 1), inset 1px 1px 2px rgba(255, 255, 255, 0.9), inset -1px -1px 2px rgba(163, 177, 198, 0.3)')\n               : '0 20px 60px rgba(0, 0, 0, 0.5)'\n           }}>\n        \n        <h3 className={`font-bold mb-6 ${textMain} flex items-center justify-center gap-2 text-2xl`}>\n          <Sparkles size={28} className=\"text-yellow-500 animate-pulse drop-shadow-[0_0_10px_rgba(234,179,8,0.6)]\" />\n          <span className=\"bg-gradient-to-r from-yellow-400 via-orange-500 to-yellow-400 bg-clip-text text-transparent animate-pulse\"></span>\n        </h3>\n        \n        <div className=\"space-y-8\">\n          {/*  */}\n          <div className=\"text-center\">\n            {/* 3D -  */}\n            <div className=\"relative inline-block\">\n              {/*  */}\n              <div className={`absolute -bottom-12 left-1/2 transform -translate-x-1/2 w-40 h-10 bg-black/25 blur-2xl rounded-full ${isSpinning ? 'animate-[spin_1s_linear_infinite]' : ''}`}></div>\n              \n              <div className={`${isSpinning ? 'animate-[spin_1s_linear_infinite]' : ''} relative`}>\n                <Dice5 size={100} className=\"text-yellow-500 drop-shadow-[0_0_20px_rgba(234,179,8,0.8)] relative z-10\" />\n              </div>\n              \n              {/*  */}\n              <div className=\"absolute inset-0 rounded-full bg-yellow-500/40 blur-xl animate-pulse\"></div>\n              <div className=\"absolute inset-0 rounded-full bg-white/20 blur-lg opacity-30\"></div>\n            </div>\n            \n            <h4 className={`text-xl font-bold ${textMain} mb-3 mt-6 bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent drop-shadow-[0_0_5px_rgba(139,92,246,0.3)]`}>\n              {getTaskCategoryLabel(task.category)}\n            </h4>\n            \n            <p className={`text-lg ${textMain} font-medium p-5 rounded-xl backdrop-blur-sm transition-all duration-300 hover:shadow-lg`}\n               style={{\n                 backgroundColor: isNeomorphic \n                   ? (isDark ? '#1e1e2e' : '#e0e5ec')\n                   : (isDark ? '#1e1e2e' : '#e0e5ec'),\n                 boxShadow: isNeomorphic \n                   ? (isDark \n                       ? 'inset 3px 3px 6px rgba(10, 10, 20, 0.6), inset -3px -3px 6px rgba(40, 40, 60, 0.8)'\n                       : 'inset 3px 3px 6px rgba(163, 177, 198, 0.4), inset -3px -3px 6px rgba(255, 255, 255, 0.8)')\n                   : (isDark \n                       ? 'inset 3px 3px 6px rgba(10, 10, 20, 0.6), inset -3px -3px 6px rgba(40, 40, 60, 0.8)'\n                       : 'inset 3px 3px 6px rgba(163, 177, 198, 0.4), inset -3px -3px 6px rgba(255, 255, 255, 0.8)')\n               }}>\n              {task.text}\n            </p>\n          </div>\n          \n          {/*  -  */}\n          <div className=\"grid grid-cols-3 gap-4 text-center\">\n            <div className={`p-5 rounded-xl transition-all duration-300 hover:shadow-xl relative overflow-hidden`}\n                 style={{\n                   backgroundColor: isNeomorphic \n                     ? (isDark ? '#1e1e2e' : '#e0e5ec')\n                     : (isDark ? '#1e1e2e' : '#e0e5ec'),\n                   boxShadow: isNeomorphic \n                     ? (isDark \n                         ? '5px 5px 10px rgba(10, 10, 20, 0.6), -5px -5px 10px rgba(40, 40, 60, 0.8), inset 1px 1px 2px rgba(40, 40, 50, 0.3), inset -1px -1px 2px rgba(10, 10, 20, 0.6)'\n                         : '5px 5px 10px rgba(163, 177, 198, 0.4), -5px -5px 10px rgba(255, 255, 255, 0.8), inset 1px 1px 2px rgba(255, 255, 255, 0.9), inset -1px -1px 2px rgba(163, 177, 198, 0.3)')\n                     : (isDark \n                         ? '5px 5px 10px rgba(10, 10, 20, 0.6), -5px -5px 10px rgba(40, 40, 60, 0.8), inset 1px 1px 2px rgba(40, 40, 50, 0.3), inset -1px -1px 2px rgba(10, 10, 20, 0.6)'\n                         : '5px 5px 10px rgba(163, 177, 198, 0.4), -5px -5px 10px rgba(255, 255, 255, 0.8), inset 1px 1px 2px rgba(255, 255, 255, 0.9), inset -1px -1px 2px rgba(163, 177, 198, 0.3)')\n                 }}>\n              <div className={`text-xs ${textSub} mb-2`}></div>\n              <div className=\"text-lg font-bold text-yellow-500 flex items-center justify-center gap-1 relative z-10\">\n                <Coins size={20} className=\"drop-shadow-[0_0_8px_rgba(250,204,21,0.6)]\" />\n                +{task._generatedGold || 0}\n              </div>\n              {/*  */}\n              <div className=\"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-yellow-500/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none\"></div>\n            </div>\n            \n            <div className={`p-5 rounded-xl transition-all duration-300 hover:shadow-xl relative overflow-hidden`}\n                 style={{\n                   backgroundColor: isNeomorphic \n                     ? (isDark ? '#1e1e2e' : 'rgba(224, 229, 236, 0.9)')\n                     : isDark \n                       ? '#18181b' \n                       : 'rgba(255, 255, 255, 0.9)',\n                   boxShadow: isNeomorphic \n                     ? (isDark \n                         ? '5px 5px 10px rgba(10, 10, 20, 0.6), -5px -5px 10px rgba(40, 40, 60, 0.8), inset 1px 1px 2px rgba(40, 40, 50, 0.3), inset -1px -1px 2px rgba(10, 10, 20, 0.6)'\n                         : '5px 5px 10px rgba(163, 177, 198, 0.4), -5px -5px 10px rgba(255, 255, 255, 0.8), inset 1px 1px 2px rgba(255, 255, 255, 0.9), inset -1px -1px 2px rgba(163, 177, 198, 0.3)')\n                     : isDark \n                       ? '5px 5px 10px rgba(0, 0, 0, 0.6), -5px -5px 10px rgba(30, 30, 30, 0.8)'\n                       : '3px 3px 6px rgba(0, 0, 0, 0.1), -1px -1px 3px rgba(255, 255, 255, 0.8)'\n                 }}>\n              <div className={`text-xs ${textSub} mb-2`}></div>\n              <div className=\"text-lg font-bold text-purple-500 flex items-center justify-center gap-1 relative z-10\">\n                <Star size={20} className=\"drop-shadow-[0_0_8px_rgba(168,85,247,0.6)]\" />\n                +{task._generatedXp || 0}\n              </div>\n              {/*  */}\n              <div className=\"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-purple-500/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none\"></div>\n            </div>\n            \n            {task.duration && (\n              <div className={`p-5 rounded-xl transition-all duration-300 hover:shadow-xl relative overflow-hidden`}\n                   style={{\n                     backgroundColor: isNeomorphic \n                       ? (isDark ? '#1e1e2e' : '#e0e5ec')\n                       : (isDark ? '#1e1e2e' : '#e0e5ec'),\n                     boxShadow: isNeomorphic \n                       ? (isDark \n                           ? '5px 5px 10px rgba(10, 10, 20, 0.6), -5px -5px 10px rgba(40, 40, 60, 0.8), inset 1px 1px 2px rgba(40, 40, 50, 0.3), inset -1px -1px 2px rgba(10, 10, 20, 0.6)'\n                           : '5px 5px 10px rgba(163, 177, 198, 0.4), -5px -5px 10px rgba(255, 255, 255, 0.8), inset 1px 1px 2px rgba(255, 255, 255, 0.9), inset -1px -1px 2px rgba(163, 177, 198, 0.3)')\n                       : (isDark \n                           ? '5px 5px 10px rgba(10, 10, 20, 0.6), -5px -5px 10px rgba(40, 40, 60, 0.8), inset 1px 1px 2px rgba(40, 40, 50, 0.3), inset -1px -1px 2px rgba(10, 10, 20, 0.6)'\n                           : '5px 5px 10px rgba(163, 177, 198, 0.4), -5px -5px 10px rgba(255, 255, 255, 0.8), inset 1px 1px 2px rgba(255, 255, 255, 0.9), inset -1px -1px 2px rgba(163, 177, 198, 0.3)')\n                   }}>\n                <div className={`text-xs ${textSub} mb-2`}></div>\n                <div className=\"text-lg font-bold text-blue-500 flex items-center justify-center gap-1 relative z-10\">\n                  <Clock size={20} className=\"drop-shadow-[0_0_8px_rgba(59,130,246,0.6)]\" />\n                  {task.duration} \n                </div>\n                {/*  */}\n                <div className=\"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-500/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none\"></div>\n              </div>\n            )}\n          </div>\n          \n          {/*  -  */}\n          <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\n            {task.duration && (\n              <button \n                onClick={() => {\n                  onStartTimer(task.duration);\n                  onLater();\n                }}\n                className={`py-3.5 rounded-xl font-bold transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden`}\n                style={{\n                  backgroundColor: isNeomorphic \n                    ? (isDark ? '#1e1e2e' : '#e0e5ec') \n                    : (isDark ? '#1e1e2e' : '#e0e5ec'),\n                  color: isNeomorphic ? (isDark ? 'rgba(59, 130, 246, 0.9)' : 'rgba(59, 130, 246, 0.95)') : (isDark ? 'rgba(59, 130, 246, 0.9)' : 'rgba(59, 130, 246, 0.95)'),\n                  boxShadow: isNeomorphic \n                    ? (isDark \n                        ? '5px 5px 10px rgba(10, 10, 20, 0.6), -5px -5px 10px rgba(40, 40, 60, 0.8), inset 0 0 0 rgba(59, 130, 246, 0)' \n                        : '5px 5px 10px rgba(163, 177, 198, 0.6), -5px -5px 10px rgba(255, 255, 255, 1), inset 0 0 0 rgba(59, 130, 246, 0)') \n                    : (isDark \n                        ? '5px 5px 10px rgba(10, 10, 20, 0.6), -5px -5px 10px rgba(40, 40, 60, 0.8), inset 0 0 0 rgba(59, 130, 246, 0)' \n                        : '5px 5px 10px rgba(163, 177, 198, 0.6), -5px -5px 10px rgba(255, 255, 255, 1), inset 0 0 0 rgba(59, 130, 246, 0)'),\n                  border: 'none'\n                }}\n              >\n                <span className=\"relative z-10\"></span>\n                {/*  */}\n                <div className=\"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-white/30 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none\"></div>\n              </button>\n            )}\n            \n            <button \n              onClick={() => {\n                playSoundEffect('task-completed');\n                onComplete();\n              }}\n              className={`py-3.5 rounded-xl font-bold transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden`}\n              style={{\n                backgroundColor: isNeomorphic \n                  ? (isDark ? '#1e1e2e' : '#e0e5ec') \n                  : (isDark ? '#1e1e2e' : '#e0e5ec'),\n                color: isNeomorphic ? (isDark ? 'rgba(16, 185, 129, 0.9)' : 'rgba(16, 185, 129, 0.95)') : (isDark ? 'rgba(16, 185, 129, 0.9)' : 'rgba(16, 185, 129, 0.95)'),\n                boxShadow: isNeomorphic \n                  ? (isDark \n                      ? '5px 5px 10px rgba(10, 10, 20, 0.6), -5px -5px 10px rgba(40, 40, 60, 0.8), inset 0 0 0 rgba(16, 185, 129, 0)' \n                      : '5px 5px 10px rgba(163, 177, 198, 0.6), -5px -5px 10px rgba(255, 255, 255, 1), inset 0 0 0 rgba(16, 185, 129, 0)') \n                  : (isDark \n                      ? '5px 5px 10px rgba(10, 10, 20, 0.6), -5px -5px 10px rgba(40, 40, 60, 0.8), inset 0 0 0 rgba(16, 185, 129, 0)' \n                      : '5px 5px 10px rgba(163, 177, 198, 0.6), -5px -5px 10px rgba(255, 255, 255, 1), inset 0 0 0 rgba(16, 185, 129, 0)'),\n                border: 'none'\n              }}\n            >\n              <span className=\"relative z-10\"></span>\n              {/*  */}\n              <div className=\"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-white/30 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none\"></div>\n            </button>\n            \n            <button \n              onClick={onLater}\n              className={`py-3.5 rounded-xl font-bold transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden`}\n              style={{\n                backgroundColor: isNeomorphic \n                  ? (isDark ? '#1e1e2e' : '#e0e5ec') \n                  : (isDark ? '#1e1e2e' : '#e0e5ec'),\n                color: isNeomorphic ? (isDark ? 'rgba(255, 255, 255, 0.9)' : 'rgba(0, 0, 0, 0.9)') : (isDark ? 'rgba(255, 255, 255, 0.9)' : 'rgba(0, 0, 0, 0.9)'),\n                boxShadow: isNeomorphic \n                  ? (isDark \n                      ? '5px 5px 10px rgba(10, 10, 20, 0.6), -5px -5px 10px rgba(40, 40, 60, 0.8), inset 0 0 0 rgba(255, 255, 255, 0)' \n                      : '5px 5px 10px rgba(163, 177, 198, 0.6), -5px -5px 10px rgba(255, 255, 255, 1), inset 0 0 0 rgba(255, 255, 255, 0)') \n                  : (isDark \n                      ? '5px 5px 10px rgba(10, 10, 20, 0.6), -5px -5px 10px rgba(40, 40, 60, 0.8), inset 0 0 0 rgba(255, 255, 255, 0)' \n                      : '5px 5px 10px rgba(163, 177, 198, 0.6), -5px -5px 10px rgba(255, 255, 255, 1), inset 0 0 0 rgba(255, 255, 255, 0)'),\n                border: 'none'\n              }}\n            >\n              <span className=\"relative z-10\"></span>\n              {/*  */}\n              <div className=\"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-white/30 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none\"></div>\n            </button>\n            \n            <button \n              onClick={onSkip}\n              className={`py-3.5 rounded-xl font-bold transition-all duration-300 hover:scale-105 active:scale-95 relative overflow-hidden`}\n              style={{\n                backgroundColor: isNeomorphic \n                  ? (isDark ? '#1e1e2e' : '#e0e5ec') \n                  : (isDark ? '#1e1e2e' : '#e0e5ec'),\n                color: isNeomorphic ? (isDark ? 'rgba(255, 255, 255, 0.9)' : 'rgba(0, 0, 0, 0.9)') : (isDark ? 'rgba(255, 255, 255, 0.9)' : 'rgba(0, 0, 0, 0.9)'),\n                boxShadow: isNeomorphic \n                  ? (isDark \n                      ? '5px 5px 10px rgba(10, 10, 20, 0.6), -5px -5px 10px rgba(40, 40, 60, 0.8), inset 0 0 0 rgba(255, 255, 255, 0)' \n                      : '5px 5px 10px rgba(163, 177, 198, 0.6), -5px -5px 10px rgba(255, 255, 255, 1), inset 0 0 0 rgba(255, 255, 255, 0)') \n                  : (isDark \n                      ? '5px 5px 10px rgba(10, 10, 20, 0.6), -5px -5px 10px rgba(40, 40, 60, 0.8), inset 0 0 0 rgba(255, 255, 255, 0)' \n                      : '5px 5px 10px rgba(163, 177, 198, 0.6), -5px -5px 10px rgba(255, 255, 255, 1), inset 0 0 0 rgba(255, 255, 255, 0)'),\n                border: 'none'\n              }}\n            >\n              <span className=\"relative z-10\"></span>\n              {/*  */}\n              <div className=\"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-white/30 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none\"></div>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FateGiftModal;","/**\n *  - \n */\n\nimport React, { memo, useState } from 'react';\nimport { Check, X, Edit3, GripVertical, Play } from 'lucide-react';\nimport { TaskItem } from './types';\n\ninterface TaskListProps {\n  tasks: TaskItem[];\n  category: 'daily' | 'main';\n  onCompleteTask: (task: TaskItem, e: React.MouseEvent | null) => void;\n  onGiveUpTask: (taskId: string, e: React.MouseEvent) => void;\n  onOpenEditTask: (task: TaskItem) => void;\n  onToggleSubTask: (projectId: string, subTaskId: string) => void;\n  onGiveUpSubTask: (projectId: string, subTaskId: string) => void;\n  onStartTimer: (duration: number) => void;\n  onDragStart: (task: TaskItem, index: number) => void;\n  onDragEnd: () => void;\n  onDragOver: (e: React.DragEvent, index: number) => void;\n  draggedTask: TaskItem | null;\n  cardBg: string;\n  textMain: string;\n  theme: string;\n  isDark: boolean;\n  isNeomorphic: boolean;\n  displayMode?: 'card' | 'list';\n}\n\nconst TaskList: React.FC<TaskListProps> = memo(({\n  tasks,\n  category,\n  onCompleteTask,\n  onGiveUpTask,\n  onOpenEditTask,\n  onToggleSubTask,\n  onGiveUpSubTask,\n  onStartTimer,\n  onDragStart,\n  onDragEnd,\n  onDragOver,\n  draggedTask,\n  cardBg,\n  textMain,\n  theme,\n  isDark,\n  isNeomorphic,\n  displayMode = 'card'\n}) => {\n  // /\n  const [expandedTasks, setExpandedTasks] = useState<{[key: string]: boolean}>(\n    // \n    tasks.reduce((acc, task) => {\n      acc[task.id] = false;\n      return acc;\n    }, {} as {[key: string]: boolean})\n  );\n  \n  // /\n  const toggleTaskExpanded = (taskId: string) => {\n    setExpandedTasks(prev => ({\n      ...prev,\n      [taskId]: !prev[taskId]\n    }));\n  };\n  // \n  const renderDailyTask = (task: TaskItem, index: number) => (\n    <div \n      key={task.id} \n      draggable \n      onDragStart={() => onDragStart(task, index)} \n      onDragEnd={onDragEnd} \n      onDragOver={(e) => onDragOver(e, index)} \n      onDoubleClick={() => onOpenEditTask(task)} \n      className={`relative group rounded-lg border transition-all overflow-hidden cursor-pointer ${task.completed ? 'opacity-50 grayscale ' + (isDark ? 'bg-zinc-950/50' : 'bg-slate-100') : task.isGivenUp ? 'opacity-70 ' + (isDark ? 'bg-red-950/10 border-red-900/30' : 'bg-red-50 border-red-200') : ''} ${cardBg} ${!task.completed && !task.isGivenUp ? 'hover:shadow-lg' : (isDark ? 'border-zinc-800' : 'border-slate-200')} ${draggedTask && draggedTask.id === task.id ? 'opacity-50 scale-95' : ''}`}\n    >\n      <div className=\"p-2 sm:p-3 flex items-center gap-2 sm:gap-3\">\n        <div className=\"text-zinc-600 cursor-grab active:cursor-grabbing hidden sm:flex\"><GripVertical size={14}/></div>\n        <button onClick={(e) => { e.stopPropagation(); onCompleteTask(task, e); }} className={`w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all shrink-0 ${task.completed ? 'bg-emerald-500 border-emerald-500 text-white' : task.isGivenUp ? 'border-red-900 text-red-900 cursor-not-allowed' : (isDark ? 'border-zinc-600 hover:border-emerald-500 text-transparent' : 'border-slate-300 hover:border-emerald-500 bg-white')}`} disabled={task.isGivenUp}>\n          {task.completed && <Check size={16} strokeWidth={4} />}\n          {task.isGivenUp && <X size={16} strokeWidth={4} />}\n        </button>\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-1 sm:gap-2\">\n            <h3 className={`font-bold truncate flex-1 min-w-0 ${task.completed || task.isGivenUp ? 'line-through text-zinc-500' : textMain}`}>\n              {task.text}\n              {task.isGivenUp && <span className=\"ml-1 text-[9px] text-red-500 border border-red-900 bg-red-900/20 px-1 rounded font-bold whitespace-nowrap\"></span>}\n            </h3>\n            <button onClick={() => onOpenEditTask(task)} className=\"opacity-0 group-hover:opacity-100 text-zinc-500 hover:text-blue-500 transition-opacity flex-shrink-0\"><Edit3 size={12}/></button>\n          </div>\n          <div className=\"flex items-center gap-2 sm:gap-3 text-[11px] font-mono text-zinc-500 mt-1 flex-wrap\">\n              <span className=\"text-purple-400\"> +{task.xp}</span>\n              <span className=\"text-yellow-500\"> +{task.gold}</span>\n              <span className=\"text-blue-500\"> {task.duration || 25} </span>\n              {task.reminder && task.reminder.enabled && task.reminder.time && (\n                <span className=\"text-green-500\">{task.reminder.time}</span>\n              )}\n              <span className=\"flex items-center gap-1\">\n                <span className={`${task.priority === 'high' ? 'text-red-500' : task.priority === 'medium' ? 'text-yellow-500' : 'text-green-500'}`}>\n                  {task.priority === 'high' ? '' : task.priority === 'medium' ? '' : ''}\n                </span>\n                <span className=\"text-zinc-500\">{task.priority === 'high' ? '' : task.priority === 'medium' ? '' : ''}</span>\n              </span>\n              <span className=\"flex items-center gap-1\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-blue-500\">\n                  <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\"></polyline>\n                </svg>\n                <span className=\"text-zinc-500\">{task.completed ? '' : ''}</span>\n              </span>\n            </div>\n        </div>\n        <div className=\"flex items-center gap-1 sm:gap-2\">\n          {!task.completed && !task.isGivenUp && (\n            <button onClick={(e) => onGiveUpTask(task.id, e)} className=\"text-zinc-600 hover:text-red-500 p-2 rounded-full hover:bg-red-900/10 transition-colors\" title=\" ()\">\n              <X size={16} />\n            </button>\n          )}\n          <button onClick={() => onStartTimer(task.duration || 25)} disabled={task.completed || task.isGivenUp} className={`p-3 rounded-full text-white transition-colors group-hover:scale-105 shadow-lg ${isDark ? 'bg-zinc-800 hover:bg-emerald-600' : 'bg-blue-500 hover:bg-blue-600'} disabled:opacity-50 disabled:scale-100`}>\n            <Play size={16} fill=\"currentColor\"/>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n\n  // \n  const renderMainTask = (task: TaskItem, index: number) => (\n    <div \n      key={task.id} \n      draggable \n      onDragStart={() => onDragStart(task, index)} \n      onDragEnd={onDragEnd} \n      onDragOver={(e) => onDragOver(e, index)} \n      onDoubleClick={() => onOpenEditTask(task)} \n      className={`relative group rounded-lg border transition-all overflow-hidden cursor-pointer ${task.completed ? 'opacity-50 grayscale ' + (isDark ? 'bg-zinc-950/50' : 'bg-slate-100') : ''} ${cardBg} ${!task.completed ? 'hover:shadow-lg' : (isDark ? 'border-zinc-800' : 'border-slate-200')} ${draggedTask && draggedTask.id === task.id ? 'opacity-50 scale-95' : ''}`}\n    >\n      <div className=\"p-3 flex flex-col gap-2\">\n        <div className=\"flex items-center gap-2\">\n          <button onClick={(e) => { e.stopPropagation(); onCompleteTask(task, e); }} className={`w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all shrink-0 ${task.completed ? 'bg-emerald-500 border-emerald-500 text-white' : (isDark ? 'border-zinc-600 hover:border-emerald-500 cursor-pointer' : 'border-slate-300 hover:border-emerald-500 bg-white cursor-pointer')}`}>\n            {task.completed && <Check size={16} strokeWidth={4} />}\n          </button>\n          <div className=\"flex-1\">\n            <div className=\"flex items-center gap-1.5 mb-1 flex-wrap\">\n              <button \n                onClick={() => toggleTaskExpanded(task.id)}\n                className=\"w-4 h-4 mr-1 text-zinc-500 hover:text-blue-500 transition-colors flex items-center justify-center\"\n                title={expandedTasks[task.id] ? '' : ''}\n              >\n                {expandedTasks[task.id] ? (\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                    <path d=\"M6 9l6 6 6-6\"/>\n                  </svg>\n                ) : (\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                    <path d=\"M18 15l-6-6-6 6\"/>\n                  </svg>\n                )}\n              </button>\n              <h3 className={`font-bold ${task.completed ? 'line-through text-zinc-500' : textMain}`}>\n                {task.text}\n              </h3>\n              <button onClick={() => onOpenEditTask(task)} className=\"opacity-0 group-hover:opacity-100 text-zinc-500 hover:text-blue-500 transition-opacity ml-1 p-1 rounded-full hover:bg-blue-900/10\"><Edit3 size={12}/></button>\n            </div>\n            {/*  */}\n            <div className=\"flex items-center gap-2 sm:gap-3 text-xs font-mono text-zinc-500 flex-wrap\">\n              <span className=\"text-purple-400\"> +{task.xp}</span>\n              <span className=\"text-yellow-500\"> +{task.gold}</span>\n              <span className=\"text-blue-500\"> {task.subTasks?.reduce((sum, st) => sum + st.duration, 0)} </span>\n              {task.reminder && task.reminder.enabled && task.reminder.time && (\n                <span className=\"text-green-500\">{task.reminder.time}</span>\n              )}\n              <span className=\"flex items-center gap-1\">\n                <span className={`${task.priority === 'high' ? 'text-red-500' : task.priority === 'medium' ? 'text-yellow-500' : 'text-green-500'}`}>\n                  {task.priority === 'high' ? '' : task.priority === 'medium' ? '' : ''}\n                </span>\n                <span className=\"text-zinc-500\">{task.priority === 'high' ? '' : task.priority === 'medium' ? '' : ''}</span>\n              </span>\n              <span className=\"flex items-center gap-1\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-blue-500\">\n                  <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\"></polyline>\n                </svg>\n                <span className=\"text-zinc-500\">{task.completed ? '' : ''}</span>\n              </span>\n            </div>\n            {/*  */}\n            {!task.completed && task.subTasks && (\n              <div className=\"mt-1.5\">\n                <div className=\"flex items-center justify-end text-xs mb-0.5\">\n                  <span className=\"font-mono text-blue-500\">{Math.round((task.subTasks.filter(st => st.completed).length / task.subTasks.length) * 100)}%</span>\n                </div>\n                <div className={`w-full h-2 rounded-full overflow-hidden ${isNeomorphic ? 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]' : isDark ? 'bg-zinc-800 shadow-inner' : 'bg-slate-200 shadow-[inset_2px_2px_4px_rgba(163,177,198,0.3),inset_-2px_-2px_4px_rgba(255,255,255,0.8)]'}`}>\n                  <div \n                    className=\"h-full bg-blue-600 rounded-full transition-all duration-500 ease-out\"\n                    style={{ width: `${(task.subTasks.filter(st => st.completed).length / task.subTasks.length) * 100}%` }}\n                  ></div>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n      {/*  -  */}\n      {task.subTasks && !task.completed && expandedTasks[task.id] && (\n        <div className={`border-t p-1 sm:p-2 space-y-1 ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'border-[#1e1e2e] bg-[#1e1e2e]' : 'border-[#e0e5ec] bg-[#e0e5ec]') : isDark ? 'border-zinc-800 bg-zinc-950/30' : 'border-slate-200 bg-slate-50'}`}>\n          {task.subTasks.map((st) => {\n            // \n            let subTaskCardClass = 'flex flex-wrap items-center justify-between gap-1 sm:gap-2 p-1.5 rounded cursor-pointer group/sub transition-all';\n            \n            if (isNeomorphic) {\n              if (theme === 'neomorphic-dark') {\n                subTaskCardClass += ' bg-[#1e1e2e] shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] hover:shadow-[4px_4px_8px_rgba(0,0,0,0.4),-4px_-4px_8px_rgba(30,30,46,0.8)]';\n              } else {\n                subTaskCardClass += ' bg-[#e0e5ec] shadow-[3px_3px_6px_rgba(163,177,198,0.4),-3px_-3px_6px_rgba(255,255,255,0.8)] hover:shadow-[4px_4px_8px_rgba(163,177,198,0.5),-4px_-4px_8px_rgba(255,255,255,1)]';\n              }\n            } else {\n              subTaskCardClass += isDark ? ' hover:bg-white/5' : ' hover:bg-white border border-transparent hover:border-slate-200';\n            }\n            \n            return (\n              <div \n                key={st.id} \n                className={subTaskCardClass}\n              >\n                <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n                  <button onClick={(e) => { e.stopPropagation(); onToggleSubTask(task.id, st.id); }} className={`w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all shrink-0 ${st.completed ? 'bg-emerald-500 border-emerald-500 text-white' : (isDark ? 'border-zinc-600 hover:border-emerald-500 text-transparent' : 'border-slate-300 hover:border-emerald-500 bg-white')}`}>\n                    {st.completed && <Check size={16} strokeWidth={4} />}\n                  </button>\n                  <span className={`text-sm truncate ${st.completed ? 'text-zinc-600 line-through' : textMain} transition-all`}>\n                    {st.text}\n                  </span>\n                </div>\n                {/*  */}\n                <div className=\"flex items-center gap-1 sm:gap-2 text-xs font-mono text-zinc-500 flex-wrap mb-1 sm:mb-0\">\n                  <span className=\"text-purple-400\">+{st.xp}</span>\n                  <span className=\"text-yellow-500\">+{st.gold}</span>\n                  <span className=\"text-blue-500\">{st.duration}m</span>\n                </div>\n                <div className=\"flex items-center gap-1 sm:gap-0.5\">\n                  <button onClick={(e) => { e.stopPropagation(); onGiveUpSubTask(task.id, st.id); }} className=\"text-zinc-700 hover:text-red-500 p-2 rounded-full opacity-0 group-hover/sub:opacity-100 transition-opacity\" title=\"\">\n                    <X size={16}/>\n                  </button>\n                  <button onClick={(e) => { \n                    e.stopPropagation(); \n                    onStartTimer(st.duration || 25);\n                  }} className={`p-3 rounded-full text-white transition-colors group-hover/sub:scale-105 shadow-lg ${isDark ? 'bg-zinc-800 hover:bg-emerald-600' : 'bg-blue-500 hover:bg-blue-600'} opacity-0 group-hover/sub:opacity-100`}>\n                    <Play size={16} fill=\"currentColor\"/>\n                  </button>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n\n  // \n  const renderTaskAsList = (task: TaskItem, index: number) => (\n    <div \n      key={task.id} \n      draggable \n      onDragStart={() => onDragStart(task, index)} \n      onDragEnd={onDragEnd} \n      onDragOver={(e) => onDragOver(e, index)} \n      onDoubleClick={() => onOpenEditTask(task)} \n      className={`flex items-center gap-2 p-2 border-b ${isDark ? 'border-zinc-800' : 'border-slate-200'} ${task.completed ? 'opacity-70' : ''} ${draggedTask && draggedTask.id === task.id ? 'opacity-50 bg-blue-100 dark:bg-blue-900/20' : ''}`}\n    >\n      <button onClick={(e) => { e.stopPropagation(); onCompleteTask(task, e); }} className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all shrink-0 ${task.completed ? 'bg-emerald-500 border-emerald-500 text-white' : task.isGivenUp ? 'border-red-900 text-red-900 cursor-not-allowed' : (isDark ? 'border-zinc-600 hover:border-emerald-500 text-transparent' : 'border-slate-300 hover:border-emerald-500 bg-white')}`} disabled={task.isGivenUp}>\n        {task.completed && <Check size={12} strokeWidth={4} />}\n        {task.isGivenUp && <X size={12} strokeWidth={4} />}\n      </button>\n      <div className=\"flex-1 min-w-0\">\n        <h3 className={`text-sm font-medium truncate ${task.completed || task.isGivenUp ? 'line-through text-zinc-500' : textMain}`}>\n          {task.text}\n          {task.isGivenUp && <span className=\"ml-1 text-[9px] text-red-500 border border-red-900 bg-red-900/20 px-1 rounded font-bold whitespace-nowrap\"></span>}\n        </h3>\n        <div className=\"flex items-center gap-2 text-[10px] font-mono text-zinc-500 flex-wrap\">\n          <span className=\"text-purple-400\">+{task.xp}</span>\n          <span className=\"text-yellow-500\">+{task.gold}</span>\n          <span className=\"text-blue-500\">{task.duration || 25}m</span>\n          {task.reminder && task.reminder.enabled && task.reminder.time && (\n            <span className=\"text-green-500\">{task.reminder.time}</span>\n          )}\n          <span className={`${task.priority === 'high' ? 'text-red-500' : task.priority === 'medium' ? 'text-yellow-500' : 'text-green-500'}`}>\n            {task.priority === 'high' ? '' : task.priority === 'medium' ? '' : ''}\n          </span>\n        </div>\n      </div>\n      <div className=\"flex items-center gap-1\">\n        {!task.completed && !task.isGivenUp && (\n          <button onClick={(e) => onGiveUpTask(task.id, e)} className=\"text-zinc-600 hover:text-red-500 p-1 rounded-full hover:bg-red-900/10 transition-colors\" title=\" ()\">\n            <X size={12} />\n          </button>\n        )}\n        <button onClick={() => onStartTimer(task.duration || 25)} disabled={task.completed || task.isGivenUp} className={`p-2 rounded-full text-white transition-colors ${isDark ? 'bg-zinc-800 hover:bg-emerald-600' : 'bg-blue-500 hover:bg-blue-600'} disabled:opacity-50`}>\n          <Play size={12} fill=\"currentColor\"/>\n        </button>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"mb-4\">\n      {displayMode === 'list' ? (\n        <div className={`rounded-lg border ${cardBg} overflow-hidden`}>\n          {tasks.map((task, index) => renderTaskAsList(task, index))}\n          {tasks.length === 0 && (\n            <div className=\"p-4 text-center text-zinc-500 text-sm\">\n              \n            </div>\n          )}\n        </div>\n      ) : (\n        <div className=\"flex flex-col gap-4\">\n          {category === 'daily' && tasks.map((task, index) => renderDailyTask(task, index))}\n          {category === 'main' && tasks.map((task, index) => renderMainTask(task, index))}\n          {tasks.length === 0 && (\n            <div className={`${cardBg} border rounded-lg p-4 text-center text-zinc-500 text-sm`}>\n              \n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n});\n\nTaskList.displayName = 'TaskList';\n\nexport default TaskList;\n","/**\n * \n * \n */\n\nimport React, { memo } from 'react';\nimport { Check, X, Play, Edit3 } from 'lucide-react';\nimport { GlobalHelpButton } from '../HelpSystem';\nimport { DiceTaskRecord } from './types';\n\ninterface DiceTaskListProps {\n  pendingTasks: DiceTaskRecord[];\n  completedTasks: DiceTaskRecord[];\n  abandonedTasks?: DiceTaskRecord[];\n  onCompleteTask: (taskId: string) => void;\n  onAbandonTask: (taskId: string) => void;\n  onStartTimer: (duration: number) => void;\n  onOpenEditTask: (task: any) => void;\n  onHelpClick?: (helpId: string) => void;\n  cardBg: string;\n  textMain: string;\n  theme: string;\n  isDark: boolean;\n  isNeomorphic: boolean;\n}\n\nconst DiceTaskList: React.FC<DiceTaskListProps> = memo(({\n  pendingTasks,\n  completedTasks,\n  abandonedTasks = [],\n  onCompleteTask,\n  onAbandonTask,\n  onStartTimer,\n  onOpenEditTask,\n  onHelpClick,\n  cardBg,\n  textMain,\n  theme,\n  isDark,\n  isNeomorphic\n}) => {\n  // \n  const renderTaskCard = (taskRecord: DiceTaskRecord, isPending: boolean = false) => (\n    <div \n      key={taskRecord.id} \n      onClick={() => onOpenEditTask({...taskRecord.task, id: taskRecord.id, type: 'random', gold: taskRecord.generatedGold, xp: taskRecord.generatedXp, completed: taskRecord.status === 'completed', frequency: 'once'})}\n      className={`relative group rounded-lg border transition-all overflow-hidden cursor-pointer ${cardBg} hover:shadow-lg ${isDark ? 'border-zinc-800' : 'border-slate-200'}`}\n    >\n      <div className=\"p-2 sm:p-3 flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3\">\n        {isPending ? (\n          <button \n            onClick={(e) => {\n              e.stopPropagation();\n              onCompleteTask(taskRecord.id);\n            }} \n            className={`w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all shrink-0 ${isDark ? 'border-zinc-600 hover:border-emerald-500 text-transparent' : 'border-slate-300 hover:border-emerald-500 bg-white'} active:scale-95`}\n          >\n            <Check size={16} strokeWidth={4} className=\"text-transparent hover:text-white transition-colors\" />\n          </button>\n        ) : (\n          <div className={`w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all shrink-0 bg-emerald-500 border-emerald-500 text-white`}>\n            <Check size={16} strokeWidth={4} />\n          </div>\n        )}\n        <div className=\"flex-1 min-w-0 w-full\">\n          <div className=\"flex items-center gap-1 sm:gap-2\">\n            <h3 \n              onClick={() => onOpenEditTask({...taskRecord.task, id: taskRecord.id, type: 'random', gold: taskRecord.generatedGold, xp: taskRecord.generatedXp, completed: taskRecord.status === 'completed', frequency: 'once'})}\n              className={`font-bold truncate flex-1 min-w-0 ${isPending ? textMain : 'text-zinc-500 line-through'}`}\n            >\n              {taskRecord.task.text}\n            </h3>\n            <button \n              onClick={(e) => {\n                e.stopPropagation();\n                onOpenEditTask({...taskRecord.task, id: taskRecord.id, type: 'random', gold: taskRecord.generatedGold, xp: taskRecord.generatedXp, completed: taskRecord.status === 'completed', frequency: 'once'});\n              }} \n              className=\"opacity-70 hover:opacity-100 text-zinc-500 hover:text-blue-500 transition-all flex-shrink-0 p-1\"\n            >\n              <Edit3 size={14}/>\n            </button>\n          </div>\n          <div className=\"flex items-center gap-2 sm:gap-3 text-[10px] sm:text-[11px] font-mono text-zinc-500 mt-1 flex-wrap\">\n            <span className=\"text-purple-400\"> +{taskRecord.generatedXp}</span>\n            <span className=\"text-yellow-500\"> +{taskRecord.generatedGold}</span>\n            {taskRecord.task.duration && (\n              <span className=\"text-blue-500\"> {taskRecord.task.duration}m</span>\n            )}\n            {taskRecord.task.reminder && taskRecord.task.reminder.enabled && taskRecord.task.reminder.time && (\n              <span className=\"text-green-500\">{taskRecord.task.reminder.time}</span>\n            )}\n            {taskRecord.task.priority && (\n              <span className=\"flex items-center gap-1\">\n                <span className={`${taskRecord.task.priority === 'high' ? 'text-red-500' : taskRecord.task.priority === 'medium' ? 'text-yellow-500' : 'text-green-500'}`}>\n                  {taskRecord.task.priority === 'high' ? '' : taskRecord.task.priority === 'medium' ? '' : ''}\n                </span>\n                <span className=\"text-zinc-500\">{taskRecord.task.priority === 'high' ? '' : taskRecord.task.priority === 'medium' ? '' : ''}</span>\n              </span>\n            )}\n          </div>\n        </div>\n        {isPending && (\n          <div className=\"flex items-center gap-1 sm:gap-2 w-full sm:w-auto justify-start sm:justify-end\">\n            <button \n              onClick={(e) => {\n                e.stopPropagation();\n                onAbandonTask(taskRecord.id);\n              }} \n              className=\"text-zinc-600 hover:text-red-500 p-2 rounded-full hover:bg-red-900/10 transition-colors active:scale-95\" \n              title=\" ()\"\n            >\n              <X size={16} />\n            </button>\n            <button \n              onClick={(e) => {\n                e.stopPropagation();\n                onStartTimer(taskRecord.task.duration || 25);\n              }} \n              className={`p-3 rounded-full text-white transition-colors group-hover:scale-105 shadow-lg ${isDark ? 'bg-zinc-800 hover:bg-emerald-600' : 'bg-blue-500 hover:bg-blue-600'}`}\n            >\n              <Play size={16} fill=\"currentColor\"/>\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"space-y-4\">\n      {/*  */}\n      <div className={`${cardBg} border p-2 sm:p-4 rounded-xl transition-all duration-300`}>\n        <div className=\"flex items-center justify-between mb-3\">\n          <h4 className={`text-base sm:text-lg font-bold ${textMain}`}></h4>\n          {onHelpClick && (\n            <GlobalHelpButton \n              helpId=\"fateDice\" \n              onHelpClick={onHelpClick} \n              size={14} \n              variant=\"ghost\" \n            />\n          )}\n        </div>\n        {pendingTasks.length > 0 || completedTasks.length > 0 ? (\n          <div className=\"space-y-2\">\n            {/*  -  */}\n            {pendingTasks.map(taskRecord => renderTaskCard(taskRecord, true))}\n            \n            {/*  -  */}\n            {completedTasks.map(taskRecord => renderTaskCard(taskRecord, false))}\n          </div>\n        ) : (\n          <div className={`text-center py-8 ${isDark ? 'text-zinc-600' : 'text-slate-400'}`}>\n            <p className=\"text-sm\"></p>\n            <p className=\"text-xs mt-1\"></p>\n          </div>\n        )}\n      </div>\n\n      {/*  */}\n      {abandonedTasks.length > 0 && (\n        <div className={`${cardBg} border p-2 sm:p-4 rounded-xl transition-all duration-300`}>\n          <h4 className={`text-base sm:text-lg font-bold mb-3 ${textMain}`}></h4>\n          <div className=\"space-y-2 max-h-64 overflow-y-auto opacity-70\">\n            {abandonedTasks.map(taskRecord => (\n              <div \n                key={taskRecord.id} \n                className={`relative rounded-lg border transition-all overflow-hidden ${cardBg} ${isDark ? 'border-red-900/30 bg-red-950/10' : 'border-red-200 bg-red-50'}`}\n              >\n                <div className=\"p-2 sm:p-3 flex items-center gap-2 sm:gap-3\">\n                  <div className={`w-8 h-8 rounded-full border-2 flex items-center justify-center shrink-0 border-red-900 text-red-900`}>\n                    <X size={16} strokeWidth={4} />\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className={`font-bold truncate text-zinc-500 line-through`}>\n                      {taskRecord.task.text}\n                    </h3>\n                    <div className=\"flex items-center gap-2 sm:gap-3 text-[10px] sm:text-[11px] font-mono text-zinc-500 mt-1\">\n                      <span className=\"text-red-500\"></span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n});\n\nDiceTaskList.displayName = 'DiceTaskList';\n\nexport default DiceTaskList;\n","/**\n * \n * \n */\n\nimport React, { memo, useCallback } from 'react';\nimport { Search, X, Plus } from 'lucide-react';\n\ninterface TaskSearchBarProps {\n  searchTerm: string;\n  onSearchChange: (value: string) => void;\n  theme: string;\n  isDark: boolean;\n  isNeomorphic: boolean;\n  textMain: string;\n  textSub: string;\n  onAddTask?: () => void;\n}\n\nconst TaskSearchBar: React.FC<TaskSearchBarProps> = memo(({\n  searchTerm,\n  onSearchChange,\n  theme,\n  isDark,\n  isNeomorphic,\n  textMain,\n  textSub,\n  onAddTask\n}) => {\n  const handleClear = useCallback(() => {\n    onSearchChange('');\n  }, [onSearchChange]);\n\n  // \n  const getInputStyles = () => {\n    if (isNeomorphic) {\n      if (theme === 'neomorphic-dark') {\n        return 'bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none';\n      }\n      return 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none';\n    }\n    return isDark ? 'bg-zinc-900 border-zinc-700' : 'bg-white border-slate-200';\n  };\n\n  // \n  const getClearButtonStyles = () => {\n    if (isNeomorphic) {\n      if (theme === 'neomorphic-dark') {\n        return 'bg-[#1e1e2e] shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] hover:shadow-[1px_1px_3px_rgba(0,0,0,0.3),-1px_-1px_3px_rgba(30,30,46,0.7)] active:shadow-[inset_1px_1px_2px_rgba(0,0,0,0.3),inset_-1px_-1px_2px_rgba(30,30,46,0.7)]';\n      }\n      return 'bg-[#e0e5ec] shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] hover:shadow-[1px_1px_3px_rgba(163,177,198,0.6),-1px_-1px_3px_rgba(255,255,255,1)] active:shadow-[inset_1px_1px_2px_rgba(163,177,198,0.6),inset_-1px_-1px_2px_rgba(255,255,255,1)]';\n    }\n    return isDark ? 'hover:bg-zinc-700' : 'hover:bg-slate-100';\n  };\n\n  return (\n    <div className=\"w-full mb-4\">\n      {/*  -  */}\n      <div className=\"flex flex-row gap-2 items-center\">\n        <div className={`relative flex-1 min-w-0 flex items-center gap-2 px-3 py-2 rounded-full border transition-all ${getInputStyles()}`}>\n          {/*  */}\n          <Search size={18} className={textSub} />\n          \n          {/*  -  */}\n          <input\n            type=\"text\"\n            value={searchTerm}\n            onChange={(e) => onSearchChange(e.target.value)}\n            placeholder=\"...\"\n            className={`flex-1 bg-transparent outline-none text-sm min-w-[100px] ${textMain} placeholder:${textSub}`}\n          />\n          \n          {/*  */}\n          {searchTerm && (\n            <button\n              onClick={handleClear}\n              className={`p-1 rounded-full transition-all ${getClearButtonStyles()}`}\n              aria-label=\"\"\n            >\n              <X size={16} className={textSub} />\n            </button>\n          )}\n        </div>\n\n        {/*  -  */}\n        {onAddTask && (\n          <button\n            onClick={onAddTask}\n            className={`flex items-center justify-center gap-1.5 rounded-full transition-all font-semibold text-sm ${isNeomorphic \n              ? (theme === 'neomorphic-dark' \n                ? 'w-10 h-10 bg-[#1e1e2e] text-blue-400 shadow-[4px_4px_8px_rgba(0,0,0,0.4),-4px_-4px_8px_rgba(30,30,46,0.8)] hover:shadow-[2px_2px_4px_rgba(0,0,0,0.4),-2px_-2px_4px_rgba(30,30,46,0.8)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]' \n                : 'w-10 h-10 bg-[#e0e5ec] text-blue-600 shadow-[4px_4px_8px_rgba(163,177,198,0.6),-4px_-4px_8px_rgba(255,255,255,1)] hover:shadow-[2px_2px_4px_rgba(163,177,198,0.6),-2px_-2px_4px_rgba(255,255,255,1)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]')\n              : (isDark ? 'w-10 h-10 bg-blue-600 text-white hover:bg-blue-500' : 'w-10 h-10 bg-blue-500 text-white hover:bg-blue-400')\n            } w-10 h-10 min-w-10 min-h-10`}\n          >\n            <Plus size={18} />\n          </button>\n        )}\n      </div>\n      \n      {/*  */}\n      {searchTerm && (\n        <div className={`text-xs mt-2 ${textSub}`}>\n          : \"{searchTerm}\"\n        </div>\n      )}\n    </div>\n  );\n});\n\nTaskSearchBar.displayName = 'TaskSearchBar';\n\nexport default TaskSearchBar;\n","/**\n * \n * \n * \n * @component\n * @description \n * @param {number} balance - \n * @param {Function} onUpdateBalance - \n * @param {Array} habitTasks - \n * @param {Array} projectTasks - \n * @param {Object} diceState - \n * @param {Array} habits - \n * @param {Array} projects - \n * @param {string} taskCategory - \n * @param {Function} setTaskCategory - \n * @param {Function} onCompleteTask - \n * @param {Function} onGiveUpTask - \n * @param {Function} onOpenEditTask - \n * @param {Function} onToggleSubTask - \n * @param {Function} onGiveUpSubTask - \n * @param {Function} onStartTimer - \n * @param {Function} onDragStart - \n * @param {Function} onDragEnd - \n * @param {Function} onDragOver - \n * @param {Object} draggedTask - \n * @param {Function} onSpinDice - \n * @param {Function} onUpdateDiceState - \n * @param {Function} onDiceResult - \n * @param {Function} onChangeDuration - \n * @param {Function} onToggleTimer - \n * @param {Function} onAddFloatingReward - \n * @param {string} theme - \n * @param {string} cardBg - \n * @param {string} textMain - \n * @param {string} textSub - \n * @param {boolean} isDark - \n * @param {boolean} isNeomorphic - \n * @param {Function} onShowHelp - \n * @param {string} todayStr - \n * @param {Function} setIsImmersive - \n * @param {Function} onAddTask - \n * @param {Function} onOpenTaskManagement - \n * @param {Function} setIsNavCollapsed - \n * \n * @example\n * // \n * <TaskManagement\n *   habitTasks={habitTasks}\n *   projectTasks={projectTasks}\n *   diceState={diceState}\n *   habits={habits}\n *   projects={projects}\n *   taskCategory={taskCategory}\n *   setTaskCategory={setTaskCategory}\n *   onCompleteTask={onCompleteTask}\n *   onGiveUpTask={onGiveUpTask}\n *   onOpenEditTask={onOpenEditTask}\n *   onToggleSubTask={onToggleSubTask}\n *   onGiveUpSubTask={onGiveUpSubTask}\n *   onStartTimer={onStartTimer}\n *   onDragStart={onDragStart}\n *   onDragEnd={onDragEnd}\n *   onDragOver={onDragOver}\n *   draggedTask={draggedTask}\n *   onSpinDice={onSpinDice}\n *   onUpdateDiceState={onUpdateDiceState}\n *   onDiceResult={onDiceResult}\n *   onChangeDuration={onChangeDuration}\n *   onToggleTimer={onToggleTimer}\n *   onAddFloatingReward={onAddFloatingReward}\n *   theme={theme}\n *   cardBg={cardBg}\n *   textMain={textMain}\n *   textSub={textSub}\n *   isDark={isDark}\n *   isNeomorphic={isNeomorphic}\n *   onShowHelp={onShowHelp}\n *   todayStr={todayStr}\n *   setIsImmersive={setIsImmersive}\n *   onAddTask={onAddTask}\n *   onOpenTaskManagement={onOpenTaskManagement}\n *   setIsNavCollapsed={setIsNavCollapsed}\n * />\n * \n * @returns {JSX.Element} \n * \n * @performance React.memoprops\n * @see TaskList - \n * @see DiceTaskList - \n * @see FateDice - \n */\n\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { logInfo, logError, logWarn } from '../../utils/logger';\nimport { ListTodo, Target, Sparkles, Plus, Clock, Edit3, X } from 'lucide-react';\nimport { GlobalHelpButton } from '../HelpSystem';\nimport TaskList from './TaskList';\nimport DiceTaskList from './DiceTaskList';\nimport FateDice from '../FateDice';\nimport TaskSearchBar from './TaskSearchBar';\nimport { TaskManagementProps } from './types';\n\nconst TaskManagement: React.FC<TaskManagementProps> = React.memo(({\n  habitTasks,\n  projectTasks,\n  diceState,\n  habits = [],\n  projects = [],\n  taskCategory,\n  setTaskCategory,\n  onCompleteTask,\n  onGiveUpTask,\n  onOpenEditTask,\n  onToggleSubTask,\n  onGiveUpSubTask,\n  onStartTimer,\n  onDragStart,\n  onDragEnd,\n  onDragOver,\n  draggedTask,\n  onSpinDice,\n  onUpdateDiceState,\n  onDiceResult,\n  onChangeDuration,\n  onToggleTimer,\n  onAddFloatingReward,\n  theme,\n  cardBg,\n  textMain,\n  textSub,\n  isDark,\n  isNeomorphic,\n  onShowHelp,\n  todayStr,\n  setIsImmersive,\n  onAddTask,\n  onOpenTaskManagement,\n  setIsNavCollapsed\n}) => {\n  \n  // \n  const [searchTerm, setSearchTerm] = useState('');\n  \n  // /\n  const [expandedTasks, setExpandedTasks] = useState<{[key: string]: boolean}>(\n    // \n    projectTasks.reduce((acc, task) => {\n      acc[task.id] = false;\n      return acc;\n    }, {} as {[key: string]: boolean})\n  );\n  \n  // \n  const [activeTasks, setActiveTasks] = useState<Set<string>>(new Set());\n  \n  // \n  const [taskSorting, setTaskSorting] = useState<'priority' | 'dueDate' | 'creationDate' | 'progress'>('priority');\n  \n  // \n  const [taskFilter, setTaskFilter] = useState<'all' | 'completed' | 'pending' | 'overdue'>('all');\n  \n  // \n  const [displayMode, setDisplayMode] = useState<'card' | 'list'>('card');\n  \n  // \n  const sortTasks = useCallback((tasks: any[]) => {\n    return [...tasks].sort((a, b) => {\n      switch (taskSorting) {\n        case 'priority':\n          const priorityOrder = { high: 0, medium: 1, low: 2 };\n          return (priorityOrder[a.priority as keyof typeof priorityOrder] || 2) - \n                 (priorityOrder[b.priority as keyof typeof priorityOrder] || 2);\n        case 'dueDate':\n          const dateA = a.reminder?.date ? new Date(a.reminder.date) : new Date(8640000000000000);\n          const dateB = b.reminder?.date ? new Date(b.reminder.date) : new Date(8640000000000000);\n          return dateA.getTime() - dateB.getTime();\n        case 'creationDate':\n          const createdA = a.createdAt ? new Date(a.createdAt) : new Date(0);\n          const createdB = b.createdAt ? new Date(b.createdAt) : new Date(0);\n          return createdB.getTime() - createdA.getTime();\n        case 'progress':\n          const progressA = a.completed ? 100 : \n            a.subTasks ? (a.subTasks.filter(st => st.completed).length / a.subTasks.length) * 100 : 0;\n          const progressB = b.completed ? 100 : \n            b.subTasks ? (b.subTasks.filter(st => st.completed).length / b.subTasks.length) * 100 : 0;\n          return progressA - progressB;\n        default:\n          return 0;\n      }\n    });\n  }, [taskSorting]);\n  \n  // \n  const filterTasksByStatus = useCallback((tasks: any[]) => {\n    switch (taskFilter) {\n      case 'completed':\n        return tasks.filter(task => task.completed);\n      case 'pending':\n        return tasks.filter(task => !task.completed && !isTaskOverdue(task));\n      case 'overdue':\n        return tasks.filter(task => !task.completed && isTaskOverdue(task));\n      default:\n        return tasks;\n    }\n  }, [taskFilter]);\n  \n  // /\n  const toggleTaskExpanded = (taskId: string) => {\n    setExpandedTasks(prev => ({\n      ...prev,\n      [taskId]: !prev[taskId]\n    }));\n  };\n  \n  // \n  const startTaskTimer = (taskId: string) => {\n    setActiveTasks(prev => new Set(prev).add(taskId));\n  };\n  \n  // \n  const stopTaskTimer = (taskId: string) => {\n    setActiveTasks(prev => {\n      const newSet = new Set(prev);\n      newSet.delete(taskId);\n      return newSet;\n    });\n  };\n\n  // \n  const filterTasks = useCallback((tasks: any[], searchTerm: string) => {\n    if (!searchTerm.trim()) return tasks;\n    \n    const searchLower = searchTerm.toLowerCase();\n    return tasks.filter(task => {\n      // \n      if (task.name?.toLowerCase().includes(searchLower)) return true;\n      if (task.title?.toLowerCase().includes(searchLower)) return true;\n      if (task.text?.toLowerCase().includes(searchLower)) return true;\n      \n      // \n      if (task.subTasks) {\n        return task.subTasks.some((st: any) => \n          st.title?.toLowerCase().includes(searchLower)\n        );\n      }\n      \n      return false;\n    });\n  }, []);\n\n  // \n  const filteredHabitTasks = useMemo(() => {\n    let filtered = filterTasks(habitTasks, searchTerm);\n    filtered = filterTasksByStatus(filtered);\n    filtered = sortTasks(filtered);\n    return filtered;\n  }, [habitTasks, searchTerm, filterTasks, filterTasksByStatus, sortTasks]);\n\n  const filteredProjectTasks = useMemo(() => {\n    let filtered = filterTasks(projectTasks, searchTerm);\n    filtered = filterTasksByStatus(filtered);\n    filtered = sortTasks(filtered);\n    return filtered;\n  }, [projectTasks, searchTerm, filterTasks, filterTasksByStatus, sortTasks]);\n\n  const filteredDiceTasks = useMemo(() => {\n    if (!diceState) return { pending: [], completed: [], abandoned: [] };\n    return {\n      pending: sortTasks(filterTasks(diceState.pendingTasks || [], searchTerm)),\n      completed: filterTasks(diceState.completedTasks || [], searchTerm),\n      abandoned: filterTasks(diceState.abandonedTasks || [], searchTerm)\n    };\n  }, [diceState, searchTerm, filterTasks, sortTasks]);\n\n  // \n  const isTaskOverdue = (task: any) => {\n    if (!task.reminder || !task.reminder.enabled || task.completed || task.isGivenUp) {\n      return false;\n    }\n    \n    const reminderDate = task.reminder.date;\n    const reminderTime = task.reminder.time;\n    \n    if (!reminderDate) {\n      return false;\n    }\n    \n    // \n    const dateTimeStr = reminderTime ? `${reminderDate}T${reminderTime}` : `${reminderDate}T23:59:59`;\n    const reminderDateTime = new Date(dateTimeStr);\n    const now = new Date();\n    \n    // \n    return now > reminderDateTime;\n  };\n  \n  // \n  const overdueDailyTasksCount = useMemo(() => {\n    return habitTasks.filter(task => !task.completed && !task.isGivenUp && isTaskOverdue(task)).length;\n  }, [habitTasks]);\n  \n  const overdueMainTasksCount = useMemo(() => {\n    return projectTasks.filter(task => !task.completed && !task.isGivenUp && isTaskOverdue(task)).length;\n  }, [projectTasks]);\n  \n  const overdueRandomTasksCount = useMemo(() => {\n    if (!diceState?.pendingTasks) return 0;\n    return diceState.pendingTasks.filter((task: any) => {\n      // \n      if (task.reminder && task.reminder.enabled && task.status !== 'completed') {\n        const reminderDate = task.reminder.date;\n        const reminderTime = task.reminder.time;\n        \n        if (!reminderDate) {\n          return false;\n        }\n        \n        const dateTimeStr = reminderTime ? `${reminderDate}T${reminderTime}` : `${reminderDate}T23:59:59`;\n        const reminderDateTime = new Date(dateTimeStr);\n        const now = new Date();\n        \n        return now > reminderDateTime;\n      }\n      return false;\n    }).length;\n  }, [diceState]);\n  \n  // \n  const pendingRandomTasksCount = useMemo(() => {\n    if (!diceState?.pendingTasks) return 0;\n    return diceState.pendingTasks.length;\n  }, [diceState]);\n  \n  // useMemo\n  const taskProgress = useMemo(() => {\n    if (taskCategory === 'daily') {\n      const completed = habitTasks.filter(task => task.completed).length;\n      const total = habitTasks.length;\n      const percentage = total > 0 ? `${Math.round((completed / total) * 100)}%` : '0%';\n      return { percentage, completed, total };\n    } else if (taskCategory === 'main' || taskCategory === 'timebox') {\n      const totalWeight = projectTasks.length;\n      if (totalWeight === 0) return { percentage: '0%', completed: 0, total: 0 };\n      \n      const overallProgress = projectTasks.reduce((sum, task) => {\n        if (task.completed) {\n          return sum + 1;\n        } else {\n          const subTaskProgress = task.subTasks \n            ? task.subTasks.filter(st => st.completed).length / task.subTasks.length \n            : 0;\n          return sum + subTaskProgress;\n        }\n      }, 0);\n      \n      const percentage = `${Math.round((overallProgress / totalWeight) * 100)}%`;\n      const completed = projectTasks.filter(task => task.completed).length;\n      return { percentage, completed, total: totalWeight };\n    } else {\n      const completed = diceState?.completedTasks?.length || 0;\n      const total = (diceState?.pendingTasks?.length || 0) + completed;\n      const percentage = total > 0 ? `${Math.round((completed / total) * 100)}%` : '0%';\n      return { percentage, completed, total };\n    }\n  }, [taskCategory, habitTasks, projectTasks, diceState]);\n\n  // useCallback\n  const handleDiceTaskComplete = useCallback((taskId: string) => {\n    if (!onUpdateDiceState || !diceState) return;\n    \n    const taskToComplete = diceState.pendingTasks.find((t: any) => t.id === taskId);\n    if (!taskToComplete) return;\n    \n    const updatedPendingTasks = diceState.pendingTasks.filter((t: any) => t.id !== taskId);\n    const completedTask = {\n      ...taskToComplete,\n      status: 'completed' as const,\n      completedAt: new Date().toISOString()\n    };\n    const updatedCompletedTasks = [...diceState.completedTasks, completedTask];\n    \n    onUpdateDiceState({\n      pendingTasks: updatedPendingTasks,\n      completedTasks: updatedCompletedTasks\n    });\n    \n    // \n    const completeSound = new Audio(\"/audio/sfx/.mp3\");\n    completeSound.volume = 0.5;\n    completeSound.play().catch(() => {});\n  }, [onUpdateDiceState, diceState]);\n\n  // useCallback\n  const handleDiceTaskAbandon = useCallback((taskId: string) => {\n    if (!onUpdateDiceState || !diceState) return;\n    \n    const taskToAbandon = diceState.pendingTasks.find((t: any) => t.id === taskId);\n    if (!taskToAbandon) return;\n    \n    const updatedPendingTasks = diceState.pendingTasks.filter((t: any) => t.id !== taskId);\n    const abandonedTask = {\n      ...taskToAbandon,\n      status: 'abandoned' as const,\n      abandonedAt: new Date().toISOString()\n    };\n    const updatedAbandonedTasks = [...(diceState.abandonedTasks || []), abandonedTask];\n    \n    onUpdateDiceState({\n      pendingTasks: updatedPendingTasks,\n      abandonedTasks: updatedAbandonedTasks\n    });\n  }, [onUpdateDiceState, diceState]);\n\n  return (\n    <div className=\"space-y-4\">\n      {/*  */}\n      <div className={`${cardBg} border p-2 sm:p-3 rounded-xl flex flex-wrap items-center gap-3`}>\n        <div className=\"flex items-center gap-1 sm:gap-2 pb-1 flex-shrink-0 flex-nowrap\">\n          <button \n            onClick={() => setTaskCategory('daily')} \n            className={`flex items-center gap-1.5 px-3 py-1.5 sm:px-4 sm:py-2 rounded-full transition-all font-semibold text-xs sm:text-sm whitespace-nowrap ${\n              taskCategory === 'daily' \n                ? (isNeomorphic \n                  ? (theme === 'neomorphic-dark' \n                    ? 'bg-[#1e1e2e] text-blue-400 shadow-[inset_4px_4px_8px_rgba(0,0,0,0.4),inset_-4px_-4px_8px_rgba(30,30,46,0.8)]' \n                    : 'bg-[#e0e5ec] text-blue-600 shadow-[inset_4px_4px_8px_rgba(163,177,198,0.6),inset_-4px_-4px_8px_rgba(255,255,255,1)]')\n                  : (isDark ? 'bg-blue-600 text-white' : 'bg-blue-500 text-white'))\n                : (isNeomorphic \n                  ? (theme === 'neomorphic-dark' \n                    ? 'bg-[#1e1e2e] text-blue-400 shadow-[3px_3px_6px_rgba(0,0,0,0.4),-3px_-3px_6px_rgba(30,30,46,0.8)] hover:shadow-[2px_2px_4px_rgba(0,0,0,0.3),-2px_-2px_4px_rgba(30,30,46,0.7)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]' \n                    : 'bg-[#e0e5ec] text-blue-600 shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] hover:shadow-[2px_2px_4px_rgba(163,177,198,0.6),-2px_-2px_4px_rgba(255,255,255,1)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]')\n                  : (isDark ? 'text-zinc-400 hover:text-zinc-100' : 'text-slate-500 hover:text-slate-800'))\n            }`}\n          >\n            <ListTodo size={14} /> \n            {overdueDailyTasksCount > 0 && (\n              <span className=\"ml-1 relative flex h-5 w-5 items-center justify-center\">\n                <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75\"></span>\n                <span className=\"relative inline-flex rounded-full h-5 w-5 bg-red-500 items-center justify-center text-[8px] font-bold text-white\">\n                  {overdueDailyTasksCount > 9 ? '9+' : overdueDailyTasksCount}\n                </span>\n              </span>\n            )}\n          </button>\n          <button \n            onClick={() => setTaskCategory('timebox')} \n            className={`flex items-center gap-1.5 px-3 py-1.5 sm:px-4 sm:py-2 rounded-full transition-all font-semibold text-xs sm:text-sm whitespace-nowrap ${\n              taskCategory === 'timebox' \n                ? (isNeomorphic \n                  ? (theme === 'neomorphic-dark' \n                    ? 'bg-[#1e1e2e] text-green-400 shadow-[inset_4px_4px_8px_rgba(0,0,0,0.4),inset_-4px_-4px_8px_rgba(30,30,46,0.8)]' \n                    : 'bg-[#e0e5ec] text-green-600 shadow-[inset_4px_4px_8px_rgba(163,177,198,0.6),inset_-4px_-4px_8px_rgba(255,255,255,1)]')\n                  : (isDark ? 'bg-green-600 text-white' : 'bg-green-500 text-white'))\n                : (isNeomorphic \n                  ? (theme === 'neomorphic-dark' \n                    ? 'bg-[#1e1e2e] text-green-400 shadow-[3px_3px_6px_rgba(0,0,0,0.4),-3px_-3px_6px_rgba(30,30,46,0.8)] hover:shadow-[2px_2px_4px_rgba(0,0,0,0.3),-2px_-2px_4px_rgba(30,30,46,0.7)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]' \n                    : 'bg-[#e0e5ec] text-green-600 shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] hover:shadow-[2px_2px_4px_rgba(163,177,198,0.6),-2px_-2px_4px_rgba(255,255,255,1)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]')\n                  : (isDark ? 'text-zinc-400 hover:text-zinc-100' : 'text-slate-500 hover:text-slate-800'))\n            }`}\n          >\n            <Target size={14} /> \n          </button>\n          <button \n            onClick={() => setTaskCategory('random')} \n            className={`flex items-center gap-1.5 px-3 py-1.5 sm:px-4 sm:py-2 rounded-full transition-all font-semibold text-xs sm:text-sm whitespace-nowrap ${\n              taskCategory === 'random' \n                ? (isNeomorphic \n                  ? (theme === 'neomorphic-dark' \n                    ? 'bg-[#1e1e2e] text-yellow-400 shadow-[inset_4px_4px_8px_rgba(0,0,0,0.4),inset_-4px_-4px_8px_rgba(30,30,46,0.8)]' \n                    : 'bg-[#e0e5ec] text-yellow-600 shadow-[inset_4px_4px_8px_rgba(163,177,198,0.6),inset_-4px_-4px_8px_rgba(255,255,255,1)]')\n                  : (isDark ? 'bg-yellow-600 text-white' : 'bg-yellow-500 text-white'))\n                : (isNeomorphic \n                  ? (theme === 'neomorphic-dark' \n                    ? 'bg-[#1e1e2e] text-yellow-400 shadow-[3px_3px_6px_rgba(0,0,0,0.4),-3px_-3px_6px_rgba(30,30,46,0.8)] hover:shadow-[2px_2px_4px_rgba(0,0,0,0.3),-2px_-2px_4px_rgba(30,30,46,0.7)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]' \n                    : 'bg-[#e0e5ec] text-yellow-600 shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] hover:shadow-[2px_2px_4px_rgba(163,177,198,0.6),-2px_-2px_4px_rgba(255,255,255,1)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]')\n                  : (isDark ? 'text-zinc-400 hover:text-zinc-100' : 'text-slate-500 hover:text-slate-800'))\n            }`}\n          >\n            <Sparkles size={14} /> \n            {(overdueRandomTasksCount > 0 || pendingRandomTasksCount > 0) && (\n              <span className=\"ml-1 relative flex h-5 w-5 items-center justify-center\">\n                <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75\"></span>\n                <span className=\"relative inline-flex rounded-full h-5 w-5 bg-red-500 items-center justify-center text-[8px] font-bold text-white\">\n                  {pendingRandomTasksCount > 0 \n                    ? (pendingRandomTasksCount > 9 ? '9+' : pendingRandomTasksCount)\n                    : 0}\n                </span>\n              </span>\n            )}\n          </button>\n          <button \n            onClick={onOpenTaskManagement} \n            className={`flex items-center gap-1.5 px-3 py-1.5 sm:px-4 sm:py-2 rounded-full transition-all font-semibold text-xs sm:text-sm whitespace-nowrap ${\n              isNeomorphic \n                ? (theme === 'neomorphic-dark' \n                  ? 'bg-[#1e1e2e] text-emerald-400 shadow-[3px_3px_6px_rgba(0,0,0,0.4),-3px_-3px_6px_rgba(30,30,46,0.8)] hover:shadow-[2px_2px_4px_rgba(0,0,0,0.3),-2px_-2px_4px_rgba(30,30,46,0.7)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]' \n                  : 'bg-[#e0e5ec] text-emerald-600 shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] hover:shadow-[2px_2px_4px_rgba(163,177,198,0.6),-2px_-2px_4px_rgba(255,255,255,1)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]') \n                : (isDark ? 'bg-emerald-600 text-white' : 'bg-emerald-500 text-white')\n            }`}\n          >\n            <Plus size={14} /> \n          </button>\n          {onShowHelp && (\n            <GlobalHelpButton \n              helpId=\"tasks\" \n              onHelpClick={onShowHelp} \n              size={14} \n              variant=\"ghost\"\n              className=\"ml-1 flex-shrink-0\"\n            />\n          )}\n        </div>\n\n        {/*  */}\n        <div className=\"flex-1 min-w-[200px] sm:min-w-[300px]\">\n          <div className=\"flex items-center justify-between text-xs mb-1\">\n            <span className={textSub}><span className=\"font-black\">{taskProgress.percentage}</span><span className=\"font-black\">{taskProgress.completed} / {taskProgress.total}</span> </span>\n          </div>\n          <div className={`w-full h-2.5 rounded-full overflow-hidden ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[inset_4px_4px_8px_rgba(0,0,0,0.4),inset_-4px_-4px_8px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] shadow-[inset_4px_4px_8px_rgba(163,177,198,0.6),inset_-4px_-4px_8px_rgba(255,255,255,1)]') : (isDark ? 'bg-zinc-800 shadow-[inset_3px_3px_6px_rgba(0,0,0,0.5),inset_-3px_-3px_6px_rgba(50,50,50,0.3)]' : 'bg-slate-200 shadow-[inset_3px_3px_6px_rgba(163,177,198,0.4),inset_-3px_-3px_6px_rgba(255,255,255,0.8)]')}`}>\n            <div \n              className=\"h-full bg-blue-600 rounded-full transition-all duration-500 ease-out\"\n              style={{ width: taskProgress.percentage }}\n            ></div>\n          </div>\n        </div>\n      </div>\n\n      {/*  */}\n      <div className={`${cardBg} border p-2 sm:p-3 rounded-xl flex flex-wrap items-center gap-3`}>\n        {/*  */}\n        <div className=\"flex items-center gap-2\">\n          <label className=\"text-xs font-semibold text-zinc-500\"></label>\n          <select \n            value={taskSorting} \n            onChange={(e) => setTaskSorting(e.target.value as any)} \n            className={`text-xs px-2 py-1 rounded-lg border ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] border-[#1e1e2e] text-zinc-300' : 'bg-[#e0e5ec] border-[#e0e5ec] text-zinc-700') : isDark ? 'bg-zinc-800 border-zinc-700 text-zinc-300' : 'bg-white border-zinc-200 text-zinc-700'}`}\n          >\n            <option value=\"priority\"></option>\n            <option value=\"dueDate\"></option>\n            <option value=\"creationDate\"></option>\n            <option value=\"progress\"></option>\n          </select>\n        </div>\n        \n        {/*  */}\n        <div className=\"flex items-center gap-2\">\n          <label className=\"text-xs font-semibold text-zinc-500\"></label>\n          <select \n            value={taskFilter} \n            onChange={(e) => setTaskFilter(e.target.value as any)} \n            className={`text-xs px-2 py-1 rounded-lg border ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] border-[#1e1e2e] text-zinc-300' : 'bg-[#e0e5ec] border-[#e0e5ec] text-zinc-700') : isDark ? 'bg-zinc-800 border-zinc-700 text-zinc-300' : 'bg-white border-zinc-200 text-zinc-700'}`}\n          >\n            <option value=\"all\"></option>\n            <option value=\"pending\"></option>\n            <option value=\"completed\"></option>\n            <option value=\"overdue\"></option>\n          </select>\n        </div>\n        \n        {/*  */}\n        <div className=\"flex items-center gap-2\">\n          <label className=\"text-xs font-semibold text-zinc-500\"></label>\n          <div className=\"flex gap-1\">\n            <button \n                onClick={() => setDisplayMode('card')} \n                className={`text-xs px-2 py-1 rounded-lg transition-all ${displayMode === 'card' ? (isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] text-blue-400 shadow-[inset_4px_4px_8px_rgba(0,0,0,0.4),inset_-4px_-4px_8px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] text-blue-600 shadow-[inset_4px_4px_8px_rgba(163,177,198,0.6),inset_-4px_-4px_8px_rgba(255,255,255,1)]') : (isDark ? 'bg-blue-600 text-white' : 'bg-blue-500 text-white')) : (isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] text-blue-400 shadow-[3px_3px_6px_rgba(0,0,0,0.4),-3px_-3px_6px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] text-blue-600 shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)]') : (isDark ? 'text-zinc-400 hover:text-zinc-100' : 'text-slate-500 hover:text-slate-800'))}`}\n              >\n                \n              </button>\n              <button \n                onClick={() => setDisplayMode('list')} \n                className={`text-xs px-2 py-1 rounded-lg transition-all ${displayMode === 'list' ? (isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] text-blue-400 shadow-[inset_4px_4px_8px_rgba(0,0,0,0.4),inset_-4px_-4px_8px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] text-blue-600 shadow-[inset_4px_4px_8px_rgba(163,177,198,0.6),inset_-4px_-4px_8px_rgba(255,255,255,1)]') : (isDark ? 'bg-blue-600 text-white' : 'bg-blue-500 text-white')) : (isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] text-blue-400 shadow-[3px_3px_6px_rgba(0,0,0,0.4),-3px_-3px_6px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] text-blue-600 shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)]') : (isDark ? 'text-zinc-400 hover:text-zinc-100' : 'text-slate-500 hover:text-slate-800'))}`}\n              >\n                \n              </button>\n          </div>\n        </div>\n      </div>\n\n      {/*  */}\n      <TaskSearchBar\n        searchTerm={searchTerm}\n        onSearchChange={setSearchTerm}\n        theme={theme}\n        isDark={isDark}\n        isNeomorphic={isNeomorphic}\n        textMain={textMain}\n        textSub={textSub}\n        onAddTask={onAddTask}\n      />\n\n      {/*  */}\n      {taskCategory === 'daily' && (\n        <TaskList\n          tasks={filteredHabitTasks}\n          category=\"daily\"\n          onCompleteTask={onCompleteTask}\n          onGiveUpTask={onGiveUpTask}\n          onOpenEditTask={onOpenEditTask}\n          onToggleSubTask={onToggleSubTask}\n          onGiveUpSubTask={onGiveUpSubTask}\n          onStartTimer={onStartTimer}\n          onDragStart={onDragStart}\n          onDragEnd={onDragEnd}\n          onDragOver={onDragOver}\n          draggedTask={draggedTask}\n          cardBg={cardBg}\n          textMain={textMain}\n          theme={theme}\n          isDark={isDark}\n          isNeomorphic={isNeomorphic}\n          displayMode={displayMode}\n        />\n      )}\n\n      {taskCategory === 'main' && (\n        <TaskList\n          tasks={filteredProjectTasks}\n          category=\"main\"\n          onCompleteTask={onCompleteTask}\n          onGiveUpTask={onGiveUpTask}\n          onOpenEditTask={onOpenEditTask}\n          onToggleSubTask={onToggleSubTask}\n          onGiveUpSubTask={onGiveUpSubTask}\n          onStartTimer={onStartTimer}\n          onDragStart={onDragStart}\n          onDragEnd={onDragEnd}\n          onDragOver={onDragOver}\n          draggedTask={draggedTask}\n          cardBg={cardBg}\n          textMain={textMain}\n          theme={theme}\n          isDark={isDark}\n          isNeomorphic={isNeomorphic}\n          displayMode={displayMode}\n        />\n      )}\n\n      {taskCategory === 'timebox' && (\n        <div className={`${cardBg} border p-4 rounded-xl transition-all duration-300 hover:shadow-lg`}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"text-sm font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2\">\n              <Clock size={16}/> \n            </div>\n          </div>\n          <div className=\"space-y-6\">\n            <div className=\"text-xs text-zinc-500\">\n              Elon Musk25-90\n            </div>\n            \n            {/*  */}\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n              <div className={`${cardBg} border rounded-lg p-3 transition-all duration-300 hover:shadow-md`}>\n                <div className=\"flex justify-between items-center mb-2\">\n                  <h3 className=\"text-xs font-medium text-zinc-600\"></h3>\n                  <span className=\"text-xs text-zinc-500\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><polyline points=\"12 6 12 12 16 14\"></polyline></svg>\n                  </span>\n                </div>\n                <p className=\"text-lg font-bold text-zinc-700\">0%</p>\n                <p className=\"text-xs text-zinc-500\">0/3 </p>\n              </div>\n              \n              <div className={`${cardBg} border rounded-lg p-3 transition-all duration-300 hover:shadow-md`}>\n                <div className=\"flex justify-between items-center mb-2\">\n                  <h3 className=\"text-xs font-medium text-zinc-600\"></h3>\n                  <span className=\"text-xs text-zinc-500\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><polyline points=\"12 6 12 12 16 14\"></polyline></svg>\n                  </span>\n                </div>\n                <p className=\"text-lg font-bold text-zinc-700\">0</p>\n                <p className=\"text-xs text-zinc-500\"></p>\n              </div>\n              \n              <div className={`${cardBg} border rounded-lg p-3 transition-all duration-300 hover:shadow-md`}>\n                <div className=\"flex justify-between items-center mb-2\">\n                  <h3 className=\"text-xs font-medium text-zinc-600\"></h3>\n                  <span className=\"text-xs text-zinc-500\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><polyline points=\"12 6 12 12 16 14\"></polyline></svg>\n                  </span>\n                </div>\n                <p className=\"text-lg font-bold text-zinc-700\">105 </p>\n                <p className=\"text-xs text-zinc-500\"></p>\n              </div>\n              \n              <div className={`${cardBg} border rounded-lg p-3 transition-all duration-300 hover:shadow-md`}>\n                <div className=\"flex justify-between items-center mb-2\">\n                  <h3 className=\"text-xs font-medium text-zinc-600\"></h3>\n                  <span className=\"text-xs text-zinc-500\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\"></path><circle cx=\"9\" cy=\"7\" r=\"4\"></circle><path d=\"M22 21v-2a4 4 0 0 0-3-3.87\"></path><path d=\"M16 3.13a4 4 0 0 1 0 7.75\"></path></svg>\n                  </span>\n                </div>\n                <p className=\"text-lg font-bold text-zinc-700\">{Math.max(0, Math.round((projectTasks.filter(task => task.completed).length / Math.max(1, projectTasks.length)) * 100 - (projectTasks.length - projectTasks.filter(task => task.completed).length) * 5))}</p>\n                <p className=\"text-xs text-zinc-500\"></p>\n              </div>\n            </div>\n            \n            {/*  */}\n            <div>\n              <div className=\"flex justify-between items-center mb-3\">\n                <h2 className=\"text-base font-semibold text-zinc-700\"></h2>\n                <div className=\"flex space-x-2\">\n                  {/*  */}\n                  {onShowHelp && (\n                    <button\n                      onClick={() => onShowHelp('time-box')}\n                      className=\"flex items-center justify-center text-zinc-500 hover:text-blue-400 p-1 rounded-full\"\n                      aria-label=\"\"\n                      title=\"\"\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><path d=\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"></path><path d=\"M12 17h.01\"></path></svg>\n                    </button>\n                  )}\n                </div>\n              </div>\n              \n              {/*  */}\n              <div className=\"flex flex-col gap-4\">\n                {projectTasks.map(task => (\n                  <div \n                    key={task.id} \n                    className={`relative group rounded-lg border transition-all duration-300 overflow-hidden cursor-pointer ${task.completed ? 'opacity-50 grayscale ' + (isDark ? 'bg-zinc-950/50' : 'bg-slate-100') : ''} ${cardBg} ${!task.completed ? 'hover:shadow-lg hover:scale-[1.01]' : (isDark ? 'border-zinc-800' : 'border-slate-200')}`}\n                  >\n                    <div className=\"p-3 flex flex-col gap-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <button onClick={(e) => onCompleteTask(task, e)} className={`w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-300 shrink-0 ${task.completed ? 'bg-emerald-500 border-emerald-500 text-white scale-[1.05]' : (isDark ? 'border-zinc-600 hover:border-emerald-500 cursor-pointer hover:scale-[1.05]' : 'border-slate-300 hover:border-emerald-500 bg-white cursor-pointer hover:scale-[1.05]')}`}>\n                          {task.completed && <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"4\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"></polyline></svg>}\n                        </button>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-1.5 mb-1 flex-wrap\">\n                            {task.subTasks && !task.completed && (\n                              <button \n                                onClick={() => toggleTaskExpanded(task.id)}\n                                className=\"w-4 h-4 mr-1 text-zinc-500 hover:text-blue-500 transition-colors flex items-center justify-center\"\n                                title={expandedTasks[task.id] ? '' : ''}\n                              >\n                                {expandedTasks[task.id] ? (\n                                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                                    <path d=\"M6 9l6 6 6-6\"/>\n                                  </svg>\n                                ) : (\n                                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                                    <path d=\"M18 15l-6-6-6 6\"/>\n                                  </svg>\n                                )}\n                              </button>\n                            )}\n                            <h3 className={`font-bold ${task.completed ? 'line-through text-zinc-500' : textMain}`}>\n                              {task.text}\n                            </h3>\n                            <button onClick={() => onOpenEditTask(task)} className=\"opacity-0 group-hover:opacity-100 text-zinc-500 hover:text-blue-500 transition-opacity ml-1\"><Edit3 size={12}/></button>\n                          </div>\n                          {/*  */}\n                          <div className=\"flex items-center gap-2 sm:gap-3 text-xs font-mono text-zinc-500 flex-wrap\">\n                            <span className=\"text-purple-400\"> +{task.xp}</span>\n                            <span className=\"text-yellow-500\"> +{task.gold}</span>\n                            <span className=\"text-blue-500\"> {task.subTasks?.reduce((sum, st) => sum + st.duration, 0)} </span>\n                            {task.reminder && task.reminder.enabled && task.reminder.time && (\n                              <span className=\"text-green-500\"> {task.reminder.time}</span>\n                            )}\n                            <span className=\"flex items-center gap-1\">\n                              <span className={`${task.priority === 'high' ? 'text-red-500' : task.priority === 'medium' ? 'text-yellow-500' : 'text-green-500'}`}>\n                                {task.priority === 'high' ? '' : task.priority === 'medium' ? '' : ''}\n                              </span>\n                              <span className=\"text-zinc-500\">{task.priority === 'high' ? '' : task.priority === 'medium' ? '' : ''}</span>\n                            </span>\n                            <span className=\"flex items-center gap-1\">\n                              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-blue-500\"><polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\"></polyline></svg>\n                              <span className=\"text-zinc-500\">{task.completed ? '' : activeTasks.has(task.id) ? '' : ''}</span>\n                            </span>\n                          </div>\n                          {/*  */}\n                          {!task.completed && task.subTasks && (\n                            <div className=\"mt-1.5\">\n                              <div className=\"flex items-center justify-end text-xs mb-0.5\">\n                                <span className=\"font-mono text-blue-500\">{Math.round((task.subTasks.filter(st => st.completed).length / task.subTasks.length) * 100)}%</span>\n                              </div>\n                              <div className={`w-full h-2 rounded-full overflow-hidden ${isNeomorphic ? 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]' : isDark ? 'bg-zinc-800 shadow-inner' : 'bg-slate-200 shadow-[inset_2px_2px_4px_rgba(163,177,198,0.3),inset_-2px_-2px_4px_rgba(255,255,255,0.8)]'}`}>\n                                <div \n                                  className=\"h-full bg-blue-600 rounded-full transition-all duration-500 ease-out\"\n                                  style={{ width: `${(task.subTasks.filter(st => st.completed).length / task.subTasks.length) * 100}%` }}\n                                ></div>\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                        <div className=\"flex items-center gap-1 sm:gap-2\">\n                          {!task.completed && (\n                            <button onClick={(e) => onGiveUpTask(task.id, e)} className=\"text-zinc-600 hover:text-red-500 p-2 rounded-full hover:bg-red-900/10 transition-all duration-300 hover:scale-[1.1] active:scale-[0.95]\" title=\" ()\">\n                              <X size={16} />\n                            </button>\n                          )}\n                          <button onClick={() => { onStartTimer(task.duration || 25); startTaskTimer(task.id); }} disabled={task.completed} className={`p-3 rounded-full text-white transition-all duration-300 group-hover:scale-110 active:scale-95 shadow-lg ${isDark ? 'bg-zinc-800 hover:bg-emerald-600' : 'bg-blue-500 hover:bg-blue-600'} disabled:opacity-50 disabled:scale-100`}>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><polygon points=\"5 3 19 12 5 21 5 3\"></polygon></svg>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                    {/*  -  */}\n                    {task.subTasks && !task.completed && expandedTasks[task.id] && (\n                      <div className={`border-t p-1 sm:p-2 space-y-1 ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'border-[#1e1e2e] bg-[#1e1e2e]' : 'border-[#e0e5ec] bg-[#e0e5ec]') : isDark ? 'border-zinc-800 bg-zinc-950/30' : 'border-slate-200 bg-slate-50'}`}>\n                        {task.subTasks.map((st) => {\n                          let subTaskCardClass = 'flex flex-wrap items-center justify-between gap-1 sm:gap-2 p-1.5 rounded cursor-pointer group/sub transition-all';\n                          \n                          if (isNeomorphic) {\n                            if (theme === 'neomorphic-dark') {\n                              subTaskCardClass += ' bg-[#1e1e2e] shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] hover:shadow-[4px_4px_8px_rgba(0,0,0,0.4),-4px_-4px_8px_rgba(30,30,46,0.8)]';\n                            } else {\n                              subTaskCardClass += ' bg-[#e0e5ec] shadow-[3px_3px_6px_rgba(163,177,198,0.4),-3px_-3px_6px_rgba(255,255,255,0.8)] hover:shadow-[4px_4px_8px_rgba(163,177,198,0.5),-4px_-4px_8px_rgba(255,255,255,1)]';\n                            }\n                          } else {\n                            subTaskCardClass += isDark ? ' hover:bg-white/5' : ' hover:bg-white border border-transparent hover:border-slate-200';\n                          }\n                          \n                          return (\n                            <div \n                              key={st.id} \n                              className={subTaskCardClass}\n                            >\n                              <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n                                <button onClick={(e) => onToggleSubTask(task.id, st.id)} className={`w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all shrink-0 ${st.completed ? 'bg-emerald-500 border-emerald-500 text-white' : (isDark ? 'border-zinc-600 hover:border-emerald-500 text-transparent' : 'border-slate-300 hover:border-emerald-500 bg-white')}`}>\n                                  {st.completed && <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"4\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"></polyline></svg>}\n                                </button>\n                                <span className={`text-sm truncate ${st.completed ? 'text-zinc-600 line-through' : textMain} transition-all`}>\n                                  {st.text}\n                                </span>\n                              </div>\n                              {/*  */}\n                              <div className=\"flex items-center gap-1 sm:gap-2 text-xs font-mono text-zinc-500 flex-wrap mb-1 sm:mb-0\">\n                                <span className=\"text-purple-400\">+{st.xp}</span>\n                                <span className=\"text-yellow-500\">+{st.gold}</span>\n                                <span className=\"text-blue-500\">{st.duration}m</span>\n                              </div>\n                              <div className=\"flex items-center gap-1 sm:gap-0.5\">\n                                <button onClick={() => { onStartTimer(st.duration || 25); startTaskTimer(task.id); }} className={`p-2 rounded-full text-white transition-colors hover:scale-110 shadow-lg ${isDark ? 'bg-zinc-800 hover:bg-emerald-600' : 'bg-blue-500 hover:bg-blue-600'} opacity-0 group-hover/sub:opacity-100`}>\n                                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><polygon points=\"5 3 19 12 5 21 5 3\"></polygon></svg>\n                                </button>\n                              </div>\n                            </div>\n                          );\n                        })}\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {taskCategory === 'random' && (\n        <div className=\"space-y-4\">\n          {/* 3D */}\n          <div className=\"w-full\">\n            <FateDice \n              theme={theme}\n              diceState={diceState}\n              onSpinDice={onSpinDice}\n              onUpdateDiceState={onUpdateDiceState}\n              onAddFloatingReward={onAddFloatingReward}\n            />\n          </div>\n          \n          {/*  */}\n          <DiceTaskList\n            pendingTasks={filteredDiceTasks.pending}\n            completedTasks={filteredDiceTasks.completed}\n            abandonedTasks={filteredDiceTasks.abandoned}\n            onCompleteTask={handleDiceTaskComplete}\n            onAbandonTask={handleDiceTaskAbandon}\n            onStartTimer={onStartTimer}\n            onOpenEditTask={onOpenEditTask}\n            onHelpClick={onShowHelp}\n            cardBg={cardBg}\n            textMain={textMain}\n            theme={theme}\n            isDark={isDark}\n            isNeomorphic={isNeomorphic}\n          />\n        </div>\n      )}\n    </div>\n  );\n});\n\nTaskManagement.displayName = 'TaskManagement';\n\nexport default TaskManagement;\n","/**\n * \n * LifeGame.tsx\n */\n\n// \nexport const BLIND_BOX_PRICES = [5, 10, 20, 30, 50, 100, 200, 1000, 2000, 3000, 5000];\n\n// \nexport const BLIND_BOX_RULES = `\n1. ${BLIND_BOX_PRICES.join(', ')}\n2.  [0.5, 1.5] \n3. 5%=2\n4. \n`;\n\n// \nexport const HIDDEN_ITEM_PROBABILITY = 0.05; // 5%\n\n// \nexport function getPriceRange(blindBoxPrice: number): { min: number; max: number } {\n  return {\n    min: blindBoxPrice * 0.5,\n    max: blindBoxPrice * 1.5,\n  };\n}\n\n// \nexport function getHiddenItemPrice(blindBoxPrice: number): number {\n  return blindBoxPrice * 2;\n}\n","import React, { useState, useEffect } from 'react';\n\ninterface AddGroupModalProps {\n  isOpen: boolean;\n  onSave: (groupName: string) => void;\n  onCancel: () => void;\n  theme: string;\n  isDark: boolean;\n  isNeomorphic: boolean;\n  neomorphicStyles: {\n    bg: string;\n    border: string;\n    shadow: string;\n    hoverShadow: string;\n    activeShadow: string;\n    transition: string;\n  };\n}\n\nconst AddGroupModal: React.FC<AddGroupModalProps> = ({\n  isOpen,\n  onSave,\n  onCancel,\n  theme,\n  isDark,\n  isNeomorphic,\n  neomorphicStyles\n}) => {\n  const [groupName, setGroupName] = useState('');\n\n  useEffect(() => {\n    if (isOpen) {\n      setGroupName('');\n    }\n  }, [isOpen]);\n\n  if (!isOpen) return null;\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (groupName.trim()) {\n      onSave(groupName.trim());\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-[1001] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4\">\n      <div \n        className={`rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto ${isNeomorphic ? \n          (theme === 'neomorphic-dark' ? \n            'bg-[#1e1e2e] border border-zinc-700 shadow-[10px_10px_20px_rgba(0,0,0,0.4),-10px_-10px_20px_rgba(30,30,46,0.8)]' : \n            'bg-[#e0e5ec] border border-slate-300 shadow-[10px_10px_20px_rgba(163,177,198,0.6),-10px_-10px_20px_rgba(255,255,255,1)]') : \n          isDark ? 'bg-zinc-900/95 border border-zinc-700 shadow-zinc-900/30' : 'bg-white/95 border border-slate-200 shadow-lg'}`}\n      >\n        <form onSubmit={handleSubmit} className=\"p-6\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h3 className={`text-lg font-bold ${isDark ? 'text-white' : isNeomorphic ? 'text-zinc-700' : 'text-slate-800'}`}>\n              \n            </h3>\n            <button \n              type=\"button\"\n              onClick={onCancel}\n              className={`text-lg font-bold ${isDark ? 'text-zinc-400 hover:text-white' : isNeomorphic ? 'text-zinc-500 hover:text-zinc-700' : 'text-slate-500 hover:text-slate-700'}`}\n            >\n              \n            </button>\n          </div>\n\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"text-[10px] uppercase font-bold text-zinc-500\"></label>\n              <input\n                type=\"text\"\n                value={groupName}\n                onChange={(e) => setGroupName(e.target.value)}\n                className={`w-full bg-transparent border-b py-2 outline-none ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'border-zinc-600 text-white' : 'border-zinc-700 text-zinc-800') : 'border-zinc-700 text-zinc-800'}`}\n                placeholder=\"...\"\n                maxLength={50}\n                autoFocus\n              />\n            </div>\n          </div>\n\n          <div className=\"flex justify-end gap-2 mt-6\">\n            <button\n              type=\"button\"\n              onClick={onCancel}\n              className={`px-4 py-2 rounded-lg text-sm font-medium ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-gray-600 text-white hover:bg-gray-700' : 'bg-gray-400 text-white hover:bg-gray-500') : isDark ? 'bg-gray-600 text-white hover:bg-gray-700' : 'bg-gray-400 text-white hover:bg-gray-500'}`}\n            >\n              \n            </button>\n            <button\n              type=\"submit\"\n              className={`px-4 py-2 rounded-lg text-sm font-medium ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-blue-600 text-white hover:bg-blue-700' : 'bg-blue-500 text-white hover:bg-blue-600') : isDark ? 'bg-blue-600 text-white hover:bg-blue-700' : 'bg-blue-500 text-white hover:bg-blue-600'}`}\n            >\n              \n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default AddGroupModal;","/**\n * ShopCatalog\n * \n * \n * React.memoprops\n */\n\nimport React, { useMemo, memo, useState } from 'react';\nimport {\n  ShoppingBag, Wallet, Hammer, CheckCircle, Plus,\n  Edit2, Trash2\n} from 'lucide-react';\nimport { GlobalHelpButton } from '../HelpSystem';\nimport { BLIND_BOX_PRICES } from '../../constants/blindBox';\nimport { ShopCatalogProps } from './types';\nimport AddGroupModal from './AddGroupModal';\n\nconst ShopCatalog: React.FC<ShopCatalogProps> = memo(({\n  inventory,\n  setInventory,\n  shopFilter,\n  setShopFilter,\n  isManageShopMode,\n  setIsManageShopMode,\n  balance,\n  onPurchase,\n  onBlindBoxPurchase,\n  onAddNewItem,\n  onDeleteItem,\n  onEditItem,\n  onDragStart,\n  onDragOver,\n  onShowHelp,\n  theme,\n  isDark,\n  isNeomorphic,\n  cardBg,\n  textMain,\n  textSub,\n  neomorphicStyles,\n  justPurchasedItem,\n  groups = ['', '', '', '', '', '', ''],\n  setGroups,\n  isAddingGroup,\n  setIsAddingGroup,\n  newGroupName,\n  setNewGroupName,\n  handleAddNewGroup,\n  handleCancelAddGroup\n}) => {\n  // \n  const [searchTerm, setSearchTerm] = React.useState('');\n  \n  // \n  const [editingGroup, setEditingGroup] = useState<string | null>(null);\n  const [newGroupNameValue, setNewGroupNameValue] = useState('');\n  // /\n  const [showAddGroupModal, setShowAddGroupModal] = useState(false);\n  \n  // \n  const getButtonStyle = (isActive: boolean, isSpecial?: boolean) => {\n    if (isActive) {\n      return isSpecial ? 'bg-red-500 text-white border-red-500' : 'bg-blue-500 text-white border-blue-500';\n    }\n    if (isNeomorphic) {\n      const bgColor = theme === 'neomorphic-dark' ? 'bg-[#1e1e2e]' : 'bg-[#e0e5ec]';\n      const borderColor = theme === 'neomorphic-dark' ? 'border-[#1e1e2e]' : 'border-[#e0e5ec]';\n      const shadowColor = theme === 'neomorphic-dark' \n        ? 'shadow-[8px_8px_16px_rgba(0,0,0,0.4),-8px_-8px_16px_rgba(30,30,46,0.8)]'\n        : 'shadow-[8px_8px_16px_rgba(163,177,198,0.6),-8px_-8px_16px_rgba(255,255,255,1)]';\n      const hoverShadowColor = theme === 'neomorphic-dark' \n        ? 'hover:shadow-[10px_10px_20px_rgba(0,0,0,0.5),-10px_-10px_20px_rgba(30,30,46,1)]'\n        : 'hover:shadow-[10px_10px_20px_rgba(163,177,198,0.7),-10px_-10px_20px_rgba(255,255,255,1)]';\n      const activeShadowColor = theme === 'neomorphic-dark' \n        ? 'active:shadow-[inset_5px_5px_10px_rgba(0,0,0,0.4),inset_-5px_-5px_10px_rgba(30,30,46,0.8)]'\n        : 'active:shadow-[inset_5px_5px_10px_rgba(163,177,198,0.6),inset_-5px_-5px_10px_rgba(255,255,255,1)]';\n      \n      return `${bgColor} ${borderColor} ${shadowColor} ${hoverShadowColor} ${activeShadowColor} ${neomorphicStyles.transition}`;\n    }\n    return isDark ? 'bg-zinc-900 border-zinc-800 text-zinc-500 hover:border-zinc-700' : 'bg-white border-slate-300 text-slate-600 hover:border-slate-200';\n  };\n\n  // useMemo\n  const filteredInventory = useMemo(() => {\n    return inventory.filter(i => {\n      // \n      if (shopFilter === 'owned') {\n        if (i.owned !== true) return false;\n      } else if (shopFilter !== 'all') {\n        if (i.category !== shopFilter) return false;\n      }\n      \n      // \n      if (searchTerm) {\n        const lowerSearchTerm = searchTerm.toLowerCase();\n        return i.name.toLowerCase().includes(lowerSearchTerm) || \n               i.description.toLowerCase().includes(lowerSearchTerm) ||\n               i.category.toLowerCase().includes(lowerSearchTerm);\n      }\n      \n      return true;\n    });\n  }, [inventory, shopFilter, searchTerm]);\n\n  const sortedInventory = useMemo(() => {\n    return [...filteredInventory].sort((a, b) => {\n      const timeA = a.lastPurchased || 0;\n      const timeB = b.lastPurchased || 0;\n      if (timeA !== timeB) return timeB - timeA;\n      return a.cost - b.cost;\n    });\n  }, [filteredInventory]);\n\n  // \n  const categories = useMemo(() => {\n    const baseCategories = [\n      { id: 'all', label: '', count: inventory.length },\n      ...groups.map(group => ({\n        id: group,\n        label: group,\n        count: inventory.filter(i => i.category === group).length,\n        isCustom: true  // \n      }))\n    ];\n    \n    // \n    if (isManageShopMode && !isAddingGroup) {\n      baseCategories.push(\n        { id: 'blindbox', label: '', count: BLIND_BOX_PRICES.length },\n        { id: 'owned', label: '', count: inventory.filter(i => i.owned).length }\n      );\n    } else if (!isManageShopMode) {\n      baseCategories.push(\n        { id: 'blindbox', label: '', count: BLIND_BOX_PRICES.length },\n        { id: 'owned', label: '', count: inventory.filter(i => i.owned).length }\n      );\n    }\n    \n    return baseCategories;\n  }, [inventory, groups, isManageShopMode, isAddingGroup]);\n\n  // \n  const handleEditGroup = (groupName: string) => {\n    setEditingGroup(groupName);\n    setNewGroupNameValue(groupName);\n  };\n\n  // \n  const saveGroupEdit = () => {\n    if (editingGroup && newGroupNameValue.trim() && newGroupNameValue !== editingGroup) {\n      // \n      setGroups && setGroups((prev: string[]) => \n        prev.map(g => g === editingGroup ? newGroupNameValue.trim() : g)\n      );\n      \n      // \n      setInventory(prev => \n        prev.map(item => \n          item.category === editingGroup ? { ...item, category: newGroupNameValue.trim() } : item\n        )\n      );\n      \n      cancelGroupEdit();\n    }\n  };\n\n  // \n  const cancelGroupEdit = () => {\n    setEditingGroup(null);\n    setNewGroupNameValue('');\n  };\n\n  // \n  const handleDeleteGroup = (groupName: string) => {\n    if (window.confirm(` \"${groupName}\" `)) {\n      // \n      setGroups && setGroups((prev: string[]) => prev.filter(g => g !== groupName));\n      \n      // \n      setInventory(prev => \n        prev.map(item => \n          item.category === groupName ? { ...item, category: '' } : item\n        )\n      );\n    }\n  };\n\n  return (\n    <div className=\"max-w-5xl mx-auto space-y-6\">\n      {/*  */}\n      <div className={`p-4 rounded-3xl border ${cardBg} shadow-lg relative`}>\n        {/*  */}\n        <div className=\"flex items-center justify-between mb-3\">\n          <div className=\"flex items-center gap-2\">\n            <ShoppingBag size={18} className=\"text-yellow-500\" />\n            <span className={`text-sm font-bold ${textMain}`}></span>\n          </div>\n          {/*  */}\n          <GlobalHelpButton helpId=\"shop\" onHelpClick={onShowHelp} size={16} className=\"text-zinc-500 hover:text-white transition-colors\" />\n        </div>\n\n        {/*  -  */}\n        {!isManageShopMode && (\n          <div className=\"relative flex-1 min-w-[40px] max-w-full mb-4\">\n            <input\n              type=\"text\"\n              placeholder=\"...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className={`w-full px-4 py-1.5 rounded-[24px] text-xs border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50 ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] border-[#1e1e2e] text-white placeholder:text-zinc-500 shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] hover:shadow-[inset_3px_3px_6px_rgba(0,0,0,0.5),inset_-3px_-3px_6px_rgba(30,30,46,1)]' : 'bg-[#e0e5ec] border-[#e0e5ec] text-black placeholder:text-gray-500 shadow-[inset_2px_2px_4px_rgba(163,177,198,0.3),inset_-2px_-2px_4px_rgba(255,255,255,0.8)] hover:shadow-[inset_3px_3px_6px_rgba(163,177,198,0.4),inset_-3px_-3px_6px_rgba(255,255,255,0.9)]') : (isDark ? 'bg-zinc-900 border-zinc-800 text-white placeholder:text-zinc-500' : 'bg-white border-slate-300 text-black placeholder:text-gray-500')}`}\n            />\n            <span className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-xs\"></span>\n          </div>\n        )}\n\n        {/*  */}\n        <div className=\"flex flex-wrap gap-2 mb-4 break-words\">\n          {categories.map(f => (\n            <div key={f.id} className=\"relative group min-w-max\">\n              {editingGroup === f.label ? (\n                // \n                <div className=\"flex items-center gap-1\">\n                  <input\n                    type=\"text\"\n                    value={newGroupNameValue}\n                    onChange={(e) => setNewGroupNameValue(e.target.value)}\n                    onBlur={saveGroupEdit}\n                    onKeyDown={(e) => e.key === 'Enter' && saveGroupEdit()}\n                    className={`px-2 py-1.5 rounded-[24px] text-xs font-bold border transition-all duration-200 ${getButtonStyle(true)}`}\n                    autoFocus\n                  />\n                  <button\n                    onClick={saveGroupEdit}\n                    className=\"text-xs px-1.5 py-1 rounded-[24px] bg-green-500 text-white\"\n                  >\n                    \n                  </button>\n                  <button\n                    onClick={cancelGroupEdit}\n                    className=\"text-xs px-1.5 py-1 rounded-[24px] bg-gray-500 text-white\"\n                  >\n                    \n                  </button>\n                </div>\n              ) : (\n                // \n                <button \n                  key={f.id} \n                  onClick={() => setShopFilter(f.id as any)} \n                  className={`px-2 py-1.5 rounded-[24px] text-xs font-bold border transition-all duration-200 whitespace-nowrap overflow-hidden text-ellipsis ${getButtonStyle(shopFilter === f.id)}`}\n                  style={{ maxWidth: '120px' }}\n                >\n                  {f.label} <span className=\"text-[9px] opacity-80\">({f.count})</span>\n                  {f.isCustom && isManageShopMode && (\n                    <div className=\"ml-1 inline-flex gap-1\">\n                      <button \n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleEditGroup(f.label);\n                        }}\n                        className={`w-5 h-5 rounded-full transition-all duration-200 flex items-center justify-center ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] text-blue-400 shadow-[3px_3px_6px_rgba(0,0,0,0.4),-3px_-3px_6px_rgba(30,30,46,0.8)] hover:shadow-[4px_4px_8px_rgba(0,0,0,0.5),-4px_-4px_8px_rgba(30,30,46,0.9)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] text-blue-600 shadow-[3px_3px_6px_rgba(163,177,198,0.4),-3px_-3px_6px_rgba(255,255,255,0.8)] hover:shadow-[4px_4px_8px_rgba(163,177,198,0.5),-4px_-4px_8px_rgba(255,255,255,0.9)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.4),inset_-2px_-2px_4px_rgba(255,255,255,0.8)]') : 'bg-blue-500 text-white hover:bg-blue-600'}`}\n                      >\n                        <Edit2 size={10} />\n                      </button>\n                      <button \n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleDeleteGroup(f.label);\n                        }}\n                        className={`w-5 h-5 rounded-full transition-all duration-200 flex items-center justify-center ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] text-red-400 shadow-[3px_3px_6px_rgba(0,0,0,0.4),-3px_-3px_6px_rgba(30,30,46,0.8)] hover:shadow-[4px_4px_8px_rgba(0,0,0,0.5),-4px_-4px_8px_rgba(30,30,46,0.9)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] text-red-600 shadow-[3px_3px_6px_rgba(163,177,198,0.4),-3px_-3px_6px_rgba(255,255,255,0.8)] hover:shadow-[4px_4px_8px_rgba(163,177,198,0.5),-4px_-4px_8px_rgba(255,255,255,0.9)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.4),inset_-2px_-2px_4px_rgba(255,255,255,0.8)]') : 'bg-red-500 text-white hover:bg-red-600'}`}\n                      >\n                        <Trash2 size={10} />\n                      </button>\n                    </div>\n                  )}\n                </button>\n              )}\n            </div>\n          ))}\n        </div>\n\n        {/*  */}\n        <div className=\"flex justify-between items-center flex-wrap gap-2\">\n          <div className={`text-xs ${textSub} flex items-center gap-1`}>\n            <Wallet size={12} className=\"text-yellow-500\"/> : {Math.floor(balance)}\n          </div>\n          <div className=\"flex gap-2 items-center\">\n            {isManageShopMode && (\n              <>\n                <button \n                  onClick={onAddNewItem} \n                  className={`text-xs px-3 py-1.5 rounded-[24px] border font-bold flex items-center gap-1 transition-all ${getButtonStyle(false, true)} whitespace-nowrap`}\n                >\n                  <Plus size={12}/> \n                </button>\n                <button \n                  onClick={() => {\n                    setShowAddGroupModal(true);\n                  }}\n                  className={`text-xs px-3 py-1.5 rounded-[24px] border font-bold flex items-center gap-1 transition-all ${getButtonStyle(false, true)} whitespace-nowrap`}\n                >\n                  <Plus size={12}/> \n                </button>\n              </>\n            )}\n            <button \n              onClick={() => setIsManageShopMode(!isManageShopMode)} \n              className={`text-xs px-3 py-1.5 rounded-[24px] border font-bold flex items-center gap-1 transition-all ${getButtonStyle(isManageShopMode, true)} whitespace-nowrap`}\n            >\n              {isManageShopMode ? <CheckCircle size={12}/> : <Hammer size={12}/>} \n              {isManageShopMode ? '' : ''}\n            </button>\n          </div>\n        </div>\n\n        {/*  */}\n        <AddGroupModal\n          isOpen={showAddGroupModal}\n          onSave={(groupName) => {\n            setNewGroupName && setNewGroupName(groupName);\n            handleAddNewGroup && handleAddNewGroup();\n            setShowAddGroupModal(false);\n          }}\n          onCancel={() => {\n            setShowAddGroupModal(false);\n          }}\n          theme={theme}\n          isDark={isDark}\n          isNeomorphic={isNeomorphic}\n          neomorphicStyles={neomorphicStyles}\n        />\n      </div>\n\n\n\n      {/*  */}\n      {shopFilter === 'blindbox' ? (\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n          {BLIND_BOX_PRICES.map((price, index) => (\n            <div \n              key={index} \n              className={`p-4 rounded-xl border ${isNeomorphic ? `${neomorphicStyles.bg} ${neomorphicStyles.border} ${neomorphicStyles.shadow} ${neomorphicStyles.hoverShadow} ${neomorphicStyles.transition}` : 'hover:shadow-lg'} cursor-pointer`}\n            >\n              <div className=\"text-center\">\n                <div className=\"text-4xl mb-2\"></div>\n                <div className={`text-lg font-bold ${textMain}`}>{price}</div>\n                <div className={`text-xs ${textSub} mt-1`}> {price * 0.5}-{price * 1.5}</div>\n                {/*  */}\n                <button \n                  onClick={(e) => onBlindBoxPurchase(price, e)} \n                  className={`w-full py-1 text-[12px] font-bold rounded-md mt-1 transition-all duration-300 ${isNeomorphic ? neomorphicStyles.bg + ' text-blue-600 hover:text-blue-700' : 'bg-gradient-to-r from-yellow-600/80 to-amber-600/80 hover:from-yellow-500/90 hover:to-amber-500/90 text-white'}`}\n                >\n                  \n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      ) : (\n        /*  */\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n          {sortedInventory.map((item, index) => {\n            const itemId = item?.id || `item-${index}`;\n            return (\n              <div \n                key={itemId} \n                className={`group relative rounded-xl overflow-hidden border transition-all duration-300 ${isNeomorphic ? `${neomorphicStyles.bg} ${neomorphicStyles.border} ${neomorphicStyles.shadow} ${neomorphicStyles.hoverShadow} ${neomorphicStyles.transition} group-hover:${neomorphicStyles.activeShadow}` : 'hover:shadow-lg'} ${item.type === 'physical' && item.owned ? 'opacity-50' : ''} ${isManageShopMode ? 'border-red-500/30' : ''} cursor-pointer`} \n                style={{ minHeight: '280px' }}\n              >\n                {/*  -  */}\n                {isManageShopMode && (\n                  <div className=\"absolute top-2 right-2 flex gap-2 z-10\">\n                    <button \n                      onClick={(e) => { e.stopPropagation(); onEditItem({...item}); }}\n                      className={`w-7 h-7 rounded-full transition-all duration-200 flex items-center justify-center ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] text-blue-400 shadow-[3px_3px_6px_rgba(0,0,0,0.4),-3px_-3px_6px_rgba(30,30,46,0.8)] hover:shadow-[4px_4px_8px_rgba(0,0,0,0.5),-4px_-4px_8px_rgba(30,30,46,0.9)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] text-blue-600 shadow-[3px_3px_6px_rgba(163,177,198,0.4),-3px_-3px_6px_rgba(255,255,255,0.8)] hover:shadow-[4px_4px_8px_rgba(163,177,198,0.5),-4px_-4px_8px_rgba(255,255,255,0.9)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.4),inset_-2px_-2px_4px_rgba(255,255,255,0.8)]') : 'bg-blue-500 text-white hover:bg-blue-600'}`}\n                    >\n                      <Edit2 size={12}/>\n                    </button>\n                    <button \n                      onClick={(e) => onDeleteItem(e, item.id)} \n                      className={`w-7 h-7 rounded-full transition-all duration-200 flex items-center justify-center ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] text-red-400 shadow-[3px_3px_6px_rgba(0,0,0,0.4),-3px_-3px_6px_rgba(30,30,46,0.8)] hover:shadow-[4px_4px_8px_rgba(0,0,0,0.5),-4px_-4px_8px_rgba(30,30,46,0.9)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] text-red-600 shadow-[3px_3px_6px_rgba(163,177,198,0.4),-3px_-3px_6px_rgba(255,255,255,0.8)] hover:shadow-[4px_4px_8px_rgba(163,177,198,0.5),-4px_-4px_8px_rgba(255,255,255,0.9)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.4),inset_-2px_-2px_4px_rgba(255,255,255,0.8)]') : 'bg-red-500 text-white hover:bg-red-600'}`}\n                    >\n                      <Trash2 size={12}/>\n                    </button>\n                  </div>\n                )}\n                \n                {/*  */}\n                {/* images.unsplash.com */}\n                {item.image && item.image.includes('images.unsplash.com') ? (\n                  <div className=\"product-image absolute top-0 left-0 w-full h-full z-0\">\n                    <img \n                      src={item.image} \n                      alt={item.name}\n                      className=\"w-full h-full object-cover transition-all duration-500 group-hover:scale-105\"\n                      onError={(e) => {\n                        const target = e.target as HTMLImageElement;\n                        target.style.display = 'none';\n                        const fallbackDiv = target.parentElement?.getElementsByClassName('fallback-bg')[0] as HTMLElement;\n                        if (fallbackDiv) fallbackDiv.style.display = 'flex';\n                        \n                        if (process.env.NODE_ENV === 'development') {\n                          console.warn(`: ${item.name}`, item.image);\n                        }\n                      }}\n                      onLoad={(e) => {\n                        const target = e.target as HTMLImageElement;\n                        target.style.display = 'block';\n                        const fallbackDiv = target.parentElement?.getElementsByClassName('fallback-bg')[0] as HTMLElement;\n                        if (fallbackDiv) fallbackDiv.style.display = 'none';\n                      }}\n                    />\n                    <div className=\"fallback-bg absolute inset-0 flex items-center justify-center\" style={{ display: 'none', backgroundColor: isDark ? '#1a1a2e' : '#e0e5ec' }}>\n                      <div className=\"text-5xl\">\n                        {/* iconReact0 */}\n                        {typeof item.icon === 'number' ? '' : item.icon}\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  /*  */\n                  <div className=\"absolute inset-0 flex items-center justify-center z-0\" style={{ backgroundColor: isDark ? '#1a1a2e' : '#e0e5ec' }}>\n                    <div className=\"text-6xl\">\n                      {/* iconReact0 */}\n                      {typeof item.icon === 'number' ? '' : item.icon}\n                    </div>\n                  </div>\n                )}\n                \n                {/*  -  */}\n                <div className=\"gradient-overlay absolute left-0 top-[70px] w-full h-[calc(100%-70px)] z-10 pointer-events-none\" style={{\n                  background: isDark ? \n                    'linear-gradient(to bottom, rgba(30,30,46,0) 0%, rgba(30,30,46,0.5) 20%, rgba(30,30,46,0.8) 50%, rgba(30,30,46,0.95) 100%)' : \n                    'linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 30%, rgba(255,255,255,0.6) 60%, rgba(255,255,255,0.8) 100%)',\n                }}></div>\n                \n                {/*  */}\n                <div className=\"product-info relative z-20 p-5 text-center flex flex-col justify-between\" style={{ marginTop: '65px', height: 'calc(100% - 65px)' }}>\n                  <div>\n                    {/*  */}\n                    <div className={`bg-opacity-95 px-4 py-1.5 text-sm font-bold rounded-full mx-auto my-2 inline-block ${isDark ? 'bg-yellow-600/30 text-yellow-400 border border-yellow-600/50' : 'bg-[#fff3cd] text-[#fd7e14]'}`}>\n                      {item.cost}\n                    </div>\n                    \n                    {/*  */}\n                    <h4 className={`font-bold text-xl text-white mt-2 mb-1 text-shadow w-full break-words`} style={{textShadow: '0 1px 2px rgba(0,0,0,0.8)'}}>\n                      {item.name}\n                    </h4>\n                    \n                    {/*  */}\n                    {item.purchaseCount !== undefined && item.purchaseCount > 0 && (\n                      <span className={`text-sm ${isDark ? 'text-zinc-300' : 'text-zinc-500'} font-bold`}>\n                         x{item.purchaseCount}\n                      </span>\n                    )}\n                    \n                    {/*  */}\n                    <p className={`text-sm ${isDark ? 'text-white/90' : 'text-zinc-700'} mt-1 mb-6 line-clamp-2 w-full max-w-[240px] mx-auto text-shadow`} style={{textShadow: isDark ? '0 1px 2px rgba(0,0,0,0.8)' : '0 1px 2px rgba(255,255,255,0.8)'}}>\n                      {item.description}\n                    </p>\n                  </div>\n                  \n                  {/*  */}\n                  <button \n                    onClick={(e) => onPurchase(item, e)} \n                    className={`inline-block px-8 py-2.5 text-sm font-bold rounded-full transition-all duration-300 shadow-md hover:shadow-lg ${item.type === 'physical' && item.owned ? 'bg-zinc-800/30 text-zinc-500 hover:bg-zinc-700/50' : (isDark ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-500 hover:to-purple-500' : 'bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:from-blue-400 hover:to-purple-400')}`}\n                  >\n                    {item.type === 'physical' && item.owned ? '' : ''}\n                  </button>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n});\n\nShopCatalog.displayName = 'ShopCatalog';\n\nexport default ShopCatalog;\n\nShopCatalog.displayName = 'ShopCatalog';\n","import React from 'react';\nimport { XCircle, Wallet } from 'lucide-react';\n\ninterface BankModalProps {\n  show: boolean;\n  onClose: () => void;\n  bankAccount: {\n    balance: number;\n    totalInterestEarned: number;\n    lastInterestDate: string;\n  };\n  onWithdrawAll: () => void;\n  isDark: boolean;\n  isNeomorphic: boolean;\n  theme: string;\n  textMain: string;\n  textSub: string;\n}\n\nconst BankModal: React.FC<BankModalProps> = ({\n  show,\n  onClose,\n  bankAccount,\n  onWithdrawAll,\n  isDark,\n  isNeomorphic,\n  theme,\n  textMain,\n  textSub\n}) => {\n  if (!show) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-[100000] bg-black/90 backdrop-blur-xl flex items-center justify-center p-4 animate-in fade-in duration-300\">\n      <div className={`max-w-lg w-full bg-zinc-900 border border-green-900/50 rounded-2xl p-8 shadow-2xl relative overflow-hidden`}>\n        <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 to-yellow-500\"></div>\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-2xl font-black text-white flex items-center gap-2\">\n            <Wallet className=\"text-green-500\" size={32} />\n            \n          </h2>\n          <button onClick={onClose} className=\"text-zinc-500 hover:text-white transition-colors\">\n            <XCircle size={24} />\n          </button>\n        </div>\n        \n        <div className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className={`p-6 rounded-xl border ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] border-[#1e1e2e] shadow-[8px_8px_16px_rgba(0,0,0,0.4),-8px_-8px_16px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] border-[#e0e5ec] shadow-[8px_8px_16px_rgba(163,177,198,0.6),-8px_-8px_16px_rgba(255,255,255,1)]') : (isDark ? 'bg-zinc-800 border-zinc-700' : 'bg-white border-slate-200')}`}>\n              <div className={`text-sm uppercase font-bold mb-2 ${textSub}`}></div>\n              <div className=\"text-4xl font-black text-yellow-500\">{bankAccount.balance} G</div>\n              <div className={`text-xs mt-1 ${textSub}`}> 1% </div>\n            </div>\n            <div className={`p-6 rounded-xl border ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] border-[#1e1e2e] shadow-[8px_8px_16px_rgba(0,0,0,0.4),-8px_-8px_16px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] border-[#e0e5ec] shadow-[8px_8px_16px_rgba(163,177,198,0.6),-8px_-8px_16px_rgba(255,255,255,1)]') : (isDark ? 'bg-zinc-800 border-zinc-700' : 'bg-white border-slate-200')}`}>\n              <div className={`text-sm uppercase font-bold mb-2 ${textSub}`}></div>\n              <div className=\"text-4xl font-black text-green-500\">{bankAccount.totalInterestEarned} G</div>\n              <div className={`text-xs mt-1 ${textSub}`}></div>\n            </div>\n          </div>\n          \n          <div className=\"space-y-4\">\n            <div className=\"flex justify-between items-center\">\n              <div className=\"text-sm text-zinc-500\"></div>\n              <div className=\"text-sm font-mono text-zinc-300\">{bankAccount.lastInterestDate}</div>\n            </div>\n            <div className=\"flex justify-between items-center\">\n              <div className=\"text-sm text-zinc-500\"></div>\n              <div className=\"text-sm font-mono text-green-500\">{Math.floor(bankAccount.balance * 0.01)} G</div>\n            </div>\n          </div>\n          \n          <div className=\"flex flex-col gap-3\">\n            <button \n              onClick={onWithdrawAll}\n              className={`w-full py-4 rounded-lg transition-colors ${isNeomorphic ? \n                (bankAccount.balance > 0 ? \n                  theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] text-green-400 shadow-[inset_5px_5px_10px_rgba(0,0,0,0.4),inset_-5px_-5px_10px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] text-green-700 shadow-[inset_5px_5px_10px_rgba(163,177,198,0.6),inset_-5px_-5px_10px_rgba(255,255,255,1)]'\n                : \n                  isDark ? 'bg-zinc-800 text-zinc-500' : 'bg-slate-200 text-slate-500'\n                ) : \n                (bankAccount.balance <= 0 ? \n                  isDark ? 'bg-zinc-800 text-zinc-500' : 'bg-slate-200 text-slate-500'\n                : \n                  isDark ? 'bg-green-900/30 text-green-400 hover:bg-green-800/50' : 'bg-green-100 text-green-700 hover:bg-green-200'\n                )\n              }`} \n              disabled={bankAccount.balance <= 0}\n            >\n              \n            </button>\n            <button \n              onClick={onClose}\n              className={`w-full py-4 rounded-lg transition-colors ${isNeomorphic ? \n                theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] text-zinc-200 shadow-[8px_8px_16px_rgba(0,0,0,0.4),-8px_-8px_16px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] text-zinc-700 shadow-[8px_8px_16px_rgba(163,177,198,0.6),-8px_-8px_16px_rgba(255,255,255,1)]'\n              : \n                isDark ? 'bg-zinc-800 text-zinc-300 hover:bg-zinc-700' : 'bg-white border border-slate-200 text-slate-700 hover:bg-slate-50'\n              }`}\n            >\n              \n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BankModal;\n","import React from 'react';\nimport { Zap, Crosshair, Activity, ChevronRight } from 'lucide-react';\n\ninterface MorningProtocolModalProps {\n  show: boolean;\n  step: number;\n  setStep: (step: number) => void;\n  readiness: number;\n  setReadiness: (readiness: number) => void;\n  protocolFocus: string;\n  setProtocolFocus: (focus: string) => void;\n  onComplete: () => void;\n}\n\nconst MorningProtocolModal: React.FC<MorningProtocolModalProps> = ({\n  show,\n  step,\n  setStep,\n  readiness,\n  setReadiness,\n  protocolFocus,\n  setProtocolFocus,\n  onComplete\n}) => {\n  if (!show) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-[100000] bg-black/90 backdrop-blur-xl flex items-center justify-center p-4 animate-in fade-in duration-300\">\n      <div className=\"max-w-lg w-full bg-zinc-900 border border-emerald-900/50 rounded-2xl p-8 shadow-2xl relative overflow-hidden\">\n        <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-blue-500\"></div>\n        {step === 0 && (\n          <div className=\"space-y-6 animate-in slide-in-from-right-8\">\n            <div className=\"flex items-center gap-3 mb-4\"><Zap size={32} className=\"text-emerald-500\"/><h2 className=\"text-2xl font-black text-white\"> (BIO-SCAN)</h2></div>\n            <p className=\"text-zinc-400 text-sm\"></p>\n            <div className=\"space-y-4 pt-4\">\n              <div className=\"flex justify-between text-xs font-bold text-emerald-400 uppercase\">\n                <span> (Low)</span>\n                <span>{readiness}%</span>\n                <span> (Peak)</span>\n              </div>\n              <input \n                type=\"range\" \n                min=\"0\" \n                max=\"100\" \n                value={readiness} \n                onChange={(e) => setReadiness(parseInt(e.target.value))} \n                className=\"w-full h-2 bg-zinc-800 rounded-lg appearance-none cursor-pointer accent-emerald-500\"\n              />\n            </div>\n            <button \n              onClick={() => setStep(1)} \n              className=\"w-full py-4 bg-zinc-800 hover:bg-zinc-700 text-white font-bold rounded-xl mt-4 flex items-center justify-center gap-2 transition-all\"\n            >\n               <ChevronRight size={16}/>\n            </button>\n          </div>\n        )}\n        {step === 1 && (\n          <div className=\"space-y-6 animate-in slide-in-from-right-8\">\n            <div className=\"flex items-center gap-3 mb-4\"><Crosshair size={32} className=\"text-red-500\"/><h2 className=\"text-2xl font-black text-white\"> (LASER FOCUS)</h2></div>\n            <p className=\"text-zinc-400 text-sm\"></p>\n            <input \n              autoFocus \n              value={protocolFocus} \n              onChange={e => setProtocolFocus(e.target.value)} \n              placeholder=\"...\" \n              className=\"w-full bg-zinc-950 border border-zinc-700 p-4 rounded-xl text-lg font-bold text-white outline-none focus:border-red-500 transition-colors\" \n              onKeyDown={e => e.key === 'Enter' && setStep(2)}\n            />\n            <button \n              onClick={() => setStep(2)} \n              disabled={!protocolFocus.trim()} \n              className=\"w-full py-4 bg-zinc-800 hover:bg-zinc-700 disabled:opacity-50 text-white font-bold rounded-xl mt-4 flex items-center justify-center gap-2 transition-all\"\n            >\n               <ChevronRight size={16}/>\n            </button>\n          </div>\n        )}\n        {step === 2 && (\n          <div className=\"space-y-8 animate-in slide-in-from-right-8 text-center\">\n            <div className=\"flex flex-col items-center gap-4 mb-4\">\n              <Activity size={64} className=\"text-blue-500 animate-pulse\"/>\n              <h2 className=\"text-2xl font-black text-white uppercase tracking-widest\"></h2>\n            </div>\n            <div className=\"bg-zinc-950/50 p-6 rounded-xl border border-zinc-800 italic text-zinc-300\">\n              \"\"\n            </div>\n            <button \n              onClick={onComplete} \n              className=\"w-full py-4 bg-gradient-to-r from-blue-600 to-emerald-600 hover:from-blue-500 hover:to-emerald-500 text-white font-black text-lg rounded-xl shadow-lg shadow-blue-900/50 transform transition-all active:scale-95\"\n            >\n               (INITIATE)\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default MorningProtocolModal;\n","import React from 'react';\nimport { Bell } from 'lucide-react';\n\ninterface ReminderPopupProps {\n  activeReminder: { title: string; id: string; type: 'habit' | 'project'; duration?: number } | null;\n  onClose: () => void;\n  onStart: (duration?: number) => void;\n  isNeomorphic: boolean;\n  theme: string;\n  isDark: boolean;\n  textMain: string;\n  textSub: string;\n}\n\nconst ReminderPopup: React.FC<ReminderPopupProps> = ({\n  activeReminder,\n  onClose,\n  onStart,\n  isNeomorphic,\n  theme,\n  isDark,\n  textMain,\n  textSub\n}) => {\n  if (!activeReminder) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in zoom-in duration-300\">\n      <div className={`w-full max-w-sm p-8 rounded-3xl flex flex-col items-center text-center space-y-6 ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[20px_20px_40px_rgba(0,0,0,0.6),-20px_-20px_40px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] shadow-[20px_20px_40px_rgba(163,177,198,0.8),-20px_-20px_40px_rgba(255,255,255,1)]') : (isDark ? 'bg-zinc-900 shadow-2xl' : 'bg-white shadow-2xl')}`}>\n        <div className=\"w-20 h-20 bg-blue-500/20 rounded-full flex items-center justify-center animate-bounce\">\n          <Bell size={40} className=\"text-blue-500\" />\n        </div>\n        <div>\n          <h3 className={`text-2xl font-black mb-2 ${textMain}`}></h3>\n          <p className={`text-lg font-bold ${isDark ? 'text-blue-400' : 'text-blue-600'}`}>{activeReminder.title}</p>\n          <p className={`text-xs mt-4 ${textSub}`}></p>\n        </div>\n        <div className=\"flex gap-3 w-full\">\n          <button \n            onClick={onClose}\n            className={`flex-1 py-3 rounded-full font-bold transition-all ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] text-zinc-400' : 'bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] text-zinc-600') : 'bg-zinc-800 text-zinc-400'}`}\n          >\n            \n          </button>\n          <button \n            onClick={() => onStart(activeReminder?.duration)}\n            className={`flex-[2] py-3 rounded-full font-bold bg-blue-600 text-white shadow-lg shadow-blue-900/20 hover:bg-blue-500 transition-all`}\n          >\n            \n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ReminderPopup;\n","import React from 'react';\nimport { X, Bell, Plus, Trash2 } from 'lucide-react';\nimport { AttributeTypeValue, AttributeType, SubTask } from '../../types';\n\ninterface TaskEditorModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onOpen?: () => void;\n  editingTaskId: string | null;\n  newTaskTitle: string;\n  setNewTaskTitle: (title: string) => void;\n  newTaskType: 'daily' | 'main' | 'random' | 'timebox';\n  newTaskXP: string;\n  setNewTaskXP: (xp: string) => void;\n  newTaskReward: string;\n  setNewTaskReward: (reward: string) => void;\n  newTaskDuration: string;\n  setNewTaskDuration: (duration: string) => void;\n  newTaskPriority: 'high' | 'medium' | 'low';\n  setNewTaskPriority: (priority: 'high' | 'medium' | 'low') => void;\n  newTaskNote: string;\n  setNewTaskNote: (note: string) => void;\n  reminderEnabled: boolean;\n  setReminderEnabled: (enabled: boolean) => void;\n  reminderDate: string;\n  setReminderDate: (date: string) => void;\n  reminderTime: string;\n  setReminderTime: (time: string) => void;\n  reminderRepeat: 'none' | 'daily' | 'weekly' | 'monthly' | 'custom';\n  setReminderRepeat: (repeat: 'none' | 'daily' | 'weekly' | 'monthly' | 'custom') => void;\n  reminderInterval: string;\n  setReminderInterval: (interval: string) => void;\n  newTaskDiceCategory?: string;\n  setNewTaskDiceCategory?: (category: any) => void;\n  editingProjectSubTasks: SubTask[];\n  setEditingProjectSubTasks: (subTasks: SubTask[]) => void;\n  handleSaveEditTask: () => void;\n  handleAddNewTask: () => void;\n  isNeomorphic: boolean;\n  isNeomorphicDark: boolean;\n  theme: string;\n  isDark: boolean;\n  textMain: string;\n}\n\nconst TaskEditorModal: React.FC<TaskEditorModalProps> = ({\n  isOpen,\n  onClose,\n  onOpen,\n  editingTaskId,\n  newTaskTitle,\n  setNewTaskTitle,\n  newTaskType,\n  newTaskXP,\n  setNewTaskXP,\n  newTaskReward,\n  setNewTaskReward,\n  newTaskDuration,\n  setNewTaskDuration,\n  newTaskPriority,\n  setNewTaskPriority,\n  newTaskNote,\n  setNewTaskNote,\n  reminderEnabled,\n  setReminderEnabled,\n  reminderDate,\n  setReminderDate,\n  reminderTime,\n  setReminderTime,\n  reminderRepeat,\n  setReminderRepeat,\n  reminderInterval,\n  setReminderInterval,\n  newTaskDiceCategory,\n  setNewTaskDiceCategory,\n  editingProjectSubTasks,\n  setEditingProjectSubTasks,\n  handleSaveEditTask,\n  handleAddNewTask,\n  isNeomorphic,\n  isNeomorphicDark,\n  theme,\n  isDark,\n  textMain\n}) => {\n  if (!isOpen) return null;\n  \n  React.useEffect(() => {\n    if (onOpen) {\n      onOpen();\n    }\n  }, [onOpen]);\n  \n  return (\n    <div className=\"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in\">\n      <div className={`w-full max-w-md p-6 rounded-2xl border ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[10px_10px_20px_rgba(0,0,0,0.4),-10px_-10px_20px_rgba(30,30,46,0.8)] border-none' : 'bg-[#e0e5ec] shadow-[10px_10px_20px_rgba(163,177,198,0.6),-10px_-10px_20px_rgba(255,255,255,1)] border-none') : (isDark ? 'bg-zinc-900 shadow-xl' : 'bg-white shadow-xl')}`}>\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className={`font-bold ${textMain}`}>{editingTaskId ? '' : ''}</h3>\n          <button \n            onClick={onClose}\n            className={`p-1 rounded-full transition-all ${isNeomorphic ? (isNeomorphicDark ? 'bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.6),-5px_-5px_10px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)]') : 'hover:bg-slate-100'}`}\n          >\n            <X size={16} className={textMain} />\n          </button>\n        </div>\n        \n        <div className=\"space-y-4\">\n          <div>\n            <label className={`text-[10px] uppercase font-bold ${isDark ? 'text-zinc-500' : 'text-slate-500'}`}></label>\n            <input autoFocus value={newTaskTitle} onChange={e => setNewTaskTitle(e.target.value)} className={`w-full border-b py-2 outline-none ${textMain} ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none rounded-lg p-2' : 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none rounded-lg p-2') : (isDark ? 'bg-transparent border-zinc-700' : 'bg-transparent border-slate-300')}`} placeholder=\"...\" />\n          </div>\n\n          {newTaskType === 'random' && setNewTaskDiceCategory && (\n            <div>\n              <label className={`text-[10px] uppercase font-bold ${isDark ? 'text-zinc-500' : 'text-slate-500'}`}></label>\n              <select \n                value={newTaskDiceCategory} \n                onChange={e => setNewTaskDiceCategory(e.target.value)}\n                className={`w-full py-2 outline-none ${textMain} ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none rounded-lg px-2' : 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none rounded-lg px-2') : (isDark ? 'bg-transparent border-zinc-700 border-b' : 'bg-transparent border-slate-300 border-b')}`}\n              >\n                <option value=\"health\"></option>\n                <option value=\"efficiency\"></option>\n                <option value=\"leisure\"></option>\n              </select>\n            </div>\n          )}\n          \n          {(newTaskType === 'daily' || newTaskType === 'main' || newTaskType === 'timebox' || newTaskType === 'random') && (\n            <>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div><label className={`text-[10px] ${isDark ? 'text-zinc-500' : 'text-slate-500'}`}></label><input type=\"number\" value={newTaskXP} onChange={e => setNewTaskXP(e.target.value)} className={`w-full border-b py-1 outline-none ${textMain} ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none rounded-lg p-1' : 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none rounded-lg p-1') : (isDark ? 'bg-transparent border-zinc-700' : 'bg-transparent border-slate-300')}`} /></div>\n                <div><label className={`text-[10px] ${isDark ? 'text-zinc-500' : 'text-slate-500'}`}></label><input type=\"number\" value={newTaskReward} onChange={e => setNewTaskReward(e.target.value)} className={`w-full border-b py-1 outline-none ${textMain} ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none rounded-lg p-1' : 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none rounded-lg p-1') : (isDark ? 'bg-transparent border-zinc-700' : 'bg-transparent border-slate-300')}`} /></div>\n                <div><label className={`text-[10px] ${isDark ? 'text-zinc-500' : 'text-slate-500'}`}>(m)</label><input type=\"number\" value={newTaskDuration} onChange={e => setNewTaskDuration(e.target.value)} className={`w-full border-b py-1 outline-none ${textMain} ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none rounded-lg p-1' : 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none rounded-lg p-1') : (isDark ? 'bg-transparent border-zinc-700' : 'bg-transparent border-slate-300')}`} /></div>\n                <div><label className={`text-[10px] ${isDark ? 'text-zinc-500' : 'text-slate-500'}`}></label><select value={newTaskPriority} onChange={e => setNewTaskPriority(e.target.value as 'high' | 'medium' | 'low')} className={`w-full border-b py-1 outline-none ${textMain} ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none rounded-lg p-1' : 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none rounded-lg p-1') : (isDark ? 'bg-transparent border-zinc-700' : 'bg-transparent border-slate-300')}`}><option value=\"high\"></option><option value=\"medium\"></option><option value=\"low\"></option></select></div>\n              </div>\n\n              {/*  */}\n              <div className={`p-3 rounded-xl border border-dashed ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] border-zinc-700 shadow-[inset_3px_3px_6px_rgba(0,0,0,0.3)]' : 'bg-[#e0e5ec] border-zinc-300 shadow-[inset_3px_3px_6px_rgba(163,177,198,0.6)]') : (isDark ? 'border-zinc-700 bg-zinc-900/50' : 'border-slate-200 bg-slate-50')}`}>\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <Bell size={12} className=\"text-blue-500\" />\n                    <label className={`text-[10px] uppercase font-bold ${isDark ? 'text-zinc-400' : 'text-slate-500'}`}></label>\n                  </div>\n                  <button \n                    onClick={() => setReminderEnabled(!reminderEnabled)}\n                    className={`w-8 h-4 rounded-full relative ${isNeomorphic ? (theme === 'neomorphic-dark' ? reminderEnabled ? 'bg-blue-500' : 'bg-zinc-700' : reminderEnabled ? 'bg-blue-600' : 'bg-slate-300') : reminderEnabled ? 'bg-blue-600' : 'bg-slate-300'} transition-colors duration-300`}\n                  >\n                    <div className={`w-3 h-3 rounded-full absolute top-1/2 transform -translate-y-1/2 ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[1px_1px_2px_rgba(0,0,0,0.4),-1px_-1px_2px_rgba(30,30,46,0.8)]' : 'bg-white shadow-[1px_1px_2px_rgba(163,177,198,0.6),-1px_-1px_2px_rgba(255,255,255,1)]') : 'bg-white shadow-sm'} transition-transform duration-300 ${reminderEnabled ? 'left-[14px]' : 'left-[1px]'}`} />\n                  </button>\n                </div>\n                \n                <div className=\"space-y-3 pt-2 animate-in fade-in slide-in-from-top-2 duration-300\">\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <div>\n                      <label className={`text-[8px] mb-1 block ${isDark ? 'text-zinc-500' : 'text-slate-500'}`}></label>\n                      <input \n                        type=\"date\" \n                        value={reminderDate} \n                        onChange={e => setReminderDate(e.target.value)}\n                        className={`w-full text-xs py-1.5 outline-none ${textMain} ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none rounded-lg px-2' : 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none rounded-lg px-2') : 'bg-transparent border-b border-zinc-700'}`}\n                      />\n                    </div>\n                    <div>\n                      <label className={`text-[8px] mb-1 block ${isDark ? 'text-zinc-500' : 'text-slate-500'}`}></label>\n                      <input \n                        type=\"time\" \n                        value={reminderTime} \n                        onChange={e => setReminderTime(e.target.value)}\n                        className={`w-full text-xs py-1.5 outline-none ${textMain} ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none rounded-lg px-2' : 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none rounded-lg px-2') : 'bg-transparent border-b border-zinc-700'}`}\n                      />\n                    </div>\n                  </div>\n                  \n                  <div>\n                    <label className={`text-[8px] mb-1 block ${isDark ? 'text-zinc-500' : 'text-slate-500'}`}></label>\n                    <div className=\"flex gap-2\">\n                      <select \n                        value={reminderRepeat} \n                        onChange={e => setReminderRepeat(e.target.value as any)}\n                        className={`flex-1 text-xs py-1.5 outline-none ${textMain} ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none rounded-lg px-2' : 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none rounded-lg px-2') : 'bg-transparent border-b border-zinc-700'}`}\n                      >\n                        <option value=\"none\"></option>\n                        <option value=\"daily\"></option>\n                        <option value=\"weekly\"></option>\n                        <option value=\"monthly\"></option>\n                        <option value=\"custom\"></option>\n                      </select>\n                      {reminderRepeat === 'custom' && (\n                        <div className=\"flex items-center gap-1 animate-in slide-in-from-left-2\">\n                          <input \n                            type=\"number\" \n                            min=\"1\"\n                            value={reminderInterval} \n                            onChange={e => setReminderInterval(e.target.value)}\n                            className={`w-12 text-xs py-1.5 outline-none text-center ${textMain} ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none rounded-lg' : 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none rounded-lg') : 'bg-transparent border-b border-zinc-700'}`}\n                          />\n                          <span className=\"text-[10px] text-zinc-500\">/</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/*  */}\n              {(newTaskType === 'main' || newTaskType === 'timebox') && (\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between items-center\">\n                    <label className={`text-[10px] uppercase font-bold ${isDark ? 'text-zinc-500' : 'text-slate-500'}`}></label>\n                    <button \n                      onClick={() => {\n                        setEditingProjectSubTasks([...editingProjectSubTasks, {\n                          id: `sub-${Date.now()}`,\n                          title: '',\n                          completed: false,\n                          duration: 30\n                        }]);\n                      }}\n                      className={`text-xs px-3 py-1 rounded flex items-center gap-1 ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] border-none text-blue-400 hover:shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] border-none text-blue-600 hover:shadow-[3px_3px_6px_rgba(163,177,198,0.5),-3px_-3px_6px_rgba(255,255,255,1)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]') : 'bg-blue-600 hover:bg-blue-500 text-white'}`}\n                    >\n                      <Plus size={12}/> \n                    </button>\n                  </div>\n                  \n                  {editingProjectSubTasks.map((subTask, index) => (\n                    <div key={subTask.id} className=\"flex gap-2 items-start\">\n                      <input \n                        type=\"text\" \n                        value={subTask.title} \n                        onChange={(e) => {\n                          const newSubTasks = [...editingProjectSubTasks];\n                          newSubTasks[index] = { ...newSubTasks[index], title: e.target.value };\n                          setEditingProjectSubTasks(newSubTasks);\n                        }} \n                        placeholder={` ${index + 1} ...`} \n                        className={`flex-1 border-b py-1 outline-none ${textMain} ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none rounded-lg p-2' : 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none rounded-lg p-2') : (isDark ? 'bg-transparent border-zinc-700' : 'bg-transparent border-slate-300')}`} \n                      />\n                      <input \n                        type=\"number\" \n                        value={subTask.duration} \n                        onChange={(e) => {\n                          const newSubTasks = [...editingProjectSubTasks];\n                          newSubTasks[index] = { ...newSubTasks[index], duration: parseInt(e.target.value) || 30 };\n                          setEditingProjectSubTasks(newSubTasks);\n                        }} \n                        placeholder=\"(m)\" \n                        className={`w-20 border-b py-1 outline-none ${textMain} ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none rounded-lg p-2' : 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none rounded-lg p-2') : (isDark ? 'bg-transparent border-zinc-700' : 'bg-transparent border-slate-300')}`} \n                      />\n                      <button \n                        onClick={() => {\n                          setEditingProjectSubTasks(editingProjectSubTasks.filter((_, i) => i !== index));\n                        }}\n                        className={`p-2 ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] border-none rounded text-red-400 hover:shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] border-none rounded text-red-500 hover:shadow-[3px_3px_6px_rgba(163,177,198,0.5),-3px_-3px_6px_rgba(255,255,255,1)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]') : 'text-red-500 hover:text-red-400'}`}\n                      >\n                        <Trash2 size={14}/>\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              {/*  */}\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center gap-2\">\n                  <label className={`text-[10px] uppercase font-bold ${isDark ? 'text-zinc-400' : 'text-slate-500'}`}></label>\n                </div>\n                <textarea \n                  value={newTaskNote} \n                  onChange={e => setNewTaskNote(e.target.value)}\n                  placeholder=\"...\" \n                  className={`w-full min-h-[100px] p-3 outline-none ${textMain} ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none rounded-lg resize-none' : 'bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none rounded-lg resize-none') : (isDark ? 'bg-zinc-900 border-zinc-700 rounded-lg resize-none' : 'bg-white border-slate-200 rounded-lg resize-none')}`}\n                />\n              </div>\n            </>\n          )}\n          \n          <div className=\"flex justify-end gap-2 mt-6\">\n            <button onClick={onClose} className={`px-4 py-2 text-xs font-bold ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'text-zinc-300 bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] border-none rounded hover:shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]' : 'text-zinc-700 bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] border-none rounded hover:shadow-[3px_3px_6px_rgba(163,177,198,0.5),-3px_-3px_6px_rgba(255,255,255,1)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]') : 'text-zinc-500 hover:text-white'}`}></button>\n            <button onClick={editingTaskId ? handleSaveEditTask : handleAddNewTask} className={`px-6 py-2 rounded font-bold text-xs ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] border-none text-white hover:shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] border-none text-blue-600 hover:shadow-[3px_3px_6px_rgba(163,177,198,0.5),-3px_-3px_6px_rgba(255,255,255,1)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]') : 'bg-blue-600 hover:bg-blue-500 text-white'}`}></button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TaskEditorModal;","/**\n * \n * LifeGame.tsxSHOP_CATALOG\n */\n\nimport React from 'react';\nimport { \n  Smartphone, Laptop, Headphones, Layout, Camera, Tablet, Wind, \n  Armchair, Sofa, Footprints, Glasses, Sun, Utensils, Coffee, \n  Gift, Fish, BookOpen, Video, Scissors, Ticket, Music, Dumbbell,\n  Wifi, Box, Calendar, Mountain, Home, Car, Heart, Shirt, Users,\n  Globe, Palette\n} from 'lucide-react';\n\nexport interface ShopItem {\n  id: string;\n  name: string;\n  description: string;\n  cost: number;\n  type: 'physical' | 'leisure' | 'rights';\n  owned: boolean;\n  icon: React.ReactNode;\n  category: string;\n  image: string;\n}\n\nexport const SHOP_CATALOG: ShopItem[] = [\n  // \n  { id: 'p_dig_1', name: 'iPhone 16 Pro', description: '', cost: 8999, type: 'physical', owned: false, icon: <Smartphone size={24} className=\"text-zinc-300\"/>, category: '', image: 'https://images.unsplash.com/photo-1616348436168-de43ad0db179?w=400&h=400&fit=crop' },\n  { id: 'p_dig_2', name: 'MacBook Pro M4', description: '', cost: 16000, type: 'physical', owned: false, icon: <Laptop size={24} className=\"text-zinc-400\"/>, category: '', image: 'https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400&h=400&fit=crop' },\n  { id: 'p_dig_3', name: '', description: '', cost: 2000, type: 'physical', owned: false, icon: <Headphones size={24} className=\"text-blue-400\"/>, category: '', image: 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400&h=400&fit=crop' },\n  { id: 'p_dig_5', name: '', description: '', cost: 800, type: 'physical', owned: false, icon: <Layout size={24} className=\"text-purple-400\"/>, category: '', image: 'https://images.unsplash.com/photo-1511467687858-23d96c32e4ae?w=400&h=400&fit=crop' },\n  { id: 'p_dig_6', name: 'pocket 3', description: '', cost: 2590, type: 'physical', owned: false, icon: <Camera size={24} className=\"text-yellow-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=400&h=400&fit=crop' },\n  { id: 'p_dig_8', name: 'AirPods', description: '', cost: 189, type: 'physical', owned: false, icon: <Headphones size={24} className=\"text-blue-400\"/>, category: '', image: 'https://images.unsplash.com/photo-1546868871-7041f2a55e12?w=400&h=400&fit=crop' },\n  { id: 'p_dig_9', name: 'MacBook Pro', description: '', cost: 6499, type: 'physical', owned: false, icon: <Laptop size={24} className=\"text-zinc-400\"/>, category: '', image: 'https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400&h=400&fit=crop' },\n  { id: 'p_dig_10', name: 'iPad', description: '', cost: 3299, type: 'physical', owned: false, icon: <Tablet size={24} className=\"text-purple-400\"/>, category: '', image: 'https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=400&h=400&fit=crop' },\n  { id: 'p_dig_11', name: '', description: '', cost: 7200, type: 'physical', owned: false, icon: <Layout size={24} className=\"text-blue-400\"/>, category: '', image: 'https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=400&h=400&fit=crop' },\n  { id: 'p_dig_12', name: '', description: '', cost: 1999, type: 'physical', owned: false, icon: <Wind size={24} className=\"text-pink-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1522338242992-e1a54906a8da?w=400&h=400&fit=crop' },\n  \n  // \n  { id: 'p_gear_1', name: '', description: '', cost: 1500, type: 'physical', owned: false, icon: <Armchair size={24} className=\"text-orange-400\"/>, category: '', image: 'https://images.unsplash.com/photo-1580480055273-228ff5388ef8?w=400&h=400&fit=crop' },\n  { id: 'p_gear_2', name: '', description: '', cost: 300, type: 'physical', owned: false, icon: <Sofa size={24} className=\"text-purple-400\"/>, category: '', image: 'https://images.unsplash.com/photo-1584132967334-10e028bd69f7?w=400&h=400&fit=crop' },\n  { id: 'p_gear_3', name: ' ()', description: ' +10%', cost: 800, type: 'physical', owned: false, icon: <Footprints size={24} className=\"text-yellow-600\"/>, category: '', image: 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400&h=400&fit=crop' },\n  { id: 'p_gear_4', name: '', description: ' Buff', cost: 400, type: 'physical', owned: false, icon: <Glasses size={24} className=\"text-cyan-400\"/>, category: '', image: 'https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=400&h=400&fit=crop' },\n  { id: 'p_gear_5', name: '', description: '', cost: 350, type: 'physical', owned: false, icon: <Sun size={24} className=\"text-yellow-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1534073828943-f801091bb18c?w=400&h=400&fit=crop' },\n  \n  // \n  { id: 's_food_1', name: '', description: ' ()', cost: 1, type: 'leisure', owned: false, icon: <Utensils size={24} className=\"text-red-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1564869521641-a52c75637e91?w=400&h=400&fit=crop' },\n  { id: 's_food_2', name: '', description: '', cost: 5, type: 'leisure', owned: false, icon: <Coffee size={24} className=\"text-amber-700\"/>, category: '', image: 'https://images.unsplash.com/photo-1622483767028-3f66f32aef97?w=400&h=400&fit=crop' },\n  { id: 's_food_3', name: '', description: '', cost: 68, type: 'leisure', owned: false, icon: <Gift size={24} className=\"text-yellow-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1513639776629-7b61b0ac49cb?w=400&h=400&fit=crop' },\n  { id: 's_food_6', name: '', description: '', cost: 5, type: 'leisure', owned: false, icon: <Coffee size={24} className=\"text-blue-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1527960669566-f882ba85a4c6?w=400&h=400&fit=crop' },\n  { id: 's_food_7', name: '', description: '', cost: 800, type: 'leisure', owned: false, icon: <Utensils size={24} className=\"text-red-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1544025162-d76694265947?w=400&h=400&fit=crop' },\n  { id: 's_food_8', name: '', description: '', cost: 60, type: 'leisure', owned: false, icon: <Utensils size={24} className=\"text-orange-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1562967914-608f82629710?w=400&h=400&fit=crop' },\n  { id: 's_food_9', name: '', description: '', cost: 100, type: 'leisure', owned: false, icon: <Fish size={24} className=\"text-blue-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2?w=400&h=400&fit=crop' },\n  { id: 's_food_10', name: '', description: '', cost: 30, type: 'leisure', owned: false, icon: <Utensils size={24} className=\"text-yellow-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1518492104633-130d0cc84637?w=400&h=400&fit=crop' },\n  { id: 's_food_11', name: '', description: '', cost: 10, type: 'leisure', owned: false, icon: <Coffee size={24} className=\"text-pink-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400&h=400&fit=crop' },\n  { id: 's_food_12', name: '', description: '', cost: 13, type: 'leisure', owned: false, icon: <Utensils size={24} className=\"text-red-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1562967914-608f82629710?w=400&h=400&fit=crop' },\n  { id: 's_food_13', name: '', description: '', cost: 1.99, type: 'leisure', owned: false, icon: <Utensils size={24} className=\"text-red-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1567620832903-9fc6debc209f?w=400&h=400&fit=crop' },\n  \n  // \n  { id: 's_ent_1', name: '', description: '', cost: 30, type: 'leisure', owned: false, icon: <BookOpen size={24} className=\"text-purple-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1556742044-3c52d6e88c62?w=400&h=400&fit=crop' },\n  { id: 's_ent_2', name: '', description: '', cost: 30, type: 'leisure', owned: false, icon: <Video size={24} className=\"text-red-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1611162617213-7d7a39e9b1d7?w=400&h=400&fit=crop' },\n  { id: 's_ent_3', name: '', description: '', cost: 60, type: 'leisure', owned: false, icon: <BookOpen size={24} className=\"text-purple-600\"/>, category: '', image: 'https://images.unsplash.com/photo-1556742044-3c52d6e88c62?w=400&h=400&fit=crop' },\n  { id: 's_ent_4', name: '', description: '', cost: 60, type: 'leisure', owned: false, icon: <Video size={24} className=\"text-red-600\"/>, category: '', image: 'https://images.unsplash.com/photo-1611162617213-7d7a39e9b1d7?w=400&h=400&fit=crop' },\n  \n  // \n  { id: 's_hair_1', name: '', description: '', cost: 48, type: 'leisure', owned: false, icon: <Scissors size={24} className=\"text-pink-400\"/>, category: '', image: 'https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=400&fit=crop' },\n  { id: 's_spa_1', name: '', description: '', cost: 198, type: 'leisure', owned: false, icon: <Armchair size={24} className=\"text-blue-400\"/>, category: '', image: 'https://images.unsplash.com/photo-1516455590571-18256e5bb9ff?w=400&h=400&fit=crop' },\n  { id: 's_books_1', name: '', description: '', cost: 98, type: 'leisure', owned: false, icon: <BookOpen size={24} className=\"text-amber-600\"/>, category: '', image: 'https://images.unsplash.com/photo-1495446815901-a7297e633e8d?w=400&h=400&fit=crop' },\n  \n  // \n  { id: 'r_tick_1', name: ' x1', description: '', cost: 298, type: 'rights', owned: false, icon: <Ticket size={24} className=\"text-green-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=400&h=400&fit=crop' },\n  { id: 'r_tick_2', name: '', description: '', cost: 45, type: 'rights', owned: false, icon: <Video size={24} className=\"text-red-600\"/>, category: '', image: 'https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=400&h=400&fit=crop' },\n  { id: 'r_tick_3', name: '', description: '', cost: 498, type: 'rights', owned: false, icon: <Music size={24} className=\"text-purple-600\"/>, category: '', image: 'https://images.unsplash.com/photo-1511632765486-a01980e01a18?w=400&h=400&fit=crop' },\n  \n  // \n  { id: 'r_vip_1', name: ' VIP ()', description: '', cost: 15, type: 'rights', owned: false, icon: <Music size={24} className=\"text-red-600\"/>, category: '', image: 'https://images.unsplash.com/photo-1614613535308-eb5fbd3d2c17?w=400&h=400&fit=crop' },\n  { id: 'r_vip_3', name: ' ()', description: '', cost: 298, type: 'rights', owned: false, icon: <Dumbbell size={24} className=\"text-blue-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=400&h=400&fit=crop' },\n  { id: 'r_vip_4', name: '', description: '', cost: 99, type: 'rights', owned: false, icon: <BookOpen size={24} className=\"text-purple-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1501504905252-473c47e087f8?w=400&h=400&fit=crop' },\n  { id: 'r_vip_5', name: '', description: '', cost: 99, type: 'rights', owned: false, icon: <Users size={24} className=\"text-green-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=400&h=400&fit=crop' },\n  { id: 'r_vip_6', name: '', description: '', cost: 199, type: 'rights', owned: false, icon: <BookOpen size={24} className=\"text-amber-600\"/>, category: '', image: 'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=400&h=400&fit=crop' },\n  { id: 'r_vip_7', name: '', description: '', cost: 299, type: 'rights', owned: false, icon: <Users size={24} className=\"text-blue-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=400&h=400&fit=crop' },\n  { id: 'r_vip_8', name: '', description: '', cost: 88, type: 'rights', owned: false, icon: <Users size={24} className=\"text-pink-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1511632765486-a01980e01a18?w=400&h=400&fit=crop' },\n  { id: 'r_vip_9', name: '', description: '', cost: 159, type: 'rights', owned: false, icon: <BookOpen size={24} className=\"text-cyan-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1517048676732-d65bc937f952?w=400&h=400&fit=crop' },\n  { id: 'r_vip_10', name: '', description: '', cost: 399, type: 'rights', owned: false, icon: <Users size={24} className=\"text-orange-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=400&h=400&fit=crop' },\n  \n  // \n  { id: 'r_char_1', name: '', description: '', cost: 99, type: 'rights', owned: false, icon: <Wifi size={24} className=\"text-blue-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1556742044-3c52d6e88c62?w=400&h=400&fit=crop' },\n  { id: 'r_char_1_50', name: '50', description: '', cost: 50, type: 'rights', owned: false, icon: <Wifi size={24} className=\"text-blue-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1556742044-3c52d6e88c62?w=400&h=400&fit=crop' },\n  { id: 'r_char_3', name: '', description: '', cost: 118, type: 'rights', owned: false, icon: <Box size={24} className=\"text-purple-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1544197150-b99a580bb7a8?w=400&h=400&fit=crop' },\n  \n  // \n  { id: 'r_misc_1', name: '365', description: '', cost: 9.9, type: 'physical', owned: false, icon: <Calendar size={24} className=\"text-yellow-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1506784365847-bbad939e9335?w=400&h=400&fit=crop' },\n  { id: 'r_misc_2', name: '', description: '', cost: 9.9, type: 'leisure', owned: false, icon: <Mountain size={24} className=\"text-green-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=400&h=400&fit=crop' },\n  { id: 'r_misc_3', name: '', description: '', cost: 1299, type: 'physical', owned: false, icon: <Smartphone size={24} className=\"text-blue-400\"/>, category: '', image: 'https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=400&fit=crop' },\n  { id: 'r_misc_4', name: '', description: '', cost: 899, type: 'physical', owned: false, icon: <Coffee size={24} className=\"text-amber-700\"/>, category: '', image: 'https://images.unsplash.com/photo-1520970014086-2208d157c9e2?w=400&h=400&fit=crop' },\n  { id: 'r_misc_5', name: '', description: '', cost: 89, type: 'physical', owned: false, icon: <Dumbbell size={24} className=\"text-purple-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=400&fit=crop' },\n  { id: 'r_misc_6', name: '', description: '', cost: 199, type: 'rights', owned: false, icon: <Video size={24} className=\"text-red-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1485846234645-a62644f84728?w=400&h=400&fit=crop' },\n  { id: 'r_misc_7', name: '', description: '', cost: 399, type: 'rights', owned: false, icon: <BookOpen size={24} className=\"text-blue-600\"/>, category: '', image: 'https://images.unsplash.com/photo-1501504905252-473c47e087f8?w=400&h=400&fit=crop' },\n  { id: 'r_misc_8', name: '', description: '', cost: 199, type: 'physical', owned: false, icon: <Music size={24} className=\"text-purple-600\"/>, category: '', image: 'https://images.unsplash.com/photo-1493225255756-d9584f8606e9?w=400&h=400&fit=crop' },\n  { id: 'r_misc_9', name: 'T', description: '', cost: 129, type: 'physical', owned: false, icon: <Shirt size={24} className=\"text-pink-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400&h=400&fit=crop' },\n  { id: 'r_misc_10', name: '', description: '', cost: 159, type: 'physical', owned: false, icon: <Fish size={24} className=\"text-orange-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=400&fit=crop' },\n    \n  // \n  // \n  { id: 'p_home_1', name: '', description: '', cost: 1299, type: 'physical', owned: false, icon: <Utensils size={24} className=\"text-amber-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1556910103-1c02745aae4d?w=400&h=400&fit=crop' },\n  { id: 'p_home_2', name: '', description: '', cost: 3500, type: 'physical', owned: false, icon: <Utensils size={24} className=\"text-blue-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1556910103-1c02745aae4d?w=400&h=400&fit=crop' },\n    \n  // \n  { id: 'p_property_1', name: '', description: '', cost: 500000, type: 'physical', owned: false, icon: <Home size={24} className=\"text-red-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1518780664697-55e3ad937233?w=400&h=400&fit=crop' },\n    \n  // \n  { id: 'p_car_1', name: '', description: '', cost: 250000, type: 'physical', owned: false, icon: <Car size={24} className=\"text-green-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1593941707882-a5bba14938c7?w=400&h=400&fit=crop' },\n    \n  // \n  { id: 's_food_14', name: '', description: '', cost: 158, type: 'leisure', owned: false, icon: <Utensils size={24} className=\"text-red-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1544025162-d76694265947?w=400&h=400&fit=crop' },\n  { id: 's_food_15', name: '', description: '', cost: 88, type: 'leisure', owned: false, icon: <Utensils size={24} className=\"text-orange-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1562967914-608f82629710?w=400&h=400&fit=crop' },\n  { id: 's_food_16', name: '', description: '', cost: 158, type: 'leisure', owned: false, icon: <Utensils size={24} className=\"text-orange-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1562967914-608f82629710?w=400&h=400&fit=crop' },\n  { id: 's_food_17', name: '', description: '188', cost: 188, type: 'leisure', owned: false, icon: <Fish size={24} className=\"text-blue-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2?w=400&h=400&fit=crop' },\n  { id: 's_food_18', name: '', description: '55', cost: 55, type: 'leisure', owned: false, icon: <Fish size={24} className=\"text-blue-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2?w=400&h=400&fit=crop' },\n  { id: 's_food_19', name: '', description: '', cost: 33, type: 'leisure', owned: false, icon: <Utensils size={24} className=\"text-yellow-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1562967914-608f82629710?w=400&h=400&fit=crop' },\n    \n  // \n  { id: 'r_tick_4', name: '', description: '', cost: 15000, type: 'rights', owned: false, icon: <Mountain size={24} className=\"text-blue-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=400&h=400&fit=crop' },\n  { id: 'r_tick_5', name: '', description: '', cost: 3000, type: 'rights', owned: false, icon: <Users size={24} className=\"text-green-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=400&h=400&fit=crop' },\n    \n  // \n  { id: 's_service_1', name: '', description: '', cost: 1200, type: 'rights', owned: false, icon: <Heart size={24} className=\"text-red-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1584999734482-0361aecad844?w=400&h=400&fit=crop' },\n    \n  // \n  { id: 's_sport_1', name: '', description: '30', cost: 20, type: 'leisure', owned: false, icon: <Mountain size={24} className=\"text-green-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=400&h=400&fit=crop' },\n  { id: 's_sport_2', name: '', description: '30', cost: 10, type: 'leisure', owned: false, icon: <Footprints size={24} className=\"text-blue-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1476480862126-209bfaa8edc8?w=400&h=400&fit=crop' },\n  { id: 's_sport_3', name: '', description: '30', cost: 50, type: 'leisure', owned: false, icon: <Dumbbell size={24} className=\"text-red-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1517836357463-d25dfeac3438?w=400&h=400&fit=crop' },\n    \n  // \n  { id: 'p_cloth_1', name: '', description: '', cost: 299, type: 'physical', owned: false, icon: <Shirt size={24} className=\"text-purple-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400&h=400&fit=crop' },\n  { id: 'p_cloth_2', name: '', description: '', cost: 199, type: 'physical', owned: false, icon: <Shirt size={24} className=\"text-blue-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1542272604-787c3835535d?w=400&h=400&fit=crop' },\n  { id: 'p_cloth_3', name: '', description: '', cost: 399, type: 'physical', owned: false, icon: <Users size={24} className=\"text-pink-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1542272604-787c3835535d?w=400&h=400&fit=crop' },\n  { id: 'p_cloth_4', name: '', description: '', cost: 299, type: 'physical', owned: false, icon: <Users size={24} className=\"text-green-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1542272604-787c3835535d?w=400&h=400&fit=crop' },\n    \n  // \n  { id: 'p_gift_1', name: '', description: '', cost: 1000, type: 'physical', owned: false, icon: <Gift size={24} className=\"text-yellow-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1549465220-1a8b9238cd48?w=400&h=400&fit=crop' },\n  \n  // /\n  { id: 's_food_20', name: '', description: '', cost: 5, type: 'leisure', owned: false, icon: <Utensils size={24} className=\"text-red-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400&h=400&fit=crop' },\n  { id: 'r_tick_6', name: '', description: '', cost: 1100, type: 'rights', owned: false, icon: <Mountain size={24} className=\"text-green-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=400&h=400&fit=crop' },\n  { id: 'r_tick_7', name: '', description: '', cost: 5000, type: 'rights', owned: false, icon: <Mountain size={24} className=\"text-blue-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=400&h=400&fit=crop' },\n  { id: 'r_tick_8', name: '', description: '', cost: 50000, type: 'rights', owned: false, icon: <Globe size={24} className=\"text-purple-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=400&h=400&fit=crop' },\n  \n  // /\n  { id: 's_spa_2', name: '', description: '', cost: 200, type: 'leisure', owned: false, icon: <Armchair size={24} className=\"text-blue-400\"/>, category: '', image: 'https://images.unsplash.com/photo-1516455590571-18256e5bb9ff?w=400&h=400&fit=crop' },\n  { id: 'r_tick_9', name: '', description: '', cost: 50, type: 'rights', owned: false, icon: <Users size={24} className=\"text-yellow-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1511632765486-a01980e01a18?w=400&h=400&fit=crop' },\n  { id: 'p_cloth_5', name: '', description: '', cost: 100, type: 'physical', owned: false, icon: <Palette size={24} className=\"text-pink-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1560343090-f0409e92791a?w=400&h=400&fit=crop' },\n  { id: 'p_cloth_6', name: '', description: '', cost: 30, type: 'physical', owned: false, icon: <Scissors size={24} className=\"text-purple-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=400&h=400&fit=crop' },\n  { id: 'p_cloth_7', name: '', description: '', cost: 100, type: 'physical', owned: false, icon: <Scissors size={24} className=\"text-red-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=400&fit=crop' },\n  { id: 'r_vip_11', name: '(1000)', description: '', cost: 1000, type: 'rights', owned: false, icon: <Users size={24} className=\"text-green-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=400&h=400&fit=crop' },\n  { id: 'r_vip_12', name: '(3000)', description: '', cost: 3000, type: 'rights', owned: false, icon: <Users size={24} className=\"text-blue-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=400&h=400&fit=crop' },\n  { id: 'r_vip_13', name: '(5000)', description: '', cost: 5000, type: 'rights', owned: false, icon: <Users size={24} className=\"text-purple-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=400&h=400&fit=crop' },\n  { id: 'r_vip_14', name: '(10000)', description: '', cost: 10000, type: 'rights', owned: false, icon: <Users size={24} className=\"text-yellow-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=400&h=400&fit=crop' },\n  { id: 'r_vip_15', name: '(20000)', description: '', cost: 20000, type: 'rights', owned: false, icon: <Users size={24} className=\"text-red-500\"/>, category: '', image: 'https://images.unsplash.com/photo-1515187029135-18ee286d815b?w=400&h=400&fit=crop' },\n];\n\nexport default SHOP_CATALOG;\n","import React, { useState, useEffect, useRef, useMemo } from 'react';\nimport { BarChart, Bar, XAxis, YAxis, Tooltip, ResponsiveContainer, CartesianGrid, LineChart, Line, ComposedChart } from 'recharts';\nimport { \n  Coins, Trophy, ShoppingBag, CheckCircle, Swords, Flame, \n  Shield, Brain, BicepsFlexed, Sparkles, Users, Plus, X, Crown,\n  Edit3, Trash2, Repeat, Zap, ChevronDown, ChevronUp, Mic, Loader2, PackagePlus,\n  Gamepad2, Play, Pause, StopCircle, Clock, Archive, ArchiveRestore, Settings, Gift,\n  Box, XCircle, Sunset, Moon, Coffee, Dumbbell, BookOpen, Calendar, Check, Target, Pencil,\n  Radar as RadarIcon, Container, Filter, Wrench, User, Crosshair, TrendingUp, Lock, Unlock, Skull, ArrowLeft, Star, Package, List, RefreshCw, Dice5, Hammer, Edit2, Layout,\n  Smartphone, Laptop, Shirt, Ticket, Music, Wifi, Video, Square, CheckSquare, Dice1, Rocket,\n  Headphones, Armchair, Scissors, Glasses, Footprints, Utensils, Sofa, Activity, Power, ChevronRight, Sun, Wallet, Bell,\n  Camera, Tablet, Wind, Fish, Mountain, Home, Car, Heart, Globe, Palette\n} from 'lucide-react';\nimport confetti from 'canvas-confetti';\nimport { Theme, AttributeType, AttributeTypeValue, Habit, Project, SubTask, TaskType, AutoTaskType, Task, DiceState, DiceTask, DiceCategory, DiceHistory, Settings as SettingsType, ProductType, ProductCategory } from '../types';\nimport CharacterProfile, { CharacterProfileHandle } from './CharacterProfile';\nimport { GlobalGuideCard, helpContent, GlobalHelpButton } from './HelpSystem';\nimport FateGiftModal from './shared/FateGiftModal';\nimport FateDice from './FateDice';\nimport TaskManagement from './TaskManagement';\nimport ShopCatalog from './ShopCatalog';\nimport BankModal from './shared/BankModal';\nimport MorningProtocolModal from './shared/MorningProtocolModal';\nimport ReminderPopup from './shared/ReminderPopup';\nimport TaskEditorModal from './TaskManagement/TaskEditorModal';\n\n// \nimport { useTheme } from '../contexts/ThemeContext';\n\n// \nimport { useGlobalAudio } from './GlobalAudioManagerOptimized';\n\n//  Hook\nimport { useReminders } from '../hooks/useReminders';\nimport { useShop } from '../hooks/useShop';\nimport { useTaskOperations } from '../hooks/useTaskOperations';\nimport { useDragAndDrop } from '../hooks/useDragAndDrop';\n\n// \nimport SHOP_CATALOG from '../constants/shopCatalog';\nimport { BLIND_BOX_PRICES, BLIND_BOX_RULES, HIDDEN_ITEM_PROBABILITY, getPriceRange, getHiddenItemPrice } from '../constants/blindBox';\nimport { ATTR_COLORS, getNeomorphicStyles, getButtonStyle, getCardBgStyle, getTextStyle } from '../utils/styleHelpers';\n\ninterface LifeGameProps {\n  balance: number;\n  onUpdateBalance: (amount: number, reason: string) => void;\n  habits: Habit[];\n  projects: Project[];\n  habitOrder: string[];\n  projectOrder: string[];\n  onToggleHabit: (id: string, dateStr: string) => void;\n  onUpdateHabit: (id: string, updates: Partial<Habit>) => void;\n  onDeleteHabit: (id: string) => void;\n  onUpdateProject: (id: string, updates: Partial<Project>) => void;\n  onDeleteProject: (id: string) => void;\n  onAddHabit: (name: string, reward: number) => void;\n  onAddProject: (project: Project) => void;\n  initialTab?: 'battle' | 'shop' | 'armory'; \n  initialCategory?: 'daily' | 'main' | 'timebox' | 'random';\n  onAddFloatingReward: (text: string, color: string, x?: number, y?: number) => void;\n  totalTasksCompleted: number;\n  totalHours: number; \n  challengePool: string[];\n  setChallengePool: (pool: string[]) => void;\n  todaysChallenges: {date: string, tasks: string[]};\n  completedRandomTasks: {[date: string]: string[]};\n  onToggleRandomChallenge: (task: string) => void;\n  onStartAutoTask: (type: AutoTaskType, id: string, duration: number, subId?: string) => void;\n  checkInStreak: number;\n  onPomodoroComplete: (m: number) => void;\n  xp: number;\n  weeklyGoal: string;\n  setWeeklyGoal: (g: string) => void;\n  todayGoal: string;\n  settings: SettingsType;\n  setTodayGoal: (g: string) => void;\n  givenUpTasks?: string[];\n  onGiveUpTask?: (id: string) => void;\n  isNavCollapsed: boolean;\n  setIsNavCollapsed: (collapsed: boolean) => void;\n  // \n  todayStats: {focusMinutes: number, tasksCompleted: number, habitsDone: number, earnings: number, spending: number};\n  statsHistory: {[key: number]: {focusMinutes: number, tasksCompleted: number, habitsDone: number, earnings: number, spending: number}};\n  // Pomodoro Global State\n  timeLeft: number;\n  isActive: boolean;\n  duration: number;\n  onToggleTimer: () => void;\n  onResetTimer: () => void;\n  onChangeDuration: (minutes: number) => void;\n  onUpdateTimeLeft: (seconds: number) => void;\n  onUpdateIsActive: (active: boolean) => void;\n  // Additional props from previous code\n  onUpdateHabitOrder?: (order: string[]) => void;\n  onUpdateProjectOrder?: (order: string[]) => void;\n  // Immersive Mode State\n  isImmersive: boolean;\n  setIsImmersive: (isImmersive: boolean) => void;\n  onInternalImmersiveModeChange?: (isInternalImmersive: boolean) => void;\n  \n  // \n  diceState?: DiceState;\n  onSpinDice?: () => { success: boolean; message?: string };\n  onDiceResult?: (result: 'completed' | 'skipped' | 'later') => void;\n  onAddDiceTask?: (task: DiceTask) => void;\n  onDeleteDiceTask?: (taskId: string, category: DiceCategory) => void;\n  onUpdateDiceTask?: (taskId: string, category: DiceCategory, updates: Partial<DiceTask>) => void;\n  onUpdateDiceConfig?: (config: Partial<DiceState['config']>) => void;\n  onUpdateDiceState?: (updates: Partial<DiceState>) => void;\n  // \n  onLevelChange: (newLevel: number, type: 'level' | 'focus' | 'wealth') => void;\n  // \n  setModalState?: (isOpen: boolean) => void;\n}\n\nconst XP_PER_LEVEL = 200;\n\nconst LifeGame: React.FC<LifeGameProps> = ({ \n    balance, onUpdateBalance, habits, projects, habitOrder, projectOrder, onToggleHabit, onUpdateHabit, onDeleteHabit, onUpdateProject, onDeleteProject, onAddHabit, onAddProject, initialTab, initialCategory, onAddFloatingReward, totalTasksCompleted, totalHours,\n    challengePool, setChallengePool, todaysChallenges, completedRandomTasks, onToggleRandomChallenge, onStartAutoTask, checkInStreak, onPomodoroComplete, xp, weeklyGoal, setWeeklyGoal, todayGoal, setTodayGoal,\n    givenUpTasks = [], onGiveUpTask, onUpdateHabitOrder, onUpdateProjectOrder, isNavCollapsed, setIsNavCollapsed, todayStats, statsHistory,\n    // Pomodoro Global State\n    timeLeft, isActive, duration, onToggleTimer, onResetTimer, onChangeDuration, onUpdateTimeLeft, onUpdateIsActive,\n    // Immersive Mode State\n    isImmersive, setIsImmersive, onInternalImmersiveModeChange,\n    // Settings\n    settings = {},\n    // \n    diceState,\n    onSpinDice,\n    onDiceResult,\n    onAddDiceTask,\n    onDeleteDiceTask,\n    onUpdateDiceTask,\n    onUpdateDiceConfig,\n    onUpdateDiceState,\n    onLevelChange,\n    // \n    setModalState\n}) => {\n  const { theme } = useTheme();\n  const isDark = theme.includes('dark');\n  const isNeomorphic = theme.startsWith('neomorphic');\n  const isNeomorphicDark = theme === 'neomorphic-dark';\n  const todayStr = new Date().toLocaleDateString();\n  const textMain = getTextStyle(isDark, isNeomorphic, 'main');\n  const textSub = getTextStyle(isDark, isNeomorphic, 'sub');\n  \n  // \n  const neomorphicStyles = getNeomorphicStyles(isNeomorphicDark);\n\n  // \n  const getButtonStyleLocal = (isActive: boolean, isSpecial?: boolean) => {\n    return getButtonStyle(isActive, isSpecial, isNeomorphic, theme, isDark);\n  };\n  \n  // \n  const cardBg = getCardBgStyle(isNeomorphic, theme, isDark);\n  \n  const [level, setLevel] = useState(1);\n  const [savings, setSavings] = useState(0); \n  \n  const characterProfileRef = useRef<CharacterProfileHandle>(null);\n\n  const [mainTab, setMainTab] = useState<'battle' | 'shop' | 'armory'>(() => initialTab || 'battle');\n  const [taskCategory, setTaskCategory] = useState<'daily' | 'main' | 'timebox' | 'random'>(initialCategory || 'timebox');\n  \n  //  shop \n  const {\n    inventory,\n    setInventory,\n    isManageShopMode,\n    setIsManageShopMode,\n    shopFilter,\n    setShopFilter,\n    justPurchasedItem,\n    isEditItemOpen,\n    setIsEditItemOpen,\n    editingItem,\n    setEditingItem,\n    handlePurchase,\n    handleBlindBoxPurchase,\n    handleDeleteItem,\n    handleEditItemSave,\n    handleAddNewItem,\n    handleAddNewGroup,\n    handleCancelAddGroup,\n    handleEditGroup,\n    handleDeleteGroup,\n    isAddingGroup,\n    setIsAddingGroup,\n    newGroupName,\n    setNewGroupName,\n    groups,\n    setGroups,\n    handleShopDragStart,\n    handleShopDragOver\n  } = useShop({\n    balance,\n    onUpdateBalance,\n    onAddFloatingReward,\n    level,\n    xp,\n    savings\n  });\n\n  const [showBlindBoxHelp, setShowBlindBoxHelp] = useState(false);\n\n  const [isAddTaskOpen, setIsAddTaskOpen] = useState(false);\n  const [newTaskTitle, setNewTaskTitle] = useState('');\n  const [newTaskReward, setNewTaskReward] = useState('15');\n  const [newTaskXP, setNewTaskXP] = useState('20');\n  const [newTaskDuration, setNewTaskDuration] = useState('30');\n  const [newTaskAttr, setNewTaskAttr] = useState<AttributeTypeValue>(AttributeType.WEALTH);\n  const [newTaskType, setNewTaskType] = useState<'daily' | 'main' | 'random' | 'timebox'>('daily');\n  const [newTaskDiceCategory, setNewTaskDiceCategory] = useState<DiceCategory>('health');\n  const [newTaskNote, setNewTaskNote] = useState('');\n  const [editingTaskId, setEditingTaskId] = useState<string | null>(null);\n  const [editingProjectSubTasks, setEditingProjectSubTasks] = useState<SubTask[]>([]);\n  \n  // \n  const [reminderEnabled, setReminderEnabled] = useState(false);\n  const [reminderDate, setReminderDate] = useState('');\n  const [reminderTime, setReminderTime] = useState('');\n  const [reminderRepeat, setReminderRepeat] = useState<'none' | 'daily' | 'weekly' | 'monthly' | 'custom'>('none');\n  const [reminderInterval, setReminderInterval] = useState('1');\n\n  //  Hook\n  const { activeReminder, setActiveReminder } = useReminders(habits, projects, onUpdateHabit, onUpdateProject);\n\n  //  Hook\n  const {\n    completeTask,\n    giveUpTask\n  } = useTaskOperations({\n    onUpdateHabit,\n    onUpdateProject,\n    onAddHabit,\n    onAddProject,\n    onDeleteHabit,\n    onDeleteProject,\n    onUpdateBalance,\n    onAddFloatingReward,\n    onSpinDice,\n    onGiveUpTask,\n    setChallengePool,\n    projects,\n    habits,\n    todayStr,\n    givenUpTasks\n  });\n\n  const [isManageTasksOpen, setIsManageTasksOpen] = useState(false);\n  const [manageTaskTab, setManageTaskTab] = useState<'daily' | 'main' | 'random'>('random');\n  \n  const [isEditingGoal, setIsEditingGoal] = useState(false);\n  // \n  const [isEditingSavings, setIsEditingSavings] = useState(false);\n  const [tempSavings, setTempSavings] = useState(balance);\n  // \n  const [newTaskPriority, setNewTaskPriority] = useState<'high' | 'medium' | 'low'>('medium');\n  \n  //  Hook\n  const { draggedTask, draggedTaskIndex, handleDragStart, handleDragEnd, handleDragOver } = useDragAndDrop({\n    habitOrder,\n    projectOrder,\n    onUpdateHabitOrder,\n    onUpdateProjectOrder\n  });\n  \n  // \n  const [checkInUpdated, setCheckInUpdated] = useState(0);\n  const [isEditingTodayGoal, setIsEditingTodayGoal] = useState(false);\n  \n  const [activeHelp, setActiveHelp] = useState<string | null>(null);\n\n  const [showProtocol, setShowProtocol] = useState(false);\n  const [protocolStep, setProtocolStep] = useState(0);\n  const [readiness, setReadiness] = useState(80);\n  const [protocolFocus, setProtocolFocus] = useState('');\n  \n  // Bank Modal State\n  const [showBankModal, setShowBankModal] = useState(false);\n  const [bankAccount, setBankAccount] = useState({\n    balance: 0,\n    totalInterestEarned: 0,\n    lastInterestDate: new Date().toLocaleDateString()\n  });\n\n  // \n  const { isMuted, setIsMuted, currentBgMusicId: currentSoundId, playBgMusic: setCurrentSoundId } = useGlobalAudio() as any;\n  const audioRef = useRef<HTMLAudioElement | null>(null); //  ref \n  \n  // tempSavingsbalance\n  useEffect(() => {\n    if (!isEditingSavings) {\n      setTempSavings(balance);\n    }\n  }, [balance, isEditingSavings]);\n\n  // \n  useEffect(() => {\n    if (isEditItemOpen) {\n      setModalState && setModalState(true);\n    } else {\n      setModalState && setModalState(false);\n    }\n  }, [isEditItemOpen]);\n\n  // \n  useEffect(() => {\n    if (isManageTasksOpen) {\n      setModalState && setModalState(true);\n    } else {\n      setModalState && setModalState(false);\n    }\n  }, [isManageTasksOpen]);\n\n  // initialTabmainTab - useRefHook\n  const initialTabRef = useRef(initialTab);\n  useEffect(() => {\n    // initialTab\n    if (initialTabRef.current !== initialTab) {\n      initialTabRef.current = initialTab;\n      if (initialTab) {\n        setMainTab(initialTab);\n      }\n    }\n  }, [initialTab]);\n  \n  const handleProtocolComplete = () => {\n      onUpdateBalance(50, ` (Ready: ${readiness}%)`);\n      setTodayGoal(protocolFocus); \n      setShowProtocol(false);\n      setProtocolStep(0);\n      setProtocolFocus('');\n      onAddFloatingReward(\"\", \"text-red-500\");\n  };\n\n  // Help content for different sections with update time\n\n  // habitOrder\n  const sortedHabits = habitOrder.map(id => habits.find(h => h.id === id)).filter(h => h !== undefined) as Habit[];\n  // useMemohabitstodayStrgivenUpTaskshabitTasks\n  const habitTasks = useMemo(() => {\n    return sortedHabits.map(h => ({\n        id: h.id, text: h.name, attr: h.attr || 'DIS', xp: h.xp || Math.ceil(h.reward * 1.5), gold: h.reward, duration: h.duration || 0,\n        type: TaskType.DAILY, completed: !!h.history[todayStr], frequency: 'daily' as const, originalData: h,\n        isGivenUp: givenUpTasks.includes(h.id),\n        priority: h.priority,\n        reminder: h.reminder\n    })).sort((a, b) => {\n        if (a.isGivenUp && !b.isGivenUp) return 1;\n        if (!a.isGivenUp && b.isGivenUp) return -1;\n        return Number(a.completed) - Number(b.completed);\n    });\n  }, [sortedHabits, todayStr, givenUpTasks, habits, habitOrder]);\n\n  // projectOrder\n  const sortedProjects = projectOrder.map(id => projects.find(p => p.id === id)).filter(p => p !== undefined) as Project[];\n  // useMemoprojectsprojectTasks\n  const projectTasks = useMemo(() => {\n    return sortedProjects.map(p => {\n        // \n        const baseRewardGold = 60; // \n        const baseRewardXP = Math.ceil(baseRewardGold * 1.5); // *1.5\n        const totalDuration = p.subTasks.reduce((sum, st) => sum + st.duration, 60);\n        \n        // \n        const subTaskCount = Math.max(p.subTasks.length, 1);\n        const avgXP = Math.ceil(baseRewardXP / subTaskCount);\n        const avgGold = Math.ceil(baseRewardGold / subTaskCount);\n        \n        return {\n            id: p.id, text: p.name, attr: p.attr || 'WEA', xp: baseRewardXP, gold: baseRewardGold, type: TaskType.MAIN,\n            completed: p.status === 'completed', frequency: 'once' as const, isExpanded: true,\n            priority: p.priority,\n            originalData: p,\n            reminder: p.reminder,\n            subTasks: p.subTasks.map(st => ({\n                id: st.id, text: st.title, completed: st.completed, \n                xp: avgXP, // \n                gold: avgGold, // \n                duration: st.duration || 30, // 30\n                priority: st.priority\n            }))\n        };\n    }).sort((a, b) => Number(a.completed) - Number(b.completed));\n  }, [sortedProjects]);\n\n  // \n  useEffect(() => {\n    const checkAndFixImages = async () => {\n      const saved = localStorage.getItem('life-game-stats-v2'); \n      if (saved) {\n        try {\n          const data = JSON.parse(saved);\n          setLevel(data.level || 1);\n          setSavings(data.savings || 0);\n        } catch (e) { /*  */ }\n      }\n    };\n    \n    checkAndFixImages();\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem('life-game-stats-v2', JSON.stringify({ level, xp, inventory, savings }));\n  }, [level, xp, inventory, savings]);\n\n  // \n  const handleStartTimer = (duration: number) => {\n      if (characterProfileRef.current) {\n          characterProfileRef.current.startTimer(duration);\n          onAddFloatingReward(`: ${duration}min`, \"text-emerald-500\");\n      } else {\n          // \n      }\n  };\n\n  const toggleSubTask = (projectId: string, subTaskId: string) => {\n      const project = projects.find(p => p.id === projectId);\n      if (!project) return;\n      const subTask = project.subTasks.find(t => t.id === subTaskId);\n      if (!subTask) return;\n\n      const newStatus = !subTask.completed;\n      const newSubTasks = project.subTasks.map(t => t.id === subTaskId ? { ...t, completed: newStatus } : t);\n      \n      onUpdateProject(projectId, { subTasks: newSubTasks });\n      \n      if (newStatus) {\n          // \n          const completeSound = new Audio(\"/audio/sfx/.mp3\");\n          completeSound.volume = 0.5;\n          completeSound.play().catch(()=>{});\n          \n          // \n          confetti({\n              particleCount: 50,\n              spread: 50,\n              origin: { x: 0.5, y: 0.5 },\n              colors: ['#fbbf24', '#f59e0b', '#d97706', '#3b82f6', '#10b981', '#8b5cf6'],\n              animationDuration: 600\n          });\n      }\n  };\n\n  const giveUpSubTask = (projectId: string, subTaskId: string) => {\n      // \n      const project = projects.find(p => p.id === projectId);\n      if (!project) return;\n      const subTask = project.subTasks.find(t => t.id === subTaskId);\n      if (!subTask) return;\n      \n      const newSubTasks = project.subTasks.map(t => t.id === subTaskId ? { ...t, completed: true, isGivenUp: true } : t);\n      onUpdateProject(projectId, { subTasks: newSubTasks });\n      \n      // \n      const giveUpSound = new Audio(\"/audio/sfx/bubblepop-254773.mp3\");\n      giveUpSound.volume = 0.5;\n      giveUpSound.play().catch(()=>{});\n      \n      // \n      setTimeout(() => {\n          if (onSpinDice) {\n              const result = onSpinDice();\n              if (!result.success && result.message) {\n                  onAddFloatingReward(result.message, 'text-red-500');\n              }\n          }\n      }, 300);\n  };\n\n  const openEditTask = (task: any) => {\n      setEditingTaskId(task.id);\n      setNewTaskTitle(task.text);\n      setNewTaskReward((task.gold || 0).toString());\n      setNewTaskXP((task.xp || 20).toString());\n      setNewTaskDuration((task.duration || 30).toString());\n      setNewTaskType(task.type || (task.category ? 'random' : 'daily'));\n      setNewTaskPriority(task.priority || 'medium');\n      \n      if (task.category) {\n          setNewTaskDiceCategory(task.category);\n      }\n      \n      // \n      let taskReminder = null;\n      if (task.type === TaskType.DAILY) {\n          const habit = habits.find(h => h.id === task.id);\n          taskReminder = habit?.reminder;\n      } else if (task.type === TaskType.MAIN || task.type === 'timebox') {\n          const project = projects.find(p => p.id === task.id);\n          taskReminder = project?.reminder;\n      } else if (task.reminder) {\n          // task.reminder\n          taskReminder = task.reminder;\n      }\n      \n      if (taskReminder) {\n          setReminderEnabled(taskReminder.enabled);\n          setReminderDate(taskReminder.date || '');\n          setReminderTime(taskReminder.time || '');\n          setReminderRepeat(taskReminder.repeat || 'none');\n          setReminderInterval(taskReminder.repeatInterval?.toString() || '1');\n      } else {\n          setReminderEnabled(false);\n          setReminderDate('');\n          setReminderTime('');\n          setReminderRepeat('none');\n          setReminderInterval('1');\n      }\n\n      if (task.type === TaskType.MAIN) {\n          const p = projects.find(proj => proj.id === task.id);\n          if(p) setEditingProjectSubTasks([...p.subTasks]);\n      } else {\n          setEditingProjectSubTasks([]);\n      }\n      setIsAddTaskOpen(true);\n  };\n\n  const openEditRandomTask = (taskStr: string) => {\n      try {\n          // \n          const parsedTask = JSON.parse(taskStr);\n          setEditingTaskId(`random-${taskStr}`);\n          setNewTaskTitle(parsedTask.text);\n          setNewTaskReward((parsedTask.gold || 20).toString());\n          setNewTaskXP((parsedTask.xp || 30).toString());\n          setNewTaskDuration((parsedTask.duration || 20).toString());\n          setNewTaskAttr(parsedTask.attr || AttributeType.WEALTH);\n          setNewTaskType('random');\n          setEditingProjectSubTasks([]);\n          setIsAddTaskOpen(true);\n      } catch (e) {\n          // \n          setEditingTaskId(`random-${taskStr}`);\n          setNewTaskTitle(taskStr);\n          setNewTaskReward('20');\n          setNewTaskXP('30');\n          setNewTaskDuration('20');\n          setNewTaskAttr(AttributeType.WEALTH);\n          setNewTaskType('random');\n          setEditingProjectSubTasks([]);\n          setIsAddTaskOpen(true);\n      }\n  };\n\n  const handleSaveEditTask = () => {\n      const reminderData = reminderEnabled ? {\n          enabled: true,\n          date: reminderDate,\n          time: reminderTime,\n          repeat: reminderRepeat,\n          repeatInterval: parseInt(reminderInterval) || 1\n      } : undefined;\n\n      if (newTaskType === 'daily') {\n          onUpdateHabit(editingTaskId!, { \n              name: newTaskTitle, \n              reward: parseInt(newTaskReward),\n              xp: parseInt(newTaskXP),\n              duration: parseInt(newTaskDuration),\n              priority: newTaskPriority,\n              reminder: reminderData,\n              note: newTaskNote\n          });\n      } else if (newTaskType === 'main' || newTaskType === 'timebox') {\n          onUpdateProject(editingTaskId!, { \n              name: newTaskTitle, \n              subTasks: editingProjectSubTasks,\n              priority: newTaskPriority,\n              reminder: reminderData as any,\n              note: newTaskNote\n          });\n      } else if (newTaskType === 'random') {\n            if (editingTaskId?.startsWith('random-')) {\n                // \n                const originalTaskStr = editingTaskId.replace('random-', '');\n                const newTask = {\n                    text: newTaskTitle,\n                    gold: parseInt(newTaskReward) || 20,\n                    xp: parseInt(newTaskXP) || 30,\n                    duration: parseInt(newTaskDuration) || 20,\n                    attr: newTaskAttr,\n                    priority: newTaskPriority,\n                    reminder: reminderData,\n                    note: newTaskNote\n                };\n                setChallengePool(prevPool => prevPool.map(task => task === originalTaskStr ? JSON.stringify(newTask) : task));\n            } else if (editingTaskId) {\n                // \n                onUpdateDiceTask(editingTaskId, newTaskDiceCategory, {\n                    text: newTaskTitle,\n                    gold: parseInt(newTaskReward) || 20,\n                    xp: parseInt(newTaskXP) || 30,\n                    duration: parseInt(newTaskDuration) || 20,\n                    priority: newTaskPriority,\n                    reminder: reminderData,\n                    note: newTaskNote\n                });\n            }\n        }\n      setIsAddTaskOpen(false);\n      setEditingTaskId(null);\n  };\n\n  const handleAddNewTask = () => {\n      if (!newTaskTitle.trim()) return;\n\n      const reminderData = reminderEnabled ? {\n          enabled: true,\n          date: reminderDate,\n          time: reminderTime,\n          repeat: reminderRepeat,\n          repeatInterval: parseInt(reminderInterval) || 1\n      } : undefined;\n\n      if (newTaskType === 'daily') {\n          // note\n          const habitWithNote = {\n              id: Date.now().toString(),\n              name: newTaskTitle,\n              reward: parseInt(newTaskReward) || 15,\n              xp: parseInt(newTaskXP) || 20,\n              duration: parseInt(newTaskDuration) || 30,\n              color: '#8b5cf6',\n              attr: newTaskAttr,\n              archived: false,\n              history: {},\n              logs: {},\n              priority: newTaskPriority,\n              reminder: reminderData,\n              note: newTaskNote\n          };\n          // onAddHabithabits\n          onAddHabit(newTaskTitle, parseInt(newTaskReward) || 15);\n      } else if (newTaskType === 'main' || newTaskType === 'timebox') {\n          // 14\n          const projectReminderData = reminderEnabled ? {\n              enabled: true,\n              date: reminderDate,\n              time: reminderTime,\n              repeat: reminderRepeat,\n              repeatInterval: parseInt(reminderInterval) || 1\n          } : {\n              enabled: true,\n              time: '14:00',\n              repeat: 'daily'\n          };\n          \n          onAddProject({\n              id: Date.now().toString(), \n              name: newTaskTitle, \n              startDate: new Date().toISOString().split('T')[0],\n              description: '', \n              status: 'active', \n              logs: [], \n              dailyFocus: {}, \n              subTasks: editingProjectSubTasks, \n              fears: [], \n              todayFocusMinutes: 0, \n              attr: newTaskAttr,\n              priority: newTaskPriority,\n              reminder: projectReminderData as any,\n              note: newTaskNote\n          });\n      } else if (newTaskType === 'random') {\n          const newTask = {\n              text: newTaskTitle,\n              gold: parseInt(newTaskReward) || 20,\n              xp: parseInt(newTaskXP) || 30,\n              duration: parseInt(newTaskDuration) || 20,\n              attr: AttributeType.WEALTH,\n              category: newTaskDiceCategory || 'health',\n              priority: newTaskPriority,\n              note: newTaskNote\n          };\n          onAddDiceTask(newTask);\n          onAddFloatingReward(\"\", \"text-purple-500\");\n      }\n      setIsAddTaskOpen(false);\n      setNewTaskTitle('');\n      setNewTaskReward('15');\n      setNewTaskXP('20');\n      setNewTaskDuration('30');\n      setNewTaskAttr(AttributeType.WEALTH);\n      setNewTaskPriority('medium');\n      setNewTaskNote('');\n      setEditingProjectSubTasks([]);\n      setReminderEnabled(false);\n      setReminderDate('');\n      setReminderTime('');\n      setReminderRepeat('none');\n      setReminderInterval('1');\n  };\n\n  return (\n        <div className={`h-full flex flex-col overflow-hidden relative`}>\n            \n            {/* Reminder Popup */}\n            <ReminderPopup\n                activeReminder={activeReminder}\n                onClose={() => setActiveReminder(null)}\n                onStart={(duration) => {\n                    setActiveReminder(null);\n                    // 25\n                    const taskDuration = duration || 25;\n                    onChangeDuration(taskDuration);\n                    // \n                    onToggleTimer();\n                    // \n                    setIsImmersive(true);\n                }}\n                isNeomorphic={isNeomorphic}\n                theme={theme}\n                isDark={isDark}\n                textMain={textMain}\n                textSub={textSub}\n            />\n            \n            {/* Global Guide Card -  */}\n            <GlobalGuideCard\n              activeHelp={activeHelp}\n              helpContent={helpContent}\n              onClose={() => setActiveHelp(null)}\n              cardBg={cardBg}\n              textMain={textMain}\n              textSub={textSub}\n              config={(settings as SettingsType)?.guideCardConfig || {\n                fontSize: 'medium',\n                borderRadius: 'medium',\n                shadowIntensity: 'medium',\n                showUnderlyingPrinciple: true\n              }}\n            />\n            \n            {/*  -  */}\n            {diceState?.currentResult && (\n                <FateGiftModal\n                    task={diceState.currentResult as any}\n                    isSpinning={diceState.isSpinning}\n                    onComplete={() => {\n                        onDiceResult && onDiceResult('completed');\n                        setModalState && setModalState(false);\n                    }}\n                    onLater={() => {\n                        onDiceResult && onDiceResult('later');\n                        setModalState && setModalState(false);\n                    }}\n                    onSkip={() => {\n                        onDiceResult && onDiceResult('skipped');\n                        setModalState && setModalState(false);\n                    }}\n                    onStartTimer={(duration) => {\n                        onChangeDuration(duration);\n                        onToggleTimer();\n                        // \n                        setIsImmersive(true);\n                    }}\n                    theme={theme}\n                    onModalOpen={() => setModalState && setModalState(true)}\n                />\n            )}\n\n        {/* PURCHASE ANIMATION - Improved with large centered square popup */}\n        {justPurchasedItem && (\n            <div className=\"fixed inset-0 z-[1000] flex items-center justify-center animate-in fade-in duration-300\">\n                {/* Large Centered Square Popup with product image background */}\n                <div className={`relative w-[400px] h-[400px] flex flex-col items-center justify-end gap-4 rounded-2xl shadow-2xl mx-4 transition-all duration-300 overflow-hidden ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] border-[#1e1e2e]' : 'bg-[#e0e5ec] border-[#e0e5ec]') : isDark ? 'bg-zinc-900/95 border border-yellow-500/30' : 'bg-white/95 border border-slate-200'}`}>\n                    {/* Product Image Background */}\n                    {justPurchasedItem.image && (\n                        <div className=\"absolute inset-0 z-0\">\n                            <img \n                                src={justPurchasedItem.image} \n                                alt={justPurchasedItem.name}\n                                className=\"w-full h-full object-cover\"\n                            />\n                        </div>\n                    )}\n                    \n                    {/* Background Overlay */}\n                    <div className=\"absolute inset-0 z-10 bg-gradient-to-b from-transparent via-black/50 to-black/80\"></div>\n                    \n                    {/* Content */}\n                    <div className=\"relative z-20 flex flex-col gap-2 p-6 w-full bg-gradient-to-t from-black/80 to-transparent\">\n                        <h3 className=\"text-xl font-bold text-white\"></h3>\n                        <div className=\"font-bold text-yellow-400 text-lg\"> {justPurchasedItem.name}</div>\n                        <div className={`font-mono text-sm text-red-300`}> - {justPurchasedItem.cost}G</div>\n                        <div className={`font-mono text-sm text-green-300`}> {balance}G</div>\n                    </div>\n                </div>\n            </div>\n        )}\n\n        {/* Morning Protocol Modal */}\n        <MorningProtocolModal\n            show={showProtocol}\n            step={protocolStep}\n            setStep={setProtocolStep}\n            readiness={readiness}\n            setReadiness={setReadiness}\n            protocolFocus={protocolFocus}\n            setProtocolFocus={setProtocolFocus}\n            onComplete={handleProtocolComplete}\n        />\n\n        {/*  */}\n        <BankModal\n            show={showBankModal}\n            onClose={() => setShowBankModal(false)}\n            bankAccount={bankAccount}\n            onWithdrawAll={() => {\n                if (bankAccount.balance > 0) {\n                    onUpdateBalance(bankAccount.balance, '');\n                    const newBankAccount = { ...bankAccount, balance: 0 };\n                    setBankAccount(newBankAccount);\n                    localStorage.setItem('life-game-bank', JSON.stringify(newBankAccount));\n                    setShowBankModal(false);\n                }\n            }}\n            isDark={isDark}\n            isNeomorphic={isNeomorphic}\n            theme={theme}\n            textMain={textMain}\n            textSub={textSub}\n        />\n\n        <div className=\"flex-1 overflow-y-auto p-4 md:p-6 relative custom-scrollbar\">\n            {mainTab === 'battle' && (\n              <CharacterProfile ref={characterProfileRef} theme={theme} xp={xp} balance={balance} totalHours={totalHours} totalKills={totalTasksCompleted} checkInStreak={checkInStreak} onPomodoroComplete={onPomodoroComplete} onUpdateBalance={onUpdateBalance} onLevelChange={onLevelChange} \n                // Pomodoro Global State\n                timeLeft={timeLeft}\n                isActive={isActive}\n                duration={duration}\n                onToggleTimer={onToggleTimer}\n                onResetTimer={onResetTimer}\n                onChangeDuration={onChangeDuration}\n                onUpdateTimeLeft={onUpdateTimeLeft}\n                onUpdateIsActive={onUpdateIsActive}\n                // Audio Management\n                isMuted={isMuted}\n                currentSoundId={currentSoundId}\n                onToggleMute={setIsMuted}\n                onSoundChange={setCurrentSoundId}\n                // Immersive Mode Callback\n                onImmersiveModeChange={(newIsImmersive) => {\n                    if (newIsImmersive) {\n                        setIsNavCollapsed(true);\n                    }\n                    setIsImmersive(newIsImmersive);\n                }}\n                // Internal Immersive Mode Callback\n                onInternalImmersiveModeChange={onInternalImmersiveModeChange}\n                // Help System - \n                onHelpClick={setActiveHelp}\n                // Settings\n                settings={settings}\n              />\n            )}\n            {mainTab === 'battle' && (\n                <div className=\"max-w-4xl mx-auto space-y-6 sm:space-y-8\">\n                    {/*  -  */}\n                    <div className={`${cardBg} border p-3 rounded-xl mb-4`}>\n                        <div className=\"flex items-center justify-between mb-2\">\n                            <div className=\"text-xs text-zinc-500 uppercase font-bold flex items-center gap-1\">\n                                <Clock size={12}/> \n                            </div>\n                        </div>\n                        \n                        {/* 1.  -  */}\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                            {/*  -  */}\n                            <div className={`${cardBg} border p-1.5 rounded-lg flex flex-col justify-between transition-all duration-300 cursor-default hover:shadow-lg`}>\n                                <div className=\"flex items-center justify-between\">\n                                    <div className=\"text-xs text-zinc-500 uppercase font-bold flex items-center gap-1\">\n                                        <Activity size={10}/> \n                                    </div>\n                                    <div className=\"text-xs text-zinc-500\">\n                                        7\n                                    </div>\n                                </div>\n                                \n                                {/* 7 -  */}\n                                <div className=\"h-[70px] w-full mt-1\">\n                                    <ResponsiveContainer width=\"100%\" height={70}>\n                                        <LineChart\n                                            data={(() => {\n                                                const data = [];\n                                                for (let i = 6; i >= 0; i--) {\n                                                    const date = new Date();\n                                                    date.setDate(date.getDate() - i);\n                                                    const dayStr = date.toLocaleDateString('zh-CN', { day: 'numeric' });\n                                                    \n                                                    // \n                                                    let focusMinutes = 0;\n                                                    // statsHistory\n                                                    const dayKey = Object.keys(statsHistory).find(key => {\n                                                        const statsDate = new Date();\n                                                        statsDate.setDate(statsDate.getDate() - (7 - i));\n                                                        return parseInt(key) === statsDate.getDate();\n                                                    });\n                                                    \n                                                    if (dayKey) {\n                                                        focusMinutes = statsHistory[parseInt(dayKey)].focusMinutes;\n                                                    } else if (i === 0) {\n                                                        // \n                                                        focusMinutes = todayStats?.focusMinutes || 0;\n                                                    }\n                                                    \n                                                    data.push({\n                                                        date: dayStr,\n                                                        focusMinutes\n                                                    });\n                                                }\n                                                return data;\n                                            })()}\n                                            >\n                                            <CartesianGrid strokeDasharray=\"3 3\" stroke={isDark ? \"#27272a\" : \"#e2e8f0\"} vertical={false} />\n                                            <XAxis \n                                                dataKey=\"date\" \n                                                stroke={isDark ? \"#71717a\" : \"#71717a\"} \n                                                fontSize={8} \n                                                tickLine={false} \n                                            />\n                                            <YAxis \n                                                stroke={isDark ? \"#71717a\" : \"#71717a\"} \n                                                fontSize={8} \n                                                tickLine={false} \n                                                domain={[0, 'dataMax + 50']} \n                                                tickFormatter={(value) => `${value}min`}\n                                                hide\n                                            />\n                                            <Tooltip \n                                                contentStyle={{ \n                                                    backgroundColor: isDark ? '#18181b' : '#fff', \n                                                    borderColor: isDark ? '#333' : '#e2e8f0', \n                                                    color: isDark ? '#fff' : '#000',\n                                                    fontSize: '10px',\n                                                    padding: '4px'\n                                                }}\n                                                formatter={(value) => [`${value} `, '']}\n                                            />\n                                            <Line \n                                                type=\"monotone\" \n                                                dataKey=\"focusMinutes\" \n                                                stroke={isDark ? \"#8b5cf6\" : \"#8b5cf6\"} \n                                                strokeWidth={1.5} \n                                                dot={{ fill: isDark ? \"#8b5cf6\" : \"#8b5cf6\", r: 2 }} \n                                                activeDot={{ r: 3 }}\n                                            />\n                                        </LineChart>\n                                    </ResponsiveContainer>\n                                </div>\n                                \n                                {/*  -  */}\n                                <div className=\"mt-1 flex justify-between items-center text-xs\">\n                                    <div className=\"flex items-center gap-3\">\n                                        <span className=\"text-zinc-500\">\n                                            <span className=\"font-black\">{(() => {\n                                                // \n                                                const total = Object.values(statsHistory).reduce((sum, stats: any) => sum + (stats.focusMinutes || 0), 0) + (todayStats?.focusMinutes || 0);\n                                                const days = Math.min(Object.keys(statsHistory).length + 1, 7);\n                                                return Math.round(total / days) || 0; \n                                            })()} min</span> <span className=\"font-black\">{todayStats?.focusMinutes || 0} min</span>\n                                        </span>\n                                    </div>\n\n                                </div>\n                            </div>\n                            \n                            {/*  -  */}\n                            <div className={`${cardBg} border p-1.5 rounded-lg flex flex-col gap-1 transition-all duration-300 cursor-default hover:shadow-lg`}>\n                                <div className=\"flex justify-between items-center mb-1\">\n                                    <div className=\"text-xs text-blue-500 uppercase tracking-widest font-bold flex items-center gap-1\">\n                                        <Calendar size={14}/> \n                                    </div>\n                                    {settings && 'guideCardConfig' in settings && settings.guideCardConfig && (\n                                        <GlobalHelpButton helpId=\"checkin\" onHelpClick={setActiveHelp} size={14} className=\"text-blue-500 p-0.5\" />\n                                    )}\n                                </div>\n                                \n                                {/*  -  */}\n                                <div className=\"flex justify-center mb-1\">\n                                    <button \n                                        onClick={() => {\n                                            // \n                                            const todayDate = new Date().toLocaleDateString();\n                                            const checkInData = JSON.parse(localStorage.getItem('life-game-weekly-checkin') || '{}');\n                                            \n                                            // \n                                            if (!checkInData[todayDate]) {\n                                                // \n                                                checkInData[todayDate] = true;\n                                                localStorage.setItem('life-game-weekly-checkin', JSON.stringify(checkInData));\n                                                \n                                                // \n                                                const now = new Date();\n                                                const day = now.getDay();\n                                                const diff = now.getDate() - day + (day === 0 ? -6 : 1); // \n                                                const monday = new Date(now.setDate(diff));\n                                                const weekDates = [];\n                                                for (let i = 0; i < 7; i++) {\n                                                    const date = new Date(monday);\n                                                    date.setDate(monday.getDate() + i);\n                                                    weekDates.push(date.toLocaleDateString());\n                                                }\n                                                const consecutiveDays = weekDates.filter(date => checkInData[date]).length;\n                                                const goldReward = 10 + (consecutiveDays * 5);\n                                                const xpReward = 15 + (consecutiveDays * 3);\n                                                \n                                                // \n                                                onUpdateBalance(goldReward, \"\");\n                                                \n                                                // \n                                                onAddFloatingReward('', 'text-green-500', window.innerWidth / 2);\n                                                \n                                                // \n                                                setTimeout(() => {\n                                                    onAddFloatingReward(`+${goldReward} `, 'text-yellow-500', window.innerWidth / 2 - 80);\n                                                }, 300);\n                                                setTimeout(() => {\n                                                    onAddFloatingReward(`+${xpReward} `, 'text-blue-500', window.innerWidth / 2 + 80);\n                                                }, 600);\n                                                \n                                                // \n                                                confetti({\n                                                    particleCount: 100,\n                                                    spread: 70,\n                                                    origin: { y: 0.6 },\n                                                    colors: ['#fbbf24', '#f59e0b', '#d97706', '#3b82f6', '#10b981', '#8b5cf6']\n                                                });\n                                                \n                                                //  streak\n                                                const streak = checkInStreak + 1;\n                                                localStorage.setItem('aes-checkin-streak', streak.toString());\n                                                \n                                                // React\n                                                setTimeout(() => {\n                                                    // \n                                                    setCheckInUpdated(prev => prev + 1);\n                                                }, 100);\n                                            }\n                                        }}\n                                        disabled={(() => {\n                                            const todayDate = new Date().toLocaleDateString();\n                                            const checkInData = JSON.parse(localStorage.getItem('life-game-weekly-checkin') || '{}');\n                                            return !!checkInData[todayDate];\n                                        })()}\n                                        className={`w-11 h-11 rounded-full text-sm font-bold transition-all duration-300 flex flex-col items-center justify-center gap-0 ${(() => {\n                                            const todayDate = new Date().toLocaleDateString();\n                                            const checkInData = JSON.parse(localStorage.getItem('life-game-weekly-checkin') || '{}');\n                                            \n                                            if (checkInData[todayDate]) {\n                                                return isNeomorphic \n                                                    ? (theme === 'neomorphic-dark' \n                                                        ? 'bg-[#1e1e2e] text-emerald-500 border-2 border-emerald-500/30 cursor-not-allowed shadow-[inset_3px_3px_6px_rgba(0,0,0,0.4),inset_-3px_-3px_6px_rgba(30,30,46,0.8)]' \n                                                        : 'bg-[#e0e5ec] text-emerald-500 border-2 border-emerald-500/30 cursor-not-allowed shadow-[inset_3px_3px_6px_rgba(163,177,198,0.6),inset_-3px_-3px_6px_rgba(255,255,255,1)]') \n                                                    : 'bg-emerald-500/20 text-emerald-500 border-2 border-emerald-500/30 cursor-not-allowed';\n                                            } else {\n                                                return isNeomorphic \n                                                    ? (theme === 'neomorphic-dark' \n                                                        ? 'bg-[#1e1e2e] text-blue-500 border-2 border-blue-500/30 hover:shadow-[3px_3px_6px_rgba(0,0,0,0.4),-3px_-3px_6px_rgba(30,30,46,0.8)] active:shadow-[inset_3px_3px_6px_rgba(0,0,0,0.4),inset_-3px_-3px_6px_rgba(30,30,46,0.8)] animate-pulse' \n                                                        : 'bg-[#e0e5ec] text-blue-500 border-2 border-blue-500/30 hover:shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] active:shadow-[inset_3px_3px_6px_rgba(163,177,198,0.6),inset_-3px_-3px_6px_rgba(255,255,255,1)] animate-pulse') \n                                                    : 'bg-blue-600 text-white border-2 border-blue-700 hover:bg-blue-700 shadow-lg shadow-blue-900/30 transform hover:scale-105 animate-pulse';\n                                            }\n                                        })()}`}\n                                    >\n                                        {(() => {\n                                            const todayDate = new Date().toLocaleDateString();\n                                            const checkInData = JSON.parse(localStorage.getItem('life-game-weekly-checkin') || '{}');\n                                            return checkInData[todayDate] ? (\n                                                <>\n                                                    <Check size={20} strokeWidth={3}/>\n                                                    <span className=\"text-[9px]\"></span>\n                                                </>\n                                            ) : (\n                                                <>\n                                                    <Package size={20} strokeWidth={2}/>\n                                                    <span className=\"text-[9px]\"></span>\n                                                </>\n                                            );\n                                        })()}\n                                    </button>\n                                </div>\n                                \n                                {/* 7 -  */}\n                                <div className=\"grid grid-cols-7 gap-1\" key={checkInUpdated}>\n                                    {(() => {\n                                        // \n                                        const now = new Date();\n                                        const day = now.getDay();\n                                        const diff = now.getDate() - day + (day === 0 ? -6 : 1); // \n                                        const monday = new Date(now.setDate(diff));\n                                        \n                                        const weekDates = [];\n                                        for (let i = 0; i < 7; i++) {\n                                            const date = new Date(monday);\n                                            date.setDate(monday.getDate() + i);\n                                            weekDates.push(date);\n                                        }\n                                        \n                                        const checkInData = JSON.parse(localStorage.getItem('life-game-weekly-checkin') || '{}');\n                                        const today = new Date();\n                                        const todayDateStr = today.toLocaleDateString();\n                                        const dayNames = ['', '', '', '', '', '', ''];\n                                        \n                                        //  - \n                                        const dayIcons = [<Sun size={14}/>, <Coffee size={14}/>, <BookOpen size={14}/>, <Dumbbell size={14}/>, <Users size={14}/>, <Music size={14}/>, <Moon size={14}/>];\n                                        \n                                        return weekDates.map((date, index) => {\n                                            const dateStr = date.toLocaleDateString();\n                                            const isCheckedIn = !!checkInData[dateStr];\n                                            const isToday = dateStr === todayDateStr;\n                                            \n                                            return (\n                                                <div \n                                                    key={index} \n                                                    className={`flex flex-col items-center gap-0.5 transition-all duration-300 ${isToday ? 'scale-105' : ''}`}\n                                                >\n                                                    <div className={`\n                                                        w-full aspect-square rounded-full flex items-center justify-center border-2 text-[7px] font-bold transition-all\n                                                        ${isCheckedIn \n                                                            ? (isNeomorphic \n                                                                ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] border-emerald-500/30 text-emerald-500 shadow-[inset_1px_1px_2px_rgba(0,0,0,0.4),inset_-1px_-1px_2px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] border-emerald-500/30 text-emerald-500 shadow-[inset_1px_1px_2px_rgba(163,177,198,0.6),inset_-1px_-1px_2px_rgba(255,255,255,1)]') \n                                                                : 'border-emerald-500 bg-emerald-500/10 text-emerald-500 shadow-[0_0_3px_rgba(16,185,129,0.3)]')\n                                                            : isToday \n                                                            ? (isNeomorphic \n                                                                ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] border-blue-500/30 text-blue-500 shadow-[1px_1px_2px_rgba(0,0,0,0.4),-1px_-1px_2px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] border-blue-500/30 text-blue-500 shadow-[1px_1px_2px_rgba(163,177,198,0.6),-1px_-1px_2px_rgba(255,255,255,1)]') \n                                                                : 'border-blue-500 bg-blue-500/10 text-blue-500 shadow-[0_0_3px_rgba(59,130,246,0.3)]')\n                                                            : (isNeomorphic \n                                                                ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] border-zinc-600/30 text-zinc-400 shadow-[1px_1px_2px_rgba(0,0,0,0.4),-1px_-1px_2px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] border-zinc-300/30 text-zinc-400 shadow-[1px_1px_2px_rgba(163,177,198,0.6),-1px_-1px_2px_rgba(255,255,255,1)]') \n                                                                : (isDark ? 'border-zinc-800 bg-zinc-800 text-zinc-600' : 'border-slate-200 bg-slate-100 text-slate-400'))\n                                                    }\n                                                    `}>\n                                                        {isCheckedIn && <Check size={14} strokeWidth={3} className=\"flex-shrink-0\"/>}\n                                                        {!isCheckedIn && dayIcons[index]}\n                                                    </div>\n                                                    <div className={`text-[7px] font-bold ${isCheckedIn ? 'text-emerald-500' : isToday ? 'text-blue-500' : (isDark ? 'text-zinc-500' : 'text-slate-500')}`}>\n                                                        {dayNames[index]}\n                                                    </div>\n                                                </div>\n                                            );\n                                        });\n                                    })()}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/*  - TaskManagement */}\n                    <TaskManagement\n                        habitTasks={habitTasks}\n                        projectTasks={projectTasks}\n                        diceState={diceState}\n                        taskCategory={taskCategory}\n                        setTaskCategory={setTaskCategory}\n                        onCompleteTask={completeTask}\n                        onGiveUpTask={giveUpTask}\n                        onOpenEditTask={openEditTask}\n                        onToggleSubTask={toggleSubTask}\n                        onGiveUpSubTask={giveUpSubTask}\n                        onStartTimer={handleStartTimer}\n                        onDragStart={handleDragStart}\n                        onDragEnd={handleDragEnd}\n                        onDragOver={handleDragOver}\n                        draggedTask={draggedTask}\n                        onSpinDice={onSpinDice}\n                        onUpdateDiceState={onUpdateDiceState}\n                        onDiceResult={onDiceResult}\n                        onChangeDuration={onChangeDuration}\n                        onToggleTimer={onToggleTimer}\n                        onAddFloatingReward={onAddFloatingReward}\n                        theme={theme}\n                        cardBg={cardBg}\n                        textMain={textMain}\n                        textSub={textSub}\n                        isDark={isDark}\n                        isNeomorphic={isNeomorphic}\n                        onShowHelp={setActiveHelp}\n                        todayStr={todayStr}\n                        setIsImmersive={setIsImmersive}\n                        onAddTask={() => {\n                            // \n                            if (taskCategory === 'daily') {\n                                setNewTaskType('daily');\n                            } else if (taskCategory === 'timebox') {\n                                setNewTaskType('timebox');\n                            } else if (taskCategory === 'random') {\n                                setNewTaskType('random');\n                            }\n                            // \n                            setEditingTaskId(null);\n                            setNewTaskTitle('');\n                            setNewTaskReward('15');\n                            setNewTaskXP('20');\n                            setNewTaskDuration('30');\n                            setNewTaskPriority('medium');\n                            setNewTaskNote('');\n                            setReminderEnabled(false);\n                            setReminderDate('');\n                            setReminderTime('');\n                            setReminderRepeat('none');\n                            setReminderInterval('1');\n                            setEditingProjectSubTasks([]);\n                            setIsAddTaskOpen(true);\n                            setModalState && setModalState(true);\n                        }}\n                        onOpenTaskManagement={() => {\n                            setIsManageTasksOpen(true);\n                            setModalState && setModalState(true);\n                        }}\n                        setIsNavCollapsed={setIsNavCollapsed}\n                    />\n                </div>\n            )}\n\n            {/* ... Other Tabs (Shop, Armory, Modals) ... */}\n            {/* ... The rest of the tabs are controlled by the mainTab switch above ... */}\n            {mainTab === 'shop' && (\n                <ShopCatalog\n                    inventory={inventory}\n                    setInventory={setInventory}\n                    shopFilter={shopFilter}\n                    setShopFilter={setShopFilter}\n                    isManageShopMode={isManageShopMode}\n                    setIsManageShopMode={setIsManageShopMode}\n                    balance={balance}\n                    onPurchase={handlePurchase}\n                    onBlindBoxPurchase={handleBlindBoxPurchase}\n                    onAddNewItem={handleAddNewItem}\n                    onDeleteItem={handleDeleteItem}\n                    onEditItem={(item) => { setEditingItem(item); setIsEditItemOpen(true); }}\n                    onDragStart={handleShopDragStart}\n                    onDragOver={handleShopDragOver}\n                    onShowHelp={setActiveHelp}\n                    theme={theme}\n                    isDark={isDark}\n                    isNeomorphic={isNeomorphic}\n                    cardBg={cardBg}\n                    textMain={textMain}\n                    textSub={textSub}\n                    neomorphicStyles={neomorphicStyles}\n                    justPurchasedItem={justPurchasedItem}\n                    groups={groups}\n                    setGroups={setGroups}\n                    isAddingGroup={isAddingGroup}\n                    setIsAddingGroup={setIsAddingGroup}\n                    newGroupName={newGroupName}\n                    setNewGroupName={setNewGroupName}\n                    handleAddNewGroup={handleAddNewGroup}\n                    handleCancelAddGroup={handleCancelAddGroup}\n                    handleEditGroup={handleEditGroup}\n                    handleDeleteGroup={handleDeleteGroup}\n                />\n            )}\n            {mainTab === 'armory' && (\n                <div className=\"max-w-5xl mx-auto space-y-6\">\n                    <div className=\"flex items-center gap-4 mb-4\"><button onClick={() => setMainTab('battle')} className={`p-2 rounded-full border text-zinc-500 transition-all group ${isDark ? 'border-zinc-700 hover:text-white hover:bg-zinc-700' : 'border-slate-300 hover:bg-slate-100'}`}><ArrowLeft size={20} className=\"group-hover:-translate-x-1 transition-transform\"/></button><h2 className={`text-xl font-bold ${textMain}`}> (Armory)</h2></div>\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                        {inventory.filter(i => i.type === 'physical' && i.owned).map(item => (\n                            <div key={item.id} className={`p-4 rounded-xl border-2 ${item.equipped ? 'border-emerald-500 bg-emerald-900/10' : (isDark ? 'border-zinc-800 bg-zinc-900' : 'border-slate-200 bg-white')}`}>\n                                <div className=\"flex gap-4\"><div className=\"text-3xl\">{item.icon}</div><div><div className={`font-bold ${textMain}`}>{item.name}</div><div className=\"text-xs text-zinc-500\">{item.description}</div></div></div>\n                                <div className=\"mt-2 text-[10px] text-emerald-500 font-bold uppercase tracking-wider text-right\"></div>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            )}\n        </div>\n        \n        {/* Modals */}\n        \n        {/* Task Management Modal - FIXED */}\n        {isManageTasksOpen && (\n            <div className=\"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in\">\n                <div className={`w-full max-w-lg rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[80vh] ${cardBg}`}>\n                    <div className={`p-4 border-b flex justify-between items-center shrink-0 ${isDark ? 'border-zinc-800' : 'border-slate-200'}`}>\n                        <h3 className={`font-bold ${textMain}`}></h3>\n                        <button onClick={() => {\n                            setIsManageTasksOpen(false);\n                            setModalState && setModalState(false);\n                        }} className=\"text-zinc-500 hover:text-red-500\"><X size={20}/></button>\n                    </div>\n                            \n                    <div className={`flex p-2 ${isDark ? 'border-zinc-800' : 'border-slate-200'}`}>\n                        <button onClick={() => setManageTaskTab('random')} className={`flex-1 text-xs py-2 rounded-full font-bold flex items-center justify-center gap-1 transition-all duration-200 ${getButtonStyleLocal(manageTaskTab === 'random')}`}><Dice5 size={12} /> </button>\n                        <button onClick={() => setManageTaskTab('main')} className={`flex-1 text-xs py-2 rounded-full font-bold transition-all duration-200 ${getButtonStyleLocal(manageTaskTab === 'main')}`}></button>\n                        <button onClick={() => setManageTaskTab('daily')} className={`flex-1 text-xs py-2 rounded-full font-bold transition-all duration-200 ${getButtonStyleLocal(manageTaskTab === 'daily')}`}></button>\n                    </div>\n                            \n                    <div className={`p-4 overflow-y-auto space-y-2 flex-1`}>\n                        {/*  -  */}\n                        <div className=\"flex justify-center p-4 animate-in fade-in slide-in-from-bottom-4 duration-300\">\n                            <button \n                                onClick={() => {\n                                    setNewTaskType(manageTaskTab as 'daily' | 'main' | 'random');\n                                    setIsAddTaskOpen(true);\n                                }}\n                                className={`px-8 py-3 text-sm font-bold rounded-xl transition-all duration-200 flex items-center gap-2 ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] text-emerald-400 hover:shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] text-emerald-600 hover:shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]') : 'bg-emerald-600 hover:bg-emerald-500 text-white shadow-lg shadow-emerald-900/20'}`}\n                            >\n                                <Rocket size={18} /> \n                            </button>\n                        </div>\n                                                     \n                        {/*  */}\n                        <div className=\"space-y-2\">\n                            {manageTaskTab === 'daily' && habits.map((h) => (\n                                <div key={h.id} className={`flex items-center justify-between p-2 rounded ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] border-none rounded-lg' : 'bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] border-none rounded-lg') : (isDark ? 'border-zinc-800 bg-zinc-900/50' : 'border-slate-200 bg-slate-50')}`}>\n                                    <span className={`text-xs ${textMain}`}>{h.name}</span>\n                                    <div className=\"flex gap-2\">\n                                        <button onClick={() => { openEditTask({...h, text:h.name, type:'daily', gold:h.reward}); }} className={`${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] border-none rounded-full text-blue-400 hover:shadow-[1px_1px_3px_rgba(0,0,0,0.3),-1px_-1px_3px_rgba(30,30,46,0.7)] active:shadow-[inset_1px_1px_2px_rgba(0,0,0,0.3),inset_-1px_-1px_2px_rgba(30,30,46,0.7)] p-1' : 'bg-[#e0e5ec] shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] border-none rounded-full text-blue-500 hover:shadow-[1px_1px_3px_rgba(163,177,198,0.6),-1px_-1px_3px_rgba(255,255,255,1)] active:shadow-[inset_1px_1px_2px_rgba(163,177,198,0.6),inset_-1px_-1px_2px_rgba(255,255,255,1)] p-1') : 'text-blue-500 hover:text-blue-400 p-1 rounded-full hover:bg-blue-900/10'}`}><Edit3 size={14}/></button>\n                                        <button onClick={() => onDeleteHabit(h.id)} className={`${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] border-none rounded-full text-red-400 hover:shadow-[1px_1px_3px_rgba(0,0,0,0.3),-1px_-1px_3px_rgba(30,30,46,0.7)] active:shadow-[inset_1px_1px_2px_rgba(0,0,0,0.3),inset_-1px_-1px_2px_rgba(30,30,46,0.7)] p-1' : 'bg-[#e0e5ec] shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] border-none rounded-full text-red-500 hover:shadow-[1px_1px_3px_rgba(163,177,198,0.6),-1px_-1px_3px_rgba(255,255,255,1)] active:shadow-[inset_1px_1px_2px_rgba(163,177,198,0.6),inset_-1px_-1px_2px_rgba(255,255,255,1)] p-1') : 'text-red-500 hover:text-red-400 p-1 rounded-full hover:bg-red-900/10'}`}><Trash2 size={14}/></button>\n                                    </div>\n                                </div>\n                            ))}\n                            {manageTaskTab === 'main' && projects.map((p) => (\n                                <div key={p.id} className={`flex items-center justify-between p-2 rounded ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] border-none rounded-lg' : 'bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] border-none rounded-lg') : (isDark ? 'border-zinc-800 bg-zinc-900/50' : 'border-slate-200 bg-slate-50')}`}>\n                                    <span className={`text-xs ${textMain}`}>{p.name}</span>\n                                    <div className=\"flex gap-2\">\n                                        <button onClick={() => { openEditTask({...p, text:p.name, type:'main', gold:500}); }} className={`${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] border-none rounded-full text-blue-400 hover:shadow-[1px_1px_3px_rgba(0,0,0,0.3),-1px_-1px_3px_rgba(30,30,46,0.7)] active:shadow-[inset_1px_1px_2px_rgba(0,0,0,0.3),inset_-1px_-1px_2px_rgba(30,30,46,0.7)] p-1' : 'bg-[#e0e5ec] shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] border-none rounded-full text-blue-500 hover:shadow-[1px_1px_3px_rgba(163,177,198,0.6),-1px_-1px_3px_rgba(255,255,255,1)] active:shadow-[inset_1px_1px_2px_rgba(163,177,198,0.6),inset_-1px_-1px_2px_rgba(255,255,255,1)] p-1') : 'text-blue-500 hover:text-blue-400 p-1 rounded-full hover:bg-blue-900/10'}`}><Edit3 size={14}/></button>\n                                        <button onClick={() => onDeleteProject(p.id)} className={`${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] border-none rounded-full text-red-400 hover:shadow-[1px_1px_3px_rgba(0,0,0,0.3),-1px_-1px_3px_rgba(30,30,46,0.7)] active:shadow-[inset_1px_1px_2px_rgba(0,0,0,0.3),inset_-1px_-1px_2px_rgba(30,30,46,0.7)] p-1' : 'bg-[#e0e5ec] shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] border-none rounded-full text-red-500 hover:shadow-[1px_1px_3px_rgba(163,177,198,0.6),-1px_-1px_3px_rgba(255,255,255,1)] active:shadow-[inset_1px_1px_2px_rgba(163,177,198,0.6),inset_-1px_-1px_2px_rgba(255,255,255,1)] p-1') : 'text-red-500 hover:text-red-400 p-1 rounded-full hover:bg-red-900/10'}`}><Trash2 size={14}/></button>\n                                    </div>\n                                </div>\n                            ))}\n                            {manageTaskTab === 'random' && diceState && (\n                                <>\n                                    {/*  */}\n                                    {Object.entries(diceState.taskPool as Record<string, any[]>).map(([categoryKey, tasks]) => {\n                                        if ((tasks as any[]).length === 0) return null;\n                                                \n                                        // \n                                        const categoryInfo = {\n                                            health: { label: '', color: 'emerald' },\n                                            efficiency: { label: '', color: 'blue' },\n                                            leisure: { label: '', color: 'purple' }\n                                        }[categoryKey as keyof typeof categoryInfo] || { label: categoryKey, color: 'gray' };\n                                        return (\n                                            <div key={categoryKey} className=\"mb-4\">\n                                                <h4 className={`text-sm font-bold mb-2 ${isDark ? 'text-zinc-400' : 'text-slate-600'}`}>\n                                                    <span className={`inline-block w-2 h-2 rounded-full mr-2 bg-${categoryInfo.color}-500`}></span>\n                                                    {categoryInfo.label} ({(tasks as any[]).length})\n                                                </h4>\n                                                <div className=\"space-y-2\">\n                                                    {(tasks as any[]).map((task, index) => {\n                                                        return (\n                                                            <div key={index} className={`flex items-center justify-between p-2 rounded ${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] border-none rounded-lg' : 'bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] border-none rounded-lg') : (isDark ? 'border-zinc-800 bg-zinc-900/50' : 'border-slate-200 bg-slate-50')}`}>\n                                                                <div className=\"flex items-center gap-2\">\n                                                                    <span className={`text-xs ${textMain}`}>{task.text}</span>\n                                                                    <span className={`text-[9px] px-1.5 py-0.5 rounded-full bg-${categoryInfo.color}-100 text-${categoryInfo.color}-700 ${isDark ? 'bg-' + categoryInfo.color + '-900/30 text-' + categoryInfo.color + '-400' : ''}`}>\n                                                                        {categoryInfo.label}\n                                                                    </span>\n                                                                    <span className={`text-[9px] text-zinc-500`}>+{task.gold}G</span>\n                                                                    <span className={`text-[9px] text-zinc-500`}>{task.duration}m</span>\n                                                                </div>\n                                                                <div className=\"flex gap-2\">\n                                                                    <button \n                                                                        onClick={() => {\n                                                                            openEditTask({...task, id: task.id, type: 'random', gold: task.gold, xp: task.xp, completed: false, frequency: 'once'});\n                                                                        }}\n                                                                        className={`${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] border-none rounded-full text-blue-400 hover:shadow-[1px_1px_3px_rgba(0,0,0,0.3),-1px_-1px_3px_rgba(30,30,46,0.7)] active:shadow-[inset_1px_1px_2px_rgba(0,0,0,0.3),inset_-1px_-1px_2px_rgba(30,30,46,0.7)] p-1' : 'bg-[#e0e5ec] shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] border-none rounded-full text-blue-500 hover:shadow-[1px_1px_3px_rgba(163,177,198,0.6),-1px_-1px_3px_rgba(255,255,255,1)] active:shadow-[inset_1px_1px_2px_rgba(163,177,198,0.6),inset_-1px_-1px_2px_rgba(255,255,255,1)] p-1') : 'text-blue-500 hover:text-blue-400 p-1 rounded-full hover:bg-blue-900/10'}`}\n                                                                    >\n                                                                        <Edit3 size={14}/>\n                                                                    </button>\n                                                                    <button \n                                                                        onClick={() => onDeleteDiceTask(task.id, task.category as DiceCategory)}\n                                                                        className={`${isNeomorphic ? (theme === 'neomorphic-dark' ? 'bg-[#1e1e2e] shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] border-none rounded-full text-red-400 hover:shadow-[1px_1px_3px_rgba(0,0,0,0.3),-1px_-1px_3px_rgba(30,30,46,0.7)] active:shadow-[inset_1px_1px_2px_rgba(0,0,0,0.3),inset_-1px_-1px_2px_rgba(30,30,46,0.7)] p-1' : 'bg-[#e0e5ec] shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] border-none rounded-full text-red-500 hover:shadow-[1px_1px_3px_rgba(163,177,198,0.6),-1px_-1px_3px_rgba(255,255,255,1)] active:shadow-[inset_1px_1px_2px_rgba(163,177,198,0.6),inset_-1px_-1px_2px_rgba(255,255,255,1)] p-1') : 'text-red-500 hover:text-red-400 p-1 rounded-full hover:bg-red-900/10'}`}\n                                                                    >\n                                                                        <Trash2 size={14}/>\n                                                                    </button>\n                                                                </div>\n                                                            </div>\n                                                        );\n                                                    })}\n                                                </div>\n                                            </div>\n                                        );\n                                    })}\n                                </>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )}\n\n        {/* Edit Task Modal */}\n        <TaskEditorModal\n            isOpen={isAddTaskOpen}\n            onClose={() => {\n                setIsAddTaskOpen(false);\n                setModalState && setModalState(false);\n            }}\n            onOpen={() => setModalState && setModalState(true)}\n            editingTaskId={editingTaskId}\n            newTaskTitle={newTaskTitle}\n            setNewTaskTitle={setNewTaskTitle}\n            newTaskType={newTaskType}\n            newTaskXP={newTaskXP}\n            setNewTaskXP={setNewTaskXP}\n            newTaskReward={newTaskReward}\n            setNewTaskReward={setNewTaskReward}\n            newTaskDuration={newTaskDuration}\n            setNewTaskDuration={setNewTaskDuration}\n            newTaskPriority={newTaskPriority}\n            setNewTaskPriority={setNewTaskPriority}\n            newTaskNote={newTaskNote}\n            setNewTaskNote={setNewTaskNote}\n            reminderEnabled={reminderEnabled}\n            setReminderEnabled={setReminderEnabled}\n            reminderDate={reminderDate}\n            setReminderDate={setReminderDate}\n            reminderTime={reminderTime}\n            setReminderTime={setReminderTime}\n            reminderRepeat={reminderRepeat}\n            setReminderRepeat={setReminderRepeat}\n            reminderInterval={reminderInterval}\n            setReminderInterval={setReminderInterval}\n            editingProjectSubTasks={editingProjectSubTasks}\n            setEditingProjectSubTasks={setEditingProjectSubTasks}\n            handleSaveEditTask={handleSaveEditTask}\n            handleAddNewTask={handleAddNewTask}\n            newTaskDiceCategory={newTaskDiceCategory}\n            setNewTaskDiceCategory={setNewTaskDiceCategory}\n            isNeomorphic={isNeomorphic}\n            isNeomorphicDark={isNeomorphicDark}\n            theme={theme}\n            isDark={isDark}\n            textMain={textMain}\n        />\n\n        {/* Edit Item Modal */}\n        {isEditItemOpen && (\n            <div className=\"fixed inset-0 z-[100] bg-black/80 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in\">\n                <div className={`w-full max-w-2xl p-4 sm:p-6 rounded-2xl sm:rounded-[48px] border bg-[#e0e5ec] shadow-[10px_10px_20px_rgba(163,177,198,0.6),-10px_-10px_20px_rgba(255,255,255,1)] overflow-y-auto max-h-[90vh] transition-all duration-300 relative ${isNeomorphicDark ? '!bg-[#1e1e2e] !shadow-[10px_10px_20px_rgba(0,0,0,0.4),-10px_-10px_20px_rgba(30,30,46,0.8)]' : ''}`}>\n                    <div className=\"flex justify-between items-center mb-4 sm:mb-6\">\n                        <h3 className={`font-bold ${isNeomorphicDark ? 'text-white' : 'text-zinc-800'}`}>{editingItem.id ? '' : ''}</h3>\n                        <button \n                            onClick={() => {\n                                setIsEditItemOpen(false);\n                            }}\n                            className={`p-2 rounded-full transition-all ${isNeomorphic ? (isNeomorphicDark ? 'bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.6),-5px_-5px_10px_rgba(30,30,46,0.8)] hover:shadow-[3px_3px_6px_rgba(0,0,0,0.5),-3px_-3px_6px_rgba(30,30,46,1)] active:shadow-[inset_5px_5px_10px_rgba(0,0,0,0.6),inset_-5px_-5px_10px_rgba(30,30,46,0.8)]' : 'bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] hover:shadow-[3px_3px_6px_rgba(163,177,198,0.5),-3px_-3px_6px_rgba(255,255,255,1)] active:shadow-[inset_5px_5px_10px_rgba(163,177,198,0.6),inset_-5px_-5px_10px_rgba(255,255,255,1)]') : 'hover:bg-slate-100'}`}\n                        >\n                            <X size={16} className={`${isNeomorphicDark ? 'text-white' : 'text-zinc-800'}`} />\n                        </button>\n                    </div>\n                    <div className=\"space-y-4\">\n                        <div>\n                            <label className=\"text-[10px] uppercase font-bold text-zinc-500\"></label>\n                            <input \n                                autoFocus \n                                value={editingItem.name} \n                                onChange={e => setEditingItem(prev => ({...prev, name: e.target.value}))} \n                                className={`w-full bg-transparent border-b py-2 outline-none ${isNeomorphicDark ? 'border-zinc-600 text-white' : 'border-zinc-700 text-zinc-800'}`} \n                                placeholder=\"...\" \n                            />\n                        </div>\n                        <div>\n                            <label className=\"text-[10px] uppercase font-bold text-zinc-500\"></label>\n                            <input \n                                value={editingItem.description} \n                                onChange={e => setEditingItem(prev => ({...prev, description: e.target.value}))} \n                                className={`w-full bg-transparent border-b py-2 outline-none ${isNeomorphicDark ? 'border-zinc-600 text-white' : 'border-zinc-700 text-zinc-800'}`} \n                                placeholder=\"...\" \n                            />\n                        </div>\n                        <div>\n                            <label className=\"text-[10px] uppercase font-bold text-zinc-500\"> ()</label>\n                            <input \n                                type=\"number\" \n                                value={editingItem.cost} \n                                onChange={e => setEditingItem(prev => ({...prev, cost: parseInt(e.target.value) || 0}))} \n                                className={`w-full bg-transparent border-b py-2 outline-none ${isNeomorphicDark ? 'border-zinc-600 text-white' : 'border-zinc-700 text-zinc-800'}`} \n                                placeholder=\"...\" \n                            />\n                        </div>\n                        <div>\n                            <label className=\"text-[10px] uppercase font-bold text-zinc-500\"></label>\n                            <input \n                                value={editingItem.image || ''} \n                                onChange={e => setEditingItem(prev => ({...prev, image: e.target.value}))} \n                                className={`w-full bg-transparent border-b py-2 outline-none ${isNeomorphicDark ? 'border-zinc-600 text-white' : 'border-zinc-700 text-zinc-800'}`} \n                                placeholder=\"...\" \n                            />\n                            <p className=\"text-[8px] text-zinc-500 mt-1\"> /images/product.jpg</p>\n                        </div>\n                        <div className=\"flex justify-end gap-2 mt-6\">\n                            <button \n                                onClick={() => {\n                                    setIsEditItemOpen(false);\n                                }} \n                                className={`px-4 py-2 rounded-xl sm:rounded-[24px] transition-all font-medium ${isNeomorphic ? (isNeomorphicDark ? 'bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.6),-5px_-5px_10px_rgba(30,30,46,0.8)] hover:shadow-[3px_3px_6px_rgba(0,0,0,0.5),-3px_-3px_6px_rgba(30,30,46,1)] active:shadow-[inset_5px_5px_10px_rgba(0,0,0,0.6),inset_-5px_-5px_10px_rgba(30,30,46,0.8)] text-zinc-300' : 'bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] hover:shadow-[3px_3px_6px_rgba(163,177,198,0.5),-3px_-3px_6px_rgba(255,255,255,1)] active:shadow-[inset_5px_5px_10px_rgba(163,177,198,0.6),inset_-5px_-5px_10px_rgba(255,255,255,1)] text-zinc-800') : 'text-zinc-500 hover:text-white'}`}\n                            >\n                                \n                            </button>\n                            <button \n                                onClick={handleEditItemSave} \n                                className={`px-4 py-2 rounded-xl sm:rounded-[24px] transition-all font-medium ${isNeomorphic ? (isNeomorphicDark ? 'bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.6),-5px_-5px_10px_rgba(30,30,46,0.8)] hover:shadow-[3px_3px_6px_rgba(0,0,0,0.5),-3px_-3px_6px_rgba(30,30,46,1)] active:shadow-[inset_5px_5px_10px_rgba(0,0,0,0.6),inset_-5px_-5px_10px_rgba(30,30,46,0.8)] text-white' : 'bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] hover:shadow-[3px_3px_6px_rgba(163,177,198,0.5),-3px_-3px_6px_rgba(255,255,255,1)] active:shadow-[inset_5px_5px_10px_rgba(163,177,198,0.6),inset_-5px_-5px_10px_rgba(255,255,255,1)] text-white') : 'bg-blue-600 hover:bg-blue-500 text-white'}`}\n                            >\n                                \n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )}\n        \n    </div>\n  );\n};\n\nexport default LifeGame;","import React, { useState, useEffect, useCallback } from 'react';\nimport confetti from 'canvas-confetti';\nimport SHOP_CATALOG from '../constants/shopCatalog';\nimport { ProductType, ProductCategory } from '../types';\n\ninterface UseShopProps {\n    balance: number;\n    onUpdateBalance: (amount: number, reason: string) => void;\n    onAddFloatingReward: (text: string, color: string, x?: number, y?: number) => void;\n    level: number;\n    xp: number;\n    savings: number;\n}\n\nexport const useShop = ({\n    balance,\n    onUpdateBalance,\n    onAddFloatingReward,\n    level,\n    xp,\n    savings\n}: UseShopProps) => {\n    const [inventory, setInventory] = useState<any[]>(SHOP_CATALOG);\n    const [isManageShopMode, setIsManageShopMode] = useState(false);\n    const [shopFilter, setShopFilter] = useState<'all' | 'physical' | 'rights' | 'leisure' | 'owned' | 'blindbox'>('all');\n    const [justPurchasedItem, setJustPurchasedItem] = useState<any | null>(null);\n    const [isEditItemOpen, setIsEditItemOpen] = useState(false);\n    const [editingItem, setEditingItem] = useState<any>(null);\n    const [draggedShopIndex, setDraggedShopIndex] = useState<number | null>(null);\n    const [groups, setGroups] = useState<string[]>(['', '', '', '', '', '', '']); // \n    const [isAddingGroup, setIsAddingGroup] = useState(false); // \n    const [newGroupName, setNewGroupName] = useState(''); // \n\n    //  ( LifeGame.tsx )\n    useEffect(() => {\n        const initializeInventory = async () => {\n            const saved = localStorage.getItem('life-game-stats-v2'); \n            let initialInv = SHOP_CATALOG;\n            \n            if (saved) {\n                try {\n                    const data = JSON.parse(saved);\n                    const savedInv = data.inventory || [];\n                    const savedMap = new Map<string, any>(savedInv.map((i: any) => [i.id, i]));\n                    \n                    initialInv = SHOP_CATALOG.map(catItem => {\n                        const savedItem = savedMap.get(catItem.id);\n                        if (savedItem) {\n                            return { \n                                ...catItem, \n                                owned: savedItem.owned, \n                                purchaseCount: savedItem.purchaseCount || 0,\n                                lastPurchased: savedItem.lastPurchased || 0,\n                                // SHOP_CATALOGimages.unsplash.com\n                                image: catItem.image\n                            };\n                        }\n                        return catItem;\n                    });\n                    const catalogIds = new Set(SHOP_CATALOG.map(i => i.id));\n                    const customItems = savedInv.filter((i: any) => !catalogIds.has(i.id));\n                    initialInv = [...initialInv, ...customItems];\n                } catch (e) { /*  */ }\n            }\n            \n            // Unsplash\n    const cleanedInventory = initialInv.map(item => {\n        // via.placeholder.com\n        if (item.image && (item.image.includes('via.placeholder.com') || item.image.includes('picsum.photos'))) {\n            // SHOP_CATALOG\n            const catalogItem = SHOP_CATALOG.find(catItem => catItem.id === item.id);\n            if (catalogItem && catalogItem.image) {\n                return {\n                    ...item,\n                    image: catalogItem.image\n                };\n            }\n            // \n            return {\n                ...item,\n                image: ''\n            };\n        }\n        return item;\n    });\n    \n    setInventory(cleanedInventory.map(item => ({\n        ...item,\n        type: item.type as ProductType,\n        category: item.category as ProductCategory\n    })));\n        };\n        \n        initializeInventory();\n    }, []);\n\n    // \n    useEffect(() => {\n        localStorage.setItem('life-game-stats-v2', JSON.stringify({ level, xp, inventory, savings }));\n    }, [level, xp, inventory, savings]);\n\n    const handleBlindBoxPurchase = useCallback((price: number, e: React.MouseEvent) => {\n        e.stopPropagation();\n        if (isManageShopMode) return;\n\n        if (balance < price) {\n            onAddFloatingReward(\"\", \"text-red-500\", e.clientX, e.clientY);\n            return;\n        }\n        \n        // \n        const purchaseSound = new Audio(\"/audio/sfx/.mp3\");\n        purchaseSound.volume = 0.5;\n        purchaseSound.play().catch(()=>{});\n        \n        // \n        confetti({\n            particleCount: 100,\n            spread: 70,\n            origin: { x: e.clientX / window.innerWidth, y: e.clientY / window.innerHeight }\n        });\n        \n        const minPrice = price * 0.5;\n        const maxPrice = price * 1.5;\n        const hiddenPrice = price * 2;\n        const isHidden = Math.random() < 0.05;\n        \n        const eligibleItems = inventory.filter(item => {\n            if (isHidden) {\n                return item.cost === hiddenPrice;\n            } else {\n                return item.cost >= minPrice && item.cost <= maxPrice;\n            }\n        });\n        \n        if (eligibleItems.length === 0) {\n            onAddFloatingReward(\"\", \"text-red-500\", e.clientX, e.clientY);\n            return;\n        }\n        \n        const randomIndex = Math.floor(Math.random() * eligibleItems.length);\n        const selectedItem = eligibleItems[randomIndex];\n        \n        onUpdateBalance(-price, `: ${price}`);\n        \n        setInventory(prev => prev.map(i => {\n            if (i.id === selectedItem.id) {\n                return { \n                    ...i, \n                    owned: true,\n                    purchaseCount: (i.purchaseCount || 0) + 1,\n                    lastPurchased: Date.now(),\n                    image: i.image || ''\n                };\n            }\n            return i;\n        }));\n\n        setJustPurchasedItem(selectedItem);\n        setTimeout(() => setJustPurchasedItem(null), 2000);\n        \n        onAddFloatingReward(`${isHidden ? '' : ''}: ${selectedItem.name}`, \"text-yellow-500\", e.clientX, e.clientY);\n    }, [balance, isManageShopMode, inventory, onAddFloatingReward, onUpdateBalance]);\n\n    const handlePurchase = useCallback((item: any, e: React.MouseEvent) => {\n        e.stopPropagation();\n        if (isManageShopMode) return; \n\n        if (balance < item.cost) {\n            onAddFloatingReward(\"\", \"text-red-500\", e.clientX, e.clientY);\n            return;\n        }\n        \n        onUpdateBalance(-item.cost, `: ${item.name}`);\n        \n        const purchaseSound = new Audio(\"/audio/sfx/.mp3\");\n        purchaseSound.volume = 0.5;\n        purchaseSound.play().catch(()=>{});\n        \n        confetti({\n            particleCount: 100,\n            spread: 70,\n            origin: { x: e.clientX / window.innerWidth, y: e.clientY / window.innerHeight }\n        });\n        \n        setInventory(prev => prev.map(i => {\n            if (i.id === item.id) {\n                return { \n                    ...i, \n                    owned: true,\n                    purchaseCount: (i.purchaseCount || 0) + 1,\n                    lastPurchased: Date.now(),\n                    image: i.image || ''\n                };\n            }\n            return i;\n        }));\n\n        setJustPurchasedItem(item);\n        setTimeout(() => setJustPurchasedItem(null), 2000);\n    }, [balance, isManageShopMode, onAddFloatingReward, onUpdateBalance]);\n\n    const handleDeleteItem = useCallback((e: React.MouseEvent, id: string) => {\n        e.stopPropagation();\n        if (window.confirm(\"\")) {\n            setInventory(prev => prev.filter(i => i.id !== id));\n        }\n    }, []);\n\n    const handleEditItemSave = useCallback(() => {\n        if (editingItem) {\n            // Unsplash\n            let cleanedImage = editingItem.image || '';\n            // via.placeholder.compicsum.photos\n            if (cleanedImage.includes('via.placeholder.com') || cleanedImage.includes('picsum.photos')) {\n                cleanedImage = '';\n            }\n            // images.unsplash.comsource.unsplash.com\n            if (cleanedImage.includes('source.unsplash.com')) {\n                cleanedImage = '';\n            }\n            \n            const cleanedItem = { ...editingItem, image: cleanedImage };\n            \n            if (inventory.find(i => i.id === editingItem.id)) {\n                setInventory(prev => prev.map(i => {\n                    if (i.id === editingItem.id) {\n                        return cleanedItem;\n                    }\n                    return i;\n                }));\n            } else {\n                setInventory(prev => [...prev, cleanedItem]);\n            }\n        }\n        setIsEditItemOpen(false);\n        setEditingItem(null);\n    }, [editingItem, inventory]);\n\n    const handleAddNewItem = useCallback(() => {\n        setEditingItem({\n            id: Date.now().toString(),\n            name: '',\n            description: '',\n            cost: 50,\n            type: 'leisure',\n            icon: null, //  UI \n            image: '',\n            purchaseCount: 0,\n            lastPurchased: 0\n        });\n        setIsEditItemOpen(true);\n    }, []);\n\n    const handleAddNewGroup = useCallback(() => {\n        if (newGroupName.trim() && !groups.includes(newGroupName.trim())) {\n            setGroups(prev => [...prev, newGroupName.trim()]);\n            setNewGroupName('');\n            setIsAddingGroup(false);\n        }\n    }, [newGroupName, groups]);\n\n    const handleCancelAddGroup = useCallback(() => {\n        setNewGroupName('');\n        setIsAddingGroup(false);\n    }, []);\n\n    // \n    const handleEditGroup = useCallback((groupName: string) => {\n        // \n    }, []);\n\n    // \n    const handleDeleteGroup = useCallback((groupName: string) => {\n        // \n    }, []);\n\n    const handleShopDragStart = useCallback((index: number) => {\n        if (!isManageShopMode) return;\n        setDraggedShopIndex(index);\n    }, [isManageShopMode]);\n\n    const handleShopDragOver = useCallback((e: React.DragEvent, index: number) => {\n        e.preventDefault();\n        if (!isManageShopMode || draggedShopIndex === null || draggedShopIndex === index) return;\n\n        setInventory(prev => {\n            const newInventory = [...prev];\n            const draggedItem = newInventory[draggedShopIndex];\n            newInventory.splice(draggedShopIndex, 1);\n            newInventory.splice(index, 0, draggedItem);\n            return newInventory;\n        });\n        setDraggedShopIndex(index);\n    }, [isManageShopMode, draggedShopIndex]);\n\n    return {\n        inventory,\n        setInventory,\n        isManageShopMode,\n        setIsManageShopMode,\n        shopFilter,\n        setShopFilter,\n        justPurchasedItem,\n        setJustPurchasedItem,\n        isEditItemOpen,\n        setIsEditItemOpen,\n        editingItem,\n        setEditingItem,\n        handlePurchase,\n        handleBlindBoxPurchase,\n        handleDeleteItem,\n        handleEditItemSave,\n        handleAddNewItem,\n        handleAddNewGroup,\n        handleCancelAddGroup,\n        handleEditGroup,\n        handleDeleteGroup,\n        isAddingGroup,\n        setIsAddingGroup,\n        newGroupName,\n        setNewGroupName,\n        groups,\n        setGroups,\n        handleShopDragStart,\n        handleShopDragOver\n    };\n};\n","import { useState, useEffect, useCallback } from 'react';\nimport { Habit, Project } from '../types';\nimport soundManager from '../utils/soundManagerOptimized';\n\ninterface ReminderInfo {\n  title: string;\n  id: string;\n  type: 'habit' | 'project';\n  priority?: 'high' | 'medium' | 'low';\n  duration?: number;\n  reminderTemplate?: string;\n}\n\ninterface ReminderSettings {\n  enableBrowserNotifications: boolean;\n  enableSoundNotifications: boolean;\n  enableEmailNotifications: boolean;\n  reminderTemplates: {\n    high: string;\n    medium: string;\n    low: string;\n  };\n}\n\nexport const useReminders = (\n  habits: Habit[],\n  projects: Project[],\n  onUpdateHabit: (id: string, updates: Partial<Habit>) => void,\n  onUpdateProject: (id: string, updates: Partial<Project>) => void\n) => {\n  const [activeReminder, setActiveReminder] = useState<ReminderInfo | null>(null);\n  const [reminderHistory, setReminderHistory] = useState<ReminderInfo[]>([]);\n  const [reminderSettings, setReminderSettings] = useState<ReminderSettings>({\n    enableBrowserNotifications: true,\n    enableSoundNotifications: true,\n    enableEmailNotifications: false,\n    reminderTemplates: {\n      high: ' {title} ',\n      medium: ' {title} ',\n      low: ' {title} '\n    }\n  });\n\n  // \n  const checkNotificationPermission = useCallback(() => {\n    if ('Notification' in window) {\n      if (Notification.permission === 'default') {\n        Notification.requestPermission();\n      }\n    }\n  }, []);\n\n  // \n  const sendBrowserNotification = useCallback((title: string, message: string) => {\n    if ('Notification' in window && Notification.permission === 'granted') {\n      new Notification(title, {\n        body: message,\n        icon: '/favicon.ico',\n        badge: '/favicon.ico'\n      });\n    }\n  }, []);\n\n  // \n  const generateReminderMessage = useCallback((title: string, priority: 'high' | 'medium' | 'low' = 'medium') => {\n    const template = reminderSettings.reminderTemplates[priority];\n    return template.replace('{title}', title);\n  }, [reminderSettings.reminderTemplates]);\n\n  // \n  const triggerReminder = useCallback((title: string, id: string, type: 'habit' | 'project', reminder: any, priority: 'high' | 'medium' | 'low' = 'medium', duration?: number) => {\n    const now = new Date();\n    const lastTriggeredDate = reminder.lastTriggered ? new Date(reminder.lastTriggered) : null;\n    const minutesSinceLast = lastTriggeredDate ? (now.getTime() - lastTriggeredDate.getTime()) / (1000 * 60) : 9999;\n    \n    if (minutesSinceLast > 1) {\n      // \n      const reminderMessage = generateReminderMessage(title, priority);\n      \n      // \n      if (reminderSettings.enableSoundNotifications) {\n        soundManager.playSoundEffect('notification');\n      }\n      \n      // \n      if (reminderSettings.enableBrowserNotifications) {\n        sendBrowserNotification('', reminderMessage);\n      }\n      \n      // \n      const reminderInfo: ReminderInfo = {\n        title,\n        id,\n        type,\n        priority,\n        duration,\n        reminderTemplate: reminderMessage\n      };\n      \n      setActiveReminder(reminderInfo);\n      \n      // \n      setReminderHistory(prev => [reminderInfo, ...prev].slice(0, 50));\n      \n      const newReminder = {\n        ...reminder,\n        lastTriggered: now.toISOString()\n      };\n\n      if (type === 'habit') {\n        onUpdateHabit(id, { reminder: newReminder });\n      } else {\n        onUpdateProject(id, { reminder: newReminder });\n      }\n    }\n  }, [reminderSettings, generateReminderMessage, sendBrowserNotification, onUpdateHabit, onUpdateProject]);\n\n  // \n  const checkReminders = useCallback(() => {\n    const now = new Date();\n    const currentDayStr = now.toLocaleDateString('zh-CN');\n    const currentDateISO = now.toISOString().split('T')[0];\n    const currentTimeStr = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');\n\n    // \n    habits.forEach(habit => {\n      if (habit.reminder?.enabled && habit.reminder.time === currentTimeStr) {\n        const { date, repeat } = habit.reminder;\n        \n        if (repeat === 'none') {\n          if (date === currentDateISO) triggerReminder(habit.name, habit.id, 'habit', habit.reminder, habit.priority);\n        } else if (repeat === 'daily') {\n          triggerReminder(habit.name, habit.id, 'habit', habit.reminder, habit.priority);\n        } else if (repeat === 'weekly') {\n          const reminderDate = date ? new Date(date) : null;\n          if (reminderDate && reminderDate.getDay() === now.getDay()) triggerReminder(habit.name, habit.id, 'habit', habit.reminder, habit.priority);\n        } else if (repeat === 'monthly') {\n          const reminderDate = date ? new Date(date) : null;\n          if (reminderDate && reminderDate.getDate() === now.getDate()) triggerReminder(habit.name, habit.id, 'habit', habit.reminder, habit.priority);\n        }\n      }\n    });\n\n    // \n    projects.forEach(project => {\n      const reminder = (project as any).reminder;\n      if (reminder?.enabled && reminder.time === currentTimeStr) {\n        const { date, repeat } = reminder;\n        \n        if (repeat === 'none') {\n          if (date === currentDateISO) triggerReminder(project.name, project.id, 'project', reminder, project.priority, project.duration);\n        } else if (repeat === 'daily') {\n          triggerReminder(project.name, project.id, 'project', reminder, project.priority, project.duration);\n        } else if (repeat === 'weekly') {\n          const rDate = date ? new Date(date) : null;\n          if (rDate && rDate.getDay() === now.getDay()) triggerReminder(project.name, project.id, 'project', reminder, project.priority, project.duration);\n        } else if (repeat === 'monthly') {\n          const rDate = date ? new Date(date) : null;\n          if (rDate && rDate.getDate() === now.getDate()) triggerReminder(project.name, project.id, 'project', reminder, project.priority, project.duration);\n        }\n      }\n    });\n  }, [habits, projects, triggerReminder]);\n\n  // \n  const checkSmartReminders = useCallback(() => {\n    const now = new Date();\n    const currentTimeStr = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');\n    \n    // \n    const checkUpcomingTasks = (tasks: any[], type: 'habit' | 'project') => {\n      tasks.forEach(task => {\n        if (!task.reminder?.enabled || task.completed) return;\n        \n        const { date, time } = task.reminder;\n        if (!date || !time) return;\n        \n        const reminderDateTime = new Date(`${date}T${time}`);\n        const timeUntilReminder = reminderDateTime.getTime() - now.getTime();\n        const hoursUntilReminder = timeUntilReminder / (1000 * 60 * 60);\n        \n        // 1\n        if (task.priority === 'high' && hoursUntilReminder > 0 && hoursUntilReminder <= 1) {\n          const lastPreReminder = task.reminder.lastPreReminder ? new Date(task.reminder.lastPreReminder) : null;\n          const hoursSinceLastPreReminder = lastPreReminder ? (now.getTime() - lastPreReminder.getTime()) / (1000 * 60 * 60) : 9999;\n          \n          if (hoursSinceLastPreReminder > 1) {\n            const reminderMessage = `  \"${task.name || task.text}\" 1`;\n            \n            if (reminderSettings.enableSoundNotifications) {\n              soundManager.playSoundEffect('notification');\n            }\n            \n            if (reminderSettings.enableBrowserNotifications) {\n              sendBrowserNotification('', reminderMessage);\n            }\n            \n            const newReminder = {\n              ...task.reminder,\n              lastPreReminder: now.toISOString()\n            };\n            \n            if (type === 'habit') {\n              onUpdateHabit(task.id, { reminder: newReminder });\n            } else {\n              onUpdateProject(task.id, { reminder: newReminder });\n            }\n          }\n        }\n      });\n    };\n    \n    checkUpcomingTasks(habits, 'habit');\n    checkUpcomingTasks(projects, 'project');\n  }, [habits, projects, onUpdateHabit, onUpdateProject, reminderSettings, sendBrowserNotification]);\n\n  useEffect(() => {\n    checkNotificationPermission();\n    \n    const timer = setInterval(() => {\n      checkReminders();\n      checkSmartReminders();\n    }, 15000);\n    \n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'visible') {\n        checkReminders();\n        checkSmartReminders();\n      }\n    };\n    \n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    \n    return () => {\n      clearInterval(timer);\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, [checkReminders, checkSmartReminders, checkNotificationPermission]);\n\n  // \n  const updateReminderSettings = useCallback((settings: Partial<ReminderSettings>) => {\n    setReminderSettings(prev => ({ ...prev, ...settings }));\n  }, []);\n\n  // \n  const clearReminderHistory = useCallback(() => {\n    setReminderHistory([]);\n  }, []);\n\n  return {\n    activeReminder,\n    setActiveReminder,\n    checkReminders,\n    checkSmartReminders,\n    reminderHistory,\n    reminderSettings,\n    updateReminderSettings,\n    clearReminderHistory\n  };\n};\n","import React, { useCallback } from 'react';\nimport { TaskType, DiceCategory, DiceTask, Project, Habit, SubTask, AttributeTypeValue } from '../types';\nimport soundManagerOptimized from '../utils/soundManagerOptimized';\n\ninterface UseTaskOperationsProps {\n    onUpdateHabit: (id: string, updates: Partial<Habit>) => void;\n    onUpdateProject: (id: string, updates: Partial<Project>) => void;\n    onAddHabit: (name: string, reward: number) => void;\n    onAddProject: (project: Project) => void;\n    onDeleteHabit: (id: string) => void;\n    onDeleteProject: (id: string) => void;\n    onUpdateBalance: (amount: number, reason: string) => void;\n    onAddFloatingReward: (text: string, color: string, x?: number, y?: number) => void;\n    onSpinDice?: () => { success: boolean; message?: string };\n    onGiveUpTask?: (taskId: string) => void;\n    setChallengePool: React.Dispatch<React.SetStateAction<string[]>>;\n    projects: Project[];\n    habits: Habit[];\n    todayStr: string;\n    givenUpTasks: string[];\n}\n\nexport const useTaskOperations = ({\n    onUpdateHabit,\n    onUpdateProject,\n    onAddHabit,\n    onAddProject,\n    onDeleteHabit,\n    onDeleteProject,\n    onUpdateBalance,\n    onAddFloatingReward,\n    onSpinDice,\n    onGiveUpTask,\n    setChallengePool,\n    projects,\n    habits,\n    todayStr,\n    givenUpTasks\n}: UseTaskOperationsProps) => {\n\n    const completeTask = useCallback((task: any, e: React.MouseEvent | null) => {\n        if (task.isGivenUp) return;\n        \n        // \n        if (task.type === TaskType.DAILY) {\n            soundManagerOptimized.playSoundEffect(\"taskComplete\"); // \n        } else if (task.type === TaskType.MAIN) {\n            soundManagerOptimized.playSoundEffect(\"mainTaskComplete\"); // \n        }\n\n        if (e) {\n            // canvas-confettirequire\n            import('canvas-confetti').then(({ default: confetti }) => {\n                confetti({\n                    particleCount: 100,\n                    spread: 70,\n                    origin: { x: e.clientX / window.innerWidth, y: e.clientY / window.innerHeight }\n                });\n            }).catch(error => {\n                console.error('Failed to load confetti:', error);\n            });\n        }\n\n        if (task.type === TaskType.DAILY) {\n            // taskcompleted\n            const isCurrentlyCompleted = !!task.completed;\n            // \n            const newCompletedState = !isCurrentlyCompleted;\n            // habithistory\n            onUpdateHabit(task.id, { history: { ...task.originalData.history, [todayStr]: newCompletedState } });\n            // /\n            const amount = isCurrentlyCompleted ? -task.gold : task.gold;\n            const reason = isCurrentlyCompleted ? `: ${task.text}` : `: ${task.text}`;\n            onUpdateBalance(amount, reason);\n            onAddFloatingReward(`${amount > 0 ? '+' : ''}${amount} Gold`, amount > 0 ? \"text-yellow-500\" : \"text-red-500\", e?.clientX, e?.clientY);\n        } else if (task.type === TaskType.MAIN) {\n            // taskcompleted\n            const isCurrentlyCompleted = !!task.completed;\n            // \n            const newStatus = isCurrentlyCompleted ? 'active' : 'completed';\n            onUpdateProject(task.id, { status: newStatus });\n            // /\n            const amount = isCurrentlyCompleted ? -task.gold : task.gold;\n            const reason = isCurrentlyCompleted ? `: ${task.text}` : `: ${task.text}`;\n            onUpdateBalance(amount, reason);\n            onAddFloatingReward(`${amount > 0 ? '+' : ''}${amount} Gold`, amount > 0 ? \"text-yellow-500\" : \"text-red-500\", e?.clientX, e?.clientY);\n        }\n    }, [onUpdateHabit, onUpdateProject, onUpdateBalance, onAddFloatingReward, todayStr]);\n\n    const giveUpTask = useCallback((taskId: string, e: React.MouseEvent) => {\n        e.stopPropagation();\n        \n        // \n        soundManagerOptimized.playSoundEffect(\"taskGiveUp\");\n        \n        //  onGiveUpTask  givenUpTasks \n        if (onGiveUpTask) {\n            onGiveUpTask(taskId);\n        }\n    }, [onGiveUpTask]);\n\n    return {\n        completeTask,\n        giveUpTask\n    };\n};\n","import React, { useState } from 'react';\nimport { TaskType } from '../types';\n\ninterface UseDragAndDropProps {\n  habitOrder: string[];\n  projectOrder: string[];\n  onUpdateHabitOrder?: (newOrder: string[]) => void;\n  onUpdateProjectOrder?: (newOrder: string[]) => void;\n}\n\n/**\n *  Hook \n */\nexport const useDragAndDrop = ({\n  habitOrder,\n  projectOrder,\n  onUpdateHabitOrder,\n  onUpdateProjectOrder,\n}: UseDragAndDropProps) => {\n  const [draggedTask, setDraggedTask] = useState<any>(null);\n  const [draggedTaskIndex, setDraggedTaskIndex] = useState<number | null>(null);\n\n  /**\n   * \n   * @param task \n   * @param index \n   */\n  const handleDragStart = (task: any, index: number) => {\n    setDraggedTask(task);\n    setDraggedTaskIndex(index);\n  };\n\n  /**\n   * \n   */\n  const handleDragEnd = () => {\n    setDraggedTask(null);\n    setDraggedTaskIndex(null);\n  };\n\n  /**\n   * \n   * @param e \n   * @param targetIndex \n   */\n  const handleDragOver = (e: React.DragEvent, targetIndex: number) => {\n    e.preventDefault();\n    if (draggedTaskIndex === null || draggedTaskIndex === targetIndex || !draggedTask) return;\n\n    if (draggedTask.type === TaskType.DAILY && onUpdateHabitOrder) {\n      // \n      const newOrder = [...habitOrder];\n      const [draggedId] = newOrder.splice(draggedTaskIndex, 1);\n      newOrder.splice(targetIndex, 0, draggedId);\n      onUpdateHabitOrder(newOrder);\n      setDraggedTaskIndex(targetIndex);\n    } else if (draggedTask.type === TaskType.MAIN && onUpdateProjectOrder) {\n      // \n      const newOrder = [...projectOrder];\n      const [draggedId] = newOrder.splice(draggedTaskIndex, 1);\n      newOrder.splice(targetIndex, 0, draggedId);\n      onUpdateProjectOrder(newOrder);\n      setDraggedTaskIndex(targetIndex);\n    }\n  };\n\n  return {\n    draggedTask,\n    draggedTaskIndex,\n    handleDragStart,\n    handleDragEnd,\n    handleDragOver,\n  };\n};\n"],"file":"assets/js/LifeGame-BqFMa07h.js"}