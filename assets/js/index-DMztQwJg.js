const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./MissionControl-Cu9CWCbj.js","./recharts-Du2nWM4a.js","./react-CkAx5jlO.js","./FateDice-Cn6uAsbX.js","./three-BIQ0MFnl.js","./styleHelpers-C-Ol2m0x.js","./lucide-DOXEVAr0.js","./crypto-B1cJ1F4j.js","./confetti-3I5x4t_c.js","./LifeGame-BqFMa07h.js","./HallOfFame-Cvybn1iR.js","./Settings-BMbYVg8e.js","./ThinkingCenter-BE9Dm1QH.js","./TimeBox-80jtINfW.js","./SelfManifestation-DTIgfqMQ.js"])))=>i.map(i=>d[i]);
import{r as e,R as t,a as n}from"./recharts-Du2nWM4a.js";import{r as a,a as i,g as l}from"./react-CkAx5jlO.js";import{C as s,a as r,T as o,M as c,b as u,A as d,c as h,B as f,d as p,S as m,e as g,W as b,P as w,Z as x,D as v,U as y,G as k,H as _,f as M,g as S,h as T,i as C,j as D,k as $,l as N,m as E,n as R,o as z,p as I,L as A,q as P,r as O,X as j,s as L,t as B,u as F,v as U,w as H,V,x as W,y as G,z as J,E as K,F as q,I as X,J as Y,K as Q,N as Z,O as ee,Q as te,R as ne}from"./lucide-DOXEVAr0.js";import{C as ae,V as ie,M as le,T as se,Q as re,S as oe,a as ce,R as ue,P as de,b as he,c as fe,d as pe,e as me,W as ge,f as be,N as we,L as xe,A as ve,D as ye,g as ke,h as _e,i as Me,j as Se,k as Te,l as Ce,m as De,n as $e,G as Ne,F as Ee,o as Re,B as ze,I as Ie,p as Ae,q as Pe}from"./three-BIQ0MFnl.js";import{r as Oe}from"./crypto-B1cJ1F4j.js";import je from"./confetti-3I5x4t_c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Le,Be,Fe={exports:{}},Ue={};function He(){if(Le)return Ue;Le=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(t,n,a){var i=null;if(void 0!==a&&(i=""+a),void 0!==n.key&&(i=""+n.key),"key"in n)for(var l in a={},n)"key"!==l&&(a[l]=n[l]);else a=n;return n=a.ref,{$$typeof:e,type:t,key:i,ref:void 0!==n?n:null,props:a}}return Ue.Fragment=t,Ue.jsx=n,Ue.jsxs=n,Ue}function Ve(){return Be||(Be=1,Fe.exports=He()),Fe.exports}var We,Ge,Je,Ke,qe=Ve(),Xe={exports:{}},Ye={},Qe={exports:{}},Ze={};function et(){return We||(We=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,l=e[a];if(!(0<i(l,t)))break e;e[a]=t,e[n]=l,n=a}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,l=e.length,s=l>>>1;a<s;){var r=2*(a+1)-1,o=e[r],c=r+1,u=e[c];if(0>i(o,n))c<l&&0>i(u,o)?(e[a]=u,e[c]=n,a=c):(e[a]=o,e[r]=n,a=r);else{if(!(c<l&&0>i(u,n)))break e;e[a]=u,e[c]=n,a=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var l=performance;e.unstable_now=function(){return l.now()}}else{var s=Date,r=s.now();e.unstable_now=function(){return s.now()-r}}var o=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,g=!1,b="function"==typeof setTimeout?setTimeout:null,w="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var i=n(c);null!==i;){if(null===i.callback)a(c);else{if(!(i.startTime<=e))break;a(c),i.sortIndex=i.expirationTime,t(o,i)}i=n(c)}}function y(e){if(m=!1,v(e),!p)if(null!==n(o))p=!0,_||(_=!0,k());else{var t=n(c);null!==t&&E(y,t.startTime-e)}}var k,_=!1,M=-1,S=5,T=-1;function C(){return!(!g&&e.unstable_now()-T<S)}function D(){if(g=!1,_){var t=e.unstable_now();T=t;var i=!0;try{e:{p=!1,m&&(m=!1,w(M),M=-1),f=!0;var l=h;try{t:{for(v(t),d=n(o);null!==d&&!(d.expirationTime>t&&C());){var s=d.callback;if("function"==typeof s){d.callback=null,h=d.priorityLevel;var r=s(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof r){d.callback=r,v(t),i=!0;break t}d===n(o)&&a(o),v(t)}else a(o);d=n(o)}if(null!==d)i=!0;else{var u=n(c);null!==u&&E(y,u.startTime-t),i=!1}}break e}finally{d=null,h=l,f=!1}i=void 0}}finally{i?k():_=!1}}}if("function"==typeof x)k=function(){x(D)};else if("undefined"!=typeof MessageChannel){var $=new MessageChannel,N=$.port2;$.port1.onmessage=D,k=function(){N.postMessage(null)}}else k=function(){b(D,0)};function E(t,n){M=b(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(a,i,l){var s=e.unstable_now();switch(l="object"==typeof l&&null!==l&&"number"==typeof(l=l.delay)&&0<l?s+l:s,a){case 1:var r=-1;break;case 2:r=250;break;case 5:r=1073741823;break;case 4:r=1e4;break;default:r=5e3}return a={id:u++,callback:i,priorityLevel:a,startTime:l,expirationTime:r=l+r,sortIndex:-1},l>s?(a.sortIndex=l,t(c,a),null===n(o)&&a===n(c)&&(m?(w(M),M=-1):m=!0,E(y,l-s))):(a.sortIndex=r,t(o,a),p||f||(p=!0,_||(_=!0,k()))),a},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(Ze)),Ze}function tt(){return Ge||(Ge=1,Qe.exports=et()),Qe.exports}function nt(){if(Je)return Ye;Je=1;var e=tt(),t=a(),n=i();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function r(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function o(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function c(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function u(e){if(r(e)!==e)throw Error(l(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),v=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function $(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=D&&e[D]||e["@@iterator"])?e:null}var N=Symbol.for("react.client.reference");function E(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===N?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case g:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case _:return"SuspenseList";case T:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case m:return"Portal";case v:return e.displayName||"Context";case x:return(e.t.displayName||"Context")+".Consumer";case y:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:E(e.type)||"Memo";case S:t=e.i,e=e.l;try{return E(e(t))}catch(n){}}return null}var R=Array.isArray,z=t.o,I=n.u,A={pending:!1,data:null,method:null,action:null},P=[],O=-1;function j(e){return{current:e}}function L(e){0>O||(e.current=P[O],P[O]=null,O--)}function B(e,t){O++,P[O]=e.current,e.current=t}var F,U,H=j(null),V=j(null),W=j(null),G=j(null);function J(e,t){switch(B(W,t),B(V,e),B(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?xd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vd(t=xd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(H),B(H,e)}function K(){L(H),L(V),L(W)}function q(e){null!==e.memoizedState&&B(G,e);var t=H.current,n=vd(t,e.type);t!==n&&(B(V,e),B(H,n))}function X(e){V.current===e&&(L(H),L(V)),G.current===e&&(L(G),hh.h=A)}function Y(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||"",U=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+F+e+U}var Q=!1;function Z(e,t){if(!e||Q)return"";Q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var a=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(l){a=l}e.call(n.prototype)}}else{try{throw Error()}catch(s){a=s}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(r){if(r&&a&&"string"==typeof r.stack)return[r.stack,a.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=a.DetermineComponentFrameRoot(),s=l[0],r=l[1];if(s&&r){var o=s.split("\n"),c=r.split("\n");for(i=a=0;a<o.length&&!o[a].includes("DetermineComponentFrameRoot");)a++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(a===o.length||i===c.length)for(a=o.length-1,i=c.length-1;1<=a&&0<=i&&o[a]!==c[i];)i--;for(;1<=a&&0<=i;a--,i--)if(o[a]!==c[i]){if(1!==a||1!==i)do{if(a--,0>--i||o[a]!==c[i]){var u="\n"+o[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=i);break}}}finally{Q=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Y(n):""}function ee(e,t){switch(e.tag){case 26:case 27:case 5:return Y(e.type);case 16:return Y("Lazy");case 13:return e.child!==t&&null!==t?Y("Suspense Fallback"):Y("Suspense");case 19:return Y("SuspenseList");case 0:case 15:return Z(e.type,!1);case 11:return Z(e.type.render,!1);case 1:return Z(e.type,!0);case 31:return Y("Activity");default:return""}}function te(e){try{var t="",n=null;do{t+=ee(e,n),n=e,e=e.return}while(e);return t}catch(a){return"\nError generating stack: "+a.message+"\n"+a.stack}}var ne=Object.prototype.hasOwnProperty,ae=e.unstable_scheduleCallback,ie=e.unstable_cancelCallback,le=e.unstable_shouldYield,se=e.unstable_requestPaint,re=e.unstable_now,oe=e.unstable_getCurrentPriorityLevel,ce=e.unstable_ImmediatePriority,ue=e.unstable_UserBlockingPriority,de=e.unstable_NormalPriority,he=e.unstable_LowPriority,fe=e.unstable_IdlePriority,pe=e.log,me=e.unstable_setDisableYieldValue,ge=null,be=null;function we(e){if("function"==typeof pe&&me(e),be&&"function"==typeof be.setStrictMode)try{be.setStrictMode(ge,e)}catch(t){}}var xe=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(ve(e)/ye|0)|0},ve=Math.log,ye=Math.LN2,ke=256,_e=262144,Me=4194304;function Se(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Te(e,t,n){var a=e.pendingLanes;if(0===a)return 0;var i=0,l=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var r=134217727&a;return 0!==r?0!==(a=r&~l)?i=Se(a):0!==(s&=r)?i=Se(s):n||0!==(n=r&~e)&&(i=Se(n)):0!==(r=a&~l)?i=Se(r):0!==s?i=Se(s):n||0!==(n=a&~e)&&(i=Se(n)),0===i?0:0!==t&&t!==i&&0===(t&l)&&((l=i&-i)>=(n=t&-t)||32===l&&4194048&n)?t:i}function Ce(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function De(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function $e(){var e=Me;return!(62914560&(Me<<=1))&&(Me=4194304),e}function Ne(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ee(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Re(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-xe(t);e.entangledLanes|=t,e.entanglements[a]=1073741824|e.entanglements[a]|261930&n}function ze(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-xe(n),i=1<<a;i&t|e[a]&t&&(e[a]|=t),n&=~i}}function Ie(e,t){var n=t&-t;return 0!==((n=42&n?1:Ae(n))&(e.suspendedLanes|t))?0:n}function Ae(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Pe(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Oe(){var e=I.p;return 0!==e?e:void 0===(e=window.event)?32:Dh(e.type)}function je(e,t){var n=I.p;try{return I.p=e,t()}finally{I.p=n}}var Le=Math.random().toString(36).slice(2),Be="__reactFiber$"+Le,Fe="__reactProps$"+Le,Ue="__reactContainer$"+Le,He="__reactEvents$"+Le,Ve="__reactListeners$"+Le,We="__reactHandles$"+Le,Ge="__reactResources$"+Le,Ke="__reactMarker$"+Le;function qe(e){delete e[Be],delete e[Fe],delete e[He],delete e[Ve],delete e[We]}function Xe(e){var t=e[Be];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ue]||n[Be]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=jd(e);null!==e;){if(n=e[Be])return n;e=jd(e)}return t}n=(e=n).parentNode}return null}function Qe(e){if(e=e[Be]||e[Ue]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(l(33))}function et(e){var t=e[Ge];return t||(t=e[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function nt(e){e[Ke]=!0}var at=new Set,it={};function lt(e,t){st(e,t),st(e+"Capture",t)}function st(e,t){for(it[e]=t,e=0;e<t.length;e++)at.add(t[e])}var rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},ct={};function ut(e,t,n){if(i=t,ne.call(ct,i)||!ne.call(ot,i)&&(rt.test(i)?ct[i]=!0:(ot[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var a=t.toLowerCase().slice(0,5);if("data-"!==a&&"aria-"!==a)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function dt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ht(e,t,n,a){if(null===a)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+a)}}function ft(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function pt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function mt(e){if(!e.v){var t=pt(e)?"checked":"value";e.v=function(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==a&&"function"==typeof a.get&&"function"==typeof a.set){var i=a.get,l=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,l.call(this,e)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e.v=null,delete e[t]}}}}(e,t,""+e[t])}}function gt(e){if(!e)return!1;var t=e.v;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=pt(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function bt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var wt=/[\n"\\]/g;function xt(e){return e.replace(wt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,a,i,l,s,r){e.name="",null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ft(t)):e.value!==""+ft(t)&&(e.value=""+ft(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?kt(e,s,ft(t)):null!=n?kt(e,s,ft(n)):null!=a&&e.removeAttribute("value"),null==i&&null!=l&&(e.defaultChecked=!!l),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&"boolean"!=typeof r?e.name=""+ft(r):e.removeAttribute("name")}function yt(e,t,n,a,i,l,s,r){if(null!=l&&"function"!=typeof l&&"symbol"!=typeof l&&"boolean"!=typeof l&&(e.type=l),null!=t||null!=n){if(("submit"===l||"reset"===l)&&null==t)return void mt(e);n=null!=n?""+ft(n):"",t=null!=t?""+ft(t):n,r||t===e.value||(e.value=t),e.defaultValue=t}a="function"!=typeof(a=null!=a?a:i)&&"symbol"!=typeof a&&!!a,e.checked=r?e.checked:!!a,e.defaultChecked=!!a,null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.name=s),mt(e)}function kt(e,t,n){"number"===t&&bt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function _t(e,t,n,a){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&a&&(e[n].defaultSelected=!0)}else{for(n=""+ft(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(a&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Mt(e,t,n){null==t||((t=""+ft(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ft(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,a){if(null==t){if(null!=a){if(null!=n)throw Error(l(92));if(R(a)){if(1<a.length)throw Error(l(93));a=a[0]}n=a}null==n&&(n=""),t=n}n=ft(t),e.defaultValue=n,(a=e.textContent)===n&&""!==a&&null!==a&&(e.value=a),mt(e)}function Tt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dt(e,t,n){var a=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?a?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":a?e.setProperty(t,n):"number"!=typeof n||0===n||Ct.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function $t(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(l(62));if(e=e.style,null!=n){for(var a in n)!n.hasOwnProperty(a)||null!=t&&t.hasOwnProperty(a)||(0===a.indexOf("--")?e.setProperty(a,""):"float"===a?e.cssFloat="":e[a]="");for(var i in t)a=t[i],t.hasOwnProperty(i)&&n[i]!==a&&Dt(e,i,a)}else for(var s in t)t.hasOwnProperty(s)&&Dt(e,s,t[s])}function Nt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zt(e){return Rt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function It(){}var At=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ot=null,jt=null;function Lt(e){var t=Qe(e);if(t&&(e=t.stateNode)){var n=e[Fe]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+xt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var i=a[Fe]||null;if(!i)throw Error(l(90));vt(a,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(a=n[t]).form===e.form&&gt(a)}break e;case"textarea":Mt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&_t(e,!!n.multiple,t,!1)}}}var Bt=!1;function Ft(e,t,n){if(Bt)return e(t,n);Bt=!0;try{return e(t)}finally{if(Bt=!1,(null!==Ot||null!==jt)&&(tu(),Ot&&(t=Ot,e=jt,jt=Ot=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var a=n[Fe]||null;if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(l(231,t,typeof n));return n}var Ht=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Vt=!1;if(Ht)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch(Zh){Vt=!1}var Gt=null,Jt=null,Kt=null;function qt(){if(Kt)return Kt;var e,t,n=Jt,a=n.length,i="value"in Gt?Gt.value:Gt.textContent,l=i.length;for(e=0;e<a&&n[e]===i[e];e++);var s=a-e;for(t=1;t<=s&&n[a-t]===i[l-t];t++);return Kt=i.slice(e,1<t?1-t:void 0)}function Xt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function Qt(){return!1}function Zt(e){function t(t,n,a,i,l){for(var s in this.k=t,this._=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Yt:Qt,this.isPropagationStopped=Qt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var en,tn,nn,an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=Zt(an),sn=h({},an,{view:0,detail:0}),rn=Zt(sn),on=h({},sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nn&&(nn&&"mousemove"===e.type?(en=e.screenX-nn.screenX,tn=e.screenY-nn.screenY):tn=en=0,nn=e),en)},movementY:function(e){return"movementY"in e?e.movementY:tn}}),cn=Zt(on),un=Zt(h({},on,{dataTransfer:0})),dn=Zt(h({},sn,{relatedTarget:0})),hn=Zt(h({},an,{animationName:0,elapsedTime:0,pseudoElement:0})),fn=Zt(h({},an,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),pn=Zt(h({},an,{data:0})),mn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=bn[e])&&!!t[e]}function xn(){return wn}var vn=Zt(h({},sn,{key:function(e){if(e.key){var t=mn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Xt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?gn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?Xt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Xt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yn=Zt(h({},on,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=Zt(h({},sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),_n=Zt(h({},an,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=Zt(h({},on,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=Zt(h({},an,{newState:0,oldState:0})),Tn=[9,13,27,32],Cn=Ht&&"CompositionEvent"in window,Dn=null;Ht&&"documentMode"in document&&(Dn=document.documentMode);var $n=Ht&&"TextEvent"in window&&!Dn,Nn=Ht&&(!Cn||Dn&&8<Dn&&11>=Dn),En=String.fromCharCode(32),Rn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Tn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function In(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var An=!1,Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function On(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function jn(e,t,n,a){Ot?jt?jt.push(a):jt=[a]:Ot=a,0<(t=ld(t,"onChange")).length&&(n=new ln("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Ln=null,Bn=null;function Fn(e){Yu(e,0)}function Un(e){if(gt(Ze(e)))return e}function Hn(e,t){if("change"===e)return t}var Vn=!1;if(Ht){var Wn;if(Ht){var Gn="oninput"in document;if(!Gn){var Jn=document.createElement("div");Jn.setAttribute("oninput","return;"),Gn="function"==typeof Jn.oninput}Wn=Gn}else Wn=!1;Vn=Wn&&(!document.documentMode||9<document.documentMode)}function Kn(){Ln&&(Ln.detachEvent("onpropertychange",qn),Bn=Ln=null)}function qn(e){if("value"===e.propertyName&&Un(Bn)){var t=[];jn(t,Bn,e,Pt(e)),Ft(Fn,t)}}function Xn(e,t,n){"focusin"===e?(Kn(),Bn=n,(Ln=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Kn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(Bn)}function Qn(e,t){if("click"===e)return Un(t)}function Zn(e,t){if("input"===e||"change"===e)return Un(t)}var ea="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ta(e,t){if(ea(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var i=n[a];if(!ne.call(t,i)||!ea(e[i],t[i]))return!1}return!0}function na(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function aa(e,t){var n,a=na(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=na(a)}}function ia(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ia(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function la(e){for(var t=bt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=bt((e=t.contentWindow).document)}return t}function sa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ra=Ht&&"documentMode"in document&&11>=document.documentMode,oa=null,ca=null,ua=null,da=!1;function ha(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;da||null==oa||oa!==bt(a)||(a="selectionStart"in(a=oa)&&sa(a)?{start:a.selectionStart,end:a.selectionEnd}:{anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ua&&ta(ua,a)||(ua=a,0<(a=ld(ca,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=oa)))}function fa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var pa={animationend:fa("Animation","AnimationEnd"),animationiteration:fa("Animation","AnimationIteration"),animationstart:fa("Animation","AnimationStart"),transitionrun:fa("Transition","TransitionRun"),transitionstart:fa("Transition","TransitionStart"),transitioncancel:fa("Transition","TransitionCancel"),transitionend:fa("Transition","TransitionEnd")},ma={},ga={};function ba(e){if(ma[e])return ma[e];if(!pa[e])return e;var t,n=pa[e];for(t in n)if(n.hasOwnProperty(t)&&t in ga)return ma[e]=n[t];return e}Ht&&(ga=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);var wa=ba("animationend"),xa=ba("animationiteration"),va=ba("animationstart"),ya=ba("transitionrun"),ka=ba("transitionstart"),_a=ba("transitioncancel"),Ma=ba("transitionend"),Sa=new Map,Ta="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ca(e,t){Sa.set(e,t),lt(t,[e])}Ta.push("scrollEnd");var Da="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},$a=[],Na=0,Ea=0;function Ra(){for(var e=Na,t=Ea=Na=0;t<e;){var n=$a[t];$a[t++]=null;var a=$a[t];$a[t++]=null;var i=$a[t];$a[t++]=null;var l=$a[t];if($a[t++]=null,null!==a&&null!==i){var s=a.pending;null===s?i.next=i:(i.next=s.next,s.next=i),a.pending=i}0!==l&&Pa(n,i,l)}}function za(e,t,n,a){$a[Na++]=e,$a[Na++]=t,$a[Na++]=n,$a[Na++]=a,Ea|=a,e.lanes|=a,null!==(e=e.alternate)&&(e.lanes|=a)}function Ia(e,t,n,a){return za(e,t,n,a),Oa(e)}function Aa(e,t){return za(e,null,null,t),Oa(e)}function Pa(e,t,n){e.lanes|=n;var a=e.alternate;null!==a&&(a.lanes|=n);for(var i=!1,l=e.return;null!==l;)l.childLanes|=n,null!==(a=l.alternate)&&(a.childLanes|=n),22===l.tag&&(null===(e=l.stateNode)||1&e.$||(i=!0)),e=l,l=l.return;return 3===e.tag?(l=e.stateNode,i&&null!==t&&(i=31-xe(n),null===(a=(e=l.hiddenUpdates)[i])?e[i]=[t]:a.push(t),t.lane=536870912|n),l):null}function Oa(e){if(50<Gc)throw Gc=0,Jc=null,Error(l(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var ja={};function La(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ba(e,t,n,a){return new La(e,t,n,a)}function Fa(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ua(e,t){var n=e.alternate;return null===n?((n=Ba(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ha(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Va(e,t,n,a,i,s){var r=0;if(a=e,"function"==typeof e)Fa(e)&&(r=1);else if("string"==typeof e)r=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Ba(31,n,t,i)).elementType=T,e.lanes=s,e;case g:return Wa(n.children,i,s,t);case b:r=8,i|=24;break;case w:return(e=Ba(12,n,t,2|i)).elementType=w,e.lanes=s,e;case k:return(e=Ba(13,n,t,i)).elementType=k,e.lanes=s,e;case _:return(e=Ba(19,n,t,i)).elementType=_,e.lanes=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case v:r=10;break e;case x:r=9;break e;case y:r=11;break e;case M:r=14;break e;case S:r=16,a=null;break e}r=29,n=Error(l(130,null===e?"null":typeof e,"")),a=null}return(t=Ba(r,n,t,i)).elementType=e,t.type=a,t.lanes=s,t}function Wa(e,t,n,a){return(e=Ba(7,e,a,t)).lanes=n,e}function Ga(e,t,n){return(e=Ba(6,e,null,t)).lanes=n,e}function Ja(e){var t=Ba(18,null,null,0);return t.stateNode=e,t}function Ka(e,t,n){return(t=Ba(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qa=new WeakMap;function Xa(e,t){if("object"==typeof e&&null!==e){var n=qa.get(e);return void 0!==n?n:(t={value:e,source:t,stack:te(t)},qa.set(e,t),t)}return{value:e,source:t,stack:te(t)}}var Ya=[],Qa=0,Za=null,ei=0,ti=[],ni=0,ai=null,ii=1,li="";function si(e,t){Ya[Qa++]=ei,Ya[Qa++]=Za,Za=e,ei=t}function ri(e,t,n){ti[ni++]=ii,ti[ni++]=li,ti[ni++]=ai,ai=e;var a=ii;e=li;var i=32-xe(a)-1;a&=~(1<<i),n+=1;var l=32-xe(t)+i;if(30<l){var s=i-i%5;l=(a&(1<<s)-1).toString(32),a>>=s,i-=s,ii=1<<32-xe(t)+i|n<<i|a,li=l+e}else ii=1<<l|n<<i|a,li=e}function oi(e){null!==e.return&&(si(e,1),ri(e,1,0))}function ci(e){for(;e===Za;)Za=Ya[--Qa],Ya[Qa]=null,ei=Ya[--Qa],Ya[Qa]=null;for(;e===ai;)ai=ti[--ni],ti[ni]=null,li=ti[--ni],ti[ni]=null,ii=ti[--ni],ti[ni]=null}function ui(e,t){ti[ni++]=ii,ti[ni++]=li,ti[ni++]=ai,ii=t.id,li=t.overflow,ai=e}var di=null,hi=null,fi=!1,pi=null,mi=!1,gi=Error(l(519));function bi(e){throw _i(Xa(Error(l(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),gi}function wi(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[Be]=e,t[Fe]=a,n){case"dialog":Qu("cancel",t),Qu("close",t);break;case"iframe":case"object":case"embed":Qu("load",t);break;case"video":case"audio":for(n=0;n<qu.length;n++)Qu(qu[n],t);break;case"source":Qu("error",t);break;case"img":case"image":case"link":Qu("error",t),Qu("load",t);break;case"details":Qu("toggle",t);break;case"input":Qu("invalid",t),yt(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Qu("invalid",t);break;case"textarea":Qu("invalid",t),St(t,a.value,a.defaultValue,a.children)}"string"!=typeof(n=a.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===a.suppressHydrationWarning||dd(t.textContent,n)?(null!=a.popover&&(Qu("beforetoggle",t),Qu("toggle",t)),null!=a.onScroll&&Qu("scroll",t),null!=a.onScrollEnd&&Qu("scrollend",t),null!=a.onClick&&(t.onclick=It),t=!0):t=!1,t||bi(e,!0)}function xi(e){for(di=e.return;di;)switch(di.tag){case 5:case 31:case 13:return void(mi=!1);case 27:case 3:return void(mi=!0);default:di=di.return}}function vi(e){if(e!==di)return!1;if(!fi)return xi(e),fi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||yd(e.type,e.memoizedProps)),t=!t),t&&hi&&bi(e),xi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));hi=Od(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));hi=Od(e)}else 27===n?(n=hi,Dd(e.type)?(e=Pd,Pd=null,hi=e):hi=n):hi=di?Ad(e.stateNode.nextSibling):null;return!0}function yi(){hi=di=null,fi=!1}function ki(){var e=pi;return null!==e&&(null===Rc?Rc=e:Rc.push.apply(Rc,e),pi=null),e}function _i(e){null===pi?pi=[e]:pi.push(e)}var Mi=j(null),Si=null,Ti=null;function Ci(e,t,n){B(Mi,t.h),t.h=n}function Di(e){e.h=Mi.current,L(Mi)}function $i(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Ni(e,t,n,a){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var r=i.child;s=s.firstContext;e:for(;null!==s;){var o=s;s=i;for(var c=0;c<t.length;c++)if(o.context===t[c]){s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),$i(s.return,n,e),a||(r=null);break e}s=o.next}}else if(18===i.tag){if(null===(r=i.return))throw Error(l(341));r.lanes|=n,null!==(s=r.alternate)&&(s.lanes|=n),$i(r,n,e),r=null}else r=i.child;if(null!==r)r.return=i;else for(r=i;null!==r;){if(r===e){r=null;break}if(null!==(i=r.sibling)){i.return=r.return,r=i;break}r=r.return}i=r}}function Ei(e,t,n,a){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(524288&i.flags)s=!0;else if(262144&i.flags)break;if(10===i.tag){var r=i.alternate;if(null===r)throw Error(l(387));if(null!==(r=r.memoizedProps)){var o=i.type;ea(i.pendingProps.value,r.value)||(null!==e?e.push(o):e=[o])}}else if(i===G.current){if(null===(r=i.alternate))throw Error(l(387));r.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(hh):e=[hh])}i=i.return}null!==e&&Ni(t,e,n,a),t.flags|=262144}function Ri(e){for(e=e.firstContext;null!==e;){if(!ea(e.context.h,e.memoizedValue))return!0;e=e.next}return!1}function zi(e){Si=e,Ti=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ii(e){return Pi(Si,e)}function Ai(e,t){return null===Si&&zi(e),Pi(e,t)}function Pi(e,t){var n=t.h;if(t={context:t,memoizedValue:n,next:null},null===Ti){if(null===e)throw Error(l(308));Ti=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ti=Ti.next=t;return n}var Oi="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ji=e.unstable_scheduleCallback,Li=e.unstable_NormalPriority,Bi={$$typeof:v,Consumer:null,Provider:null,h:null,N:null,R:0};function Fi(){return{controller:new Oi,data:new Map,refCount:0}}function Ui(e){e.refCount--,0===e.refCount&&ji(Li,function(){e.controller.abort()})}var Hi=null,Vi=0,Wi=0,Gi=null;function Ji(){if(0===--Vi&&null!==Hi){null!==Gi&&(Gi.status="fulfilled");var e=Hi;Hi=null,Wi=0,Gi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ki=z.S;z.S=function(e,t){Ac=re(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Hi){var n=Hi=[];Vi=0,Wi=Vu(),Gi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Vi++,t.then(Ji,Ji)}(0,t),null!==Ki&&Ki(e,t)};var qi=j(null);function Xi(){var e=qi.current;return null!==e?e:gc.pooledCache}function Yi(e,t){B(qi,null===t?qi.current:t.pool)}function Qi(){var e=Xi();return null===e?null:{parent:Bi.h,pool:e}}var Zi=Error(l(460)),el=Error(l(474)),tl=Error(l(542)),nl={then:function(){}};function al(e){return"fulfilled"===(e=e.status)||"rejected"===e}function il(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(It,It),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ol(e=t.reason),e;default:if("string"==typeof t.status)t.then(It,It);else{if(null!==(e=gc)&&100<e.shellSuspendCounter)throw Error(l(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ol(e=t.reason),e}throw sl=t,Zi}}function ll(e){try{return(0,e.l)(e.i)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw sl=t,Zi;throw t}}var sl=null;function rl(){if(null===sl)throw Error(l(459));var e=sl;return sl=null,e}function ol(e){if(e===Zi||e===tl)throw Error(l(483))}var cl=null,ul=0;function dl(e){var t=ul;return ul+=1,null===cl&&(cl=[]),il(cl,e,t)}function hl(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function fl(e,t){if(t.$$typeof===f)throw Error(l(525));throw e=Object.prototype.toString.call(t),Error(l(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pl(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Ua(e,t)).index=0,e.sibling=null,e}function s(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=67108866,n):a:(t.flags|=67108866,n):(t.flags|=1048576,n)}function r(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function o(e,t,n,a){return null===t||6!==t.tag?((t=Ga(n,e.mode,a)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,a){var l=n.type;return l===g?d(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===l||"object"==typeof l&&null!==l&&l.$$typeof===S&&ll(l)===t.type)?(hl(t=i(t,n.props),n),t.return=e,t):(hl(t=Va(n.type,n.key,n.props,null,e.mode,a),n),t.return=e,t)}function u(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ka(n,e.mode,a)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,a,l){return null===t||7!==t.tag?((t=Wa(n,e.mode,a,l)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Ga(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return hl(n=Va(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Ka(t,e.mode,n)).return=e,t;case S:return h(e,t=ll(t),n)}if(R(t)||$(t))return(t=Wa(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return h(e,dl(t),n);if(t.$$typeof===v)return h(e,Ai(e,t),n);fl(e,t)}return null}function f(e,t,n,a){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:o(e,t,""+n,a);if("object"==typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,a):null;case m:return n.key===i?u(e,t,n,a):null;case S:return f(e,t,n=ll(n),a)}if(R(n)||$(n))return null!==i?null:d(e,t,n,a,null);if("function"==typeof n.then)return f(e,t,dl(n),a);if(n.$$typeof===v)return f(e,t,Ai(e,n),a);fl(e,n)}return null}function b(e,t,n,a,i){if("string"==typeof a&&""!==a||"number"==typeof a||"bigint"==typeof a)return o(t,e=e.get(n)||null,""+a,i);if("object"==typeof a&&null!==a){switch(a.$$typeof){case p:return c(t,e=e.get(null===a.key?n:a.key)||null,a,i);case m:return u(t,e=e.get(null===a.key?n:a.key)||null,a,i);case S:return b(e,t,n,a=ll(a),i)}if(R(a)||$(a))return d(t,e=e.get(n)||null,a,i,null);if("function"==typeof a.then)return b(e,t,n,dl(a),i);if(a.$$typeof===v)return b(e,t,n,Ai(t,a),i);fl(t,a)}return null}function w(o,c,u,d){if("object"==typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var x=u.key;null!==c;){if(c.key===x){if((x=u.type)===g){if(7===c.tag){n(o,c.sibling),(d=i(c,u.props.children)).return=o,o=d;break e}}else if(c.elementType===x||"object"==typeof x&&null!==x&&x.$$typeof===S&&ll(x)===c.type){n(o,c.sibling),hl(d=i(c,u.props),u),d.return=o,o=d;break e}n(o,c);break}t(o,c),c=c.sibling}u.type===g?((d=Wa(u.props.children,o.mode,d,u.key)).return=o,o=d):(hl(d=Va(u.type,u.key,u.props,null,o.mode,d),u),d.return=o,o=d)}return r(o);case m:e:{for(x=u.key;null!==c;){if(c.key===x){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(o,c.sibling),(d=i(c,u.children||[])).return=o,o=d;break e}n(o,c);break}t(o,c),c=c.sibling}(d=Ka(u,o.mode,d)).return=o,o=d}return r(o);case S:return w(o,c,u=ll(u),d)}if(R(u))return function(i,l,r,o){for(var c=null,u=null,d=l,p=l=0,m=null;null!==d&&p<r.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=f(i,d,r[p],o);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),l=s(g,l,p),null===u?c=g:u.sibling=g,u=g,d=m}if(p===r.length)return n(i,d),fi&&si(i,p),c;if(null===d){for(;p<r.length;p++)null!==(d=h(i,r[p],o))&&(l=s(d,l,p),null===u?c=d:u.sibling=d,u=d);return fi&&si(i,p),c}for(d=a(d);p<r.length;p++)null!==(m=b(d,i,p,r[p],o))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),l=s(m,l,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),fi&&si(i,p),c}(o,c,u,d);if($(u)){if("function"!=typeof(x=$(u)))throw Error(l(150));return function(i,r,o,c){if(null==o)throw Error(l(151));for(var u=null,d=null,p=r,m=r=0,g=null,w=o.next();null!==p&&!w.done;m++,w=o.next()){p.index>m?(g=p,p=null):g=p.sibling;var x=f(i,p,w.value,c);if(null===x){null===p&&(p=g);break}e&&p&&null===x.alternate&&t(i,p),r=s(x,r,m),null===d?u=x:d.sibling=x,d=x,p=g}if(w.done)return n(i,p),fi&&si(i,m),u;if(null===p){for(;!w.done;m++,w=o.next())null!==(w=h(i,w.value,c))&&(r=s(w,r,m),null===d?u=w:d.sibling=w,d=w);return fi&&si(i,m),u}for(p=a(p);!w.done;m++,w=o.next())null!==(w=b(p,i,m,w.value,c))&&(e&&null!==w.alternate&&p.delete(null===w.key?m:w.key),r=s(w,r,m),null===d?u=w:d.sibling=w,d=w);return e&&p.forEach(function(e){return t(i,e)}),fi&&si(i,m),u}(o,c,u=x.call(u),d)}if("function"==typeof u.then)return w(o,c,dl(u),d);if(u.$$typeof===v)return w(o,c,Ai(o,u),d);fl(o,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(o,c.sibling),(d=i(c,u)).return=o,o=d):(n(o,c),(d=Ga(u,o.mode,d)).return=o,o=d),r(o)):n(o,c)}return function(e,t,n,a){try{ul=0;var i=w(e,t,n,a);return cl=null,i}catch(s){if(s===Zi||s===tl)throw s;var l=Ba(29,s,null,e.mode);return l.lanes=a,l.return=e,l}}}var ml=pl(!0),gl=pl(!1),bl=!1;function wl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function yl(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,2&mc){var i=a.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),a.pending=t,t=Oa(e),Pa(e,null,n),t}return za(e,a,t,n),Oa(e)}function kl(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,ze(e,n)}}function _l(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var i=null,l=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===l?i=l=s:l=l.next=s,n=n.next}while(null!==n);null===l?i=l=t:l=l.next=t}else i=l=t;return n={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:a.shared,callbacks:a.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ml=!1;function Sl(){if(Ml&&null!==Gi)throw Gi}function Tl(e,t,n,a){Ml=!1;var i=e.updateQueue;bl=!1;var l=i.firstBaseUpdate,s=i.lastBaseUpdate,r=i.shared.pending;if(null!==r){i.shared.pending=null;var o=r,c=o.next;o.next=null,null===s?l=c:s.next=c,s=o;var u=e.alternate;null!==u&&(r=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===r?u.firstBaseUpdate=c:r.next=c,u.lastBaseUpdate=o)}if(null!==l){var d=i.baseState;for(s=0,u=c=o=null,r=l;;){var f=-536870913&r.lane,p=f!==r.lane;if(p?(wc&f)===f:(a&f)===f){0!==f&&f===Wi&&(Ml=!0),null!==u&&(u=u.next={lane:0,tag:r.tag,payload:r.payload,callback:null,next:null});e:{var m=e,g=r;f=t;var b=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){d=m.call(b,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(f="function"==typeof(m=g.payload)?m.call(b,d,f):m))break e;d=h({},d,f);break e;case 2:bl=!0}}null!==(f=r.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:r.tag,payload:r.payload,callback:r.callback,next:null},null===u?(c=u=p,o=d):u=u.next=p,s|=f;if(null===(r=r.next)){if(null===(r=i.shared.pending))break;r=(p=r).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(o=d),i.baseState=o,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===l&&(i.shared.lanes=0),Tc|=s,e.lanes=s,e.memoizedState=d}}function Cl(e,t){if("function"!=typeof e)throw Error(l(191,e));e.call(t)}function Dl(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Cl(n[e],t)}var $l=j(null),Nl=j(0);function El(e,t){B(Nl,e=Mc),B($l,t),Mc=e|t.baseLanes}function Rl(){B(Nl,Mc),B($l,$l.current)}function zl(){Mc=Nl.current,L($l),L(Nl)}var Il=j(null),Al=null;function Pl(e){var t=e.alternate;B(Fl,1&Fl.current),B(Il,e),null===Al&&(null===t||null!==$l.current||null!==t.memoizedState)&&(Al=e)}function Ol(e){B(Fl,Fl.current),B(Il,e),null===Al&&(Al=e)}function jl(e){22===e.tag?(B(Fl,Fl.current),B(Il,e),null===Al&&(Al=e)):Ll()}function Ll(){B(Fl,Fl.current),B(Il,Il.current)}function Bl(e){L(Il),Al===e&&(Al=null),L(Fl)}var Fl=j(0);function Ul(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||zd(n)||Id(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hl=0,Vl=null,Wl=null,Gl=null,Jl=!1,Kl=!1,ql=!1,Xl=0,Yl=0,Ql=null,Zl=0;function es(){throw Error(l(321))}function ts(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ea(e[n],t[n]))return!1;return!0}function ns(e,t,n,a,i,l){return Hl=l,Vl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,z.H=null===e||null===e.memoizedState?br:wr,ql=!1,l=n(a,i),ql=!1,Kl&&(l=is(t,n,a,i)),as(e),l}function as(e){z.H=gr;var t=null!==Wl&&null!==Wl.next;if(Hl=0,Gl=Wl=Vl=null,Jl=!1,Yl=0,Ql=null,t)throw Error(l(300));null===e||Ir||null!==(e=e.dependencies)&&Ri(e)&&(Ir=!0)}function is(e,t,n,a){Vl=e;var i=0;do{if(Kl&&(Ql=null),Yl=0,Kl=!1,25<=i)throw Error(l(301));if(i+=1,Gl=Wl=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}z.H=xr,s=t(n,a)}while(Kl);return s}function ls(){var e=z.H,t=e.useState()[0];return t="function"==typeof t.then?ds(t):t,e=e.useState()[0],(null!==Wl?Wl.memoizedState:null)!==e&&(Vl.flags|=1024),t}function ss(){var e=0!==Xl;return Xl=0,e}function rs(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function os(e){if(Jl){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Jl=!1}Hl=0,Gl=Wl=Vl=null,Kl=!1,Yl=Xl=0,Ql=null}function cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Gl?Vl.memoizedState=Gl=e:Gl=Gl.next=e,Gl}function us(){if(null===Wl){var e=Vl.alternate;e=null!==e?e.memoizedState:null}else e=Wl.next;var t=null===Gl?Vl.memoizedState:Gl.next;if(null!==t)Gl=t,Wl=e;else{if(null===e){if(null===Vl.alternate)throw Error(l(467));throw Error(l(310))}e={memoizedState:(Wl=e).memoizedState,baseState:Wl.baseState,baseQueue:Wl.baseQueue,queue:Wl.queue,next:null},null===Gl?Vl.memoizedState=Gl=e:Gl=Gl.next=e}return Gl}function ds(e){var t=Yl;return Yl+=1,null===Ql&&(Ql=[]),e=il(Ql,e,t),t=Vl,null===(null===Gl?t.memoizedState:Gl.next)&&(t=t.alternate,z.H=null===t||null===t.memoizedState?br:wr),e}function hs(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return ds(e);if(e.$$typeof===v)return Ii(e)}throw Error(l(438,String(e)))}function fs(e){var t=null,n=Vl.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var a=Vl.alternate;null!==a&&null!==(a=a.updateQueue)&&null!=(a=a.memoCache)&&(t={data:a.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Vl.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=C;return t.index++,n}function ps(e,t){return"function"==typeof t?t(e):t}function ms(e){return gs(us(),Wl,e)}function gs(e,t,n){var a=e.queue;if(null===a)throw Error(l(311));a.lastRenderedReducer=n;var i=e.baseQueue,s=a.pending;if(null!==s){if(null!==i){var r=i.next;i.next=s.next,s.next=r}t.baseQueue=i=s,a.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var o=r=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(wc&h)===h:(Hl&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Wi&&(d=!0);else{if((Hl&f)===f){u=u.next,f===Wi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(o=c=h,r=s):c=c.next=h,Vl.lanes|=f,Tc|=f}h=u.action,ql&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(o=c=f,r=s):c=c.next=f,Vl.lanes|=h,Tc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?r=s:c.next=o,!ea(s,e.memoizedState)&&(Ir=!0,d&&null!==(n=Gi)))throw n;e.memoizedState=s,e.baseState=r,e.baseQueue=c,a.lastRenderedState=s}return null===i&&(a.lanes=0),[e.memoizedState,a.dispatch]}function bs(e){var t=us(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var a=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var r=i=i.next;do{s=e(s,r.action),r=r.next}while(r!==i);ea(s,t.memoizedState)||(Ir=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,a]}function ws(e,t,n){var a=Vl,i=us(),s=fi;if(s){if(void 0===n)throw Error(l(407));n=n()}else n=t();var r=!ea((Wl||i).memoizedState,n);if(r&&(i.memoizedState=n,Ir=!0),i=i.queue,Hs(ys.bind(null,a,i,e),[e]),i.getSnapshot!==t||r||null!==Gl&&1&Gl.memoizedState.tag){if(a.flags|=2048,js(9,{destroy:void 0},vs.bind(null,a,i,n,t),null),null===gc)throw Error(l(349));s||127&Hl||xs(a,t,n)}return n}function xs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Vl.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Vl.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function vs(e,t,n,a){t.value=n,t.getSnapshot=a,ks(t)&&_s(e)}function ys(e,t,n){return n(function(){ks(t)&&_s(e)})}function ks(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ea(e,n)}catch(a){return!0}}function _s(e){var t=Aa(e,2);null!==t&&Xc(t,0,2)}function Ms(e){var t=cs();if("function"==typeof e){var n=e;if(e=n(),ql){we(!0);try{n()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:e},t}function Ss(e,t,n,a){return e.baseState=n,gs(e,Wl,"function"==typeof a?a:ps)}function Ts(e,t,n,a,i){if(fr(e))throw Error(l(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==z.T?n(!0):s.isTransition=!1,a(s),null===(n=t.pending)?(s.next=t.pending=s,Cs(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Cs(e,t){var n=t.action,a=t.payload,i=e.state;if(t.isTransition){var l=z.T,s={};z.T=s;try{var r=n(i,a),o=z.S;null!==o&&o(s,r),Ds(e,t,r)}catch(c){Ns(e,t,c)}finally{null!==l&&null!==s.types&&(l.types=s.types),z.T=l}}else try{Ds(e,t,l=n(i,a))}catch(u){Ns(e,t,u)}}function Ds(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){$s(e,t,n)},function(n){return Ns(e,t,n)}):$s(e,t,n)}function $s(e,t,n){t.status="fulfilled",t.value=n,Es(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Cs(e,n)))}function Ns(e,t,n){var a=e.pending;if(e.pending=null,null!==a){a=a.next;do{t.status="rejected",t.reason=n,Es(t),t=t.next}while(t!==a)}e.action=null}function Es(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Rs(e,t){return t}function zs(e,t){if(fi){var n=gc.formState;if(null!==n){e:{var a=Vl;if(fi){if(hi){t:{for(var i=hi,l=mi;8!==i.nodeType;){if(!l){i=null;break t}if(null===(i=Ad(i.nextSibling))){i=null;break t}}i="F!"===(l=i.data)||"F"===l?i:null}if(i){hi=Ad(i.nextSibling),a="F!"===i.data;break e}}bi(a)}a=!1}a&&(t=n[0])}}return(n=cs()).memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:t},n.queue=a,n=ur.bind(null,Vl,a),a.dispatch=n,a=Ms(!1),l=hr.bind(null,Vl,!1,a.queue),i={state:t,dispatch:null,action:e,pending:null},(a=cs()).queue=i,n=Ts.bind(null,Vl,i,l,n),i.dispatch=n,a.memoizedState=e,[t,n,!1]}function Is(e){return As(us(),Wl,e)}function As(e,t,n){if(t=gs(e,t,Rs)[0],e=ms(ps)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var a=ds(t)}catch(s){if(s===Zi)throw tl;throw s}else a=t;var i=(t=us()).queue,l=i.dispatch;return n!==t.memoizedState&&(Vl.flags|=2048,js(9,{destroy:void 0},Ps.bind(null,i,n),null)),[a,l,e]}function Ps(e,t){e.action=t}function Os(e){var t=us(),n=Wl;if(null!==n)return As(t,n,e);us(),t=t.memoizedState;var a=(n=us()).queue.dispatch;return n.memoizedState=e,[t,a,!1]}function js(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},null===(t=Vl.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Vl.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Ls(){return us().memoizedState}function Bs(e,t,n,a){var i=cs();Vl.flags|=e,i.memoizedState=js(1|t,{destroy:void 0},n,void 0===a?null:a)}function Fs(e,t,n,a){var i=us();a=void 0===a?null:a;var l=i.memoizedState.inst;null!==Wl&&null!==a&&ts(a,Wl.memoizedState.deps)?i.memoizedState=js(t,l,n,a):(Vl.flags|=e,i.memoizedState=js(1|t,l,n,a))}function Us(e,t){Bs(8390656,8,e,t)}function Hs(e,t){Fs(2048,8,e,t)}function Vs(e){var t=us().memoizedState;return function(e){Vl.flags|=4;var t=Vl.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Vl.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&mc)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function Ws(e,t){return Fs(4,2,e,t)}function Gs(e,t){return Fs(4,4,e,t)}function Js(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Ks(e,t,n){n=null!=n?n.concat([e]):null,Fs(4,4,Js.bind(null,t,e),n)}function qs(){}function Xs(e,t){var n=us();t=void 0===t?null:t;var a=n.memoizedState;return null!==t&&ts(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Ys(e,t){var n=us();t=void 0===t?null:t;var a=n.memoizedState;if(null!==t&&ts(t,a[1]))return a[0];if(a=e(),ql){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[a,t],a}function Qs(e,t,n){return void 0===n||1073741824&Hl&&!(261930&wc)?e.memoizedState=t:(e.memoizedState=n,e=qc(),Vl.lanes|=e,Tc|=e,n)}function Zs(e,t,n,a){return ea(n,t)?n:null!==$l.current?(e=Qs(e,n,a),ea(e,t)||(Ir=!0),e):42&Hl&&(!(1073741824&Hl)||261930&wc)?(e=qc(),Vl.lanes|=e,Tc|=e,t):(Ir=!0,e.memoizedState=n)}function er(e,t,n,a,i){var l=I.p;I.p=0!==l&&8>l?l:8;var s,r,o,c=z.T,u={};z.T=u,hr(e,!1,t,n);try{var d=i(),h=z.S;null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then?dr(e,t,(s=a,r=[],o={status:"pending",value:null,reason:null,then:function(e){r.push(e)}},d.then(function(){o.status="fulfilled",o.value=s;for(var e=0;e<r.length;e++)(0,r[e])(s)},function(e){for(o.status="rejected",o.reason=e,e=0;e<r.length;e++)(0,r[e])(void 0)}),o),Kc()):dr(e,t,a,Kc())}catch(f){dr(e,t,{then:function(){},status:"rejected",reason:f},Kc())}finally{I.p=l,null!==c&&null!==u.types&&(c.types=u.types),z.T=c}}function tr(){}function nr(e,t,n,a){if(5!==e.tag)throw Error(l(476));var i=ar(e).queue;er(e,i,t,A,null===n?tr:function(){return ir(e),n(a)})}function ar(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:A,baseState:A,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:A},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ir(e){var t=ar(e);null===t.next&&(t=e.alternate.memoizedState),dr(e,t.next.queue,{},Kc())}function lr(){return Ii(hh)}function sr(){return us().memoizedState}function rr(){return us().memoizedState}function or(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Kc(),a=yl(t,e=vl(n),n);return null!==a&&(Xc(a,0,n),kl(a,t,n)),t={cache:Fi()},void(e.payload=t)}t=t.return}}function cr(e,t,n){var a=Kc();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},fr(e)?pr(t,n):null!==(n=Ia(e,t,n,a))&&(Xc(n,0,a),mr(n,t,a))}function ur(e,t,n){dr(e,t,n,Kc())}function dr(e,t,n,a){var i={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(fr(e))pr(t,i);else{var l=e.alternate;if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=t.lastRenderedReducer))try{var s=t.lastRenderedState,r=l(s,n);if(i.hasEagerState=!0,i.eagerState=r,ea(r,s))return za(e,t,i,0),null===gc&&Ra(),!1}catch(o){}if(null!==(n=Ia(e,t,i,a)))return Xc(n,0,a),mr(n,t,a),!0}return!1}function hr(e,t,n,a){if(a={lane:2,revertLane:Vu(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},fr(e)){if(t)throw Error(l(479))}else null!==(t=Ia(e,n,a,2))&&Xc(t,0,2)}function fr(e){var t=e.alternate;return e===Vl||null!==t&&t===Vl}function pr(e,t){Kl=Jl=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mr(e,t,n){if(4194048&n){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,ze(e,n)}}var gr={readContext:Ii,use:hs,useCallback:es,useContext:es,useEffect:es,useImperativeHandle:es,useLayoutEffect:es,useInsertionEffect:es,useMemo:es,useReducer:es,useRef:es,useState:es,useDebugValue:es,useDeferredValue:es,useTransition:es,useSyncExternalStore:es,useId:es,useHostTransitionStatus:es,useFormState:es,useActionState:es,useOptimistic:es,useMemoCache:es,useCacheRefresh:es};gr.useEffectEvent=es;var br={readContext:Ii,use:hs,useCallback:function(e,t){return cs().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:Us,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,Bs(4194308,4,Js.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bs(4194308,4,e,t)},useInsertionEffect:function(e,t){Bs(4,2,e,t)},useMemo:function(e,t){var n=cs();t=void 0===t?null:t;var a=e();if(ql){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=cs();if(void 0!==n){var i=n(t);if(ql){we(!0);try{n(t)}finally{we(!1)}}}else i=t;return a.memoizedState=a.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},a.queue=e,e=e.dispatch=cr.bind(null,Vl,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},cs().memoizedState=e},useState:function(e){var t=(e=Ms(e)).queue,n=ur.bind(null,Vl,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:qs,useDeferredValue:function(e,t){return Qs(cs(),e,t)},useTransition:function(){var e=Ms(!1);return e=er.bind(null,Vl,e.queue,!0,!1),cs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Vl,i=cs();if(fi){if(void 0===n)throw Error(l(407));n=n()}else{if(n=t(),null===gc)throw Error(l(349));127&wc||xs(a,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Us(ys.bind(null,a,s,e),[e]),a.flags|=2048,js(9,{destroy:void 0},vs.bind(null,a,s,n,t),null),n},useId:function(){var e=cs(),t=gc.identifierPrefix;if(fi){var n=li;t="_"+t+"R_"+(n=(ii&~(1<<32-xe(ii)-1)).toString(32)+n),0<(n=Xl++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Zl++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:lr,useFormState:zs,useActionState:zs,useOptimistic:function(e){var t=cs();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=hr.bind(null,Vl,!0,n),n.dispatch=t,[e,t]},useMemoCache:fs,useCacheRefresh:function(){return cs().memoizedState=or.bind(null,Vl)},useEffectEvent:function(e){var t=cs(),n={impl:e};return t.memoizedState=n,function(){if(2&mc)throw Error(l(440));return n.impl.apply(void 0,arguments)}}},wr={readContext:Ii,use:hs,useCallback:Xs,useContext:Ii,useEffect:Hs,useImperativeHandle:Ks,useInsertionEffect:Ws,useLayoutEffect:Gs,useMemo:Ys,useReducer:ms,useRef:Ls,useState:function(){return ms(ps)},useDebugValue:qs,useDeferredValue:function(e,t){return Zs(us(),Wl.memoizedState,e,t)},useTransition:function(){var e=ms(ps)[0],t=us().memoizedState;return["boolean"==typeof e?e:ds(e),t]},useSyncExternalStore:ws,useId:sr,useHostTransitionStatus:lr,useFormState:Is,useActionState:Is,useOptimistic:function(e,t){return Ss(us(),0,e,t)},useMemoCache:fs,useCacheRefresh:rr};wr.useEffectEvent=Vs;var xr={readContext:Ii,use:hs,useCallback:Xs,useContext:Ii,useEffect:Hs,useImperativeHandle:Ks,useInsertionEffect:Ws,useLayoutEffect:Gs,useMemo:Ys,useReducer:bs,useRef:Ls,useState:function(){return bs(ps)},useDebugValue:qs,useDeferredValue:function(e,t){var n=us();return null===Wl?Qs(n,e,t):Zs(n,Wl.memoizedState,e,t)},useTransition:function(){var e=bs(ps)[0],t=us().memoizedState;return["boolean"==typeof e?e:ds(e),t]},useSyncExternalStore:ws,useId:sr,useHostTransitionStatus:lr,useFormState:Os,useActionState:Os,useOptimistic:function(e,t){var n=us();return null!==Wl?Ss(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:fs,useCacheRefresh:rr};function vr(e,t,n,a){n=null==(n=n(a,t=e.memoizedState))?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}xr.useEffectEvent=Vs;var yr={enqueueSetState:function(e,t,n){e=e.I;var a=Kc(),i=vl(a);i.payload=t,null!=n&&(i.callback=n),null!==(t=yl(e,i,a))&&(Xc(t,0,a),kl(t,e,a))},enqueueReplaceState:function(e,t,n){e=e.I;var a=Kc(),i=vl(a);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=yl(e,i,a))&&(Xc(t,0,a),kl(t,e,a))},enqueueForceUpdate:function(e,t){e=e.I;var n=Kc(),a=vl(n);a.tag=2,null!=t&&(a.callback=t),null!==(t=yl(e,a,n))&&(Xc(t,0,n),kl(t,e,n))}};function kr(e,t,n,a,i,l,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,l,s):!(t.prototype&&t.prototype.isPureReactComponent&&ta(n,a)&&ta(i,l))}function _r(e,t,n,a){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&yr.enqueueReplaceState(t,t.state,null)}function Mr(e,t){var n=t;if("ref"in t)for(var a in n={},t)"ref"!==a&&(n[a]=t[a]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function Sr(e){Da(e)}function Tr(e){console.error(e)}function Cr(e){Da(e)}function Dr(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function $r(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Nr(e,t,n){return(n=vl(n)).tag=3,n.payload={element:null},n.callback=function(){Dr(e,t)},n}function Er(e){return(e=vl(e)).tag=3,e}function Rr(e,t,n,a){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var l=a.value;e.payload=function(){return i(l)},e.callback=function(){$r(t,n,a)}}var s=n.stateNode;null!==s&&"function"==typeof s.componentDidCatch&&(e.callback=function(){$r(t,n,a),"function"!=typeof i&&(null===jc?jc=new Set([this]):jc.add(this));var e=a.stack;this.componentDidCatch(a.value,{componentStack:null!==e?e:""})})}var zr=Error(l(461)),Ir=!1;function Ar(e,t,n,a){t.child=null===e?gl(t,null,n,a):ml(t,e.child,n,a)}function Pr(e,t,n,a,i){n=n.render;var l=t.ref;if("ref"in a){var s={};for(var r in a)"ref"!==r&&(s[r]=a[r])}else s=a;return zi(t),a=ns(e,t,n,s,l,i),r=ss(),null===e||Ir?(fi&&r&&oi(t),t.flags|=1,Ar(e,t,a,i),t.child):(rs(e,t,i),lo(e,t,i))}function Or(e,t,n,a,i){if(null===e){var l=n.type;return"function"!=typeof l||Fa(l)||void 0!==l.defaultProps||null!==n.compare?((e=Va(n.type,null,a,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=l,jr(e,t,l,a,i))}if(l=e.child,!so(e,i)){var s=l.memoizedProps;if((n=null!==(n=n.compare)?n:ta)(s,a)&&e.ref===t.ref)return lo(e,t,i)}return t.flags|=1,(e=Ua(l,a)).ref=t.ref,e.return=t,t.child=e}function jr(e,t,n,a,i){if(null!==e){var l=e.memoizedProps;if(ta(l,a)&&e.ref===t.ref){if(Ir=!1,t.pendingProps=a=l,!so(e,i))return t.lanes=e.lanes,lo(e,t,i);131072&e.flags&&(Ir=!0)}}return Wr(e,t,n,a,i)}function Lr(e,t,n,a){var i=a.children,l=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={$:1,P:null,O:null,j:null}),"hidden"===a.mode){if(128&t.flags){if(l=null!==l?l.baseLanes|n:n,null!==e){for(a=t.child=e.child,i=0;null!==a;)i=i|a.lanes|a.childLanes,a=a.sibling;a=i&~l}else a=0,t.child=null;return Fr(e,t,l,n,a)}if(!(536870912&n))return a=t.lanes=536870912,Fr(e,t,null!==l?l.baseLanes|n:n,n,a);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yi(0,null!==l?l.cachePool:null),null!==l?El(t,l):Rl(),jl(t)}else null!==l?(Yi(0,l.cachePool),El(t,l),Ll(),t.memoizedState=null):(null!==e&&Yi(0,null),Rl(),Ll());return Ar(e,t,i,n),t.child}function Br(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={$:1,P:null,O:null,j:null}),t.sibling}function Fr(e,t,n,a,i){var l=Xi();return l=null===l?null:{parent:Bi.h,pool:l},t.memoizedState={baseLanes:n,cachePool:l},null!==e&&Yi(0,null),Rl(),jl(t),null!==e&&Ei(e,t,a,!0),t.childLanes=i,null}function Ur(e,t){return(t=eo({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Hr(e,t,n){return ml(t,e.child,null,n),(e=Ur(t,t.pendingProps)).flags|=2,Bl(t),t.memoizedState=null,e}function Vr(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(l(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Wr(e,t,n,a,i){return zi(t),n=ns(e,t,n,a,void 0,i),a=ss(),null===e||Ir?(fi&&a&&oi(t),t.flags|=1,Ar(e,t,n,i),t.child):(rs(e,t,i),lo(e,t,i))}function Gr(e,t,n,a,i,l){return zi(t),t.updateQueue=null,n=is(t,a,n,i),as(e),a=ss(),null===e||Ir?(fi&&a&&oi(t),t.flags|=1,Ar(e,t,n,l),t.child):(rs(e,t,l),lo(e,t,l))}function Jr(e,t,n,a,i){if(zi(t),null===t.stateNode){var l=ja,s=n.contextType;"object"==typeof s&&null!==s&&(l=Ii(s)),l=new n(a,l),t.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,l.updater=yr,t.stateNode=l,l.I=t,(l=t.stateNode).props=a,l.state=t.memoizedState,l.refs={},wl(t),s=n.contextType,l.context="object"==typeof s&&null!==s?Ii(s):ja,l.state=t.memoizedState,"function"==typeof(s=n.getDerivedStateFromProps)&&(vr(t,n,s,a),l.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof l.getSnapshotBeforeUpdate||"function"!=typeof l.UNSAFE_componentWillMount&&"function"!=typeof l.componentWillMount||(s=l.state,"function"==typeof l.componentWillMount&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),s!==l.state&&yr.enqueueReplaceState(l,l.state,null),Tl(t,a,l,i),Sl(),l.state=t.memoizedState),"function"==typeof l.componentDidMount&&(t.flags|=4194308),a=!0}else if(null===e){l=t.stateNode;var r=t.memoizedProps,o=Mr(n,r);l.props=o;var c=l.context,u=n.contextType;s=ja,"object"==typeof u&&null!==u&&(s=Ii(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof l.getSnapshotBeforeUpdate,r=t.pendingProps!==r,u||"function"!=typeof l.UNSAFE_componentWillReceiveProps&&"function"!=typeof l.componentWillReceiveProps||(r||c!==s)&&_r(t,l,a,s),bl=!1;var h=t.memoizedState;l.state=h,Tl(t,a,l,i),Sl(),c=t.memoizedState,r||h!==c||bl?("function"==typeof d&&(vr(t,n,d,a),c=t.memoizedState),(o=bl||kr(t,n,o,a,h,c,s))?(u||"function"!=typeof l.UNSAFE_componentWillMount&&"function"!=typeof l.componentWillMount||("function"==typeof l.componentWillMount&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"==typeof l.componentDidMount&&(t.flags|=4194308)):("function"==typeof l.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),l.props=a,l.state=c,l.context=s,a=o):("function"==typeof l.componentDidMount&&(t.flags|=4194308),a=!1)}else{l=t.stateNode,xl(e,t),u=Mr(n,s=t.memoizedProps),l.props=u,d=t.pendingProps,h=l.context,c=n.contextType,o=ja,"object"==typeof c&&null!==c&&(o=Ii(c)),(c="function"==typeof(r=n.getDerivedStateFromProps)||"function"==typeof l.getSnapshotBeforeUpdate)||"function"!=typeof l.UNSAFE_componentWillReceiveProps&&"function"!=typeof l.componentWillReceiveProps||(s!==d||h!==o)&&_r(t,l,a,o),bl=!1,h=t.memoizedState,l.state=h,Tl(t,a,l,i),Sl();var f=t.memoizedState;s!==d||h!==f||bl||null!==e&&null!==e.dependencies&&Ri(e.dependencies)?("function"==typeof r&&(vr(t,n,r,a),f=t.memoizedState),(u=bl||kr(t,n,u,a,h,f,o)||null!==e&&null!==e.dependencies&&Ri(e.dependencies))?(c||"function"!=typeof l.UNSAFE_componentWillUpdate&&"function"!=typeof l.componentWillUpdate||("function"==typeof l.componentWillUpdate&&l.componentWillUpdate(a,f,o),"function"==typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(a,f,o)),"function"==typeof l.componentDidUpdate&&(t.flags|=4),"function"==typeof l.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof l.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof l.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=f),l.props=a,l.state=f,l.context=o,a=u):("function"!=typeof l.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof l.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return l=a,Vr(e,t),a=!!(128&t.flags),l||a?(l=t.stateNode,n=a&&"function"!=typeof n.getDerivedStateFromError?null:l.render(),t.flags|=1,null!==e&&a?(t.child=ml(t,e.child,null,i),t.child=ml(t,null,n,i)):Ar(e,t,n,i),t.memoizedState=l.state,e=t.child):e=lo(e,t,i),e}function Kr(e,t,n,a){return yi(),t.flags|=256,Ar(e,t,n,a),t.child}var qr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xr(e){return{baseLanes:e,cachePool:Qi()}}function Yr(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=$c),e}function Qr(e,t,n){var a,i=t.pendingProps,s=!1,r=!!(128&t.flags);if((a=r)||(a=(null===e||null!==e.memoizedState)&&!!(2&Fl.current)),a&&(s=!0,t.flags&=-129),a=!!(32&t.flags),t.flags&=-33,null===e){if(fi){if(s?Pl(t):Ll(),(e=hi)?null!==(e=null!==(e=Rd(e,mi))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ai?{id:ii,overflow:li}:null,retryLane:536870912,hydrationErrors:null},(n=Ja(e)).return=t,t.child=n,di=t,hi=null):e=null,null===e)throw bi(t);return Id(e)?t.lanes=32:t.lanes=536870912,null}var o=i.children;return i=i.fallback,s?(Ll(),o=eo({mode:"hidden",children:o},s=t.mode),i=Wa(i,s,n,null),o.return=t,i.return=t,o.sibling=i,t.child=o,(i=t.child).memoizedState=Xr(n),i.childLanes=Yr(e,a,n),t.memoizedState=qr,Br(null,i)):(Pl(t),Zr(t,o))}var c=e.memoizedState;if(null!==c&&null!==(o=c.dehydrated)){if(r)256&t.flags?(Pl(t),t.flags&=-257,t=to(e,t,n)):null!==t.memoizedState?(Ll(),t.child=e.child,t.flags|=128,t=null):(Ll(),o=i.fallback,s=t.mode,i=eo({mode:"visible",children:i.children},s),(o=Wa(o,s,n,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,ml(t,e.child,null,n),(i=t.child).memoizedState=Xr(n),i.childLanes=Yr(e,a,n),t.memoizedState=qr,t=Br(null,i));else if(Pl(t),Id(o)){if(a=o.nextSibling&&o.nextSibling.dataset)var u=a.dgst;a=u,(i=Error(l(419))).stack="",i.digest=a,_i({value:i,source:null,stack:null}),t=to(e,t,n)}else if(Ir||Ei(e,t,n,!1),a=0!==(n&e.childLanes),Ir||a){if(null!==(a=gc)&&0!==(i=Ie(a,n))&&i!==c.retryLane)throw c.retryLane=i,Aa(e,i),Xc(a,0,i),zr;zd(o)||ou(),t=to(e,t,n)}else zd(o)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,hi=Ad(o.nextSibling),di=t,fi=!0,pi=null,mi=!1,null!==e&&ui(t,e),(t=Zr(t,i.children)).flags|=4096);return t}return s?(Ll(),o=i.fallback,s=t.mode,u=(c=e.child).sibling,(i=Ua(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?o=Ua(u,o):(o=Wa(o,s,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,Br(null,i),i=t.child,null===(o=e.child.memoizedState)?o=Xr(n):(null!==(s=o.cachePool)?(c=Bi.h,s=s.parent!==c?{parent:c,pool:c}:s):s=Qi(),o={baseLanes:o.baseLanes|n,cachePool:s}),i.memoizedState=o,i.childLanes=Yr(e,a,n),t.memoizedState=qr,Br(e.child,i)):(Pl(t),e=(n=e.child).sibling,(n=Ua(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n)}function Zr(e,t){return(t=eo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function eo(e,t){return(e=Ba(22,e,null,t)).lanes=0,e}function to(e,t,n){return ml(t,e.child,null,n),(e=Zr(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function no(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),$i(e.return,t,n)}function ao(e,t,n,a,i,l){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:i,treeForkCount:l}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=a,s.tail=n,s.tailMode=i,s.treeForkCount=l)}function io(e,t,n){var a=t.pendingProps,i=a.revealOrder,l=a.tail;a=a.children;var s=Fl.current,r=!!(2&s);if(r?(s=1&s|2,t.flags|=128):s&=1,B(Fl,s),Ar(e,t,a,n),a=fi?ei:0,!r&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&no(e,n,t);else if(19===e.tag)no(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ul(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ao(t,!1,i,n,l,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ul(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ao(t,!0,n,null,l,a);break;case"together":ao(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function lo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Tc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ei(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(n=Ua(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ua(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function so(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ri(e))}function ro(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ir=!0;else{if(!(so(e,n)||128&t.flags))return Ir=!1,function(e,t,n){switch(t.tag){case 3:J(t,t.stateNode.containerInfo),Ci(0,Bi,e.memoizedState.cache),yi();break;case 27:case 5:q(t);break;case 4:J(t,t.stateNode.containerInfo);break;case 10:Ci(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ol(t),null;break;case 13:var a=t.memoizedState;if(null!==a)return null!==a.dehydrated?(Pl(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Qr(e,t,n):(Pl(t),null!==(e=lo(e,t,n))?e.sibling:null);Pl(t);break;case 19:var i=!!(128&e.flags);if((a=0!==(n&t.childLanes))||(Ei(e,t,n,!1),a=0!==(n&t.childLanes)),i){if(a)return io(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),B(Fl,Fl.current),a)break;return null;case 22:return t.lanes=0,Lr(e,t,n,t.pendingProps);case 24:Ci(0,Bi,e.memoizedState.cache)}return lo(e,t,n)}(e,t,n);Ir=!!(131072&e.flags)}else Ir=!1,fi&&1048576&t.flags&&ri(t,ei,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=ll(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var i=e.$$typeof;if(i===y){t.tag=11,t=Pr(null,t,e,a,n);break e}if(i===M){t.tag=14,t=Or(null,t,e,a,n);break e}}throw t=E(e)||e,Error(l(306,t,""))}Fa(e)?(a=Mr(e,a),t.tag=1,t=Jr(null,t,e,a,n)):(t.tag=0,t=Wr(null,t,e,a,n))}return t;case 0:return Wr(e,t,t.type,t.pendingProps,n);case 1:return Jr(e,t,a=t.type,i=Mr(a,t.pendingProps),n);case 3:e:{if(J(t,t.stateNode.containerInfo),null===e)throw Error(l(387));a=t.pendingProps;var s=t.memoizedState;i=s.element,xl(e,t),Tl(t,a,null,n);var r=t.memoizedState;if(a=r.cache,Ci(0,Bi,a),a!==s.cache&&Ni(t,[Bi],n,!0),Sl(),a=r.element,s.isDehydrated){if(s={element:a,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Kr(e,t,a,n);break e}if(a!==i){_i(i=Xa(Error(l(424)),t)),t=Kr(e,t,a,n);break e}for(e=9===(e=t.stateNode.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,hi=Ad(e.firstChild),di=t,fi=!0,pi=null,mi=!0,n=gl(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(yi(),a===i){t=lo(e,t,n);break e}Ar(e,t,a,n)}t=t.child}return t;case 26:return Vr(e,t),null===e?(n=Jd(t.type,null,t.pendingProps,null))?t.memoizedState=n:fi||(n=t.type,e=t.pendingProps,(a=wd(W.current).createElement(n))[Be]=t,a[Fe]=e,pd(a,n,e),nt(a),t.stateNode=a):t.memoizedState=Jd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return q(t),null===e&&fi&&(a=t.stateNode=Ld(t.type,t.pendingProps,W.current),di=t,mi=!0,i=hi,Dd(t.type)?(Pd=i,hi=Ad(a.firstChild)):hi=i),Ar(e,t,t.pendingProps.children,n),Vr(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&fi&&((i=a=hi)&&(null!==(a=function(e,t,n,a){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(a){if(!e[Ke])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(l=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(l!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((l=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&l&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var l=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===l)return e}if(null===(e=Ad(e.nextSibling)))break}return null}(a,t.type,t.pendingProps,mi))?(t.stateNode=a,di=t,hi=Ad(a.firstChild),mi=!1,i=!0):i=!1),i||bi(t)),q(t),i=t.type,s=t.pendingProps,r=null!==e?e.memoizedProps:null,a=s.children,yd(i,s)?a=null:null!==r&&yd(i,r)&&(t.flags|=32),null!==t.memoizedState&&(i=ns(e,t,ls,null,null,n),hh.h=i),Vr(e,t),Ar(e,t,a,n),t.child;case 6:return null===e&&fi&&((e=n=hi)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Ad(e.nextSibling)))return null}return e}(n,t.pendingProps,mi))?(t.stateNode=n,di=t,hi=null,e=!0):e=!1),e||bi(t)),null;case 13:return Qr(e,t,n);case 4:return J(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=ml(t,null,a,n):Ar(e,t,a,n),t.child;case 11:return Pr(e,t,t.type,t.pendingProps,n);case 7:return Ar(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ar(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Ci(0,t.type,a.value),Ar(e,t,a.children,n),t.child;case 9:return i=t.type.t,a=t.pendingProps.children,zi(t),a=a(i=Ii(i)),t.flags|=1,Ar(e,t,a,n),t.child;case 14:return Or(e,t,t.type,t.pendingProps,n);case 15:return jr(e,t,t.type,t.pendingProps,n);case 19:return io(e,t,n);case 31:return function(e,t,n){var a=t.pendingProps,i=!!(128&t.flags);if(t.flags&=-129,null===e){if(fi){if("hidden"===a.mode)return e=Ur(t,a),t.lanes=536870912,Br(null,e);if(Ol(t),(e=hi)?null!==(e=null!==(e=Rd(e,mi))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ai?{id:ii,overflow:li}:null,retryLane:536870912,hydrationErrors:null},(n=Ja(e)).return=t,t.child=n,di=t,hi=null):e=null,null===e)throw bi(t);return t.lanes=536870912,null}return Ur(t,a)}var s=e.memoizedState;if(null!==s){var r=s.dehydrated;if(Ol(t),i)if(256&t.flags)t.flags&=-257,t=Hr(e,t,n);else{if(null===t.memoizedState)throw Error(l(558));t.child=e.child,t.flags|=128,t=null}else if(Ir||Ei(e,t,n,!1),i=0!==(n&e.childLanes),Ir||i){if(null!==(a=gc)&&0!==(r=Ie(a,n))&&r!==s.retryLane)throw s.retryLane=r,Aa(e,r),Xc(a,0,r),zr;ou(),t=Hr(e,t,n)}else e=s.treeContext,hi=Ad(r.nextSibling),di=t,fi=!0,pi=null,mi=!1,null!==e&&ui(t,e),(t=Ur(t,a)).flags|=4096;return t}return(e=Ua(e.child,{mode:a.mode,children:a.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Lr(e,t,n,t.pendingProps);case 24:return zi(t),a=Ii(Bi),null===e?(null===(i=Xi())&&(i=gc,s=Fi(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:a,cache:i},wl(t),Ci(0,Bi,i)):(0!==(e.lanes&n)&&(xl(e,t),Tl(t,null,null,n),Sl()),i=e.memoizedState,s=t.memoizedState,i.parent!==a?(i={parent:a,cache:a},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),Ci(0,Bi,a)):(a=s.cache,Ci(0,Bi,a),a!==i.cache&&Ni(t,[Bi],n,!0))),Ar(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function oo(e){e.flags|=4}function co(e,t,n,a,i){if((t=!!(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&i)===i)if(e.stateNode.complete)e.flags|=8192;else{if(!lu())throw sl=nl,el;e.flags|=8192}}else e.flags&=-16777217}function uo(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!sh(t)){if(!lu())throw sl=nl,el;e.flags|=8192}}function ho(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?$e():536870912,e.lanes|=t,Nc|=t)}function fo(e,t){if(!fi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function po(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,a|=65011712&i.subtreeFlags,a|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function mo(e,t,n){var a=t.pendingProps;switch(ci(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return po(t),null;case 3:return n=t.stateNode,a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Di(Bi),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(vi(t)?oo(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,ki())),po(t),null;case 26:var i=t.type,s=t.memoizedState;return null===e?(oo(t),null!==s?(po(t),uo(t,s)):(po(t),co(t,i,0,0,n))):s?s!==e.memoizedState?(oo(t),po(t),uo(t,s)):(po(t),t.flags&=-16777217):((e=e.memoizedProps)!==a&&oo(t),po(t),co(t,i,0,0,n)),null;case 27:if(X(t),n=W.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&oo(t);else{if(!a){if(null===t.stateNode)throw Error(l(166));return po(t),null}e=H.current,vi(t)?wi(t):(e=Ld(i,a,n),t.stateNode=e,oo(t))}return po(t),null;case 5:if(X(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==a&&oo(t);else{if(!a){if(null===t.stateNode)throw Error(l(166));return po(t),null}if(s=H.current,vi(t))wi(t);else{var r=wd(W.current);switch(s){case 1:s=r.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=r.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=r.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=r.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(s=r.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s="string"==typeof a.is?r.createElement("select",{is:a.is}):r.createElement("select"),a.multiple?s.multiple=!0:a.size&&(s.size=a.size);break;default:s="string"==typeof a.is?r.createElement(i,{is:a.is}):r.createElement(i)}}s[Be]=t,s[Fe]=a;e:for(r=t.child;null!==r;){if(5===r.tag||6===r.tag)s.appendChild(r.stateNode);else if(4!==r.tag&&27!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;null===r.sibling;){if(null===r.return||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=s;e:switch(pd(s,i,a),i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&oo(t)}}return po(t),co(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==a&&oo(t);else{if("string"!=typeof a&&null===t.stateNode)throw Error(l(166));if(e=W.current,vi(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,null!==(i=di))switch(i.tag){case 27:case 5:a=i.memoizedProps}e[Be]=t,(e=!!(e.nodeValue===n||null!==a&&!0===a.suppressHydrationWarning||dd(e.nodeValue,n)))||bi(t,!0)}else(e=wd(e).createTextNode(a))[Be]=t,t.stateNode=e}return po(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(a=vi(t),null!==n){if(null===e){if(!a)throw Error(l(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(l(557));e[Be]=t}else yi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;po(t),e=!1}else n=ki(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Bl(t),t):(Bl(t),null);if(128&t.flags)throw Error(l(558))}return po(t),null;case 13:if(a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=vi(t),null!==a&&null!==a.dehydrated){if(null===e){if(!i)throw Error(l(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(l(317));i[Be]=t}else yi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;po(t),i=!1}else i=ki(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(Bl(t),t):(Bl(t),null)}return Bl(t),128&t.flags?(t.lanes=n,t):(n=null!==a,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(a=t.child).alternate&&null!==a.alternate.memoizedState&&null!==a.alternate.memoizedState.cachePool&&(i=a.alternate.memoizedState.cachePool.pool),s=null,null!==a.memoizedState&&null!==a.memoizedState.cachePool&&(s=a.memoizedState.cachePool.pool),s!==i&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ho(t,t.updateQueue),po(t),null);case 4:return K(),null===e&&td(t.stateNode.containerInfo),po(t),null;case 10:return Di(t.type),po(t),null;case 19:if(L(Fl),null===(a=t.memoizedState))return po(t),null;if(i=!!(128&t.flags),null===(s=a.rendering))if(i)fo(a,!1);else{if(0!==Sc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(s=Ul(e))){for(t.flags|=128,fo(a,!1),e=s.updateQueue,t.updateQueue=e,ho(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ha(n,e),n=n.sibling;return B(Fl,1&Fl.current|2),fi&&si(t,a.treeForkCount),t.child}e=e.sibling}null!==a.tail&&re()>Pc&&(t.flags|=128,i=!0,fo(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Ul(s))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ho(t,e),fo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!fi)return po(t),null}else 2*re()-a.renderingStartTime>Pc&&536870912!==n&&(t.flags|=128,i=!0,fo(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=a.last)?e.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=re(),e.sibling=null,n=Fl.current,B(Fl,i?1&n|2:1&n),fi&&si(t,a.treeForkCount),e):(po(t),null);case 22:case 23:return Bl(t),zl(),a=null!==t.memoizedState,null!==e?null!==e.memoizedState!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?!!(536870912&n)&&!(128&t.flags)&&(po(t),6&t.subtreeFlags&&(t.flags|=8192)):po(t),null!==(n=t.updateQueue)&&ho(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),a=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),null!==e&&L(qi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Di(Bi),po(t),null;case 25:case 30:return null}throw Error(l(156,t.tag))}function go(e,t){switch(ci(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Di(Bi),K(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 31:if(null!==t.memoizedState){if(Bl(t),null===t.alternate)throw Error(l(340));yi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Bl(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(l(340));yi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return L(Fl),null;case 4:return K(),null;case 10:return Di(t.type),null;case 22:case 23:return Bl(t),zl(),null!==e&&L(qi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Di(Bi),null;default:return null}}function bo(e,t){switch(ci(t),t.tag){case 3:Di(Bi),K();break;case 26:case 27:case 5:X(t);break;case 4:K();break;case 31:null!==t.memoizedState&&Bl(t);break;case 13:Bl(t);break;case 19:L(Fl);break;case 10:Di(t.type);break;case 22:case 23:Bl(t),zl(),null!==e&&L(qi);break;case 24:Di(Bi)}}function wo(e,t){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var i=a.next;n=i;do{if((n.tag&e)===e){a=void 0;var l=n.create,s=n.inst;a=l(),s.destroy=a}n=n.next}while(n!==i)}}catch(r){Su(t,t.return,r)}}function xo(e,t,n){try{var a=t.updateQueue,i=null!==a?a.lastEffect:null;if(null!==i){var l=i.next;a=l;do{if((a.tag&e)===e){var s=a.inst,r=s.destroy;if(void 0!==r){s.destroy=void 0,i=t;var o=n,c=r;try{c()}catch(u){Su(i,o,u)}}}a=a.next}while(a!==l)}}catch(u){Su(t,t.return,u)}}function vo(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Dl(t,n)}catch(a){Su(e,e.return,a)}}}function yo(e,t,n){n.props=Mr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Su(e,t,a)}}function ko(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;default:a=e.stateNode}"function"==typeof n?e.refCleanup=n(a):n.current=a}}catch(i){Su(e,t,i)}}function _o(e,t){var n=e.ref,a=e.refCleanup;if(null!==n)if("function"==typeof a)try{a()}catch(i){Su(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(l){Su(e,t,l)}else n.current=null}function Mo(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(i){Su(e,e.return,i)}}function So(e,t,n){try{var a=e.stateNode;!function(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,r=null,o=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:a.hasOwnProperty(p)||hd(e,t,p,null,a,h)}}for(var f in a){var p=a[f];if(h=n[f],a.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":r=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(l(137,t));break;default:p!==h&&hd(e,t,f,p,a,h)}}return void vt(e,r,o,c,u,d,s,i);case"select":for(s in p=r=o=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:a.hasOwnProperty(s)||hd(e,t,s,null,a,c)}for(i in a)if(s=a[i],c=n[i],a.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":o=s;break;case"multiple":r=s;default:s!==c&&hd(e,t,i,s,a,c)}return t=o,n=r,a=p,void(null!=f?_t(e,!!n,f,!1):!!a!=!!n&&(null!=t?_t(e,!!n,t,!0):_t(e,!!n,n?[]:"",!1)));case"textarea":for(o in p=f=null,n)if(i=n[o],n.hasOwnProperty(o)&&null!=i&&!a.hasOwnProperty(o))switch(o){case"value":case"children":break;default:hd(e,t,o,null,a,i)}for(r in a)if(i=a[r],s=n[r],a.hasOwnProperty(r)&&(null!=i||null!=s))switch(r){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(l(91));break;default:i!==s&&hd(e,t,r,i,a,s)}return void Mt(e,f,p);case"option":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!a.hasOwnProperty(m)&&("selected"===m?e.selected=!1:hd(e,t,m,null,a,f));for(c in a)f=a[c],p=n[c],!a.hasOwnProperty(c)||f===p||null==f&&null==p||("selected"===c?e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f:hd(e,t,c,f,a,p));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!a.hasOwnProperty(g)&&hd(e,t,g,null,a,f);for(u in a)if(f=a[u],p=n[u],a.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(l(137,t));break;default:hd(e,t,u,f,a,p)}return;default:if(Nt(t)){for(var b in n)f=n[b],n.hasOwnProperty(b)&&void 0!==f&&!a.hasOwnProperty(b)&&fd(e,t,b,void 0,a,f);for(d in a)f=a[d],p=n[d],!a.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||fd(e,t,d,f,a,p);return}}for(var w in n)f=n[w],n.hasOwnProperty(w)&&null!=f&&!a.hasOwnProperty(w)&&hd(e,t,w,null,a,f);for(h in a)f=a[h],p=n[h],!a.hasOwnProperty(h)||f===p||null==f&&null==p||hd(e,t,h,f,a,p)}(a,e.type,n,t),a[Fe]=t}catch(i){Su(e,e.return,i)}}function To(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Dd(e.type)||4===e.tag}function Co(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||To(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Dd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Do(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n.B)||null!==t.onclick||(t.onclick=It));else if(4!==a&&(27===a&&Dd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Do(e,t,n),e=e.sibling;null!==e;)Do(e,t,n),e=e.sibling}function $o(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&(27===a&&Dd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for($o(e,t,n),e=e.sibling;null!==e;)$o(e,t,n),e=e.sibling}function No(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);pd(t,a,n),t[Be]=e,t[Fe]=n}catch(l){Su(e,e.return,l)}}var Eo=!1,Ro=!1,zo=!1,Io="function"==typeof WeakSet?WeakSet:Set,Ao=null;function Po(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Xo(e,n),4&a&&wo(5,n);break;case 1:if(Xo(e,n),4&a)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){Su(n,n.return,s)}else{var i=Mr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.F)}catch(r){Su(n,n.return,r)}}64&a&&vo(n),512&a&&ko(n,n.return);break;case 3:if(Xo(e,n),64&a&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Dl(e,t)}catch(s){Su(n,n.return,s)}}break;case 27:null===t&&4&a&&No(n);case 26:case 5:Xo(e,n),null===t&&4&a&&Mo(n),512&a&&ko(n,n.return);break;case 12:Xo(e,n);break;case 31:Xo(e,n),4&a&&Uo(e,n);break;case 13:Xo(e,n),4&a&&Ho(e,n),64&a&&null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e.U=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e.U=a}}(e,n=$u.bind(null,n));break;case 22:if(!(a=null!==n.memoizedState||Eo)){t=null!==t&&null!==t.memoizedState||Ro,i=Eo;var l=Ro;Eo=a,(Ro=t)&&!l?Qo(e,n,!!(8772&n.subtreeFlags)):Xo(e,n),Eo=i,Ro=l}break;case 30:break;default:Xo(e,n)}}function Oo(e){var t=e.alternate;null!==t&&(e.alternate=null,Oo(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&qe(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var jo=null,Lo=!1;function Bo(e,t,n){for(n=n.child;null!==n;)Fo(e,t,n),n=n.sibling}function Fo(e,t,n){if(be&&"function"==typeof be.onCommitFiberUnmount)try{be.onCommitFiberUnmount(ge,n)}catch(l){}switch(n.tag){case 26:Ro||_o(n,t),Bo(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Ro||_o(n,t);var a=jo,i=Lo;Dd(n.type)&&(jo=n.stateNode,Lo=!1),Bo(e,t,n),Bd(n.stateNode),jo=a,Lo=i;break;case 5:Ro||_o(n,t);case 6:if(a=jo,i=Lo,jo=null,Bo(e,t,n),Lo=i,null!==(jo=a))if(Lo)try{(9===jo.nodeType?jo.body:"HTML"===jo.nodeName?jo.ownerDocument.body:jo).removeChild(n.stateNode)}catch(s){Su(n,t,s)}else try{jo.removeChild(n.stateNode)}catch(s){Su(n,t,s)}break;case 18:null!==jo&&(Lo?($d(9===(e=jo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Gh(e)):$d(jo,n.stateNode));break;case 4:a=jo,i=Lo,jo=n.stateNode.containerInfo,Lo=!0,Bo(e,t,n),jo=a,Lo=i;break;case 0:case 11:case 14:case 15:xo(2,n,t),Ro||xo(4,n,t),Bo(e,t,n);break;case 1:Ro||(_o(n,t),"function"==typeof(a=n.stateNode).componentWillUnmount&&yo(n,t,a)),Bo(e,t,n);break;case 21:Bo(e,t,n);break;case 22:Ro=(a=Ro)||null!==n.memoizedState,Bo(e,t,n),Ro=a;break;default:Bo(e,t,n)}}function Uo(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)){e=e.dehydrated;try{Gh(e)}catch(n){Su(t,t.return,n)}}}function Ho(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{Gh(e)}catch(n){Su(t,t.return,n)}}function Vo(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Io),t;case 22:return null===(t=(e=e.stateNode).O)&&(t=e.O=new Io),t;default:throw Error(l(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var a=Nu.bind(null,e,t);t.then(a,a)}})}function Wo(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var i=n[a],s=e,r=t,o=r;e:for(;null!==o;){switch(o.tag){case 27:if(Dd(o.type)){jo=o.stateNode,Lo=!1;break e}break;case 5:jo=o.stateNode,Lo=!1;break e;case 3:case 4:jo=o.stateNode.containerInfo,Lo=!0;break e}o=o.return}if(null===jo)throw Error(l(160));Fo(s,r,i),jo=null,Lo=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Jo(t,e),t=t.sibling}var Go=null;function Jo(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Wo(t,e),Ko(e),4&a&&(xo(3,e,e.return),wo(3,e),xo(5,e,e.return));break;case 1:Wo(t,e),Ko(e),512&a&&(Ro||null===n||_o(n,n.return)),64&a&&Eo&&null!==(e=e.updateQueue)&&null!==(a=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?a:n.concat(a));break;case 26:var i=Go;if(Wo(t,e),Ko(e),512&a&&(Ro||null===n||_o(n,n.return)),4&a){var s=null!==n?n.memoizedState:null;if(a=e.memoizedState,null===n)if(null===a)if(null===e.stateNode){e:{a=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(a){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Ke]||s[Be]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(a),i.head.insertBefore(s,i.querySelector("head > title"))),pd(s,a,n),s[Be]=e,nt(s),a=s;break e;case"link":var r=ih("link","href",i).get(a+(n.href||""));if(r)for(var o=0;o<r.length;o++)if((s=r[o]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){r.splice(o,1);break t}pd(s=i.createElement(a),a,n),i.head.appendChild(s);break;case"meta":if(r=ih("meta","content",i).get(a+(n.content||"")))for(o=0;o<r.length;o++)if((s=r[o]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){r.splice(o,1);break t}pd(s=i.createElement(a),a,n),i.head.appendChild(s);break;default:throw Error(l(468,a))}s[Be]=e,nt(s),a=s}e.stateNode=a}else lh(i,e.type,e.stateNode);else e.stateNode=Zd(i,a,e.memoizedProps);else s!==a?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===a?lh(i,e.type,e.stateNode):Zd(i,a,e.memoizedProps)):null===a&&null!==e.stateNode&&So(e,e.memoizedProps,n.memoizedProps)}break;case 27:Wo(t,e),Ko(e),512&a&&(Ro||null===n||_o(n,n.return)),null!==n&&4&a&&So(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Wo(t,e),Ko(e),512&a&&(Ro||null===n||_o(n,n.return)),32&e.flags){i=e.stateNode;try{Tt(i,"")}catch(m){Su(e,e.return,m)}}4&a&&null!=e.stateNode&&So(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&a&&(zo=!0);break;case 6:if(Wo(t,e),Ko(e),4&a){if(null===e.stateNode)throw Error(l(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(m){Su(e,e.return,m)}}break;case 3:if(ah=null,i=Go,Go=Hd(t.containerInfo),Wo(t,e),Go=i,Ko(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Gh(t.containerInfo)}catch(m){Su(e,e.return,m)}zo&&(zo=!1,qo(e));break;case 4:a=Go,Go=Hd(e.stateNode.containerInfo),Wo(t,e),Ko(e),Go=a;break;case 12:default:Wo(t,e),Ko(e);break;case 31:case 19:Wo(t,e),Ko(e),4&a&&null!==(a=e.updateQueue)&&(e.updateQueue=null,Vo(e,a));break;case 13:Wo(t,e),Ko(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Ic=re()),4&a&&null!==(a=e.updateQueue)&&(e.updateQueue=null,Vo(e,a));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Eo,d=Ro;if(Eo=u||i,Ro=d||c,Wo(t,e),Ro=d,Eo=u,Ko(e),8192&a)e:for(t=e.stateNode,t.$=i?-2&t.$:1|t.$,i&&(null===n||c||Eo||Ro||Yo(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"==typeof(r=s.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{o=c.stateNode;var h=c.memoizedProps.style,f=null!=h&&h.hasOwnProperty("display")?h.display:null;o.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(m){Su(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(m){Su(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;i?Nd(p,!0):Nd(c.stateNode,!1)}catch(m){Su(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&a&&null!==(a=e.updateQueue)&&null!==(n=a.retryQueue)&&(a.retryQueue=null,Vo(e,n));case 30:case 21:}}function Ko(e){var t=e.flags;if(2&t){try{for(var n,a=e.return;null!==a;){if(To(a)){n=a;break}a=a.return}if(null==n)throw Error(l(160));switch(n.tag){case 27:var i=n.stateNode;$o(e,Co(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(Tt(s,""),n.flags&=-33),$o(e,Co(e),s);break;case 3:case 4:var r=n.stateNode.containerInfo;Do(e,Co(e),r);break;default:throw Error(l(161))}}catch(o){Su(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function qo(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;qo(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Xo(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Po(e,t.alternate,t),t=t.sibling}function Yo(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:xo(4,t,t.return),Yo(t);break;case 1:_o(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&yo(t,t.return,n),Yo(t);break;case 27:Bd(t.stateNode);case 26:case 5:_o(t,t.return),Yo(t);break;case 22:null===t.memoizedState&&Yo(t);break;default:Yo(t)}e=e.sibling}}function Qo(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var a=t.alternate,i=e,l=t,s=l.flags;switch(l.tag){case 0:case 11:case 15:Qo(i,l,n),wo(4,l);break;case 1:if(Qo(i,l,n),"function"==typeof(i=(a=l).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){Su(a,a.return,c)}if(null!==(i=(a=l).updateQueue)){var r=a.stateNode;try{var o=i.shared.hiddenCallbacks;if(null!==o)for(i.shared.hiddenCallbacks=null,i=0;i<o.length;i++)Cl(o[i],r)}catch(c){Su(a,a.return,c)}}n&&64&s&&vo(l),ko(l,l.return);break;case 27:No(l);case 26:case 5:Qo(i,l,n),n&&null===a&&4&s&&Mo(l),ko(l,l.return);break;case 12:Qo(i,l,n);break;case 31:Qo(i,l,n),n&&4&s&&Uo(i,l);break;case 13:Qo(i,l,n),n&&4&s&&Ho(i,l);break;case 22:null===l.memoizedState&&Qo(i,l,n),ko(l,l.return);break;case 30:break;default:Qo(i,l,n)}t=t.sibling}}function Zo(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ui(n))}function ec(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e))}function tc(e,t,n,a){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)nc(e,t,n,a),t=t.sibling}function nc(e,t,n,a){var i=t.flags;switch(t.tag){case 0:case 11:case 15:tc(e,t,n,a),2048&i&&wo(9,t);break;case 1:case 31:case 13:default:tc(e,t,n,a);break;case 3:tc(e,t,n,a),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e)));break;case 12:if(2048&i){tc(e,t,n,a),e=t.stateNode;try{var l=t.memoizedProps,s=l.id,r=l.onPostCommit;"function"==typeof r&&r(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(o){Su(t,t.return,o)}}else tc(e,t,n,a);break;case 23:break;case 22:l=t.stateNode,s=t.alternate,null!==t.memoizedState?2&l.$?tc(e,t,n,a):ic(e,t):2&l.$?tc(e,t,n,a):(l.$|=2,ac(e,t,n,a,!!(10256&t.subtreeFlags)||!1)),2048&i&&Zo(s,t);break;case 24:tc(e,t,n,a),2048&i&&ec(t.alternate,t)}}function ac(e,t,n,a,i){for(i=i&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var l=e,s=t,r=n,o=a,c=s.flags;switch(s.tag){case 0:case 11:case 15:ac(l,s,r,o,i),wo(8,s);break;case 23:break;case 22:var u=s.stateNode;null!==s.memoizedState?2&u.$?ac(l,s,r,o,i):ic(l,s):(u.$|=2,ac(l,s,r,o,i)),i&&2048&c&&Zo(s.alternate,s);break;case 24:ac(l,s,r,o,i),i&&2048&c&&ec(s.alternate,s);break;default:ac(l,s,r,o,i)}t=t.sibling}}function ic(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,a=t,i=a.flags;switch(a.tag){case 22:ic(n,a),2048&i&&Zo(a.alternate,a);break;case 24:ic(n,a),2048&i&&ec(a.alternate,a);break;default:ic(n,a)}t=t.sibling}}var lc=8192;function sc(e,t,n){if(e.subtreeFlags&lc)for(e=e.child;null!==e;)rc(e,t,n),e=e.sibling}function rc(e,t,n){switch(e.tag){case 26:sc(e,t,n),e.flags&lc&&null!==e.memoizedState&&function(e,t,n,a){if(!("stylesheet"!==n.type||"string"==typeof a.media&&!1===matchMedia(a.media).matches||4&n.state.loading)){if(null===n.instance){var i=Kd(a.href),l=t.querySelector(qd(i));if(l)return null!==(t=l.V)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=oh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=l,void nt(l);l=t.ownerDocument||t,a=Xd(a),(i=Fd.get(i))&&th(a,i),nt(l=l.createElement("link"));var s=l;s.V=new Promise(function(e,t){s.onload=e,s.onerror=t}),pd(l,"link",a),n.instance=l}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(3&n.state.loading)&&(e.count++,n=oh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Go,e.memoizedState,e.memoizedProps);break;case 5:default:sc(e,t,n);break;case 3:case 4:var a=Go;Go=Hd(e.stateNode.containerInfo),sc(e,t,n),Go=a;break;case 22:null===e.memoizedState&&(null!==(a=e.alternate)&&null!==a.memoizedState?(a=lc,lc=16777216,sc(e,t,n),lc=a):sc(e,t,n))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function cc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];Ao=a,hc(a,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)uc(e),e=e.sibling}function uc(e){switch(e.tag){case 0:case 11:case 15:cc(e),2048&e.flags&&xo(9,e,e.return);break;case 3:case 12:default:cc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t.$&&(null===e.return||13!==e.return.tag)?(t.$&=-3,dc(e)):cc(e)}}function dc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var a=t[n];Ao=a,hc(a,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:xo(8,t,t.return),dc(t);break;case 22:2&(n=t.stateNode).$&&(n.$&=-3,dc(t));break;default:dc(t)}e=e.sibling}}function hc(e,t){for(;null!==Ao;){var n=Ao;switch(n.tag){case 0:case 11:case 15:xo(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var a=n.memoizedState.cachePool.pool;null!=a&&a.refCount++}break;case 24:Ui(n.memoizedState.cache)}if(null!==(a=n.child))a.return=n,Ao=a;else e:for(n=e;null!==Ao;){var i=(a=Ao).sibling,l=a.return;if(Oo(a),a===n){Ao=null;break e}if(null!==i){i.return=l,Ao=i;break e}Ao=l}}}var fc={getCacheForType:function(e){var t=Ii(Bi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ii(Bi).controller.signal}},pc="function"==typeof WeakMap?WeakMap:Map,mc=0,gc=null,bc=null,wc=0,xc=0,vc=null,yc=!1,kc=!1,_c=!1,Mc=0,Sc=0,Tc=0,Cc=0,Dc=0,$c=0,Nc=0,Ec=null,Rc=null,zc=!1,Ic=0,Ac=0,Pc=1/0,Oc=null,jc=null,Lc=0,Bc=null,Fc=null,Uc=0,Hc=0,Vc=null,Wc=null,Gc=0,Jc=null;function Kc(){return 2&mc&&0!==wc?wc&-wc:null!==z.T?Vu():Oe()}function qc(){if(0===$c)if(536870912&wc&&!fi)$c=536870912;else{var e=_e;!(3932160&(_e<<=1))&&(_e=262144),$c=e}return null!==(e=Il.current)&&(e.flags|=32),$c}function Xc(e,t,n){(e!==gc||2!==xc&&9!==xc)&&null===e.cancelPendingCommit||(au(e,0),eu(e,wc,$c,!1)),Ee(e,n),2&mc&&e===gc||(e===gc&&(!(2&mc)&&(Cc|=n),4===Sc&&eu(e,wc,$c,!1)),Ou(e))}function Yc(e,t,n){if(6&mc)throw Error(l(327));for(var a=!n&&!(127&t)&&0===(t&e.expiredLanes)||Ce(e,t),i=a?function(e,t){var n=mc;mc|=2;var a=su(),i=ru();gc!==e||wc!==t?(Oc=null,Pc=re()+500,au(e,t)):kc=Ce(e,t);e:for(;;)try{if(0!==xc&&null!==bc){t=bc;var s=vc;t:switch(xc){case 1:xc=0,vc=null,pu(e,t,s,1);break;case 2:case 9:if(al(s)){xc=0,vc=null,fu(t);break}t=function(){2!==xc&&9!==xc||gc!==e||(xc=7),Ou(e)},s.then(t,t);break e;case 3:xc=7;break e;case 4:xc=5;break e;case 7:al(s)?(xc=0,vc=null,fu(t)):(xc=0,vc=null,pu(e,t,s,7));break;case 5:var r=null;switch(bc.tag){case 26:r=bc.memoizedState;case 5:case 27:var o=bc;if(r?sh(r):o.stateNode.complete){xc=0,vc=null;var c=o.sibling;if(null!==c)bc=c;else{var u=o.return;null!==u?(bc=u,mu(u)):bc=null}break t}}xc=0,vc=null,pu(e,t,s,5);break;case 6:xc=0,vc=null,pu(e,t,s,6);break;case 8:nu(),Sc=6;break e;default:throw Error(l(462))}}du();break}catch(d){iu(e,d)}return Ti=Si=null,z.H=a,z.A=i,mc=n,null!==bc?0:(gc=null,wc=0,Ra(),Sc)}(e,t):cu(e,t,!0),s=a;;){if(0===i){kc&&!a&&eu(e,t,0,!1);break}if(n=e.current.alternate,!s||Zc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var r=0;else r=0!=(r=-536870913&e.pendingLanes)?r:536870912&r?536870912:0;if(0!==r){t=r;e:{var o=e;i=Ec;var c=o.current.memoizedState.isDehydrated;if(c&&(au(o,r).flags|=256),2!==(r=cu(o,r,!1))){if(_c&&!c){o.errorRecoveryDisabledLanes|=s,Cc|=s,i=4;break e}s=Rc,Rc=i,null!==s&&(null===Rc?Rc=s:Rc.push.apply(Rc,s))}i=r}if(s=!1,2!==i)continue}}if(1===i){au(e,0),eu(e,t,0,!0);break}e:{switch(a=e,s=i){case 0:case 1:throw Error(l(345));case 4:if((4194048&t)!==t)break;case 6:eu(a,t,$c,!yc);break e;case 2:Rc=null;break;case 3:case 5:break;default:throw Error(l(329))}if((62914560&t)===t&&10<(i=Ic+300-re())){if(eu(a,t,$c,!yc),0!==Te(a,0,!0))break e;Uc=t,a.timeoutHandle=_d(Qc.bind(null,a,n,Rc,Oc,zc,t,$c,Cc,Nc,yc,s,"Throttled",-0,0),i)}else Qc(a,n,Rc,Oc,zc,t,$c,Cc,Nc,yc,s,null,-0,0)}break}i=cu(e,t,!1),s=!1}Ou(e)}function Qc(e,t,n,a,i,l,s,r,o,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||!(16785408&~d)){rc(t,l,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:It});var p=(62914560&l)===l?Ic-re():(4194048&l)===l?Ac-re():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&uh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&uh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===rh&&(rh=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var i=n[a],l=i.transferSize,s=i.initiatorType,r=i.duration;if(l&&r&&md(s)){for(s=0,r=i.responseEnd,a+=1;a<n.length;a++){var o=n[a],c=o.startTime;if(c>r)break;var u=o.transferSize,d=o.initiatorType;u&&md(d)&&(s+=u*((o=o.responseEnd)<r?1:(r-c)/(o-c)))}if(--a,t+=8*(l+s)/(i.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var i=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&uh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>rh?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(i)}}:null}(d,p)))return Uc=l,e.cancelPendingCommit=p(bu.bind(null,e,t,l,n,a,i,s,r,o,u,d,null,h,f)),void eu(e,l,s,!c)}bu(e,t,l,n,a,i,s,r,o)}function Zc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var a=0;a<n.length;a++){var i=n[a],l=i.getSnapshot;i=i.value;try{if(!ea(l(),i))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function eu(e,t,n,a){t&=~Dc,t&=~Cc,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var i=t;0<i;){var l=31-xe(i),s=1<<l;a[l]=-1,i&=~s}0!==n&&Re(e,n,t)}function tu(){return!!(6&mc)||(ju(0),!1)}function nu(){if(null!==bc){if(0===xc)var e=bc.return;else Ti=Si=null,os(e=bc),cl=null,ul=0,e=bc;for(;null!==e;)bo(e.alternate,e),e=e.return;bc=null}}function au(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Md(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc=0,nu(),gc=e,bc=n=Ua(e.current,null),wc=t,xc=0,vc=null,yc=!1,kc=Ce(e,t),_c=!1,Nc=$c=Dc=Cc=Tc=Sc=0,Rc=Ec=null,zc=!1,8&t&&(t|=32&t);var a=e.entangledLanes;if(0!==a)for(e=e.entanglements,a&=t;0<a;){var i=31-xe(a),l=1<<i;t|=e[i],a&=~l}return Mc=t,Ra(),n}function iu(e,t){Vl=null,z.H=gr,t===Zi||t===tl?(t=rl(),xc=3):t===el?(t=rl(),xc=4):xc=t===zr?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,vc=t,null===bc&&(Sc=1,Dr(e,Xa(t,e.current)))}function lu(){var e=Il.current;return null===e||((4194048&wc)===wc?null===Al:!!((62914560&wc)===wc||536870912&wc)&&e===Al)}function su(){var e=z.H;return z.H=gr,null===e?gr:e}function ru(){var e=z.A;return z.A=fc,e}function ou(){Sc=4,yc||(4194048&wc)!==wc&&null!==Il.current||(kc=!0),!(134217727&Tc)&&!(134217727&Cc)||null===gc||eu(gc,wc,$c,!1)}function cu(e,t,n){var a=mc;mc|=2;var i=su(),l=ru();gc===e&&wc===t||(Oc=null,au(e,t)),t=!1;var s=Sc;e:for(;;)try{if(0!==xc&&null!==bc){var r=bc,o=vc;switch(xc){case 8:nu(),s=6;break e;case 3:case 2:case 9:case 6:null===Il.current&&(t=!0);var c=xc;if(xc=0,vc=null,pu(e,r,o,c),n&&kc){s=0;break e}break;default:c=xc,xc=0,vc=null,pu(e,r,o,c)}}uu(),s=Sc;break}catch(u){iu(e,u)}return t&&e.shellSuspendCounter++,Ti=Si=null,mc=a,z.H=i,z.A=l,null===bc&&(gc=null,wc=0,Ra()),s}function uu(){for(;null!==bc;)hu(bc)}function du(){for(;null!==bc&&!le();)hu(bc)}function hu(e){var t=ro(e.alternate,e,Mc);e.memoizedProps=e.pendingProps,null===t?mu(e):bc=t}function fu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Gr(n,t,t.pendingProps,t.type,void 0,wc);break;case 11:t=Gr(n,t,t.pendingProps,t.type.render,t.ref,wc);break;case 5:os(t);default:bo(n,t),t=ro(n,t=bc=Ha(t,Mc),Mc)}e.memoizedProps=e.pendingProps,null===t?mu(e):bc=t}function pu(e,t,n,a){Ti=Si=null,os(t),cl=null,ul=0;var i=t.return;try{if(function(e,t,n,a,i){if(n.flags|=32768,null!==a&&"object"==typeof a&&"function"==typeof a.then){if(null!==(t=n.alternate)&&Ei(t,n,i,!0),null!==(n=Il.current)){switch(n.tag){case 31:case 13:return null===Al?ou():null===n.alternate&&0===Sc&&(Sc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,a===nl?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([a]):t.add(a),Tu(e,a,i)),!1;case 22:return n.flags|=65536,a===nl?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([a]):n.add(a),Tu(e,a,i)),!1}throw Error(l(435,n.tag))}return Tu(e,a,i),ou(),!1}if(fi)return null!==(t=Il.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,a!==gi&&_i(Xa(e=Error(l(422),{cause:a}),n))):(a!==gi&&_i(Xa(t=Error(l(423),{cause:a}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,a=Xa(a,n),_l(e,i=Nr(e.stateNode,a,i)),4!==Sc&&(Sc=2)),!1;var s=Error(l(520),{cause:a});if(s=Xa(s,n),null===Ec?Ec=[s]:Ec.push(s),4!==Sc&&(Sc=2),null===t)return!0;a=Xa(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,_l(n,e=Nr(n.stateNode,a,e)),!1;case 1:if(t=n.type,s=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===s||"function"!=typeof s.componentDidCatch||null!==jc&&jc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Rr(i=Er(i),e,n,a),_l(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,wc))return Sc=1,Dr(e,Xa(n,e.current)),void(bc=null)}catch(s){if(null!==i)throw bc=i,s;return Sc=1,Dr(e,Xa(n,e.current)),void(bc=null)}32768&t.flags?(fi||1===a?e=!0:kc||536870912&wc?e=!1:(yc=e=!0,(2===a||9===a||3===a||6===a)&&null!==(a=Il.current)&&13===a.tag&&(a.flags|=16384)),gu(t,e)):mu(t)}function mu(e){var t=e;do{if(32768&t.flags)return void gu(t,yc);e=t.return;var n=mo(t.alternate,t,Mc);if(null!==n)return void(bc=n);if(null!==(t=t.sibling))return void(bc=t);bc=t=e}while(null!==t);0===Sc&&(Sc=5)}function gu(e,t){do{var n=go(e.alternate,e);if(null!==n)return n.flags&=32767,void(bc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(bc=e);bc=e=n}while(null!==e);Sc=6,bc=null}function bu(e,t,n,a,i,s,r,o,c){e.cancelPendingCommit=null;do{ku()}while(0!==Lc);if(6&mc)throw Error(l(327));if(null!==t){if(t===e.current)throw Error(l(177));if(s=t.lanes|t.childLanes,function(e,t,n,a,i,l){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var r=e.entanglements,o=e.expirationTimes,c=e.hiddenUpdates;for(n=s&~n;0<n;){var u=31-xe(n),d=1<<u;r[u]=0,o[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==a&&Re(e,a,0),0!==l&&0===i&&0!==e.tag&&(e.suspendedLanes|=l&~(s&~t))}(e,n,s|=Ea,r,o,c),e===gc&&(bc=gc=null,wc=0),Fc=t,Bc=e,Uc=n,Hc=s,Vc=i,Wc=a,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,ae(de,function(){return _u(),null})):(e.callbackNode=null,e.callbackPriority=0),a=!!(13878&t.flags),13878&t.subtreeFlags||a){a=z.T,z.T=null,i=I.p,I.p=2,r=mc,mc|=4;try{!function(e,t){if(e=e.containerInfo,gd=yh,sa(e=la(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var i=a.anchorOffset,s=a.focusNode;a=a.focusOffset;var r=0,o=-1,c=-1,u=0,d=0,h=e,f=null;e:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(o=r+i),h!==s||0!==a&&3!==h.nodeType||(c=r+a),3===h.nodeType&&(r+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break e;if(f===n&&++u===i&&(o=r),f===s&&++d===a&&(c=r),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===o||-1===c?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(bd={focusedElem:e,selectionRange:n},yh=!1,Ao=t;null!==Ao;)if(e=(t=Ao).child,1028&t.subtreeFlags&&null!==e)e.return=t,Ao=e;else for(;null!==Ao;){switch(s=(t=Ao).alternate,e=t.flags,t.tag){case 0:if(4&e&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,a=n.stateNode;try{var m=Mr(n.type,i);e=a.getSnapshotBeforeUpdate(m,s),a.F=e}catch(g){Su(n,n.return,g)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))Ed(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ed(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(l(163))}if(null!==(e=t.sibling)){e.return=t.return,Ao=e;break}Ao=t.return}}(e,t)}finally{mc=r,I.p=i,z.T=a}}Lc=1,wu(),xu(),vu()}}function wu(){if(1===Lc){Lc=0;var e=Bc,t=Fc,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=z.T,z.T=null;var a=I.p;I.p=2;var i=mc;mc|=4;try{Jo(t,e);var l=bd,s=la(e.containerInfo),r=l.focusedElem,o=l.selectionRange;if(s!==r&&r&&r.ownerDocument&&ia(r.ownerDocument.documentElement,r)){if(null!==o&&sa(r)){var c=o.start,u=o.end;if(void 0===u&&(u=c),"selectionStart"in r)r.selectionStart=c,r.selectionEnd=Math.min(u,r.value.length);else{var d=r.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=r.textContent.length,m=Math.min(o.start,p),g=void 0===o.end?m:Math.min(o.end,p);!f.extend&&m>g&&(s=g,g=m,m=s);var b=aa(r,m),w=aa(r,g);if(b&&w&&(1!==f.rangeCount||f.anchorNode!==b.node||f.anchorOffset!==b.offset||f.focusNode!==w.node||f.focusOffset!==w.offset)){var x=d.createRange();x.setStart(b.node,b.offset),f.removeAllRanges(),m>g?(f.addRange(x),f.extend(w.node,w.offset)):(x.setEnd(w.node,w.offset),f.addRange(x))}}}}for(d=[],f=r;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<d.length;r++){var v=d[r];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}yh=!!gd,bd=gd=null}finally{mc=i,I.p=a,z.T=n}}e.current=t,Lc=2}}function xu(){if(2===Lc){Lc=0;var e=Bc,t=Fc,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=z.T,z.T=null;var a=I.p;I.p=2;var i=mc;mc|=4;try{Po(e,t.alternate,t)}finally{mc=i,I.p=a,z.T=n}}Lc=3}}function vu(){if(4===Lc||3===Lc){Lc=0,se();var e=Bc,t=Fc,n=Uc,a=Wc;10256&t.subtreeFlags||10256&t.flags?Lc=5:(Lc=0,Fc=Bc=null,yu(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(jc=null),Pe(n),t=t.stateNode,be&&"function"==typeof be.onCommitFiberRoot)try{be.onCommitFiberRoot(ge,t,void 0,!(128&~t.current.flags))}catch(o){}if(null!==a){t=z.T,i=I.p,I.p=2,z.T=null;try{for(var l=e.onRecoverableError,s=0;s<a.length;s++){var r=a[s];l(r.value,{componentStack:r.stack})}}finally{z.T=t,I.p=i}}3&Uc&&ku(),Ou(e),i=e.pendingLanes,261930&n&&42&i?e===Jc?Gc++:(Gc=0,Jc=e):Gc=0,ju(0)}}function yu(e,t){0===(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,Ui(t))}function ku(){return wu(),xu(),vu(),_u()}function _u(){if(5!==Lc)return!1;var e=Bc,t=Hc;Hc=0;var n=Pe(Uc),a=z.T,i=I.p;try{I.p=32>n?32:n,z.T=null,n=Vc,Vc=null;var s=Bc,r=Uc;if(Lc=0,Fc=Bc=null,Uc=0,6&mc)throw Error(l(331));var o=mc;if(mc|=4,uc(s.current),nc(s,s.current,r,n),mc=o,ju(0),be&&"function"==typeof be.onPostCommitFiberRoot)try{be.onPostCommitFiberRoot(ge,s)}catch(c){}return!0}finally{I.p=i,z.T=a,yu(e,t)}}function Mu(e,t,n){t=Xa(n,t),null!==(e=yl(e,t=Nr(e.stateNode,t,2),2))&&(Ee(e,2),Ou(e))}function Su(e,t,n){if(3===e.tag)Mu(e,e,n);else for(;null!==t;){if(3===t.tag){Mu(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof a.componentDidCatch&&(null===jc||!jc.has(a))){e=Xa(n,e),null!==(a=yl(t,n=Er(2),2))&&(Rr(n,a,t,e),Ee(a,2),Ou(a));break}}t=t.return}}function Tu(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new pc;var i=new Set;a.set(t,i)}else void 0===(i=a.get(t))&&(i=new Set,a.set(t,i));i.has(n)||(_c=!0,i.add(n),e=Cu.bind(null,e,t,n),t.then(e,e))}function Cu(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,gc===e&&(wc&n)===n&&(4===Sc||3===Sc&&(62914560&wc)===wc&&300>re()-Ic?!(2&mc)&&au(e,0):Dc|=n,Nc===wc&&(Nc=0)),Ou(e)}function Du(e,t){0===t&&(t=$e()),null!==(e=Aa(e,t))&&(Ee(e,t),Ou(e))}function $u(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Du(e,n)}function Nu(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode.O;break;default:throw Error(l(314))}null!==a&&a.delete(t),Du(e,n)}var Eu=null,Ru=null,zu=!1,Iu=!1,Au=!1,Pu=0;function Ou(e){e!==Ru&&null===e.next&&(null===Ru?Eu=Ru=e:Ru=Ru.next=e),Iu=!0,zu||(zu=!0,Td(function(){6&mc?ae(ce,Lu):Bu()}))}function ju(e,t){if(!Au&&Iu){Au=!0;do{for(var n=!1,a=Eu;null!==a;){if(0!==e){var i=a.pendingLanes;if(0===i)var l=0;else{var s=a.suspendedLanes,r=a.pingedLanes;l=(1<<31-xe(42|e)+1)-1,l=201326741&(l&=i&~(s&~r))?201326741&l|1:l?2|l:0}0!==l&&(n=!0,Hu(a,l))}else l=wc,!(3&(l=Te(a,a===gc?l:0,null!==a.cancelPendingCommit||-1!==a.timeoutHandle)))||Ce(a,l)||(n=!0,Hu(a,l));a=a.next}}while(n);Au=!1}}function Lu(){Bu()}function Bu(){Iu=zu=!1;var e,t=0;0!==Pu&&((e=window.event)&&"popstate"===e.type?e!==kd&&(kd=e,1):(kd=null,0))&&(t=Pu);for(var n=re(),a=null,i=Eu;null!==i;){var l=i.next,s=Fu(i,n);0===s?(i.next=null,null===a?Eu=l:a.next=l,null===l&&(Ru=a)):(a=i,(0!==t||3&s)&&(Iu=!0)),i=l}0!==Lc&&5!==Lc||ju(t),0!==Pu&&(Pu=0)}function Fu(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,l=-62914561&e.pendingLanes;0<l;){var s=31-xe(l),r=1<<s,o=i[s];-1===o?0!==(r&n)&&0===(r&a)||(i[s]=De(r,t)):o<=t&&(e.expiredLanes|=r),l&=~r}if(n=wc,n=Te(e,e===(t=gc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),a=e.callbackNode,0===n||e===t&&(2===xc||9===xc)||null!==e.cancelPendingCommit)return null!==a&&null!==a&&ie(a),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Ce(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==a&&ie(a),Pe(n)){case 2:case 8:n=ue;break;case 32:default:n=de;break;case 268435456:n=fe}return a=Uu.bind(null,e),n=ae(n,a),e.callbackPriority=t,e.callbackNode=n,t}return null!==a&&null!==a&&ie(a),e.callbackPriority=2,e.callbackNode=null,2}function Uu(e,t){if(0!==Lc&&5!==Lc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ku()&&e.callbackNode!==n)return null;var a=wc;return 0===(a=Te(e,e===gc?a:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Yc(e,a,t),Fu(e,re()),null!=e.callbackNode&&e.callbackNode===n?Uu.bind(null,e):null)}function Hu(e,t){if(ku())return null;Yc(e,t,!0)}function Vu(){if(0===Pu){var e=Wi;0===e&&(e=ke,!(261888&(ke<<=1))&&(ke=256)),Pu=e}return Pu}function Wu(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:zt(""+e)}function Gu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ju=0;Ju<Ta.length;Ju++){var Ku=Ta[Ju];Ca(Ku.toLowerCase(),"on"+(Ku[0].toUpperCase()+Ku.slice(1)))}Ca(wa,"onAnimationEnd"),Ca(xa,"onAnimationIteration"),Ca(va,"onAnimationStart"),Ca("dblclick","onDoubleClick"),Ca("focusin","onFocus"),Ca("focusout","onBlur"),Ca(ya,"onTransitionRun"),Ca(ka,"onTransitionStart"),Ca(_a,"onTransitionCancel"),Ca(Ma,"onTransitionEnd"),st("onMouseEnter",["mouseout","mouseover"]),st("onMouseLeave",["mouseout","mouseover"]),st("onPointerEnter",["pointerout","pointerover"]),st("onPointerLeave",["pointerout","pointerover"]),lt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lt("onBeforeInput",["compositionend","keypress","textInput","paste"]),lt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qu));function Yu(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var a=e[n],i=a.event;a=a.listeners;e:{var l=void 0;if(t)for(var s=a.length-1;0<=s;s--){var r=a[s],o=r.instance,c=r.currentTarget;if(r=r.listener,o!==l&&i.isPropagationStopped())break e;l=r,i.currentTarget=c;try{l(i)}catch(u){Da(u)}i.currentTarget=null,l=o}else for(s=0;s<a.length;s++){if(o=(r=a[s]).instance,c=r.currentTarget,r=r.listener,o!==l&&i.isPropagationStopped())break e;l=r,i.currentTarget=c;try{l(i)}catch(u){Da(u)}i.currentTarget=null,l=o}}}}function Qu(e,t){var n=t[He];void 0===n&&(n=t[He]=new Set);var a=e+"__bubble";n.has(a)||(nd(t,e,2,!1),n.add(a))}function Zu(e,t,n){var a=0;t&&(a|=4),nd(n,e,a,t)}var ed="_reactListening"+Math.random().toString(36).slice(2);function td(e){if(!e[ed]){e[ed]=!0,at.forEach(function(t){"selectionchange"!==t&&(Xu.has(t)||Zu(t,!1,e),Zu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ed]||(t[ed]=!0,Zu("selectionchange",!1,t))}}function nd(e,t,n,a){switch(Dh(t)){case 2:var i=kh;break;case 8:i=_h;break;default:i=Mh}n=i.bind(null,t,n,e),i=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),a?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ad(e,t,n,a,i){var l=a;if(!(1&t||2&t||null===a))e:for(;;){if(null===a)return;var s=a.tag;if(3===s||4===s){var o=a.stateNode.containerInfo;if(o===i)break;if(4===s)for(s=a.return;null!==s;){var c=s.tag;if((3===c||4===c)&&s.stateNode.containerInfo===i)return;s=s.return}for(;null!==o;){if(null===(s=Xe(o)))return;if(5===(c=s.tag)||6===c||26===c||27===c){a=l=s;continue e}o=o.parentNode}}a=a.return}Ft(function(){var a=l,i=Pt(n),s=[];e:{var o=Sa.get(e);if(void 0!==o){var c=ln,u=e;switch(e){case"keypress":if(0===Xt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=dn;break;case"focusout":u="blur",c=dn;break;case"beforeblur":case"afterblur":c=dn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=un;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=kn;break;case wa:case xa:case va:c=hn;break;case Ma:c=_n;break;case"scroll":case"scrollend":c=rn;break;case"wheel":c=Mn;break;case"copy":case"cut":case"paste":c=fn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=yn;break;case"toggle":case"beforetoggle":c=Sn}var d=!!(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=a;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Ut(m,f))&&d.push(id(m,g,p)),h)break;m=m.return}0<d.length&&(o=new c(o,u,null,n,i),s.push({event:o,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===At||!(u=n.relatedTarget||n.fromElement)||!Xe(u)&&!u[Ue])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=a,null!==(u=(u=n.relatedTarget||n.toElement)?Xe(u):null)&&(h=r(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=a),c!==u)){if(d=cn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=yn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?o:Ze(c),p=null==u?o:Ze(u),(o=new d(g,m+"leave",c,n,i)).target=h,o.relatedTarget=p,g=null,Xe(i)===a&&((d=new d(f,m+"enter",u,n,i)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=sd,m=u,p=0,g=f=c;g;g=d(g))p++;g=0;for(var b=m;b;b=d(b))g++;for(;0<p-g;)f=d(f),p--;for(;0<g-p;)m=d(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){d=f;break e}f=d(f),m=d(m)}d=null}else d=null;null!==c&&rd(s,o,c,d,!1),null!==u&&null!==h&&rd(s,h,u,d,!0)}if("select"===(c=(o=a?Ze(a):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var w=Hn;else if(On(o))if(Vn)w=Zn;else{w=Yn;var x=Xn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?a&&Nt(a.elementType)&&(w=Hn):w=Qn;switch(w&&(w=w(e,a))?jn(s,w,n,i):(x&&x(e,o,a),"focusout"===e&&a&&"number"===o.type&&null!=a.memoizedProps.value&&kt(o,"number",o.value)),x=a?Ze(a):window,e){case"focusin":(On(x)||"true"===x.contentEditable)&&(oa=x,ca=a,ua=null);break;case"focusout":ua=ca=oa=null;break;case"mousedown":da=!0;break;case"contextmenu":case"mouseup":case"dragend":da=!1,ha(s,n,i);break;case"selectionchange":if(ra)break;case"keydown":case"keyup":ha(s,n,i)}var v;if(Cn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else An?zn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Nn&&"ko"!==n.locale&&(An||"onCompositionStart"!==y?"onCompositionEnd"===y&&An&&(v=qt()):(Jt="value"in(Gt=i)?Gt.value:Gt.textContent,An=!0)),0<(x=ld(a,y)).length&&(y=new pn(y,e,null,n,i),s.push({event:y,listeners:x}),(v||null!==(v=In(n)))&&(y.data=v))),(v=$n?function(e,t){switch(e){case"compositionend":return In(t);case"keypress":return 32!==t.which?null:(Rn=!0,En);case"textInput":return(e=t.data)===En&&Rn?null:e;default:return null}}(e,n):function(e,t){if(An)return"compositionend"===e||!Cn&&zn(e,t)?(e=qt(),Kt=Jt=Gt=null,An=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(y=ld(a,"onBeforeInput")).length&&(x=new pn("onBeforeInput","beforeinput",null,n,i),s.push({event:x,listeners:y}),x.data=v),function(e,t,n,a,i){if("submit"===t&&n&&n.stateNode===i){var l=Wu((i[Fe]||null).action),s=a.submitter;s&&null!==(t=(t=s[Fe]||null)?Wu(t.formAction):s.getAttribute("formAction"))&&(l=t,s=null);var r=new ln("action","action",null,a,i);e.push({event:r,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(0!==Pu){var e=s?Gu(i,s):new FormData(i);nr(n,{pending:!0,data:e,method:i.method,action:l},null,e)}}else"function"==typeof l&&(r.preventDefault(),e=s?Gu(i,s):new FormData(i),nr(n,{pending:!0,data:e,method:i.method,action:l},l,e))},currentTarget:i}]})}}(s,e,a,n,i)}Yu(s,t)})}function id(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ld(e,t){for(var n=t+"Capture",a=[];null!==e;){var i=e,l=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===l||(null!=(i=Ut(e,n))&&a.unshift(id(e,i,l)),null!=(i=Ut(e,t))&&a.push(id(e,i,l))),3===e.tag)return a;e=e.return}return[]}function sd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function rd(e,t,n,a,i){for(var l=t.k,s=[];null!==n&&n!==a;){var r=n,o=r.alternate,c=r.stateNode;if(r=r.tag,null!==o&&o===a)break;5!==r&&26!==r&&27!==r||null===c||(o=c,i?null!=(c=Ut(n,l))&&s.unshift(id(n,c,o)):i||null!=(c=Ut(n,l))&&s.push(id(n,c,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var od=/\r\n?/g,cd=/\u0000|\uFFFD/g;function ud(e){return("string"==typeof e?e:""+e).replace(od,"\n").replace(cd,"")}function dd(e,t){return t=ud(t),ud(e)===t}function hd(e,t,n,a,i,s){switch(n){case"children":"string"==typeof a?"body"===t||"textarea"===t&&""===a||Tt(e,a):("number"==typeof a||"bigint"==typeof a)&&"body"!==t&&Tt(e,""+a);break;case"className":dt(e,"class",a);break;case"tabIndex":dt(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":dt(e,n,a);break;case"style":$t(e,a,s);break;case"data":if("object"!==t){dt(e,"data",a);break}case"src":case"href":if(""===a&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==a||"function"==typeof a||"symbol"==typeof a||"boolean"==typeof a){e.removeAttribute(n);break}a=zt(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if("function"==typeof a){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof s&&("formAction"===n?("input"!==t&&hd(e,t,"name",i.name,i,null),hd(e,t,"formEncType",i.formEncType,i,null),hd(e,t,"formMethod",i.formMethod,i,null),hd(e,t,"formTarget",i.formTarget,i,null)):(hd(e,t,"encType",i.encType,i,null),hd(e,t,"method",i.method,i,null),hd(e,t,"target",i.target,i,null))),null==a||"symbol"==typeof a||"boolean"==typeof a){e.removeAttribute(n);break}a=zt(""+a),e.setAttribute(n,a);break;case"onClick":null!=a&&(e.onclick=It);break;case"onScroll":null!=a&&Qu("scroll",e);break;case"onScrollEnd":null!=a&&Qu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!=typeof a||!("W"in a))throw Error(l(61));if(null!=(n=a.W)){if(null!=i.children)throw Error(l(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&"function"!=typeof a&&"symbol"!=typeof a;break;case"muted":e.muted=a&&"function"!=typeof a&&"symbol"!=typeof a;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==a||"function"==typeof a||"boolean"==typeof a||"symbol"==typeof a){e.removeAttribute("xlink:href");break}n=zt(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===a?e.setAttribute(n,""):!1!==a&&null!=a&&"function"!=typeof a&&"symbol"!=typeof a?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":null==a||"function"==typeof a||"symbol"==typeof a||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":Qu("beforetoggle",e),Qu("toggle",e),ut(e,"popover",a);break;case"xlinkActuate":ht(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":ht(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":ht(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":ht(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":ht(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":ht(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":ht(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":ht(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":ht(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":ut(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&ut(e,n=Et.get(n)||n,a)}}function fd(e,t,n,a,i,s){switch(n){case"style":$t(e,a,s);break;case"dangerouslySetInnerHTML":if(null!=a){if("object"!=typeof a||!("W"in a))throw Error(l(61));if(null!=(n=a.W)){if(null!=i.children)throw Error(l(60));e.innerHTML=n}}break;case"children":"string"==typeof a?Tt(e,a):("number"==typeof a||"bigint"==typeof a)&&Tt(e,""+a);break;case"onScroll":null!=a&&Qu("scroll",e);break;case"onScrollEnd":null!=a&&Qu("scrollend",e);break;case"onClick":null!=a&&(e.onclick=It);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:it.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"==typeof(s=null!=(s=e[Fe]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!=typeof a)?n in e?e[n]=a:!0===a?e.setAttribute(n,""):ut(e,n,a):("function"!=typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,i)))}}function pd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qu("error",e),Qu("load",e);var a,i=!1,s=!1;for(a in n)if(n.hasOwnProperty(a)){var r=n[a];if(null!=r)switch(a){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:hd(e,t,a,r,n,null)}}return s&&hd(e,t,"srcSet",n.srcSet,n,null),void(i&&hd(e,t,"src",n.src,n,null));case"input":Qu("invalid",e);var o=a=r=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":r=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":a=d;break;case"defaultValue":o=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(l(137,t));break;default:hd(e,t,i,d,n,null)}}return void yt(e,a,o,c,u,r,s,!1);case"select":for(s in Qu("invalid",e),i=r=a=null,n)if(n.hasOwnProperty(s)&&null!=(o=n[s]))switch(s){case"value":a=o;break;case"defaultValue":r=o;break;case"multiple":i=o;default:hd(e,t,s,o,n,null)}return t=a,n=r,e.multiple=!!i,void(null!=t?_t(e,!!i,t,!1):null!=n&&_t(e,!!i,n,!0));case"textarea":for(r in Qu("invalid",e),a=s=i=null,n)if(n.hasOwnProperty(r)&&null!=(o=n[r]))switch(r){case"value":i=o;break;case"defaultValue":s=o;break;case"children":a=o;break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(l(91));break;default:hd(e,t,r,o,n,null)}return void St(e,i,s,a);case"option":for(c in n)n.hasOwnProperty(c)&&null!=(i=n[c])&&("selected"===c?e.selected=i&&"function"!=typeof i&&"symbol"!=typeof i:hd(e,t,c,i,n,null));return;case"dialog":Qu("beforetoggle",e),Qu("toggle",e),Qu("cancel",e),Qu("close",e);break;case"iframe":case"object":Qu("load",e);break;case"video":case"audio":for(i=0;i<qu.length;i++)Qu(qu[i],e);break;case"image":Qu("error",e),Qu("load",e);break;case"details":Qu("toggle",e);break;case"embed":case"source":case"link":Qu("error",e),Qu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:hd(e,t,u,i,n,null)}return;default:if(Nt(t)){for(d in n)n.hasOwnProperty(d)&&void 0!==(i=n[d])&&fd(e,t,d,i,n,void 0);return}}for(o in n)n.hasOwnProperty(o)&&null!=(i=n[o])&&hd(e,t,o,i,n,null)}function md(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var gd=null,bd=null;function wd(e){return 9===e.nodeType?e:e.ownerDocument}function xd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function yd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.W}var kd=null,_d="function"==typeof setTimeout?setTimeout:void 0,Md="function"==typeof clearTimeout?clearTimeout:void 0,Sd="function"==typeof Promise?Promise:void 0,Td="function"==typeof queueMicrotask?queueMicrotask:void 0!==Sd?function(e){return Sd.resolve(null).then(e).catch(Cd)}:_d;function Cd(e){setTimeout(function(){throw e})}function Dd(e){return"head"===e}function $d(e,t){var n=t,a=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)||"/&"===n){if(0===a)return e.removeChild(i),void Gh(t);a--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)a++;else if("html"===n)Bd(e.ownerDocument.documentElement);else if("head"===n){Bd(n=e.ownerDocument.head);for(var l=n.firstChild;l;){var s=l.nextSibling,r=l.nodeName;l[Ke]||"SCRIPT"===r||"STYLE"===r||"LINK"===r&&"stylesheet"===l.rel.toLowerCase()||n.removeChild(l),l=s}}else"body"===n&&Bd(e.ownerDocument.body);n=i}while(n);Gh(t)}function Nd(e,t){var n=e;e=0;do{var a=n.nextSibling;if(1===n.nodeType?t?(n.G=n.style.display,n.style.display="none"):(n.style.display=n.G||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n.J=n.nodeValue,n.nodeValue=""):n.nodeValue=n.J||""),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=a}while(n)}function Ed(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ed(n),qe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Rd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Ad(e.nextSibling)))return null}return e}function zd(e){return"$?"===e.data||"$~"===e.data}function Id(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Ad(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Pd=null;function Od(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Ad(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function jd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Ld(e,t,n){switch(t=wd(n),e){case"html":if(!(e=t.documentElement))throw Error(l(452));return e;case"head":if(!(e=t.head))throw Error(l(453));return e;case"body":if(!(e=t.body))throw Error(l(454));return e;default:throw Error(l(451))}}function Bd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);qe(e)}var Fd=new Map,Ud=new Set;function Hd(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Vd=I.d;I.d={f:function(){var e=Vd.f(),t=tu();return e||t},r:function(e){var t=Qe(e);null!==t&&5===t.tag&&"form"===t.type?ir(t):Vd.r(e)},D:function(e){Vd.D(e),Gd("dns-prefetch",e,null)},C:function(e,t){Vd.C(e,t),Gd("preconnect",e,t)},L:function(e,t,n){Vd.L(e,t,n);var a=Wd;if(a&&e&&t){var i='link[rel="preload"][as="'+xt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+xt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(i+='[imagesizes="'+xt(n.imageSizes)+'"]')):i+='[href="'+xt(e)+'"]';var l=i;switch(t){case"style":l=Kd(e);break;case"script":l=Yd(e)}Fd.has(l)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Fd.set(l,e),null!==a.querySelector(i)||"style"===t&&a.querySelector(qd(l))||"script"===t&&a.querySelector(Qd(l))||(pd(t=a.createElement("link"),"link",e),nt(t),a.head.appendChild(t)))}},m:function(e,t){Vd.m(e,t);var n=Wd;if(n&&e){var a=t&&"string"==typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+xt(a)+'"][href="'+xt(e)+'"]',l=i;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":l=Yd(e)}if(!Fd.has(l)&&(e=h({rel:"modulepreload",href:e},t),Fd.set(l,e),null===n.querySelector(i))){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Qd(l)))return}pd(a=n.createElement("link"),"link",e),nt(a),n.head.appendChild(a)}}},X:function(e,t){Vd.X(e,t);var n=Wd;if(n&&e){var a=et(n).hoistableScripts,i=Yd(e),l=a.get(i);l||((l=n.querySelector(Qd(i)))||(e=h({src:e,async:!0},t),(t=Fd.get(i))&&nh(e,t),nt(l=n.createElement("script")),pd(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},a.set(i,l))}},S:function(e,t,n){Vd.S(e,t,n);var a=Wd;if(a&&e){var i=et(a).hoistableStyles,l=Kd(e);t=t||"default";var s=i.get(l);if(!s){var r={loading:0,preload:null};if(s=a.querySelector(qd(l)))r.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Fd.get(l))&&th(e,n);var o=s=a.createElement("link");nt(o),pd(o,"link",e),o.V=new Promise(function(e,t){o.onload=e,o.onerror=t}),o.addEventListener("load",function(){r.loading|=1}),o.addEventListener("error",function(){r.loading|=2}),r.loading|=4,eh(s,t,a)}s={type:"stylesheet",instance:s,count:1,state:r},i.set(l,s)}}},M:function(e,t){Vd.M(e,t);var n=Wd;if(n&&e){var a=et(n).hoistableScripts,i=Yd(e),l=a.get(i);l||((l=n.querySelector(Qd(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=Fd.get(i))&&nh(e,t),nt(l=n.createElement("script")),pd(l,"link",e),n.head.appendChild(l)),l={type:"script",instance:l,count:1,state:null},a.set(i,l))}}};var Wd="undefined"==typeof document?null:document;function Gd(e,t,n){var a=Wd;if(a&&"string"==typeof t&&t){var i=xt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"==typeof n&&(i+='[crossorigin="'+n+'"]'),Ud.has(i)||(Ud.add(i),e={rel:e,crossOrigin:n,href:t},null===a.querySelector(i)&&(pd(t=a.createElement("link"),"link",e),nt(t),a.head.appendChild(t)))}}function Jd(e,t,n,a){var i,s,r,o,c=(c=W.current)?Hd(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Kd(n.href),(a=(n=et(c).hoistableStyles).get(t))||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Kd(n.href);var u=et(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(qd(e)))&&!u.V&&(d.instance=u,d.state.loading=5),Fd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Fd.set(e,n),u||(i=c,s=e,r=n,o=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=i.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),pd(s,"link",r),nt(s),i.head.appendChild(s))))),t&&null===a)throw Error(l(528,""));return d}if(t&&null!==a)throw Error(l(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Yd(n),(a=(n=et(c).hoistableScripts).get(t))||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Kd(e){return'href="'+xt(e)+'"'}function qd(e){return'link[rel="stylesheet"]['+e+"]"}function Xd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Yd(e){return'[src="'+xt(e)+'"]'}function Qd(e){return"script[async]"+e}function Zd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+xt(n.href)+'"]');if(a)return t.instance=a,nt(a),a;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return nt(a=(e.ownerDocument||e).createElement("style")),pd(a,"style",i),eh(a,n.precedence,e),t.instance=a;case"stylesheet":i=Kd(n.href);var s=e.querySelector(qd(i));if(s)return t.state.loading|=4,t.instance=s,nt(s),s;a=Xd(n),(i=Fd.get(i))&&th(a,i),nt(s=(e.ownerDocument||e).createElement("link"));var r=s;return r.V=new Promise(function(e,t){r.onload=e,r.onerror=t}),pd(s,"link",a),t.state.loading|=4,eh(s,n.precedence,e),t.instance=s;case"script":return s=Yd(n.src),(i=e.querySelector(Qd(s)))?(t.instance=i,nt(i),i):(a=n,(i=Fd.get(s))&&nh(a=h({},n),i),nt(i=(e=e.ownerDocument||e).createElement("script")),pd(i,"link",a),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(l(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(a=t.instance,t.state.loading|=4,eh(a,n.precedence,e));return t.instance}function eh(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=a.length?a[a.length-1]:null,l=i,s=0;s<a.length;s++){var r=a[s];if(r.dataset.precedence===t)l=r;else if(l!==i)break}l?l.parentNode.insertBefore(e,l.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function nh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var ah=null;function ih(e,t,n){if(null===ah){var a=new Map,i=ah=new Map;i.set(n,a)}else(a=(i=ah).get(n))||(a=new Map,i.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var l=n[i];if(!(l[Ke]||l[Be]||"link"===e&&"stylesheet"===l.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==l.namespaceURI){var s=l.getAttribute(t)||"";s=e+s;var r=a.get(s);r?r.push(l):a.set(s,[l])}}return a}function lh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function sh(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var rh=0;function oh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)uh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ch=null;function uh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ch=new Map,t.forEach(dh,e),ch=null,oh.call(e))}function dh(e,t){if(!(4&t.state.loading)){var n=ch.get(e);if(n)var a=n.get(null);else{n=new Map,ch.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),l=0;l<i.length;l++){var s=i[l];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),a=s)}a&&n.set(null,a)}s=(i=t.instance).getAttribute("data-precedence"),(l=n.get(s)||a)===a&&n.set(null,i),n.set(s,i),this.count++,a=oh.bind(this),i.addEventListener("load",a),i.addEventListener("error",a),l?l.parentNode.insertBefore(i,l.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var hh={$$typeof:v,Provider:null,Consumer:null,h:A,N:A,R:0};function fh(e,t,n,a,i,l,s,r,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ne(0),this.hiddenUpdates=Ne(null),this.identifierPrefix=a,this.onUncaughtError=i,this.onCaughtError=l,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function ph(e,t,n,a,i,l,s,r,o,c,u,d){return e=new fh(e,t,n,s,o,c,u,d,r),t=1,!0===l&&(t|=24),l=Ba(3,null,null,t),e.current=l,l.stateNode=e,(t=Fi()).refCount++,e.pooledCache=t,t.refCount++,l.memoizedState={element:a,isDehydrated:n,cache:t},wl(l),e}function mh(e){return e?e=ja:ja}function gh(e,t,n,a,i,l){i=mh(i),null===a.context?a.context=i:a.pendingContext=i,(a=vl(t)).payload={element:n},null!==(l=void 0===l?null:l)&&(a.callback=l),null!==(n=yl(e,a,t))&&(Xc(n,0,t),kl(n,e,t))}function bh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function wh(e,t){bh(e,t),(e=e.alternate)&&bh(e,t)}function xh(e){if(13===e.tag||31===e.tag){var t=Aa(e,67108864);null!==t&&Xc(t,0,67108864),wh(e,67108864)}}function vh(e){if(13===e.tag||31===e.tag){var t=Kc(),n=Aa(e,t=Ae(t));null!==n&&Xc(n,0,t),wh(e,t)}}var yh=!0;function kh(e,t,n,a){var i=z.T;z.T=null;var l=I.p;try{I.p=2,Mh(e,t,n,a)}finally{I.p=l,z.T=i}}function _h(e,t,n,a){var i=z.T;z.T=null;var l=I.p;try{I.p=8,Mh(e,t,n,a)}finally{I.p=l,z.T=i}}function Mh(e,t,n,a){if(yh){var i=Sh(a);if(null===i)ad(e,t,a,Th,n),Oh(e,a);else if(function(e,t,n,a,i){switch(t){case"focusin":return Nh=jh(Nh,e,t,n,a,i),!0;case"dragenter":return Eh=jh(Eh,e,t,n,a,i),!0;case"mouseover":return Rh=jh(Rh,e,t,n,a,i),!0;case"pointerover":var l=i.pointerId;return zh.set(l,jh(zh.get(l)||null,e,t,n,a,i)),!0;case"gotpointercapture":return l=i.pointerId,Ih.set(l,jh(Ih.get(l)||null,e,t,n,a,i)),!0}return!1}(i,e,t,n,a))a.stopPropagation();else if(Oh(e,a),4&t&&-1<Ph.indexOf(e)){for(;null!==i;){var l=Qe(i);if(null!==l)switch(l.tag){case 3:if((l=l.stateNode).current.memoizedState.isDehydrated){var s=Se(l.pendingLanes);if(0!==s){var r=l;for(r.pendingLanes|=2,r.entangledLanes|=2;s;){var o=1<<31-xe(s);r.entanglements[1]|=o,s&=~o}Ou(l),!(6&mc)&&(Pc=re()+500,ju(0))}}break;case 31:case 13:null!==(r=Aa(l,2))&&Xc(r,0,2),tu(),wh(l,2)}if(null===(l=Sh(a))&&ad(e,t,a,Th,n),l===i)break;i=l}null!==i&&a.stopPropagation()}else ad(e,t,a,null,n)}}function Sh(e){return Ch(e=Pt(e))}var Th=null;function Ch(e){if(Th=null,null!==(e=Xe(e))){var t=r(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=o(t)))return e;e=null}else if(31===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Th=e,null}function Dh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oe()){case ce:return 2;case ue:return 8;case de:case he:return 32;case fe:return 268435456;default:return 32}default:return 32}}var $h=!1,Nh=null,Eh=null,Rh=null,zh=new Map,Ih=new Map,Ah=[],Ph="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Oh(e,t){switch(e){case"focusin":case"focusout":Nh=null;break;case"dragenter":case"dragleave":Eh=null;break;case"mouseover":case"mouseout":Rh=null;break;case"pointerover":case"pointerout":zh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ih.delete(t.pointerId)}}function jh(e,t,n,a,i,l){return null===e||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:l,targetContainers:[i]},null!==t&&null!==(t=Qe(t))&&xh(t),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lh(e){var t=Xe(e.target);if(null!==t){var n=r(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=o(n)))return e.blockedOn=t,void je(e.priority,function(){vh(n)})}else if(31===t){if(null!==(t=c(n)))return e.blockedOn=t,void je(e.priority,function(){vh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sh(e.nativeEvent);if(null!==n)return null!==(t=Qe(n))&&xh(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);At=a,n.target.dispatchEvent(a),At=null,t.shift()}return!0}function Fh(e,t,n){Bh(e)&&n.delete(t)}function Uh(){$h=!1,null!==Nh&&Bh(Nh)&&(Nh=null),null!==Eh&&Bh(Eh)&&(Eh=null),null!==Rh&&Bh(Rh)&&(Rh=null),zh.forEach(Fh),Ih.forEach(Fh)}function Hh(t,n){t.blockedOn===n&&(t.blockedOn=null,$h||($h=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Uh)))}var Vh=null;function Wh(t){Vh!==t&&(Vh=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Vh===t&&(Vh=null);for(var e=0;e<t.length;e+=3){var n=t[e],a=t[e+1],i=t[e+2];if("function"!=typeof a){if(null===Ch(a||n))continue;break}var l=Qe(n);null!==l&&(t.splice(e,3),e-=3,nr(l,{pending:!0,data:i,method:n.method,action:a},a,i))}}))}function Gh(e){function t(t){return Hh(t,e)}null!==Nh&&Hh(Nh,e),null!==Eh&&Hh(Eh,e),null!==Rh&&Hh(Rh,e),zh.forEach(t),Ih.forEach(t);for(var n=0;n<Ah.length;n++){var a=Ah[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Ah.length&&null===(n=Ah[0]).blockedOn;)Lh(n),null===n.blockedOn&&Ah.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(a=0;a<n.length;a+=3){var i=n[a],l=n[a+1],s=i[Fe]||null;if("function"==typeof l)s||Wh(n);else if(s){var r=null;if(l&&l.hasAttribute("formAction")){if(i=l,s=l[Fe]||null)r=s.formAction;else if(null!==Ch(i))continue}else r=s.action;"function"==typeof r?n[a+1]=r:(n.splice(a,3),a-=3),Wh(n)}}}function Jh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==i&&(i(),i=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var a=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==i&&(i(),i=null)}}}function Kh(e){this.K=e}function qh(e){this.K=e}qh.prototype.render=Kh.prototype.render=function(e){var t=this.K;if(null===t)throw Error(l(409));gh(t.current,Kc(),e,t,null,null)},qh.prototype.unmount=Kh.prototype.unmount=function(){var e=this.K;if(null!==e){this.K=null;var t=e.containerInfo;gh(e.current,2,null,e,null,null),tu(),t[Ue]=null}},qh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Oe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ah.length&&0!==t&&t<Ah[n].priority;n++);Ah.splice(n,0,e),0===n&&Lh(e)}};var Xh=t.version;if("19.2.3"!==Xh)throw Error(l(527,Xh,"19.2.3"));I.findDOMNode=function(e){var t=e.I;if(void 0===t){if("function"==typeof e.render)throw Error(l(188));throw e=Object.keys(e).join(","),Error(l(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=r(e)))throw Error(l(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(a=i.return)){n=a;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u(i),e;if(s===a)return u(i),t;s=s.sibling}throw Error(l(188))}if(n.return!==a.return)n=i,a=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,a=s;break}if(c===a){o=!0,a=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,a=i;break}if(c===a){o=!0,a=s,n=i;break}c=c.sibling}if(!o)throw Error(l(189))}}if(n.alternate!==a)throw Error(l(190))}if(3!==n.tag)throw Error(l(188));return n.stateNode.current===n?e:t}(t),null===(e=null!==e?d(e):null)?null:e.stateNode};var Yh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{ge=Qh.inject(Yh),be=Qh}catch(ef){}}return Ye.createRoot=function(e,t){if(!s(e))throw Error(l(299));var n=!1,a="",i=Sr,r=Tr,o=Cr;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(r=t.onCaughtError),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=ph(e,1,!1,null,0,n,a,null,i,r,o,Jh),e[Ue]=t.current,td(e),new Kh(t)},Ye.hydrateRoot=function(e,t,n){if(!s(e))throw Error(l(299));var a=!1,i="",r=Sr,o=Tr,c=Cr,u=null;return null!=n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(r=n.onUncaughtError),void 0!==n.onCaughtError&&(o=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=ph(e,1,!0,t,0,a,i,u,r,o,c,Jh)).context=mh(null),n=t.current,(i=vl(a=Ae(a=Kc()))).callback=null,yl(n,i,a),n=a,t.current.lanes=n,Ee(t,n),Ou(t),e[Ue]=t.current,td(e),new qh(t)},Ye.version="19.2.3",Ye}function at(){return Ke||(Ke=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Xe.exports=nt()),Xe.exports}const it=l(at()),lt=e.createContext(void 0),st=()=>{const t=e.useContext(lt);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},rt=({children:t})=>{const[n,a]=e.useState(()=>localStorage.getItem("theme")||"neomorphic-light");return e.useEffect(()=>{const e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;e&&["neomorphic-light","neomorphic-dark"].includes(e)?a(e):a(t?"neomorphic-dark":"neomorphic-light");const n=window.matchMedia("(prefers-color-scheme: dark)"),i=e=>{localStorage.getItem("theme")||a(e.matches?"neomorphic-dark":"neomorphic-light")};return n.addEventListener("change",i),()=>{n.removeEventListener("change",i)}},[]),e.useEffect(()=>{document.documentElement.classList.remove("light","dark","neomorphic-light","neomorphic-dark"),document.documentElement.classList.add(n),document.documentElement.style.colorScheme=n.includes("dark")?"dark":"light",localStorage.setItem("theme",n)},[n]),qe.jsx(lt.Provider,{value:{theme:n,toggleTheme:()=>{a(e=>"neomorphic-light"===e?"neomorphic-dark":"neomorphic-light")},setTheme:e=>{a(e)}},children:t})},ot={},ct=function(e,t,n){let a=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};const i=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),s=(null==l?void 0:l.nonce)||(null==l?void 0:l.getAttribute("nonce"));a=e(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,n),e in ot)return;ot[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(n)for(let n=i.length-1;n>=0;n--){const a=i[n];if(a.href===e&&(!t||"stylesheet"===a.rel))return}else if(document.querySelector(`link[href="${e}"]${a}`))return;const l=document.createElement("link");return l.rel=t?"stylesheet":"modulepreload",t||(l.as="script"),l.crossOrigin="",l.href=e,s&&l.setAttribute("nonce",s),document.head.appendChild(l),t?new Promise((t,n)=>{l.addEventListener("load",t),l.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};var ut=(e=>(e.RPG_MISSION_CENTER="RPG_MISSION_CENTER",e.BLACK_MARKET="BLACK_MARKET",e.DATA_CHARTS="DATA_CHARTS",e.HALL_OF_FAME="HALL_OF_FAME",e.PROJECT_MANUAL="PROJECT_MANUAL",e.SETTINGS="SETTINGS",e.THINKING_CENTER="THINKING_CENTER",e.TIME_BOX="TIME_BOX",e.SELF_MANIFESTATION="SELF_MANIFESTATION",e.HIGHEST_VERSION="HIGHEST_VERSION",e))(ut||{});const dt={STRENGTH:"STR",INTELLIGENCE:"INT",DISCIPLINE:"DIS",WEALTH:"WEA"};var ht=(e=>(e.DAILY="daily",e.MAIN="main",e.RANDOM="random",e.LEISURE="leisure",e))(ht||{}),ft=(e=>(e.HEALTH="health",e.EFFICIENCY="efficiency",e.LEISURE="leisure",e))(ft||{}),pt=(e=>(e.SOUND_EFFECT="soundEffect",e.BACKGROUND_MUSIC="bgMusic",e))(pt||{});const mt="4.5.0",gt=({activeHelp:n,helpContent:a,onClose:i,config:l})=>{if(!n||!a[n])return null;const s=a[n],[r,o]=e.useState("neomorphic-light");e.useEffect(()=>{const e=()=>{const e=document.documentElement;return e.classList.contains("neomorphic-dark")?"neomorphic-dark":e.classList.contains("neomorphic-light")?"neomorphic-light":e.classList.contains("dark")?"dark":e.classList.contains("light")?"light":"neomorphic-light"};o(e());const t=new MutationObserver(()=>{o(e())});return t.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>{t.disconnect()}},[]);const c=r.includes("dark"),u="neomorphic-dark"===r,d="undefined"!=typeof document?document.body:null;return d?t.createPortal(qe.jsxs("div",{className:"fixed inset-0 z-[100000] bg-black/30 backdrop-blur-sm flex items-center justify-center p-4",onClick:e=>{e.target===e.currentTarget&&i()},children:[qe.jsxs("div",{className:"guide-card neu-out "+(u?"neomorphic-dark-mode":c?"dark-mode":""),style:{"--bg-color":u?"#1e1e2e":c?"#1a1a2e":"#e0e5ec","--text-main":u||c?"#f4f4f5":"#4d5b6d","--text-sub":"#a3b1c6","--text-gray":u||c?"#a3b1c6":"#64748b","--shadow-dark":u?"#0f0f17":c?"#0f172a":"#a3b1c6","--shadow-light":u?"#2d2d42":c?"#1e293b":"#ffffff"},children:[qe.jsxs("div",{className:"guide-header",children:[qe.jsxs("h3",{children:[s.icon," ",s.title]}),qe.jsx("button",{className:"guide-close",onClick:i,children:""})]}),qe.jsxs("div",{className:"guide-content",children:[qe.jsx("h4",{className:"flex items-center gap-1",children:" "}),qe.jsx("p",{children:s.productIntro}),l.showUnderlyingPrinciple&&qe.jsxs(qe.Fragment,{children:[qe.jsx("h4",{children:" "}),qe.jsx("p",{children:s.underlyingPrinciple})]}),qe.jsx("h4",{children:" "}),qe.jsx("p",{children:s.coreRules}),qe.jsx("h4",{children:" "}),qe.jsx("p",{children:s.usageMethods.replace(new RegExp("(?<!^)(\\d+\\.)","g"),"\n$1")})]})]}),qe.jsx("style",{jsx:!0,children:"\n        .guide-card {\n          position: fixed;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%) scale(0.9);\n          width: 80%;\n          max-width: 600px;\n          max-height: 90vh;\n          padding: 30px;\n          background: var(--bg-color);\n          box-shadow: 20px 20px 60px var(--shadow-dark), -20px -20px 60px var(--shadow-light);\n          border-radius: 20px;\n          z-index: 3000;\n          display: flex;\n          flex-direction: column;\n          overflow-y: auto;\n          pointer-events: auto;\n          animation: fadeInScale 0.3s ease-out forwards;\n        }\n        \n        @keyframes fadeInScale {\n          from {\n            opacity: 0;\n            transform: translate(-50%, -50%) scale(0.9);\n          }\n          to {\n            opacity: 1;\n            transform: translate(-50%, -50%) scale(1);\n          }\n        }\n        \n        .guide-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 2px solid rgba(163, 177, 198, 0.2);\n        }\n        \n        .guide-header h3 {\n          margin: 0;\n          color: var(--text-main);\n          font-size: 24px;\n          font-weight: 700;\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        \n        .guide-close {\n          background: var(--bg-color);\n          border: none;\n          border-radius: 50% !important;\n          width: 35px !important;\n          height: 35px !important;\n          min-width: 35px !important;\n          min-height: 35px !important;\n          max-width: 35px !important;\n          max-height: 35px !important;\n          display: flex !important;\n          align-items: center !important;\n          justify-content: center !important;\n          cursor: pointer !important;\n          font-size: 18px !important;\n          color: var(--text-sub);\n          box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light);\n          transition: all 0.2s ease;\n          flex-shrink: 0 !important;\n        }\n        \n        .guide-close:hover {\n          color: var(--text-main);\n          transform: translateY(-1px);\n          box-shadow: 5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light);\n        }\n        \n        .guide-content {\n          flex: 1;\n          overflow-y: auto;\n          padding-right: 10px;\n        }\n        \n        .guide-content::-webkit-scrollbar {\n          width: 6px;\n        }\n        \n        .guide-content::-webkit-scrollbar-track {\n          background: rgba(163, 177, 198, 0.1);\n          border-radius: 3px;\n        }\n        \n        .guide-content::-webkit-scrollbar-thumb {\n          background: rgba(163, 177, 198, 0.5);\n          border-radius: 3px;\n        }\n        \n        .guide-content::-webkit-scrollbar-thumb:hover {\n          background: rgba(163, 177, 198, 0.7);\n        }\n        \n        .guide-content h4 {\n          margin: 20px 0 10px 0;\n          color: var(--text-main);\n          font-size: 16px;\n          font-weight: 700;\n        }\n        \n        .guide-content h4:first-child {\n          margin-top: 0;\n        }\n        \n        .guide-content p {\n          margin: 0 0 15px 0;\n          color: var(--text-gray);\n          font-size: 14px;\n          line-height: 1.6;\n          white-space: pre-line;\n        }\n        \n        .guide-content ul {\n          margin: 0 0 15px 0;\n          padding-left: 25px;\n          color: var(--text-gray);\n          font-size: 14px;\n          line-height: 1.6;\n        }\n        \n        .guide-content li {\n          margin-bottom: 8px;\n        }\n        \n        .guide-content strong {\n          color: var(--text-main);\n          font-weight: 600;\n        }\n        \n        /*  -  */\n        .guide-card.dark-mode,\n        .guide-card.neomorphic-dark-mode {\n          background: var(--bg-color);\n          box-shadow: 20px 20px 60px var(--shadow-dark), -20px -20px 60px var(--shadow-light);\n        }\n        \n        .guide-card.dark-mode .guide-header,\n        .guide-card.neomorphic-dark-mode .guide-header {\n          border-bottom: 2px solid rgba(163, 177, 198, 0.1);\n        }\n      "})]}),d):null},bt=({activeHelp:e,helpContent:t,onClose:n,config:a})=>qe.jsx(gt,{activeHelp:e,helpContent:t,onClose:n,config:a}),wt=({helpId:e,onHelpClick:t,size:n=16,className:a="",variant:i="ghost"})=>{let l="";return"ghost"===i?l="text-zinc-500 hover:text-blue-400 p-1.5 rounded-full":"solid"===i?l="bg-blue-500 text-white hover:bg-blue-600 p-1.5 rounded-full":"neomorphic"===i&&(l="shadow-[4px_4px_8px_rgba(0,0,0,0.3),-4px_-4px_8px_rgba(255,255,255,0.05)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.3),inset_-2px_-2px_4px_rgba(255,255,255,0.05)] rounded-full p-1"),qe.jsx("button",{onClick:n=>{n.stopPropagation(),t(e)},className:`transition-all duration-200 flex items-center justify-center ${l} ${a}`,"aria-label":"",title:"",children:qe.jsx(s,{size:n})})},xt={shop:{title:"",icon:qe.jsx(M,{size:24,className:"text-yellow-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"////",usageMethods:"1. 2. 3. 4. 5. 6. 7. ",updateTime:"2026-01-17"},"shop-product-intro":{title:"",icon:qe.jsx(M,{size:24,className:"text-blue-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"1. 2. 3. 4. ",usageMethods:"1. 2. 3. 4. 5. 6. 7. ",updateTime:"2026-01-17"},"shop-management":{title:"",icon:qe.jsx(_,{size:24,className:"text-purple-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"1. 2. 3. 4. ",usageMethods:"1. 2. 3. 4. 5. 6. ",updateTime:"2026-01-17"},"shop-categories":{title:"",icon:qe.jsx(w,{size:24,className:"text-green-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"1. 2. 3. 4. ",usageMethods:"1. 2. 3. 4. 5. ",updateTime:"2026-01-17"},"shop-blindbox":{title:"",icon:qe.jsx(k,{size:24,className:"text-red-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"1. 2. 3. 0.5-1.54. ",usageMethods:"1. 2. 3. 4. 5. ",updateTime:"2026-01-17"},character:{title:"",icon:qe.jsx(y,{size:24,className:"text-green-500"}),productIntro:"",underlyingPrinciple:"RPG",coreRules:"",usageMethods:"1. 2. 3. 4. 5. 6. ",updateTime:"2025-12-31"},pomodoro:{title:"",icon:qe.jsx(r,{size:24,className:"text-red-500"}),productIntro:"25+5",underlyingPrinciple:"",coreRules:"255",usageMethods:'1. 2. ""3. """"4. ESC5. 6. 7. 8. ',updateTime:"2026-01-09"},fateDice:{title:"",icon:qe.jsx(v,{size:24,className:"text-blue-500"}),productIntro:"RPG/",underlyingPrinciple:"",coreRules:'1012-53-65-10"//"0',usageMethods:'1. 2. 3. 4. ""5. """"6. 7. ',updateTime:"2025-12-26"},tasks:{title:"",icon:qe.jsx(w,{size:24,className:"text-green-500"}),productIntro:"",underlyingPrinciple:"GTDGetting Things Done",coreRules:"10",usageMethods:'1. 2. 3. 4. 5. 6. ""7. 8. 9. ',updateTime:"2026-01-09"},thinkingCenter:{title:"",icon:qe.jsx(f,{size:24,className:"text-blue-500"}),productIntro:"",underlyingPrinciple:'""',coreRules:"1. 2. 3. ",usageMethods:"1. 2. 3. 4. 5. 6. ",updateTime:"2026-01-30"},achievements:{title:"",icon:qe.jsx(o,{size:24,className:"text-yellow-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"",usageMethods:"1. 2. 3. 4. 5. 6. 7. ",updateTime:"2025-12-26"},theme:{title:"",icon:qe.jsx(x,{size:24,className:"text-purple-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"",usageMethods:'1. ""2. 3. 4. 5. ',updateTime:"2025-12-26"},sound:{title:"",icon:qe.jsx(r,{size:24,className:"text-red-500"}),productIntro:"",underlyingPrinciple:"",coreRules:'""',usageMethods:'1. ""2. 3. ""4. 5. ""6. ',updateTime:"2025-12-26"},display:{title:"",icon:qe.jsx(w,{size:24,className:"text-indigo-500"}),productIntro:"/",underlyingPrinciple:"",coreRules:"/",usageMethods:'1. ""2. 3. 4. 5. ""6. ',updateTime:"2025-12-26"},data:{title:"",icon:qe.jsx(b,{size:24,className:"text-emerald-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"JSON",usageMethods:'1. ""2. ""3. 4. ""5. 6. ""7. ',updateTime:"2025-12-26"},charts:{title:"",icon:qe.jsx(g,{size:24,className:"text-orange-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"",usageMethods:"1. 2. 3. 4. 5. 6. ",updateTime:"2025-12-26"},chartDetail:{title:"",icon:qe.jsx(g,{size:24,className:"text-blue-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"",usageMethods:"1. 2. 3. 4. 5. 6. ",updateTime:"2026-01-01"},settings:{title:"",icon:qe.jsx(m,{size:24,className:"text-gray-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"",usageMethods:'1. 2. 3. 4. 5. ""6. 7. ',updateTime:"2025-12-26"},checkin:{title:"",icon:qe.jsx(p,{size:24,className:"text-blue-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"",usageMethods:'1. ""2. 3. 4. 5. 6. ',updateTime:"2026-01-08"},mantra:{title:"",icon:qe.jsx(f,{size:24,className:"text-purple-500"}),productIntro:"",underlyingPrinciple:"NLP",coreRules:"",usageMethods:'1. 2. ""3. ""4. ""5. 6. ',updateTime:"2026-01-08"},military:{title:"",icon:qe.jsx(h,{size:24,className:"text-red-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"",usageMethods:"1. 2. 3. 4. 5. 6. ",updateTime:"2026-01-08"},focusTime:{title:"",icon:qe.jsx(r,{size:24,className:"text-green-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"",usageMethods:'1. 2. ""3. 4. 5. 6. ',updateTime:"2026-01-08"},"system-stability":{title:"",icon:qe.jsx(d,{size:24,className:"text-emerald-500"}),productIntro:" = 100% - ",underlyingPrinciple:'""',coreRules:"",usageMethods:'1. 2. 3. 80%4. ": "',updateTime:"2026-01-12"},"badge-reward-rules":{title:"",icon:qe.jsx(u,{size:24,className:"text-yellow-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"1. 10%2. 10%3. 10%4. 10%",usageMethods:"1. 2. 3. 4. ",updateTime:"2026-01-12"},"bg-music":{title:"",icon:qe.jsx(c,{size:24,className:"text-blue-500"}),productIntro:"",underlyingPrinciple:"",coreRules:"",usageMethods:"1. 2. 3. 4. /5. /6. /7. 8. ",updateTime:"2026-01-20"},"mission-control":{title:"",icon:qe.jsx(o,{size:24,className:"text-red-500"}),productIntro:"",underlyingPrinciple:" OODA ---",coreRules:"1. 2. 3. 4. ",usageMethods:"1. 2. 3. 4. 5. ",updateTime:"2026-01-12"},"time-box":{title:"",icon:qe.jsx(r,{size:24,className:"text-blue-500"}),productIntro:"Elon Musk",underlyingPrinciple:"Elon Musk",coreRules:'80%"2"',usageMethods:'1. 2. ""3. 4. 5. ',detailedContent:'\n      <div class="space-y-6">\n        <div>\n          <h4 class="text-lg font-medium mb-3"></h4>\n          <ul class="space-y-3">\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span></span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span>""""""</span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span>""""5""</span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span></span>\n            </li>\n          </ul>\n        </div>\n        \n        <div>\n          <h4 class="text-lg font-medium mb-3"></h4>\n          <ul class="space-y-3">\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span>182165""</span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span>80%</span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span>""</span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span>""</span>\n            </li>\n          </ul>\n        </div>\n        \n        <div>\n          <h4 class="text-lg font-medium mb-3"></h4>\n          <div class="space-y-4">\n            <div>\n              <h5 class="font-medium mb-2">1. </h5>\n              <ul class="space-y-2 pl-4">\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>"2"</span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>""</span>\n                </li>\n              </ul>\n            </div>\n            <div>\n              <h5 class="font-medium mb-2">2. </h5>\n              <ul class="space-y-2 pl-4">\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>15-605</span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>10%-20%150</span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>10:00-11:3014:00-15:00</span>\n                </li>\n              </ul>\n            </div>\n            <div>\n              <h5 class="font-medium mb-2">3. </h5>\n              <ul class="space-y-2 pl-4">\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>""5</span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n              </ul>\n            </div>\n            <div>\n              <h5 class="font-medium mb-2">4. </h5>\n              <ul class="space-y-2 pl-4">\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>5</span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        \n        <div>\n          <h4 class="text-lg font-medium mb-3"></h4>\n          <div class="space-y-4">\n            <div>\n              <h5 class="font-medium mb-2"></h5>\n              <ul class="space-y-2 pl-4">\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>3</span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>2-35-10</span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>""""</span>\n                </li>\n              </ul>\n            </div>\n            <div>\n              <h5 class="font-medium mb-2"></h5>\n              <ul class="space-y-2 pl-4">\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>Outlook</span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>ForestToDo+</span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>NotionExcel/</span>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        \n        <div>\n          <h4 class="text-lg font-medium mb-3"></h4>\n          <ul class="space-y-3">\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span>1""</span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span>2""16:00</span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span>33/""10</span>\n            </li>\n          </ul>\n        </div>\n        \n        <div>\n          <h4 class="text-lg font-medium mb-3"></h4>\n          <ul class="space-y-3">\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span> vs 25+5</span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n            </li>\n          </ul>\n        </div>\n      </div>\n    ',updateTime:"2026-01-30"},"pomodoro-guide":{title:"",icon:qe.jsx(r,{size:24,className:"text-red-500"}),productIntro:"3D",underlyingPrinciple:"3D",coreRules:"3D25",usageMethods:'1. ""2. 3D3. 4. 5. 6. ',detailedContent:'\n      <div class="space-y-6">\n        <div>\n          <h4 class="text-lg font-medium mb-3"></h4>\n          <div class="space-y-4">\n            <div>\n              <h5 class="font-medium mb-2">3D</h5>\n              <ul class="space-y-3">\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span><strong></strong>3D</span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span><strong></strong></span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span><strong></strong>3D</span>\n                </li>\n              </ul>\n            </div>\n            <div>\n              <h5 class="font-medium mb-2"></h5>\n              <ul class="space-y-3">\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span><strong></strong></span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span><strong></strong></span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span><strong></strong></span>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        \n        <div>\n          <h4 class="text-lg font-medium mb-3"></h4>\n          <div class="space-y-4">\n            <div>\n              <h5 class="font-medium mb-2"></h5>\n              <ul class="space-y-2 pl-4">\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>25151025304560</span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>/</span>\n                </li>\n              </ul>\n            </div>\n            \n            <div>\n              <h5 class="font-medium mb-2">3D</h5>\n              <ul class="space-y-2 pl-4">\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n              </ul>\n            </div>\n            \n            <div>\n              <h5 class="font-medium mb-2"></h5>\n              <ul class="space-y-2 pl-4">\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        \n        <div>\n          <h4 class="text-lg font-medium mb-3"></h4>\n          <ul class="space-y-3">\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span>/</span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span></span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span></span>\n            </li>\n          </ul>\n        </div>\n        \n        <div>\n          <h4 class="text-lg font-medium mb-3"></h4>\n          <div class="space-y-4">\n            <div>\n              <h5 class="font-medium mb-2"></h5>\n              <ul class="space-y-2 pl-4">\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>3D</span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n              </ul>\n            </div>\n            \n            <div>\n              <h5 class="font-medium mb-2"></h5>\n              <ul class="space-y-2 pl-4">\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>25+5</span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n              </ul>\n            </div>\n            \n            <div>\n              <h5 class="font-medium mb-2"></h5>\n              <ul class="space-y-2 pl-4">\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span></span>\n                </li>\n                <li class="flex items-start">\n                  <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n                  <span>3D</span>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        \n        <div>\n          <h4 class="text-lg font-medium mb-3"></h4>\n          <ul class="space-y-3">\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span><strong>1</strong></span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span><strong>2</strong>25103D</span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span><strong>3</strong></span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span><strong>4</strong></span>\n            </li>\n          </ul>\n        </div>\n        \n        <div>\n          <h4 class="text-lg font-medium mb-3"></h4>\n          <ul class="space-y-3">\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span><strong></strong>3D</span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span><strong></strong></span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span><strong></strong></span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span><strong></strong></span>\n            </li>\n            <li class="flex items-start">\n              <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mt-2 mr-2 flex-shrink-0"></span>\n              <span><strong></strong></span>\n            </li>\n          </ul>\n        </div>\n      </div>\n    ',updateTime:"2026-01-30"}},vt=({currentView:t,setView:n,isMobileOpen:a,setIsMobileOpen:i,entropy:l,isNavCollapsed:s,setIsNavCollapsed:r,onHelpClick:o,isModalOpen:c=!1})=>{const{theme:u,setTheme:h}=st(),[f,p]=e.useState(!1),[g,b]=e.useState([{id:ut.RPG_MISSION_CENTER,label:"",icon:S},{id:ut.HALL_OF_FAME,label:"",icon:T},{id:ut.BLACK_MARKET,label:"",icon:M},{id:ut.THINKING_CENTER,label:"",icon:C},{id:ut.HIGHEST_VERSION,label:"",icon:D},{id:ut.SETTINGS,label:"",icon:m}]),[w,x]=e.useState(null),[v,y]=e.useState(s?48:224);e.useEffect(()=>{y(s?48:224)},[s]);const[k,_]=e.useState(0),[A,P]=e.useState(0),O=e.useRef(null);e.useRef(null);const j=(e,t)=>{null==t||t.stopPropagation(),n(e)};e.useEffect(()=>{const e=()=>{"undefined"!=typeof window&&y(s?48:224)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[s]);const L=u.includes("dark"),B=u.startsWith("neomorphic"),F=B?("neomorphic-dark"===u?"bg-[#1e1e2e] border-[#2a2a3e] shadow-[10px_10px_20px_rgba(0,0,0,0.4)]":"bg-[#e0e5ec] border-[#a3b1c6] shadow-[10px_10px_20px_rgba(163,177,198,0.6)]")+" rounded-r-[48px] transition-all duration-300 overflow-hidden":L?"bg-zinc-900 border-zinc-800 shadow-xl":"bg-white border-slate-200 shadow-xl",U=L?"text-zinc-400":B?"text-zinc-700":"text-slate-500",H=B?("neomorphic-dark"===u?"bg-[#1e1e2e] text-zinc-300 border-transparent shadow-[inset_8px_8px_16px_rgba(0,0,0,0.4),inset_-8px_-8px_16px_rgba(30,30,46,0.8)]":"bg-[#e0e5ec] text-zinc-700 border-transparent shadow-[inset_8px_8px_16px_rgba(163,177,198,0.6),inset_-8px_-8px_16px_rgba(255,255,255,1)]")+" transform scale-98 transition-all duration-150 rounded-full":L?"bg-emerald-900/20 text-emerald-400 border-transparent rounded-full":"bg-blue-50 text-blue-600 border-transparent rounded-full",V=B?("neomorphic-dark"===u?"hover:text-zinc-300 hover:bg-[#1e1e2e] hover:shadow-[12px_12px_24px_rgba(0,0,0,0.5),-12px_-12px_24px_rgba(30,30,46,1)]":"hover:text-zinc-800 hover:bg-[#e0e5ec] hover:shadow-[12px_12px_24px_rgba(163,177,198,0.7),-12px_-12px_24px_rgba(255,255,255,1)]")+" transition-all duration-200 transform scale-102 rounded-full":L?"hover:text-zinc-100 hover:bg-zinc-900 rounded-full":"hover:text-slate-900 hover:bg-slate-50 rounded-full",W=l>80?"text-red-500":l>50?"text-orange-500":"text-emerald-500";return qe.jsxs(qe.Fragment,{children:[qe.jsx("button",{onClick:()=>{f?(p(!1),r(!1),y(224)):s?p(!0):(r(!0),y(48))},className:`\n              fixed left-0 top-1/2 transform -translate-y-1/2 p-3 rounded-r-full transition-all duration-300 flex items-center justify-center z-50\n              md:absolute md:left-0 md:right-auto md:transform-none md:translate-y-0\n              ${B?"bg-transparent text-zinc-700 hover:bg-transparent hover:shadow-none":L?"text-zinc-500 hover:text-white hover:bg-transparent":"text-slate-500 hover:text-slate-700 hover:bg-transparent"}\n              hover:scale-[1.1] active:scale-[0.95]\n            `,title:f?"":s?"":"",children:qe.jsx("div",{className:"transition-transform duration-300 ease-in-out",children:f?qe.jsx($,{size:20}):qe.jsx(N,{size:20})})}),!c&&qe.jsxs("div",{ref:O,className:`\n            inset-y-0 left-0 transform transition-all duration-300 ease-in-out\n            flex flex-col z-40 ${F}\n            fixed md:relative\n            ${f?"hidden":""}\n            shadow-2xl\n            md:shadow-none\n          `,style:{width:`${v}px`,transition:"width 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onTouchStart:e=>{const t=e.targetTouches[0].clientX;_(t)},onTouchMove:e=>{const t=e.targetTouches[0].clientX;P(t)},onTouchEnd:()=>{const e=A-k;Math.abs(e)>=30&&(e>0?f?(p(!1),r(!1),y(224)):s&&(r(!1),y(224)):s?f||p(!0):(r(!0),y(48))),_(0),P(0)},children:[qe.jsx("div",{className:`px-4 py-6 ${B?"neomorphic-dark"===u?"bg-[#1e1e2e]":"bg-[#e0e5ec]":""} flex items-center justify-between ${s?"hidden":"md:flex"}`,children:qe.jsx("h1",{className:"text-xl font-bold tracking-tighter "+(L?"text-emerald-500":"text-blue-600"),children:""})}),qe.jsx("nav",{className:"flex-1 py-6 space-y-2 overflow-y-auto",children:g.map((e,n)=>qe.jsxs("div",{draggable:!0,onDragStart:()=>(e=>{x(e)})(n),onDragOver:e=>((e,t)=>{if(e.preventDefault(),null===w||w===t)return;const n=[...g],a=n.splice(w,1)[0];n.splice(t,0,a),b(n),x(t)})(e,n),className:"group relative",children:[!s&&qe.jsx("div",{className:"absolute left-1 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 cursor-grab text-zinc-600",children:qe.jsx(E,{size:12})}),qe.jsxs("button",{onClick:t=>j(e.id,t),onTouchEnd:t=>j(e.id,t),className:`\n                      flex items-center rounded-full transition-all duration-300 border border-transparent\n                      ${s?"w-10 h-10 justify-center mx-auto my-1":"w-full space-x-3 px-4 py-3 pl-8"}\n                      ${t===e.id?H:`${U} ${V}`}\n                      transform hover:scale-[1.03] active:scale-[0.98]\n                  `,title:e.label,children:[qe.jsx(e.icon,{size:s?18:20}),!s&&qe.jsx("span",{className:"font-medium text-sm",children:e.label})]})]},e.id))}),!s&&qe.jsxs("div",{className:`px-4 py-4 ${B?"neomorphic-dark"===u?"bg-[#1e1e2e]":"bg-[#e0e5ec]":L?"bg-zinc-900":"bg-white"} transition-all duration-300`,children:[qe.jsxs("div",{className:"flex items-center justify-between mb-2",children:[qe.jsxs("div",{className:"flex items-center gap-1",children:[qe.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest flex items-center gap-1 ${W}`,children:[qe.jsx(d,{size:12})," "]}),qe.jsx(wt,{helpId:"system-stability",onHelpClick:o,size:10})]}),qe.jsxs("span",{className:`text-xs font-mono font-bold ${W}`,children:[100-l,"%"]})]}),qe.jsx("div",{className:"w-full h-1.5 rounded-full overflow-hidden flex "+(B?"neomorphic-dark"===u?"bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]":"bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]":L?"bg-zinc-800":"bg-slate-200"),children:qe.jsx("div",{className:"h-full transition-all duration-1000 "+(l>50?"bg-red-500 animate-pulse":"bg-emerald-500"),style:{width:100-l+"%"}})}),l>50&&qe.jsxs("div",{className:"flex items-center gap-1 mt-2 text-[10px] text-red-500 animate-pulse font-mono",children:[qe.jsx(R,{size:10})," : "]})]}),qe.jsxs("div",{className:`${s?"px-3 py-3":"px-4 py-6"} border-t ${L?"border-zinc-800":"border-slate-100"} flex ${s?"justify-center":"justify-between"} items-center`,children:[qe.jsxs("button",{onClick:()=>{h(e=>"neomorphic-light"===e?"neomorphic-dark":"neomorphic-light")},className:"flex items-center gap-2 text-xs font-bold px-3 py-1.5 rounded-full transition-all duration-300 \n                      "+("neomorphic-light"===u?"bg-[#e0e5ec] text-zinc-700 shadow-[inset_-3px_-3px_6px_rgba(255,255,255,0.7),inset_3px_3px_6px_rgba(0,0,0,0.1)]":"bg-[#1e1e2e] text-zinc-300 shadow-[inset_-3px_-3px_6px_rgba(30,30,46,0.7),inset_3px_3px_6px_rgba(0,0,0,0.3)]"),title:"",children:[u.includes("dark")&&qe.jsx(z,{size:12}),u.includes("light")&&qe.jsx(I,{size:12}),u.startsWith("neomorphic")&&qe.jsx(d,{size:12}),!s&&qe.jsx("span",{children:"neomorphic-light"===u?"":""})]}),!s&&qe.jsxs("div",{className:"text-[10px] font-mono "+(L?"text-zinc-600":"text-slate-400"),children:["V ",mt]})]})]})]})},yt=({size:e="medium",message:t,fullscreen:n=!1})=>{const{theme:a}=st(),i=a.includes("dark"),l=a.startsWith("neomorphic"),s={small:24,medium:32,large:48}[e],r=n?`fixed inset-0 ${l?"neomorphic-dark"===a?"bg-[#1e1e2e]/80":"bg-[#e0e5ec]/80":i?"bg-black/50":"bg-white/50"} backdrop-blur-sm flex items-center justify-center z-50`:"flex items-center justify-center p-4",o=l?"neomorphic-dark"===a?"text-blue-400":"text-blue-600":i?"text-emerald-500":"text-blue-600";return qe.jsx("div",{className:r,children:qe.jsxs("div",{className:"flex flex-col items-center gap-3",children:[qe.jsx(A,{size:s,className:`animate-spin ${o}`}),t&&qe.jsx("p",{className:"text-sm "+(i?"text-zinc-300":"text-zinc-600"),children:t})]})})},kt=class e extends n.Component{constructor(e){super(e),this.resetError=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})},this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null,errorId:`err_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}componentDidCatch(e,t){const n=this.state.errorId||`err_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(this.setState({error:e,errorInfo:t,errorId:n}),!1!==this.props.logError){const a=this.collectPerformanceMetrics();console.group(`%cErrorBoundary Error ID: ${n}`,"color: #ff0000; font-weight: bold"),console.error("ErrorBoundary caught an error:",e),console.error("Error Type:",e.constructor.name),console.error("Component stack:",t.componentStack),console.info("Error occurred at:",(new Date).toISOString()),console.info("Page URL:","undefined"!=typeof window?window.location.href:"unknown"),console.info("User Agent:","undefined"!=typeof navigator?navigator.userAgent:"unknown"),console.info("Performance Metrics:",a),console.groupEnd(),console.warn(` Error Summary - ID: ${n}, Type: ${e.constructor.name}, Time: ${(new Date).toLocaleTimeString()}`)}this.props.onError&&this.props.onError(e,t),this.props.logToService&&this.props.logToService(e,t,n),this.updateErrorStats(e,t,n)}collectPerformanceMetrics(){let t=0;return"undefined"!=typeof performance&&performance.memory&&(t=performance.memory.usedJSHeapSize),{renderTime:performance.now(),memoryUsage:t,errorCount:e.errorStatsMap.size,errorRate:e.errorStatsMap.size/(performance.timeOrigin||Date.now())*1e5}}updateErrorStats(t,n,a){const i=t.message.substring(0,100),l=new Date;if(e.errorStatsMap.has(i)){const t=e.errorStatsMap.get(i);e.errorStatsMap.set(i,{count:t.count+1,firstOccurrence:t.firstOccurrence,lastOccurrence:l,componentStack:t.componentStack,errorType:t.errorType,url:t.url,userAgent:t.userAgent,timestamp:t.timestamp})}else{const a={count:1,firstOccurrence:l,lastOccurrence:l,componentStack:n.componentStack||"",errorType:t.constructor.name,url:"undefined"!=typeof window?window.location.href:"",userAgent:"undefined"!=typeof navigator?navigator.userAgent:"",timestamp:Date.now()};e.errorStatsMap.set(i,a)}}static getErrorStats(){return e.errorStatsMap}static resetErrorStats(){e.errorStatsMap.clear()}static getPerformanceMetrics(){let t=0;return"undefined"!=typeof performance&&performance.memory&&(t=performance.memory.usedJSHeapSize),{renderTime:performance.now(),memoryUsage:t,errorCount:e.errorStatsMap.size,errorRate:e.errorStatsMap.size>0&&"undefined"!=typeof performance?e.errorStatsMap.size/((performance.timeOrigin?performance.now():Date.now())/1e3):0}}static generateErrorReport(){const t=e.getErrorStats(),n=e.getPerformanceMetrics();let a="===  ===\n";return a+=`: ${(new Date).toISOString()}\n`,a+=`: ${t.size}\n`,a+=`: ${JSON.stringify(n,null,2)}\n\n`,a+=":\n",t.forEach((e,t)=>{a+=`- : ${t.substring(0,50)}...\n`,a+=`  : ${e.count}\n`,a+=`  : ${e.firstOccurrence.toISOString()}\n`,a+=`  : ${e.lastOccurrence.toISOString()}\n`,a+=`  : ${e.errorType}\n`,a+=`  URL: ${e.url}\n\n`}),a}static logErrorReport(){console.groupCollapsed("%c Error Report","color: #0066cc; font-weight: bold"),console.log(e.generateErrorReport()),console.groupEnd()}render(){var e;if(this.state.hasError){if(this.props.fallback){const e=this.props.fallback;return qe.jsx(e,{error:this.state.error,errorInfo:this.state.errorInfo,resetError:this.resetError})}return qe.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center bg-red-50 border border-red-200 rounded-lg",children:[qe.jsx("h2",{className:"text-xl font-bold text-red-700 mb-2",children:""}),qe.jsx("p",{className:"text-red-600 mb-4",children:(null==(e=this.state.error)?void 0:e.message)||""}),qe.jsxs("div",{className:"text-xs text-red-500 mb-4",children:["ID: ",this.state.errorId]}),qe.jsx("button",{onClick:this.resetError,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:""}),!1]})}return this.props.children}};kt.errorStatsMap=new Map;let _t=kt;const Mt=({error:e,errorInfo:t,resetError:n})=>qe.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center bg-gradient-to-br from-red-50 to-orange-50 border border-red-200 rounded-xl shadow-lg max-w-md mx-auto my-8",children:[qe.jsx("div",{className:"bg-red-100 p-4 rounded-full mb-4",children:qe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:qe.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),qe.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:""}),qe.jsx("p",{className:"text-gray-600 mb-6",children:(null==e?void 0:e.message)||""}),qe.jsxs("div",{className:"flex gap-3",children:[qe.jsx("button",{onClick:n,className:"px-6 py-3 bg-gradient-to-r from-red-500 to-orange-500 text-white font-medium rounded-lg hover:opacity-90 transition-opacity shadow-md",children:""}),qe.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity shadow-md",children:""})]}),!1]}),St=({theme:t,xp:n,totalHours:a,balance:i,levelInfo:l,focusInfo:s,wealthInfo:r,onLevelChange:o,onHelpClick:c,onBadgeCategoryClick:u})=>{const d="dark"===t||"neomorphic-dark"===t,h=t.startsWith("neomorphic"),f=d?"text-zinc-100":h?"text-zinc-700":"text-slate-800",[p,m]=e.useState(null),[g,b]=e.useState(0),w=()=>{if(p&&o){const e=Math.max(1,Math.min(99,g));o(e,p.type)}m(null)},x=()=>{m(null)},v=(e,n,a,i)=>(null==p?void 0:p.type)===e?qe.jsx("div",{className:"flex items-center gap-2 truncate max-w-[120px]",children:qe.jsxs("div",{className:`flex items-center gap-1 ${h?"bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)]":d?"bg-zinc-800/80 backdrop-blur-sm":"bg-white/80 backdrop-blur-sm"} rounded-lg p-1.5 border ${h?"border-[#a3b1c6]":d?"border-zinc-700":"border-slate-300"}`,children:[qe.jsx("input",{type:"number",value:g,onChange:e=>b(parseInt(e.target.value)||0),onKeyDown:e=>{"Enter"===e.key&&w(),"Escape"===e.key&&x()},className:"w-20 px-2 py-1 text-xs rounded-md "+(d?"bg-zinc-900 text-white focus:ring-blue-500":h?"bg-[#e0e5ec] text-zinc-700 shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] focus:ring-blue-500":"bg-white text-slate-800 focus:ring-blue-500"),autoFocus:!0,min:"1",max:"99"}),qe.jsxs("div",{className:"flex gap-1",children:[qe.jsx("button",{onClick:w,className:"p-1 rounded-md transition-all duration-200 "+(d?"hover:bg-zinc-700 text-green-400 hover:shadow-lg":h?"bg-[#e0e5ec] shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] hover:shadow-[2px_2px_4px_rgba(163,177,198,0.5),-2px_-2px_4px_rgba(255,255,255,1)] text-green-600 active:shadow-[inset_3px_3px_6px_rgba(163,177,198,0.6),inset_-3px_-3px_6px_rgba(255,255,255,1)]":"hover:bg-green-100 text-green-600 hover:shadow-lg"),title:"",children:qe.jsx(O,{size:14})}),qe.jsx("button",{onClick:x,className:"p-1 rounded-md transition-all duration-200 "+(d?"hover:bg-zinc-700 text-red-400 hover:shadow-lg":h?"bg-[#e0e5ec] shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] hover:shadow-[2px_2px_4px_rgba(163,177,198,0.5),-2px_-2px_4px_rgba(255,255,255,1)] text-red-600 active:shadow-[inset_3px_3px_6px_rgba(163,177,198,0.6),inset_-3px_-3px_6px_rgba(255,255,255,1)]":"hover:bg-red-100 text-red-600 hover:shadow-lg"),title:"",children:qe.jsx(j,{size:14})})]})]})}):qe.jsxs("div",{className:`flex items-center gap-1 truncate ${f} max-w-[120px] cursor-pointer hover:opacity-80 transition-opacity`,onDoubleClick:()=>((e,t)=>{m({type:e,value:t}),b(t)})(e,n),onClick:t=>{1===t.detail&&u&&u(e.toUpperCase())},title:"",children:[qe.jsxs("span",{className:`text-[10px] font-mono truncate ${f}`,children:["LV.",n]}),qe.jsx("span",{className:`text-xs font-bold truncate ${i} ${"neomorphic-dark"===t?"text-zinc-300":h?"text-zinc-600":d?"text-zinc-400":"text-slate-600"}`,children:a})]});return qe.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[qe.jsxs("div",{className:"flex items-center justify-between",children:[qe.jsxs("div",{className:"text-xs text-zinc-500 uppercase font-bold flex items-center gap-1",children:[qe.jsx(D,{size:12})," "]}),c&&qe.jsx(wt,{helpId:"character",onHelpClick:c,size:14,className:"hover:scale-[1.1]"})]}),qe.jsxs("div",{className:"flex items-center gap-3",children:[qe.jsx("div",{className:"shrink-0",children:qe.jsxs("div",{className:"w-16 h-16 rounded-full border-2 flex items-center justify-center relative overflow-hidden shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl "+(h?"bg-[#e0e5ec] border-[#a3b1c6] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] hover:shadow-[8px_8px_16px_rgba(163,177,198,0.6),-8px_-8px_16px_rgba(255,255,255,1)]":d?"bg-zinc-800 border-zinc-700 hover:bg-zinc-750":"bg-slate-100 border-slate-200 hover:bg-slate-200"),children:[qe.jsx(P,{size:36,className:"text-yellow-500 animate-[pulse_3s_infinite]",strokeWidth:2}),qe.jsx("div",{className:"absolute inset-0 "+("neomorphic-dark"===t?"bg-gradient-to-t from-white/10 to-transparent":"bg-gradient-to-t from-black/10 to-transparent")})]})}),qe.jsxs("div",{className:"flex-1 grid grid-cols-1 gap-1.5 min-w-0",children:[qe.jsxs("div",{className:"flex items-center gap-1.5 text-xs min-w-0",children:[qe.jsx("div",{className:"w-8 font-bold text-right text-blue-500 shrink-0",children:""}),qe.jsx("div",{className:"flex-1 min-w-[20px] h-2 rounded-full overflow-hidden "+(h?"bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]":d?"bg-zinc-800 shadow-[inset_2px_2px_4px_rgba(0,0,0,0.5),inset_-2px_-2px_4px_rgba(255,255,255,0.1)]":"bg-slate-200 shadow-[inset_2px_2px_4px_rgba(163,177,198,0.3),inset_-2px_-2px_4px_rgba(255,255,255,0.8)]"),children:qe.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500 ease-out rounded-full",style:{width:`${l.progress}%`}})}),v("level",l.level,l.title,"text-blue-500")]}),qe.jsxs("div",{className:"flex items-center gap-1.5 text-xs min-w-0",children:[qe.jsx("div",{className:"w-8 font-bold text-right text-emerald-500 shrink-0",children:""}),qe.jsx("div",{className:"flex-1 min-w-[20px] h-2 rounded-full overflow-hidden "+(h?"bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]":d?"bg-zinc-800 shadow-[inset_2px_2px_4px_rgba(0,0,0,0.5),inset_-2px_-2px_4px_rgba(255,255,255,0.1)]":"bg-slate-200 shadow-[inset_2px_2px_4px_rgba(163,177,198,0.3),inset_-2px_-2px_4px_rgba(255,255,255,0.8)]"),children:qe.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-500 ease-out rounded-full",style:{width:`${s.progress}%`}})}),v("focus",s.level,s.title,"text-emerald-400")]}),qe.jsxs("div",{className:"flex items-center gap-1.5 text-xs min-w-0",children:[qe.jsx("div",{className:"w-8 font-bold text-right text-yellow-500 shrink-0",children:""}),qe.jsx("div",{className:"flex-1 min-w-[20px] h-2 rounded-full overflow-hidden "+(h?"bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]":d?"bg-zinc-800 shadow-[inset_2px_2px_4px_rgba(0,0,0,0.5),inset_-2px_-2px_4px_rgba(255,255,255,0.1)]":"bg-slate-200 shadow-[inset_2px_2px_4px_rgba(163,177,198,0.3),inset_-2px_-2px_4px_rgba(255,255,255,0.8)]"),children:qe.jsx("div",{className:"h-full bg-yellow-500 transition-all duration-500 ease-out rounded-full",style:{width:`${r.progress}%`}})}),v("wealth",r.level,r.title,"text-yellow-400")]})]})]})]})},Tt={neomorphicDark:"bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] border-none rounded-lg",neomorphicLight:"bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] border-none rounded-lg",dark:"border-zinc-800 bg-zinc-900/50 rounded",light:"border-slate-200 bg-slate-50 rounded"},Ct={neomorphicDark:"bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] border-none rounded-lg p-2",neomorphicLight:"bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] border-none rounded-lg p-2",dark:"bg-transparent border-zinc-700 rounded p-2",light:"bg-transparent border-slate-300 rounded p-2"},Dt={neomorphicDark:"bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] border-none text-blue-400 hover:shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] rounded-full transition-all duration-200",neomorphicLight:"bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] border-none text-blue-600 hover:shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] rounded-full transition-all duration-200",dark:"bg-blue-600 hover:bg-blue-500 text-white rounded-full transition-colors duration-200",light:"bg-blue-600 hover:bg-blue-500 text-white rounded-full transition-colors duration-200"},$t={neomorphicDark:"bg-[#1e1e2e] shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] border-none rounded-full hover:shadow-[1px_1px_3px_rgba(0,0,0,0.3),-1px_-1px_3px_rgba(30,30,46,0.7)] active:shadow-[inset_1px_1px_2px_rgba(0,0,0,0.3),inset_-1px_-1px_2px_rgba(30,30,46,0.7)] p-1 transition-all duration-200",neomorphicLight:"bg-[#e0e5ec] shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] border-none rounded-full hover:shadow-[1px_1px_3px_rgba(163,177,198,0.6),-1px_-1px_3px_rgba(255,255,255,1)] active:shadow-[inset_1px_1px_2px_rgba(163,177,198,0.6),inset_-1px_-1px_2px_rgba(255,255,255,1)] p-1 transition-all duration-200",dark:"hover:bg-zinc-800 p-1 rounded-full transition-colors duration-200",light:"hover:bg-slate-100 p-1 rounded-full transition-colors duration-200"},Nt="text-zinc-300",Et="text-slate-700",Rt="text-zinc-100",zt="text-slate-900",It="text-zinc-500",At="text-slate-500",Pt="text-zinc-400",Ot="text-slate-600";function jt(e,t,n){return t?"neomorphic-dark"===n?e.neomorphicDark:e.neomorphicLight:"dark"===n?e.dark:e.light}function Lt(e,t){return e?"neomorphic-dark"===t?Nt:Et:"dark"===t?Rt:zt}function Bt(e,t){return e?"neomorphic-dark"===t?It:At:"dark"===t?Pt:Ot}const Ft={primary:{neomorphicDark:"text-blue-400",neomorphicLight:"text-blue-600",dark:"bg-blue-600 hover:bg-blue-500",light:"bg-blue-600 hover:bg-blue-500"},secondary:{neomorphicDark:"text-gray-400",neomorphicLight:"text-gray-600",dark:"bg-gray-700 hover:bg-gray-600",light:"bg-gray-200 hover:bg-gray-300"},success:{neomorphicDark:"text-emerald-400",neomorphicLight:"text-emerald-600",dark:"bg-emerald-600 hover:bg-emerald-500",light:"bg-emerald-600 hover:bg-emerald-500"},danger:{neomorphicDark:"text-red-400",neomorphicLight:"text-red-500",dark:"bg-red-600 hover:bg-red-500",light:"bg-red-600 hover:bg-red-500"},warning:{neomorphicDark:"text-yellow-400",neomorphicLight:"text-yellow-600",dark:"bg-yellow-600 hover:bg-yellow-500",light:"bg-yellow-600 hover:bg-yellow-500"},purple:{neomorphicDark:"text-purple-400",neomorphicLight:"text-purple-600",dark:"bg-purple-600 hover:bg-purple-500",light:"bg-purple-600 hover:bg-purple-500"}},Ut=({variant:e="primary",size:t="medium",isNeomorphic:n,theme:a,className:i="",children:l,...s})=>{const r="small"===t?function(e,t,n="primary"){return`${jt($t,e,t)} ${e?"neomorphic-dark"===t?Ft[n].neomorphicDark:Ft[n].neomorphicLight:""}`}(n,a,e):function(e,t,n="primary"){return`${jt(Dt,e,t)} ${e?"neomorphic-dark"===t?Ft[n].neomorphicDark:Ft[n].neomorphicLight:"dark"===t?Ft[n].dark:Ft[n].light}`}(n,a,e),o=`${r} ${{small:"w-8 h-8 flex items-center justify-center text-xs",medium:"w-10 h-10 flex items-center justify-center text-sm",large:"px-4 py-2.5 text-base"}[t]} ${i}`;return qe.jsx("button",{className:o,...s,children:l})};let Ht=null;class Vt{constructor(){this.audioCategories=[],this.isInitialized=!1,this.preloadedAudios=new Map,this.isPreloading=!1}static getInstance(){return Ht||(Ht=new Vt),Ht}async initialize(){this.isInitialized||(this.audioCategories=[{id:"battle",name:"",files:await this.scanAudioFolder("/audio/battle",pt.SOUND_EFFECT)},{id:"bgm",name:"",files:await this.scanAudioFolder("/audio/bgm",pt.BACKGROUND_MUSIC)},{id:"pomodoro-bgm",name:"",files:await this.scanAudioFolder("/audio/pomodoro/bgm",pt.BACKGROUND_MUSIC)},{id:"pomodoro-sfx",name:"",files:await this.scanAudioFolder("/audio/pomodoro",pt.SOUND_EFFECT)},{id:"dice",name:"",files:await this.scanAudioFolder("/audio/dice",pt.SOUND_EFFECT)},{id:"notification",name:"",files:await this.scanAudioFolder("/audio/notification",pt.SOUND_EFFECT)},{id:"completion",name:"",files:await this.scanAudioFolder("/audio/completion",pt.SOUND_EFFECT)},{id:"focus",name:"",files:await this.scanAudioFolder("/audio/focus",pt.SOUND_EFFECT)},{id:"break",name:"",files:await this.scanAudioFolder("/audio/break",pt.SOUND_EFFECT)},{id:"ambient",name:"",files:await this.scanAudioFolder("/audio/ambient",pt.BACKGROUND_MUSIC)}],this.isInitialized=!0)}async scanAudioFolder(e,t){try{return"/audio/pomodoro/bgm"===e?[...new Set(["26.5.mp3",".mp3",".mp3",".mp3",".mp3",".mp3","A.mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3",".mp3"])].map(n=>({id:`${e.replace("/","_").replace("-","_")}_${n.replace(/\.[^/.]+$/,"")}`,name:n.replace(/\.[^/.]+$/,""),url:this.getCorrectAudioUrl(`${e}/${n}`),type:t,icon:this.getIconForAudio(n,t)})):this.getDefaultFilesForFolder(e,t)}catch(n){return this.getDefaultFilesForFolder(e,t)}}getDefaultFilesForFolder(e,t){switch(e){case"/audio/bgm":return[{id:"forest",name:"",url:this.getCorrectAudioUrl("/audio/pomodoro/bgm/.mp3"),type:t,icon:""},{id:"rain",name:"",url:this.getCorrectAudioUrl("/audio/pomodoro/bgm/.mp3"),type:t,icon:""},{id:"ocean",name:"",url:this.getCorrectAudioUrl("/audio/pomodoro/bgm/.mp3"),type:t,icon:""}];case"/audio/pomodoro/bgm":return[];case"/audio/battle":return[{id:"sword_strike",name:"",url:this.getCorrectAudioUrl("/audio/battle/sword-strike.mp3"),type:t,icon:""},{id:"magic_spell",name:"",url:this.getCorrectAudioUrl("/audio/battle/magic-spell.mp3"),type:t,icon:""},{id:"arrow_shot",name:"",url:this.getCorrectAudioUrl("/audio/battle/arrow-shot.mp3"),type:t,icon:""},{id:"shield_block",name:"",url:this.getCorrectAudioUrl("/audio/battle/shield-block.mp3"),type:t,icon:""},{id:"battle_cry",name:"",url:this.getCorrectAudioUrl("/audio/battle/battle-cry.mp3"),type:t,icon:""}];case"/audio/dice":return[{id:"dice_roll",name:"",url:this.getCorrectAudioUrl("/audio/dice/dice-roll.mp3"),type:t,icon:""},{id:"dice_drop",name:"",url:this.getCorrectAudioUrl("/audio/dice/dice-drop.mp3"),type:t,icon:""}];case"/audio/notification":return[{id:"notification_ping",name:"",url:this.getCorrectAudioUrl("/audio/notification/ping.mp3"),type:t,icon:""},{id:"notification_alert",name:"",url:this.getCorrectAudioUrl("/audio/notification/alert.mp3"),type:t,icon:""}];case"/audio/completion":return[{id:"task_complete",name:"",url:this.getCorrectAudioUrl("/audio/completion/task-complete.mp3"),type:t,icon:""},{id:"achievement_unlock",name:"",url:this.getCorrectAudioUrl("/audio/completion/achievement-unlock.mp3"),type:t,icon:""}];case"/audio/focus":return[{id:"focus_start",name:"",url:this.getCorrectAudioUrl("/audio/focus/focus-start.mp3"),type:t,icon:" concentric-circles"},{id:"focus_end",name:"",url:this.getCorrectAudioUrl("/audio/focus/focus-end.mp3"),type:t,icon:" concentric-circles"}];case"/audio/break":return[{id:"break_start",name:"",url:this.getCorrectAudioUrl("/audio/break/break-start.mp3"),type:t,icon:""},{id:"break_end",name:"",url:this.getCorrectAudioUrl("/audio/break/break-end.mp3"),type:t,icon:""}];case"/audio/ambient":return[{id:"city_ambience",name:"",url:this.getCorrectAudioUrl("/audio/ambient/city.mp3"),type:t,icon:""},{id:"forest_ambience",name:"",url:this.getCorrectAudioUrl("/audio/ambient/forest.mp3"),type:t,icon:""},{id:"mountain_ambience",name:"",url:this.getCorrectAudioUrl("/audio/ambient/mountain.mp3"),type:t,icon:""},{id:"river_ambience",name:"",url:this.getCorrectAudioUrl("/audio/ambient/river.mp3"),type:t,icon:""}];default:return[{id:`${e.replace(/\//g,"_")}_default1`,name:"1",url:this.getCorrectAudioUrl(`${e}/default1.mp3`),type:t,icon:""},{id:`${e.replace(/\//g,"_")}_default2`,name:"2",url:this.getCorrectAudioUrl(`${e}/default2.mp3`),type:t,icon:""}]}}getIconForAudio(e,t){const n=e.toLowerCase();return t===pt.BACKGROUND_MUSIC?n.includes("forest")||n.includes("woods")||n.includes("trees")?"":n.includes("rain")||n.includes("storm")||n.includes("drizzle")?"":n.includes("ocean")||n.includes("sea")||n.includes("waves")?"":n.includes("night")||n.includes("cricket")||n.includes("insects")?"":n.includes("cafe")||n.includes("coffee")?"":n.includes("fire")||n.includes("fireplace")?"":n.includes("white")&&n.includes("noise")?"":n.includes("pink")&&n.includes("noise")?"":n.includes("brown")&&n.includes("noise")?"":n.includes("alpha")?"":n.includes("theta")?"":n.includes("beta")?"":"":n.includes("dice")||n.includes("roll")?"":n.includes("complete")||n.includes("done")?"":n.includes("give")||n.includes("up")?"":n.includes("purchase")||n.includes("buy")?"":n.includes("notification")||n.includes("alert")?"":n.includes("focus")||n.includes("concentrate")?"":n.includes("break")||n.includes("rest")?"":""}getCategories(){return this.isInitialized?this.audioCategories:[]}getCategoryById(e){if(this.isInitialized)return this.audioCategories.find(t=>t.id===e)}getBackgroundMusic(){if(!this.isInitialized)return[];const e=this.audioCategories.find(e=>"bgm"===e.id),t=this.audioCategories.find(e=>"pomodoro-bgm"===e.id),n=[...(null==e?void 0:e.files)||[],...(null==t?void 0:t.files)||[]],a=new Map;return n.forEach(e=>{a.has(e.name)||a.set(e.name,e)}),Array.from(a.values())}getSoundEffects(){return this.isInitialized?this.audioCategories.flatMap(e=>e.files.filter(e=>e.type===pt.SOUND_EFFECT)):[]}getCorrectAudioUrl(e){return e.startsWith("http://")||e.startsWith("https://")?e:`/Life-Game-Management-System${e.startsWith("/")?e:`/${e}`}`}async playAudio(e,t=1){if(!e)return null;try{const n=this.getCorrectAudioUrl(e);if(this.preloadedAudios.has(n)){const e=this.preloadedAudios.get(n);return e.currentTime=0,e.volume=t,await e.play(),e}const a=new Audio(n);return a.volume=t,await a.play(),this.preloadedAudios.set(n,a),a.onended=()=>{},a}catch(n){return null}}async preloadAudio(e){try{const t=this.getCorrectAudioUrl(e);if(this.preloadedAudios.has(t))return!0;const n=new Audio;return n.src=t,await new Promise((e,t)=>{n.onloadedmetadata=()=>e(),n.onerror=()=>t(new Error("Failed to preload audio")),n.load()}),this.preloadedAudios.set(t,n),!0}catch(t){return!1}}async preloadCategory(e){if(this.isInitialized&&!this.isPreloading){this.isPreloading=!0;try{const t=this.audioCategories.find(t=>t.id===e);if(t){const e=t.files.map(e=>this.preloadAudio(e.url));await Promise.all(e)}}catch(t){}finally{this.isPreloading=!1}}}stopAllAudio(){this.preloadedAudios.forEach(e=>{e.pause(),e.currentTime=0})}getAudioStatistics(){if(!this.isInitialized)return{totalCategories:0,totalFiles:0,preloadedCount:0};const e=this.audioCategories.reduce((e,t)=>e+t.files.length,0);return{totalCategories:this.audioCategories.length,totalFiles:e,preloadedCount:this.preloadedAudios.size}}}const Wt=Vt.getInstance(),Gt=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"})),Jt=new class{constructor(){this.storageKey="audioPlayStatistics",this.playRecords=new Map,this.loadFromStorage()}loadFromStorage(){try{const e=localStorage.getItem(this.storageKey);e&&JSON.parse(e).forEach(e=>{this.playRecords.set(e.id,{id:e.id,playCount:e.playCount,totalPlayTime:e.totalPlayTime||0,lastPlayed:new Date(e.lastPlayed),lastStartedPlaying:e.lastStartedPlaying?new Date(e.lastStartedPlaying):null,isFavorite:e.isFavorite||!1})})}catch(e){console.error("Error loading audio statistics from storage:",e)}}saveToStorage(){try{const e=Array.from(this.playRecords.values());localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(e){console.error("Error saving audio statistics to storage:",e)}}toggleFavorite(e){const t=this.playRecords.get(e);return t?t.isFavorite=!t.isFavorite:this.playRecords.set(e,{id:e,playCount:0,totalPlayTime:0,lastPlayed:new Date,lastStartedPlaying:null,isFavorite:!0}),this.saveToStorage(),!t||t.isFavorite}isFavorite(e){const t=this.playRecords.get(e);return!!t&&t.isFavorite}getFavoriteAudioIds(){const e=new Set;return this.playRecords.forEach(t=>{t.isFavorite&&e.add(t.id)}),e}startTrackingPlayTime(e){const t=new Date,n=this.playRecords.get(e);n?n.lastStartedPlaying=t:this.playRecords.set(e,{id:e,playCount:0,totalPlayTime:0,lastPlayed:t,lastStartedPlaying:t,isFavorite:!1}),this.saveToStorage()}stopTrackingPlayTime(e){const t=new Date,n=this.playRecords.get(e);if(n&&n.lastStartedPlaying){const e=(t.getTime()-n.lastStartedPlaying.getTime())/1e3;n.totalPlayTime+=Math.round(e),n.lastPlayed=t,n.lastStartedPlaying=null,this.saveToStorage()}}recordPlay(e){const t=new Date,n=this.playRecords.get(e);n?(n.playCount+=1,n.lastPlayed=t):this.playRecords.set(e,{id:e,playCount:1,totalPlayTime:0,lastPlayed:t,lastStartedPlaying:null,isFavorite:!1}),this.saveToStorage()}getPlayCount(e){const t=this.playRecords.get(e);return t?t.playCount:0}getTotalPlayTime(e){const t=this.playRecords.get(e);return t?t.totalPlayTime:0}getSortedAudioFiles(e){return[...e].sort((e,t)=>{const n=this.isFavorite(e.id);if(n!==this.isFavorite(t.id))return n?-1:1;const a=this.getPlayCount(e.id),i=this.getPlayCount(t.id);if(i!==a)return i-a;const l=this.getLastPlayed(e.id),s=this.getLastPlayed(t.id);return l&&s?s.getTime()-l.getTime():e.name.localeCompare(t.name)})}getLastPlayed(e){const t=this.playRecords.get(e);return t?t.lastPlayed:null}getTopPlayedAudio(e=10){return Array.from(this.playRecords.values()).sort((e,t)=>t.playCount!==e.playCount?t.playCount-e.playCount:t.totalPlayTime-e.totalPlayTime).slice(0,e)}resetStatistics(){this.playRecords.clear(),this.saveToStorage()}getAllStatistics(){return Array.from(this.playRecords.values())}restoreStatistics(e){this.playRecords.clear(),e.forEach(e=>{this.playRecords.set(e.id,{...e,lastPlayed:new Date(e.lastPlayed),lastStartedPlaying:e.lastStartedPlaying?new Date(e.lastStartedPlaying):null})}),this.saveToStorage()}exportStatistics(){const e=this.getAllStatistics();return JSON.stringify(e,null,2)}importStatistics(e){try{const t=JSON.parse(e);return!!Array.isArray(t)&&(this.restoreStatistics(t),!0)}catch(t){return console.error("Error importing audio statistics:",t),!1}}},Kt=new class{constructor(){this.sounds={},this.backgroundMusic={},this.currentBackgroundMusicId=null,this.isMuted=!1,this.masterVolume=.5,this.bgmVolume=.3,this.selectedMusicIds=new Set,this.lockedMusicIds=new Set,this.currentPlayRequestId=null,this.visibilityChangeHandler=null,this.initSounds(),this.initBackgroundMusic(),this.setupVisibilityListener(),this.initializeAudioManager()}async initializeAudioManager(){try{const e=await ct(()=>Promise.resolve().then(()=>Gt),void 0,import.meta.url).then(e=>e.default);await e.initialize(),console.log("")}catch(e){}}getCorrectAudioUrl(e){return e.startsWith("http://")||e.startsWith("https://")?e:`/Life-Game-Management-System${e.startsWith("/")?e:`/${e}`}`}initSounds(){[{id:"dice",url:"/audio/sfx/.mp3",volume:.7},{id:"taskComplete",url:"/audio/sfx/.mp3",volume:.5},{id:"mainTaskComplete",url:"/audio/sfx/.mp3",volume:.5},{id:"taskGiveUp",url:"/audio/sfx/bubblepop-254773.mp3",volume:.5},{id:"purchase",url:"/audio/sfx/.mp3",volume:.5},{id:"notification",url:"/audio/sfx/level-up-191997.mp3",volume:.5},{id:"achievement",url:"/audio/sfx/.mp3",volume:.5},{id:"timer",url:"/audio/sfx/servant-bell-ring-2-211683.mp3",volume:.5},{id:"checkin",url:"/audio/sfx/.mp3",volume:.5},{id:"coin",url:"/audio/sfx/.mp3",volume:.5},{id:"-ding-36029",url:"/audio/sfx/-ding-36029.mp3",volume:.5},{id:"-ding-sfx-330333",url:"/audio/sfx/-ding-sfx-330333.mp3",volume:.5},{id:"-ding-small-bell-sfx-233008",url:"/audio/sfx/-ding-small-bell-sfx-233008.mp3",volume:.5},{id:"-doorbell-329311",url:"/audio/sfx/-doorbell-329311.mp3",volume:.5},{id:"-hotel-bell-ding-1-174457",url:"/audio/sfx/-hotel-bell-ding-1-174457.mp3",volume:.5},{id:"3",url:"/audio/sfx/3.mp3",volume:.5},{id:"",url:"/audio/sfx/.mp3",volume:.5},{id:"3",url:"/audio/sfx/3.mp3",volume:.5},{id:"2",url:"/audio/sfx/2.mp3",volume:.5},{id:"dice-fallback",url:"/audio/sfx/.mp3",volume:.7},{id:"taskComplete-fallback",url:"/audio/sfx/.mp3",volume:.5},{id:"mainTaskComplete-fallback",url:"/audio/sfx/.mp3",volume:.5},{id:"taskGiveUp-fallback",url:"/audio/sfx/bubblepop-254773.mp3",volume:.5},{id:"purchase-fallback",url:"/audio/sfx/.mp3",volume:.5},{id:"notification-fallback",url:"/audio/sfx/level-up-191997.mp3",volume:.5},{id:"achievement-fallback",url:"/audio/sfx/.mp3",volume:.5},{id:"timer-fallback",url:"/audio/sfx/servant-bell-ring-2-211683.mp3",volume:.5},{id:"checkin-fallback",url:"/audio/sfx/.mp3",volume:.5},{id:"coin-fallback",url:"/audio/sfx/.mp3",volume:.5},{id:"pomodoroComplete-fallback",url:"/audio/sfx/servant-bell-ring-2-211683.mp3",volume:.5}].forEach(e=>{try{const t=this.getCorrectAudioUrl(e.url),n=new Audio(t);n.volume=e.volume??this.masterVolume,this.sounds[e.id]=n}catch(t){}})}initBackgroundMusic(){[{id:"forest",url:"/audio/pomodoro/bgm/.mp3",volume:.3},{id:"rain",url:"/audio/pomodoro/bgm/.mp3",volume:.3},{id:"ocean",url:"/audio/pomodoro/bgm/.mp3",volume:.3},{id:"cafe",url:"/audio/pomodoro/bgm/.mp3",volume:.3},{id:"white-noise",url:"/audio/pomodoro/bgm/.mp3",volume:.3}].forEach(e=>{try{const t=this.getCorrectAudioUrl(e.url),n=new Audio(t);n.loop=!0,n.volume=e.volume??this.bgmVolume,this.backgroundMusic[e.id]=n,n.load(),n.addEventListener("error",e=>{})}catch(t){}})}setupVisibilityListener(){this.visibilityChangeHandler=()=>{},document.addEventListener("visibilitychange",this.visibilityChangeHandler)}async playSoundEffect(e){if(!this.isMuted)try{const n=this.sounds[e]||this.sounds[`${e}-fallback`];if(n){n.currentTime=0;try{await n.play()}catch(t){await this.playFallbackSound(e)}}else await this.playFallbackSound(e)}catch(t){}}async playFallbackSound(e){try{let n="";switch(e){case"taskComplete":default:n="/audio/sfx/.mp3";break;case"taskGiveUp":n="/audio/sfx/.mp3";break;case"purchase":n="/audio/sfx/.mp3";break;case"dice":n="/audio/sfx/.mp3";break;case"notification":n="/audio/sfx/.mp3";break;case"achievement":n="/audio/sfx/.mp3";break;case"timer":n="/audio/sfx/.mp3";break;case"coin":n="/audio/sfx/.mp3"}if(n){const e=new Audio(this.getCorrectAudioUrl(n));e.volume=this.masterVolume;try{await e.play()}catch(t){}}}catch(t){}}getSelectedMusicIds(){return new Set(this.selectedMusicIds)}getLockedMusicIds(){return new Set(this.lockedMusicIds)}toggleSelectedMusic(e){return this.lockedMusicIds.has(e)?(this.stopSpecificMusic(e),this.lockedMusicIds.delete(e),this.selectedMusicIds.delete(e),!1):(this.lockedMusicIds.add(e),this.selectedMusicIds.add(e),this.playBackgroundMusic(e),!0)}clearSelectedMusic(){this.selectedMusicIds.forEach(e=>{this.lockedMusicIds.has(e)||this.stopSpecificMusic(e)}),this.selectedMusicIds=new Set(this.lockedMusicIds)}stopSpecificMusic(e){const t=this.backgroundMusic[e];t&&(t.pause(),t.currentTime=0,Jt.stopTrackingPlayTime(e))}async playBackgroundMusic(e){if(!this.isMuted)try{this.selectedMusicIds.forEach(t=>{this.lockedMusicIds.has(t)||t===e||(this.stopSpecificMusic(t),Jt.stopTrackingPlayTime(t))});const n=new Set(this.lockedMusicIds);if(n.add(e),this.selectedMusicIds=n,this.currentBackgroundMusicId=e,this.currentPlayRequestId=e,Jt.recordPlay(e),Jt.startTrackingPlayTime(e),this.backgroundMusic[e])try{await this.backgroundMusic[e].play()}catch(t){await this.playBackgroundMusicFromManager(e)}else await this.playBackgroundMusicFromManager(e)}catch(t){}}async playBackgroundMusicFromManager(e){try{await Wt.initialize();const n=Wt.getBackgroundMusic();let a=n.find(t=>t.name.toLowerCase()===e.toLowerCase());if(a||(a=n.find(t=>t.id===e)),!a){const t=e.split("_"),i=t[t.length-1];a=n.find(e=>e.name.toLowerCase().includes(i.toLowerCase()))}if(a||(a=n.find(t=>t.url.toLowerCase().includes(e.toLowerCase()))),a){if(!a.url)return;const n=new Audio;n.src=a.url,n.loop=!0,n.volume=this.bgmVolume,this.backgroundMusic[e]=n;try{await n.play()}catch(t){delete this.backgroundMusic[e]}}}catch(t){}}stopBackgroundMusic(){Object.entries(this.backgroundMusic).forEach(([e,t])=>{if(t)try{t.pause(),t.currentTime=0}catch(n){}}),this.currentBackgroundMusicId=null,this.currentPlayRequestId=null,this.selectedMusicIds.clear()}toggleMute(){this.isMuted=!this.isMuted,this.isMuted&&(this.stopAllSounds(),this.lockedMusicIds.clear(),this.selectedMusicIds.clear(),this.currentBackgroundMusicId=null,this.currentPlayRequestId=null)}setMasterVolume(e){this.masterVolume=Math.max(0,Math.min(1,e)),Object.values(this.sounds).forEach(e=>{e.volume=this.masterVolume})}setBackgroundMusicVolume(e){this.bgmVolume=Math.max(0,Math.min(1,e)),Object.values(this.backgroundMusic).forEach(e=>{e.volume=this.bgmVolume})}stopAllSounds(){Object.values(this.sounds).forEach(e=>{e.pause(),e.currentTime=0}),Object.keys(this.backgroundMusic).forEach(e=>{Jt.stopTrackingPlayTime(e)}),this.stopBackgroundMusic()}getCurrentBackgroundMusicId(){return this.currentBackgroundMusicId}getIsMuted(){return this.isMuted}getMasterVolume(){return this.masterVolume}getBackgroundMusicVolume(){return this.bgmVolume}destroy(){this.stopAllSounds(),this.visibilityChangeHandler&&(document.removeEventListener("visibilitychange",this.visibilityChangeHandler),this.visibilityChangeHandler=null)}async playCustomAudio(e,t,n=!1){if(this.isMuted)return null;try{const a=this.getCorrectAudioUrl(e),i=new Audio(a);return i.volume=t??this.masterVolume,i.loop=n,await i.play(),i}catch(a){return null}}async playAudioFromManager(e,t){if(this.isMuted)return null;const n=[...Wt.getBackgroundMusic(),...Wt.getSoundEffects()].find(t=>t.id===e||t.name.toLowerCase().includes(e.toLowerCase()));return n?Wt.playAudio(n.url,t??this.masterVolume):null}},qt=e.createContext(void 0),Xt=()=>{const t=e.useContext(qt);if(!t)throw new Error("useGlobalAudio must be used within a GlobalAudioProvider");return t},Yt="last-bg-music-id",Qt=({children:t})=>{const n=e.useCallback(()=>{try{return localStorage.getItem(Yt)||null}catch(e){return null}},[]),a=e.useCallback((e,t)=>{try{e&&(localStorage.setItem(Yt,e),localStorage.setItem("is-bg-music-playing",JSON.stringify(t)))}catch(n){}},[]),[i,l]=e.useState(n()),[s,r]=e.useState(!1),[o,c]=e.useState(Kt.getIsMuted()),[u,d]=e.useState(Kt.getBackgroundMusicVolume()),h=e.useRef(i),f=e.useRef(i),p=e.useRef({id:i,isPlaying:!1}),m=e.useCallback(async e=>{if("mute"===e||"off"===e)return g(),l(null),h.current=null,f.current=null,r(!1),p.current={id:null,isPlaying:!1},void a(null,!1);try{l(e),h.current=e,f.current=e,r(!0),p.current={id:e,isPlaying:!0},a(e,!0),await Kt.playBackgroundMusic(e)}catch(t){r(!1)}},[a]),g=e.useCallback(()=>{Kt.stopBackgroundMusic(),l(null),h.current=null,f.current=null,r(!1),p.current={id:null,isPlaying:!1},a(null,!1)},[a]),b=e.useCallback(()=>{f.current&&!o&&m(f.current)},[o,m,a]);e.useEffect(()=>{const e=async()=>{if(i&&!o){try{await m(i)}catch(t){}window.removeEventListener("click",e),window.removeEventListener("keydown",e),window.removeEventListener("touchstart",e)}};return i&&!o&&(window.addEventListener("click",e),window.addEventListener("keydown",e),window.addEventListener("touchstart",e)),()=>{window.removeEventListener("click",e),window.removeEventListener("keydown",e),window.removeEventListener("touchstart",e)}},[i,o,m]);const w=e.useCallback(()=>{Kt.toggleMute()},[]),x=e.useCallback(e=>{Kt.setBackgroundMusicVolume(e),d(e)},[]),v=e.useCallback(e=>Kt.toggleSelectedMusic(e),[]),y=e.useCallback(()=>Kt.getSelectedMusicIds(),[]),k=e.useCallback(()=>Kt.getLockedMusicIds(),[]),_=e.useCallback(async e=>{try{await Kt.playSoundEffect(e)}catch(t){}},[]);e.useEffect(()=>{c(Kt.getIsMuted());const e=setInterval(()=>{const e=Kt.getIsMuted();c(e)},1e3);return()=>clearInterval(e)},[]),e.useEffect(()=>{if(p.current.id&&p.current.isPlaying&&!o){const e=setTimeout(()=>{m(p.current.id)},100);return()=>clearTimeout(e)}},[o,m]),e.useEffect(()=>{const e=()=>{"visible"===document.visibilityState&&p.current.isPlaying&&p.current.id&&!o&&setTimeout(()=>{Kt.getCurrentBackgroundMusicId()||m(p.current.id)},100)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[o,m]);const M=e.useMemo(()=>({currentBgMusicId:i,isBgMusicPlaying:s,isMuted:o,playBgMusic:m,toggleSelectedMusic:v,getSelectedMusicIds:y,getLockedMusicIds:k,stopBgMusic:g,toggleMute:w,setVolume:x,resumeBgMusic:b,playSoundEffect:_}),[i,s,o,m,v,y,k,g,w,x,b,_]);return qe.jsx(qt.Provider,{value:M,children:t})},Zt=()=>{const{currentBgMusicId:t,isBgMusicPlaying:n,isMuted:a,resumeBgMusic:i}=Xt();return e.useEffect(()=>{if(t&&!a&&!n){const e=setTimeout(()=>{i()},100);return()=>clearTimeout(e)}},[t,a,n,i]),e.useEffect(()=>{const e=()=>{"visible"!==document.visibilityState||!t||a||n||setTimeout(()=>{i()},100)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[t,a,n,i]),null},en=({theme:t,isVisible:n,onClose:a,onHelpClick:i,position:l="absolute",className:s=""})=>{const{currentBgMusicId:r,playBgMusic:o,stopBgMusic:c,toggleSelectedMusic:u,getSelectedMusicIds:d,getLockedMusicIds:h}=Xt(),[f,p]=e.useState(""),[m,g]=e.useState([]),[b,w]=e.useState(!1),[x,v]=e.useState(!1),y=e.useRef(new Map),k=e.useRef(null),_=t.includes("dark"),M=t.startsWith("neomorphic"),S=[{id:"mute",name:"",url:"",icon:"",color:"text-blue-500",hex:"#3b82f6"},{id:"forest",name:"",url:"",icon:"",color:"text-blue-500",hex:"#3b82f6"},{id:"alpha",name:"",url:"",icon:"",color:"text-blue-500",hex:"#3b82f6"},{id:"theta",name:"",url:"",icon:"",color:"text-blue-500",hex:"#3b82f6"},{id:"beta",name:"",url:"",icon:"",color:"text-blue-500",hex:"#3b82f6"},{id:"ocean",name:"",url:"",icon:"",color:"text-blue-500",hex:"#3b82f6"},{id:"rain",name:"",url:"",icon:"",color:"text-blue-500",hex:"#3b82f6"},{id:"night",name:"",url:"",icon:"",color:"text-blue-500",hex:"#3b82f6"},{id:"white-noise",name:"",url:"",icon:"",color:"text-blue-500",hex:"#3b82f6"},{id:"pink-noise",name:"",url:"",icon:"",color:"text-blue-500",hex:"#3b82f6"},{id:"brown-noise",name:"",url:"",icon:"",color:"text-blue-500",hex:"#3b82f6"},{id:"cafe",name:"",url:"",icon:"",color:"text-blue-500",hex:"#3b82f6"},{id:"fireplace",name:"",url:"",icon:"",color:"text-blue-500",hex:"#3b82f6"}],T=e.useCallback(e=>{const t=e.toLowerCase();return t.includes("forest")||t.includes("woods")||t.includes("trees")?"":t.includes("rain")||t.includes("storm")||t.includes("drizzle")?"":t.includes("ocean")||t.includes("sea")||t.includes("waves")?"":t.includes("night")||t.includes("cricket")||t.includes("insects")?"":t.includes("cafe")||t.includes("coffee")?"":t.includes("fire")||t.includes("fireplace")?"":t.includes("white")&&t.includes("noise")?"":t.includes("pink")&&t.includes("noise")?"":t.includes("brown")&&t.includes("noise")?"":t.includes("alpha")?"":t.includes("beta")?"":t.includes("theta")?"":""},[]),C=e.useCallback(async()=>{try{const e=await ct(()=>Promise.resolve().then(()=>Gt),void 0,import.meta.url);await e.default.initialize();const t=e.default.getBackgroundMusic(),n=Jt.getSortedAudioFiles(t);v(!0);const a=[{id:"mute",name:"",url:"",icon:"",color:"text-blue-500",hex:"#3b82f6"},...n.filter(e=>e&&e.id&&e.url).map(e=>({id:e.name,name:e.name,url:e.url,icon:T(e.name),color:"text-blue-500",hex:"#3b82f6"}))];g(a),w(!0)}catch(e){console.error("Failed to load sound list:",e);const t=[...S.filter(e=>"mute"!==e.id),S.find(e=>"mute"===e.id)];g(t),w(!0)}},[x,T]);e.useEffect(()=>{C()},[C]),e.useEffect(()=>{n&&C()},[n,C]);const D=e.useCallback(e=>{"mute"===e?c():(o(e).catch(e=>{}),setTimeout(()=>{Jt.recordPlay(e)},0))},[o,c]),E=e.useCallback(()=>{if(m.length<=1)return;const e=m.filter(e=>e.name.toLowerCase().includes(f.toLowerCase()));if(e.length<=1)return;const t=e.findIndex(e=>e.id===r),n=t<=0?e.length-1:t-1;D(e[n].id)},[m,r,f,D]),R=e.useCallback(()=>{if(m.length<=1)return;const e=m.filter(e=>e.name.toLowerCase().includes(f.toLowerCase()));if(e.length<=1)return;const t=e.findIndex(e=>e.id===r),n=t>=e.length-1?0:t+1;D(e[n].id)},[m,r,f,D]);return e.useEffect(()=>{const e=e=>{n&&k.current&&!k.current.contains(e.target)&&a()};return n&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[n,a]),n?qe.jsxs("div",{ref:k,className:`${l} z-50 mt-2 w-64 sm:w-80 rounded-xl backdrop-blur-sm p-3 animate-in fade-in slide-in-from-top-5 ${jt(Tt,M,t)} ${s} min-w-[240px]`,children:[qe.jsx("div",{className:"mb-3",children:qe.jsxs("div",{className:"relative flex items-center justify-between",children:[qe.jsxs("div",{className:"relative flex items-center",children:[qe.jsx("div",{className:"flex-1 mr-2",children:qe.jsxs("div",{className:"relative",children:[qe.jsx(L,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${Bt(M,t)}`,size:16}),qe.jsx("input",{type:"text",placeholder:"...",value:f,onChange:e=>p(e.target.value),className:`w-full pl-10 pr-4 py-1.5 rounded-full text-sm transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50 ${jt(Ct,M,t)} ${Lt(M,t)} placeholder:${Bt(M,t)}`})]})}),qe.jsxs("div",{className:"flex items-center gap-1 px-1",children:[qe.jsx(Ut,{onClick:E,variant:"primary",size:"small",isNeomorphic:M,theme:t,className:"p-1.5",children:qe.jsx(N,{size:16})}),qe.jsx(Ut,{onClick:R,variant:"primary",size:"small",isNeomorphic:M,theme:t,className:"p-1.5",children:qe.jsx($,{size:16})})]})]}),i&&qe.jsx(wt,{helpId:"bg-music",onHelpClick:i,size:14,className:"hover:scale-[1.1]"})]})}),qe.jsx("div",{className:"flex flex-col gap-1 max-h-60 overflow-y-auto px-2",children:(b?m:S).filter(e=>e.name.toLowerCase().includes(f.toLowerCase())).map((e,n)=>{const a=d(),i=h(),l=a.has(e.id),s=i.has(e.id),r=Jt.isFavorite(e.id);return qe.jsxs("div",{onClick:()=>{let t=y.current.get(e.id);t?t.count+=1:(t={count:1,timeout:null},y.current.set(e.id,t)),t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(()=>{const n=t.count;1===n?D(e.id):2===n?u(e.id):3===n&&(Jt.toggleFavorite(e.id),C()),y.current.delete(e.id)},300)},className:`flex items-center gap-2 px-4 py-1.5 transition-all cursor-pointer justify-start rounded-full mb-1 w-full ${0===n?"mt-1":""} ${l?M?_?"bg-blue-900/40 text-blue-400 shadow-[inset_3px_3px_6px_rgba(0,0,0,0.3),inset_-3px_-3px_6px_rgba(30,30,46,0.7)]":"bg-blue-500/90 text-white shadow-[inset_3px_3px_6px_rgba(163,177,198,0.6),inset_-3px_-3px_6px_rgba(255,255,255,0.8)]":_?"bg-blue-900/40 text-blue-400 border-2 border-blue-700/50":"bg-blue-500 text-white border-2 border-blue-600":M?_?"bg-[#1e1e2e] text-blue-400 shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] hover:shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(30,30,46,0.7)] active:shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)]":"bg-[#e0e5ec] text-blue-600 shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] hover:shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] active:shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)]":_?"bg-zinc-800 text-blue-400 hover:bg-zinc-700 shadow-md hover:shadow-lg":"bg-white text-blue-600 hover:bg-slate-50 shadow-md hover:shadow-lg"}`,children:[qe.jsx("span",{className:`text-xs ${Bt(M,t)} min-w-6 text-center`,children:n+1}),qe.jsx("span",{className:"text-base",children:e.icon}),qe.jsx("span",{className:`text-xs font-medium ${Lt(M,t)} flex-1 truncate`,children:e.name}),r&&qe.jsx("span",{className:"ml-auto text-xs text-red-400 mr-1",children:""}),s&&qe.jsxs("span",{className:"ml-auto text-xs text-yellow-400 flex items-center gap-1",children:[qe.jsx("span",{children:""}),qe.jsx("span",{children:""})]}),l&&!s&&qe.jsx("span",{className:"ml-auto text-xs text-blue-400",children:""})]},e.id)})})]}):null},tn=({theme:t,timeLeft:n,isActive:a,duration:i,onToggleTimer:l,onResetTimer:s,onChangeDuration:r,onUpdateTimeLeft:o,onUpdateIsActive:u,onImmersiveModeChange:d,onInternalImmersiveModeChange:h,onHelpClick:f})=>{const{playSoundEffect:p}=Xt(),[m,g]=e.useState(new Date),[b,w]=e.useState(!1),x=e.useRef(null),v=t.includes("dark"),y=t.startsWith("neomorphic");e.useEffect(()=>{const e=setInterval(()=>{g(new Date)},1e3);return()=>clearInterval(e)},[]),e.useEffect(()=>{let e;return a&&n>0?e=window.setInterval(()=>o(n-1),1e3):0===n&&a&&(u(!1),p("taskComplete"),o(60*i),d&&d(!1)),()=>{e&&clearInterval(e)}},[a,n,i,o,u,d]);const k=n/(60*i)*100;return qe.jsxs("div",{className:"flex flex-col gap-2 w-full relative",children:[qe.jsxs("div",{className:"flex items-center justify-between",children:[qe.jsxs("div",{className:"text-xs uppercase font-bold flex items-center gap-1 "+("neomorphic-dark"===t?"text-zinc-400":y?"text-zinc-600":v?"text-zinc-500":"text-slate-500"),children:[qe.jsx(B,{size:12})," "]}),f&&qe.jsx(wt,{helpId:"pomodoro",onHelpClick:f,size:14,className:"hover:scale-[1.1]"})]}),qe.jsx(en,{theme:t,isVisible:b,onClose:()=>w(!1),onHelpClick:f,position:"absolute",className:"absolute top-full right-0 mt-2 mr-2"}),qe.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full",children:[qe.jsxs("div",{className:"text-xs text-zinc-500 flex-shrink flex-grow-0 min-w-0 sm:text-right w-full sm:w-auto",children:[qe.jsx("div",{className:"truncate "+("neomorphic-dark"===t?"text-zinc-300":y?"text-zinc-600":v?"text-zinc-400":"text-slate-600"),children:(_=m,`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}-${String(_.getDate()).padStart(2,"0")}`)}),qe.jsxs("div",{className:"truncate "+("neomorphic-dark"===t?"text-zinc-300":y?"text-zinc-600":v?"text-zinc-400":"text-slate-600"),children:[(e=>`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`)(m)," ",(e=>["","","","","","",""][e.getDay()])(m)]})]}),qe.jsx("div",{className:"flex-shrink flex-grow min-w-0 flex items-center justify-center w-full sm:w-auto",children:qe.jsxs("div",{className:"relative flex items-center justify-center p-2 rounded-full transition-all duration-300 hover:scale-105 aspect-square max-w-[90px] w-full h-full "+(y?"neomorphic-dark"===t?"bg-[#1e1e2e] shadow-[8px_8px_16px_rgba(0,0,0,0.4),-8px_-8px_16px_rgba(30,30,46,0.8)] hover:shadow-[10px_10px_20px_rgba(0,0,0,0.5),-10px_-10px_20px_rgba(30,30,46,1)]":"bg-[#e0e5ec] shadow-[8px_8px_16px_rgba(163,177,198,0.6),-8px_-8px_16px_rgba(255,255,255,1)] hover:shadow-[10px_10px_20px_rgba(163,177,198,0.6),-10px_-10px_20px_rgba(255,255,255,1)]":"hover:bg-white/5"),children:[qe.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",className:"w-full h-full max-w-[90px] max-h-[90px] object-contain",children:[qe.jsx("circle",{cx:"50",cy:"50",r:45,fill:"none",stroke:v?"#374151":y?"#d0d5dc":"#e5e7eb",strokeWidth:"4"}),qe.jsx("circle",{cx:"50",cy:"50",r:45,fill:"none",stroke:a?"#2563eb":"#6b7280",strokeWidth:"8",strokeLinecap:"round",transform:"rotate(-90 50 50)",strokeDasharray:2*Math.PI*45,strokeDashoffset:2*Math.PI*45-k/100*(2*Math.PI*45),className:"transition-all duration-100 ease-linear"})]}),qe.jsx("div",{className:"absolute flex flex-col items-center",children:qe.jsx("div",{className:`text-lg font-mono font-bold ${v?"text-white":"text-zinc-900"} tabular-nums`,children:(e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`})(n)})})]})}),qe.jsxs("div",{className:"flex flex-col items-center sm:items-end gap-1 flex-1 min-w-0 w-full sm:w-auto",children:[qe.jsxs("div",{className:"flex gap-1.5 justify-center sm:justify-end w-full sm:w-auto",children:[qe.jsx(Ut,{onClick:()=>{a||p("timer"),l()},variant:a?"danger":"warning",size:"medium",isNeomorphic:y,theme:t,className:"p-2.5 transition-all duration-300 hover:scale-105 active:scale-95",children:a?qe.jsx(F,{size:18,fill:"currentColor"}):qe.jsx(U,{size:18,fill:"currentColor"})}),qe.jsx(Ut,{onClick:()=>{h?h(!0):d&&d(!0)},variant:"primary",size:"medium",isNeomorphic:y,theme:t,className:"p-2.5 transition-all duration-300 hover:scale-105 active:scale-95",title:"",children:qe.jsx(H,{size:18,className:v?"text-zinc-300":"text-zinc-600"})}),qe.jsx(Ut,{ref:x,onClick:e=>{e.stopPropagation(),w(!b)},variant:"primary",size:"medium",isNeomorphic:y,theme:t,className:"p-2.5 transition-all duration-300 hover:scale-105 active:scale-95 "+(v?"bg-zinc-800/50 hover:bg-zinc-700/50 text-zinc-300":"bg-white/10 hover:bg-white/20 text-zinc-300"),title:"",children:qe.jsx(c,{size:18,className:v?"text-zinc-300":"text-zinc-600"})})]}),qe.jsx("div",{className:"flex gap-1 justify-center sm:justify-end flex-wrap w-full sm:w-auto",children:[25,45,60].map(e=>qe.jsx(Ut,{onClick:()=>r(e),variant:"primary",size:"small",isNeomorphic:y,theme:t,className:"w-8 h-8 flex items-center justify-center rounded-full transition-all duration-300 hover:scale-105 "+(i===e?"font-bold":""),children:qe.jsx("span",{className:v?"text-zinc-300":"text-zinc-600",children:e})},e))})]})]})]});var _},nn={type:"change"},an={type:"start"},ln={type:"end"},sn=new ue,rn=new de,on=Math.cos(70*he.DEG2RAD),cn=new ie,un=2*Math.PI,dn=-1,hn=1e-6;class fn extends ae{constructor(e,t=null){super(e,t),this.state=dn,this.target=new ie,this.cursor=new ie,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:le.ROTATE,MIDDLE:le.DOLLY,RIGHT:le.PAN},this.touches={ONE:se.ROTATE,TWO:se.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.q=null,this.Y=new ie,this.Z=new re,this.ee=new ie,this.te=(new re).setFromUnitVectors(e.up,new ie(0,1,0)),this.ne=this.te.clone().invert(),this.ae=new oe,this.ie=new oe,this.le=1,this.se=new ie,this.re=new ce,this.oe=new ce,this.ce=new ce,this.ue=new ce,this.de=new ce,this.he=new ce,this.fe=new ce,this.pe=new ce,this.me=new ce,this.ge=new ie,this.be=new ce,this.we=!1,this.xe=[],this.ve={},this.ye=!1,this.ke=mn.bind(this),this._e=pn.bind(this),this.Me=gn.bind(this),this.Se=_n.bind(this),this.Te=xn.bind(this),this.Ce=vn.bind(this),this.De=yn.bind(this),this.$e=kn.bind(this),this.Ne=bn.bind(this),this.Ee=wn.bind(this),this.Re=Mn.bind(this),this.ze=Sn.bind(this),null!==this.domElement&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._e),this.domElement.addEventListener("pointercancel",this.Me),this.domElement.addEventListener("contextmenu",this.Se),this.domElement.addEventListener("wheel",this.Te,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this.Re,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._e),this.domElement.ownerDocument.removeEventListener("pointermove",this.ke),this.domElement.ownerDocument.removeEventListener("pointerup",this.Me),this.domElement.removeEventListener("pointercancel",this.Me),this.domElement.removeEventListener("wheel",this.Te),this.domElement.removeEventListener("contextmenu",this.Se),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this.Re,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this.ae.phi}getAzimuthalAngle(){return this.ae.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this.Ce),this.q=e}stopListenToKeyEvents(){null!==this.q&&(this.q.removeEventListener("keydown",this.Ce),this.q=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(nn),this.update(),this.state=dn}update(e=null){const t=this.object.position;cn.copy(t).sub(this.target),cn.applyQuaternion(this.te),this.ae.setFromVector3(cn),this.autoRotate&&this.state===dn&&this.Ie(this.Ae(e)),this.enableDamping?(this.ae.theta+=this.ie.theta*this.dampingFactor,this.ae.phi+=this.ie.phi*this.dampingFactor):(this.ae.theta+=this.ie.theta,this.ae.phi+=this.ie.phi);let n=this.minAzimuthAngle,a=this.maxAzimuthAngle;isFinite(n)&&isFinite(a)&&(n<-Math.PI?n+=un:n>Math.PI&&(n-=un),a<-Math.PI?a+=un:a>Math.PI&&(a-=un),this.ae.theta=n<=a?Math.max(n,Math.min(a,this.ae.theta)):this.ae.theta>(n+a)/2?Math.max(n,this.ae.theta):Math.min(a,this.ae.theta)),this.ae.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.ae.phi)),this.ae.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this.se,this.dampingFactor):this.target.add(this.se),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let i=!1;if(this.zoomToCursor&&this.we||this.object.isOrthographicCamera)this.ae.radius=this.Pe(this.ae.radius);else{const e=this.ae.radius;this.ae.radius=this.Pe(this.ae.radius*this.le),i=e!=this.ae.radius}if(cn.setFromSpherical(this.ae),cn.applyQuaternion(this.ne),t.copy(this.target).add(cn),this.object.lookAt(this.target),!0===this.enableDamping?(this.ie.theta*=1-this.dampingFactor,this.ie.phi*=1-this.dampingFactor,this.se.multiplyScalar(1-this.dampingFactor)):(this.ie.set(0,0,0),this.se.set(0,0,0)),this.zoomToCursor&&this.we){let e=null;if(this.object.isPerspectiveCamera){const t=cn.length();e=this.Pe(t*this.le);const n=t-e;this.object.position.addScaledVector(this.ge,n),this.object.updateMatrixWorld(),i=!!n}else if(this.object.isOrthographicCamera){const t=new ie(this.be.x,this.be.y,0);t.unproject(this.object);const n=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this.le)),this.object.updateProjectionMatrix(),i=n!==this.object.zoom;const a=new ie(this.be.x,this.be.y,0);a.unproject(this.object),this.object.position.sub(a).add(t),this.object.updateMatrixWorld(),e=cn.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==e&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(e).add(this.object.position):(sn.origin.copy(this.object.position),sn.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(sn.direction))<on?this.object.lookAt(this.target):(rn.setFromNormalAndCoplanarPoint(this.object.up,this.target),sn.intersectPlane(rn,this.target))))}else if(this.object.isOrthographicCamera){const e=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this.le)),e!==this.object.zoom&&(this.object.updateProjectionMatrix(),i=!0)}return this.le=1,this.we=!1,!!(i||this.Y.distanceToSquared(this.object.position)>hn||8*(1-this.Z.dot(this.object.quaternion))>hn||this.ee.distanceToSquared(this.target)>hn)&&(this.dispatchEvent(nn),this.Y.copy(this.object.position),this.Z.copy(this.object.quaternion),this.ee.copy(this.target),!0)}Ae(e){return null!==e?un/60*this.autoRotateSpeed*e:un/60/60*this.autoRotateSpeed}Oe(e){const t=Math.abs(.01*e);return Math.pow(.95,this.zoomSpeed*t)}Ie(e){this.ie.theta-=e}je(e){this.ie.phi-=e}Le(e,t){cn.setFromMatrixColumn(t,0),cn.multiplyScalar(-e),this.se.add(cn)}Be(e,t){!0===this.screenSpacePanning?cn.setFromMatrixColumn(t,1):(cn.setFromMatrixColumn(t,0),cn.crossVectors(this.object.up,cn)),cn.multiplyScalar(e),this.se.add(cn)}Fe(e,t){const n=this.domElement;if(this.object.isPerspectiveCamera){const a=this.object.position;cn.copy(a).sub(this.target);let i=cn.length();i*=Math.tan(this.object.fov/2*Math.PI/180),this.Le(2*e*i/n.clientHeight,this.object.matrix),this.Be(2*t*i/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this.Le(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this.Be(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}Ue(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this.le/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}He(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this.le*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}Ve(e,t){if(!this.zoomToCursor)return;this.we=!0;const n=this.domElement.getBoundingClientRect(),a=e-n.left,i=t-n.top,l=n.width,s=n.height;this.be.x=a/l*2-1,this.be.y=-i/s*2+1,this.ge.set(this.be.x,this.be.y,1).unproject(this.object).sub(this.object.position).normalize()}Pe(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}We(e){this.re.set(e.clientX,e.clientY)}Ge(e){this.Ve(e.clientX,e.clientX),this.fe.set(e.clientX,e.clientY)}Je(e){this.ue.set(e.clientX,e.clientY)}Ke(e){this.oe.set(e.clientX,e.clientY),this.ce.subVectors(this.oe,this.re).multiplyScalar(this.rotateSpeed);const t=this.domElement;this.Ie(un*this.ce.x/t.clientHeight),this.je(un*this.ce.y/t.clientHeight),this.re.copy(this.oe),this.update()}qe(e){this.pe.set(e.clientX,e.clientY),this.me.subVectors(this.pe,this.fe),this.me.y>0?this.Ue(this.Oe(this.me.y)):this.me.y<0&&this.He(this.Oe(this.me.y)),this.fe.copy(this.pe),this.update()}Xe(e){this.de.set(e.clientX,e.clientY),this.he.subVectors(this.de,this.ue).multiplyScalar(this.panSpeed),this.Fe(this.he.x,this.he.y),this.ue.copy(this.de),this.update()}Ye(e){this.Ve(e.clientX,e.clientY),e.deltaY<0?this.He(this.Oe(e.deltaY)):e.deltaY>0&&this.Ue(this.Oe(e.deltaY)),this.update()}Qe(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this.je(un*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this.Fe(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this.je(-un*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this.Fe(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this.Ie(un*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this.Fe(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this.Ie(-un*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this.Fe(-this.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),this.update())}Ze(e){if(1===this.xe.length)this.re.set(e.pageX,e.pageY);else{const t=this.et(e),n=.5*(e.pageX+t.x),a=.5*(e.pageY+t.y);this.re.set(n,a)}}tt(e){if(1===this.xe.length)this.ue.set(e.pageX,e.pageY);else{const t=this.et(e),n=.5*(e.pageX+t.x),a=.5*(e.pageY+t.y);this.ue.set(n,a)}}nt(e){const t=this.et(e),n=e.pageX-t.x,a=e.pageY-t.y,i=Math.sqrt(n*n+a*a);this.fe.set(0,i)}it(e){this.enableZoom&&this.nt(e),this.enablePan&&this.tt(e)}lt(e){this.enableZoom&&this.nt(e),this.enableRotate&&this.Ze(e)}st(e){if(1==this.xe.length)this.oe.set(e.pageX,e.pageY);else{const t=this.et(e),n=.5*(e.pageX+t.x),a=.5*(e.pageY+t.y);this.oe.set(n,a)}this.ce.subVectors(this.oe,this.re).multiplyScalar(this.rotateSpeed);const t=this.domElement;this.Ie(un*this.ce.x/t.clientHeight),this.je(un*this.ce.y/t.clientHeight),this.re.copy(this.oe)}rt(e){if(1===this.xe.length)this.de.set(e.pageX,e.pageY);else{const t=this.et(e),n=.5*(e.pageX+t.x),a=.5*(e.pageY+t.y);this.de.set(n,a)}this.he.subVectors(this.de,this.ue).multiplyScalar(this.panSpeed),this.Fe(this.he.x,this.he.y),this.ue.copy(this.de)}ot(e){const t=this.et(e),n=e.pageX-t.x,a=e.pageY-t.y,i=Math.sqrt(n*n+a*a);this.pe.set(0,i),this.me.set(0,Math.pow(this.pe.y/this.fe.y,this.zoomSpeed)),this.Ue(this.me.y),this.fe.copy(this.pe);const l=.5*(e.pageX+t.x),s=.5*(e.pageY+t.y);this.Ve(l,s)}ct(e){this.enableZoom&&this.ot(e),this.enablePan&&this.rt(e)}ut(e){this.enableZoom&&this.ot(e),this.enableRotate&&this.st(e)}dt(e){this.xe.push(e.pointerId)}ht(e){delete this.ve[e.pointerId];for(let t=0;t<this.xe.length;t++)if(this.xe[t]==e.pointerId)return void this.xe.splice(t,1)}ft(e){for(let t=0;t<this.xe.length;t++)if(this.xe[t]==e.pointerId)return!0;return!1}gt(e){let t=this.ve[e.pointerId];void 0===t&&(t=new ce,this.ve[e.pointerId]=t),t.set(e.pageX,e.pageY)}et(e){const t=e.pointerId===this.xe[0]?this.xe[1]:this.xe[0];return this.ve[t]}bt(e){const t=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100}return e.ctrlKey&&!this.ye&&(n.deltaY*=10),n}}function pn(e){!1!==this.enabled&&(0===this.xe.length&&(this.domElement.setPointerCapture(e.pointerId),this.domElement.ownerDocument.addEventListener("pointermove",this.ke),this.domElement.ownerDocument.addEventListener("pointerup",this.Me)),this.ft(e)||(this.dt(e),"touch"===e.pointerType?this.De(e):this.Ne(e)))}function mn(e){!1!==this.enabled&&("touch"===e.pointerType?this.$e(e):this.Ee(e))}function gn(e){switch(this.ht(e),this.xe.length){case 0:this.domElement.releasePointerCapture(e.pointerId),this.domElement.ownerDocument.removeEventListener("pointermove",this.ke),this.domElement.ownerDocument.removeEventListener("pointerup",this.Me),this.dispatchEvent(ln),this.state=dn;break;case 1:const t=this.xe[0],n=this.ve[t];this.De({pointerId:t,pageX:n.x,pageY:n.y})}}function bn(e){let t;switch(e.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case le.DOLLY:if(!1===this.enableZoom)return;this.Ge(e),this.state=1;break;case le.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===this.enablePan)return;this.Je(e),this.state=2}else{if(!1===this.enableRotate)return;this.We(e),this.state=0}break;case le.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===this.enableRotate)return;this.We(e),this.state=0}else{if(!1===this.enablePan)return;this.Je(e),this.state=2}break;default:this.state=dn}this.state!==dn&&this.dispatchEvent(an)}function wn(e){switch(this.state){case 0:if(!1===this.enableRotate)return;this.Ke(e);break;case 1:if(!1===this.enableZoom)return;this.qe(e);break;case 2:if(!1===this.enablePan)return;this.Xe(e)}}function xn(e){!1!==this.enabled&&!1!==this.enableZoom&&this.state===dn&&(e.preventDefault(),this.dispatchEvent(an),this.Ye(this.bt(e)),this.dispatchEvent(ln))}function vn(e){!1!==this.enabled&&this.Qe(e)}function yn(e){switch(this.gt(e),this.xe.length){case 1:switch(this.touches.ONE){case se.ROTATE:if(!1===this.enableRotate)return;this.Ze(e),this.state=3;break;case se.PAN:if(!1===this.enablePan)return;this.tt(e),this.state=4;break;default:this.state=dn}break;case 2:switch(this.touches.TWO){case se.DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this.it(e),this.state=5;break;case se.DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this.lt(e),this.state=6;break;default:this.state=dn}break;default:this.state=dn}this.state!==dn&&this.dispatchEvent(an)}function kn(e){switch(this.gt(e),this.state){case 3:if(!1===this.enableRotate)return;this.st(e),this.update();break;case 4:if(!1===this.enablePan)return;this.rt(e),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this.ct(e),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this.ut(e),this.update();break;default:this.state=dn}}function _n(e){!1!==this.enabled&&e.preventDefault()}function Mn(e){"Control"===e.key&&(this.ye=!0,this.domElement.getRootNode().addEventListener("keyup",this.ze,{passive:!0,capture:!0}))}function Sn(e){"Control"===e.key&&(this.ye=!1,this.domElement.getRootNode().removeEventListener("keyup",this.ze,{passive:!0,capture:!0}))}const Tn={plants:[{id:"pine",name:"",icon:""},{id:"oak",name:"",icon:""},{id:"cherry",name:"",icon:""},{id:"willow",name:"",icon:""},{id:"bamboo",name:"",icon:""},{id:"palm",name:"",icon:""},{id:"cactus",name:"",icon:""},{id:"mushroom",name:"",icon:""},{id:"sunflower",name:"",icon:""},{id:"birch",name:"",icon:""}],animals:[{id:"rabbit",name:"",icon:""},{id:"fox",name:"",icon:""},{id:"panda",name:"",icon:""},{id:"pig",name:"",icon:""},{id:"chick",name:"",icon:""},{id:"penguin",name:"",icon:""},{id:"frog",name:"",icon:""},{id:"sheep",name:"",icon:""},{id:"bear",name:"",icon:""},{id:"bee",name:"",icon:""}]},Cn={plants:Tn.plants.flatMap(e=>[{...e,id:e.id,name:`${e.name}1`},{...e,id:`${e.id}2`,name:`${e.name}2`}]),animals:Tn.animals.flatMap(e=>"bee"===e.id?[{...e,id:e.id,name:""},{...e,id:`${e.id}2`,name:""}]:"bear"===e.id?[{...e,id:e.id,name:""},{...e,id:`${e.id}2`,name:""}]:[{...e,id:e.id,name:`${e.name}1`},{...e,id:`${e.id}2`,name:`${e.name}2`}])};class Dn{constructor(){this.scene=null,this.camera=null,this.renderer=null,this.controls=null,this.animationFrameId=0,this.entities=[],this.previewMesh=null,this.ground=null,this.tomatoMesh=null,this.sceneObjects=[],this.isFocusing=!1,this.isPaused=!1,this.currentSeed="pine",this.totalPlants=0,this.theme="light",this.lodDistances={high:10,medium:25,low:50,veryLow:100},this.lastUpdateTime=null}init(e,t){try{this.scene=new fe,this.scene.background=new pe(16777215);const n=t.clientWidth,a=t.clientHeight,i=n>0&&a>0?n/a:window.innerWidth/window.innerHeight;this.camera=new me(45,i,.1,1e3),this.camera.position.set(0,60,120),this.renderer=new ge({canvas:e,antialias:!0,alpha:!1});const l=n>0?n:window.innerWidth,s=a>0?a:window.innerHeight;this.renderer.setSize(l,s),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=be,this.renderer.shadowMap.autoUpdate=!0,this.renderer.shadowMap.needsUpdate=!0,this.renderer.toneMapping=we,this.renderer.toneMappingExposure=1,this.renderer.setClearColor(16777215,1),this.renderer.localClippingEnabled=!1,this.renderer.sortObjects=!0,e.style.touchAction="none",e.style.pointerEvents="auto",e.style.zIndex="10",e.style.position="relative",this.setupLighting(),this.createGround(),this.createTomato(),this.setupControls(e),this.animate(),window.addEventListener("resize",()=>this.handleResize(t))}catch(n){console.error("Failed to initialize 3D scene:",n)}}setupLighting(){if(!this.scene)return;this.scene.children.forEach(e=>{e instanceof xe&&this.scene.remove(e)});const e=new ve(16777215,.7);this.scene.add(e);const t=new ye(16777215,1);t.position.set(50,100,50),t.castShadow=!0,t.shadow.mapSize.width=4096,t.shadow.mapSize.height=4096;const n=t.shadow.camera;n.left=-300,n.right=300,n.top=300,n.bottom=-300,n.near=.1,n.far=400,t.shadow.bias=-1e-4,t.shadow.radius=2,t.shadow.autoUpdate=!0,this.scene.add(t);const a=new ye(16777215,.3);a.position.set(-50,50,-50),this.scene.add(a)}createGround(){if(!this.scene)return;const e=this.getThemeColors(),t=new ke(90,90,5,32),n=new _e({color:9268835,roughness:.95,metalness:0,side:Me,flatShading:!1,vertexColors:!1});this.ground=new Se(t,n),this.ground.position.set(0,0,0),this.ground.receiveShadow=!0,this.scene.add(this.ground);const a=new Te(89.5,32),i=new _e({color:e.grassColor,roughness:.9,metalness:0,side:Me,flatShading:!1}),l=new Se(a,i);l.position.set(0,2.51,0),l.rotation.x=-Math.PI/2,l.receiveShadow=!0,this.ground.add(l),this.addGroundDetails()}addGroundDetails(){if(!this.ground)return;[{geometry:new Ce(.2,.4,8),color:6856504,count:100},{geometry:new Ce(.15,.3,6),color:5606191,count:80},{geometry:new Ce(.25,.5,10),color:8172354,count:60},{geometry:new ke(.1,.15,.3,4),color:4431943,count:50}].forEach(e=>{const t=new _e({color:e.color,roughness:.9,metalness:.05});for(let n=0;n<e.count;n++){const n=new Se(e.geometry,t),a=Math.random()*Math.PI*2,i=89*Math.random();n.position.set(Math.cos(a)*i,2.5,Math.sin(a)*i),n.rotation.y=Math.random()*Math.PI*2,n.rotation.x=.2*(Math.random()-.5),n.castShadow=!0,n.receiveShadow=!0,this.ground.add(n)}});const e=new _e({color:6381921,roughness:.95,metalness:.1});for(let t=0;t<30;t++){const t=new De(.3+.2*Math.random(),0),n=new Se(t,e),a=Math.random()*Math.PI*2,i=88*Math.random();n.position.set(Math.cos(a)*i,2.5,Math.sin(a)*i),n.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),n.castShadow=!0,n.receiveShadow=!0,this.ground.add(n)}}createTomato(){if(!this.scene)return;const e=new $e(2,32,32),t=new _e({color:16733986,roughness:.5,metalness:.1});this.tomatoMesh=new Se(e,t),this.tomatoMesh.name="tomatoMesh",this.tomatoMesh.position.set(0,2,0),this.tomatoMesh.castShadow=!0,this.tomatoMesh.visible=!1,this.scene.add(this.tomatoMesh)}setupControls(e){if(!this.camera||!this.renderer)return;this.controls=new fn(this.camera,e),this.controls.enableDamping=!0,this.controls.dampingFactor=.15,this.controls.autoRotate=!0,this.controls.autoRotateSpeed=.1,this.controls.enablePan=!0,this.controls.enableZoom=!0,this.controls.enableRotate=!0,this.controls.minDistance=30,this.controls.maxDistance=200,this.controls.zoomSpeed=1.5,this.controls.screenSpacePanning=!1,this.controls.minPolarAngle=Math.PI/6,this.controls.maxPolarAngle=Math.PI/2.2;let t=!1,n=null;this.controls.addEventListener("start",()=>{t=!0,this.controls.autoRotate=!1,n&&(clearTimeout(n),n=null)}),this.controls.addEventListener("end",()=>{t=!1,n=setTimeout(()=>{!t&&this.controls&&(this.controls.autoRotate=!0)},3e3)});let a=null;e.addEventListener("wheel",e=>{(e.ctrlKey||e.metaKey)&&(e.preventDefault(),a&&clearTimeout(a),a=setTimeout(()=>{this.controls&&(e.deltaY<0?this.controls.autoRotateSpeed=Math.min(3,this.controls.autoRotateSpeed+.3):this.controls.autoRotateSpeed=Math.max(.05,this.controls.autoRotateSpeed-.3))},50))}),this.controls.update()}handleResize(e){if(!this.camera||!this.renderer)return;const t=e.clientWidth,n=e.clientHeight;t>0&&n>0&&(this.camera.aspect=t/n,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,n))}getThemeColors(){let e=14738924,t=14738924;return this.theme&&this.theme.includes("dark")?(e=1973806,t=1973806):"light"===this.theme?(e=16777215,t=16777215):"dark"===this.theme&&(e=988970,t=988970),{bgColor:e,groundColor:9268835,grassColor:5025616,neuBgColor:t}}updateTheme(e,t,n){if(!this.scene||!this.renderer)return;this.theme=e,this.isFocusing=t,this.isPaused=n;const a=this.getThemeColors();let i=a.bgColor;if(this.scene.background||(this.scene.background=new pe),this.scene.background.set(i),this.scene.fog=null,this.renderer.setClearColor(i,1),this.updateLightingIntensity(),this.ground&&(this.ground.material.color.set(a.groundColor),this.ground.children&&this.ground.children.length>0)){const e=this.ground.children[0];e.material&&e.material.color.set(a.grassColor)}}updateLightingIntensity(){if(!this.scene)return;const e=this.theme&&this.theme.includes("dark"),t=e?{intensity:.6,color:6710920}:{intensity:.6,color:16777215},n=e?{intensity:.8,color:8947882}:{intensity:1,color:16777215},a=e?{intensity:.6,color:6710903}:{intensity:.8,color:16777215},i=e?{intensity:.6,color:4473958,groundColor:2236996}:{intensity:.8,color:16777215,groundColor:9268835};this.scene.traverse(e=>{e.isAmbientLight?(e.intensity=t.intensity,e.color.set(t.color)):e.isDirectionalLight?e.position.y>50?(e.intensity=n.intensity,e.color.set(n.color)):(e.intensity=a.intensity,e.color.set(a.color)):e.isHemisphereLight&&(e.intensity=i.intensity,e.color.set(i.color),e.groundColor.set(i.groundColor))})}createPlant(e){const t=new Ne,n=(e,t=.8,n=.1,a=Ee)=>new _e({color:e,roughness:t,metalness:n,side:a,transparent:!1,opacity:1,emissive:0,emissiveIntensity:0}),a=e.replace(/\d+$/,"");if("pine"===a){if("pine"===e){const e=n(6045747,.9,.1),a=new Se(new ke(.2,.4,1.2,12),e);a.position.y=.6,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(2976335,.8,.1);for(let n=0;n<4;n++){const e=1.8+.8*n,a=new Se(new Ce(1.5-.3*n,1.8,8),i);a.position.y=e,a.castShadow=!0,a.receiveShadow=!0,t.add(a)}const l=n(9127187,.9,.05),s=new Se(new Ce(.15,.4,8),l);s.position.set(0,1.2,0),s.rotation.x=Math.PI,s.castShadow=!0,s.receiveShadow=!0,t.add(s)}else if("pine2"===e){const e=n(6636321,.95,.05),a=new Se(new ke(.25,.45,2,16),e);a.position.y=1,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(3825419,.85,.15),l=5;for(let n=0;n<l;n++){const e=new Se(new Ce(1.6-.25*n,1.8,12),i);e.position.y=2+.7*n,e.castShadow=!0,e.receiveShadow=!0,t.add(e)}const s=n(9127187,.98,.02);[{x:.5,y:3,z:.8},{x:-.6,y:2.5,z:-.5},{x:.8,y:2.8,z:-.3},{x:-.4,y:3.2,z:.6}].forEach(e=>{const n=new Se(new Ce(.12,.35,8),s);n.position.set(e.x,e.y,e.z),n.rotation.x=Math.PI,n.castShadow=!0,n.receiveShadow=!0,t.add(n)});const r=new Se(new Ce(.18,.45,10),s);r.position.set(0,5.2,0),r.rotation.x=Math.PI,r.castShadow=!0,r.receiveShadow=!0,t.add(r)}}else if("cherry"===e){const e=n(9127187,.9,.1),a=new Se(new ke(.25,.4,1.5,12),e);a.position.y=.75,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(16766688,.7,.1),l=new Se(new $e(1.5,16,16),i);l.position.y=2.5,l.castShadow=!0,l.receiveShadow=!0,t.add(l)}else if("cherry2"===e){const e=n(9127187,.9,.1),a=new Se(new ke(.2,.35,2,12),e);a.position.y=1,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(16777215,.6,.1),l=new Se(new $e(1.6,16,16),i);l.position.y=3,l.castShadow=!0,l.receiveShadow=!0,t.add(l);for(let n=0;n<5;n++){const e=new Se(new $e(.5-.08*n,12,12),i);e.position.set(2*(Math.random()-.5),3+1.5*(Math.random()-.5),2*(Math.random()-.5)),e.castShadow=!0,e.receiveShadow=!0,t.add(e)}const s=n(16777215,.8,.1,Me);for(let n=0;n<10;n++){const e=new Se(new Re(.15,.15),s);e.position.set(3*(Math.random()-.5),1.5+2*(Math.random()-.5),3*(Math.random()-.5)),e.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),e.castShadow=!0,e.receiveShadow=!0,t.add(e)}}else if("willow"===e){const e=n(9127187,.9,.1),a=new Se(new ke(.2,.35,3.5,12),e);a.position.y=1.75,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(9498256,.7,.1),l=new Se(new $e(.8,12,12),i);l.position.y=3.8,l.castShadow=!0,l.receiveShadow=!0,t.add(l)}else if("willow2"===e){const e=n(9127187,.9,.1),a=new Se(new ke(.15,.3,4,12),e);a.position.y=2,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(9498256,.7,.1),l=new Se(new $e(1,12,12),i);l.position.y=4.5,l.castShadow=!0,l.receiveShadow=!0,t.add(l);const s=12;for(let r=0;r<s;r++){const e=r/s*Math.PI*2,a=.2,l=new ke(.03,.03,3,8),o=n(9127187,.9,.1),c=new Se(l,o);c.position.set(Math.cos(e)*a,3.5,Math.sin(e)*a),c.rotation.z=Math.PI/2+e,c.castShadow=!0,c.receiveShadow=!0,t.add(c);const u=new Se(new $e(.4,8,8),i);u.position.set(Math.cos(e)*a+2.8*Math.cos(e),.8,Math.sin(e)*a+2.8*Math.sin(e)),u.castShadow=!0,u.receiveShadow=!0,t.add(u)}}else if("bamboo"===e){const e=n(9498256,.7,.1),a=5;for(let n=0;n<a;n++){const a=.8*(Math.random()-.5),i=.8*(Math.random()-.5),l=3+2*Math.random(),s=new Ne;s.position.set(a,0,i);const r=.15-.02*n,o=new Se(new ke(r,.7*r,l,12),e);o.position.y=l/2,o.castShadow=!0,o.receiveShadow=!0,s.add(o),t.add(s)}}else if("bamboo2"===e){const e=n(5025616,.7,.1),a=8;for(let i=0;i<a;i++){const a=1*(Math.random()-.5),l=1*(Math.random()-.5),s=2.5+2.5*Math.random(),r=new Ne;r.position.set(a,0,l);const o=.12-.01*i,c=.6*o,u=new Se(new ke(o,c,s,12),e);u.position.y=s/2,u.castShadow=!0,u.receiveShadow=!0,r.add(u);const d=Math.floor(s/.5);for(let e=0;e<d;e++){const t=new Se(new ke(o+.01,c+.01,.05,12),n(3046706,.9,.1));t.position.y=.5*(e+1),t.castShadow=!0,t.receiveShadow=!0,r.add(t)}t.add(r)}}else if("palm"===e){const e=n(9127187,.9,.1),a=new Se(new ke(.2,.3,4,16),e);a.position.y=2,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(2263842,.7,.1,Me);for(let n=0;n<12;n++){const e=n/12*Math.PI*2,a=new Se(new ze(.2,2.5,.1),i);a.position.set(.3*Math.cos(e),3.8,.3*Math.sin(e)),a.rotation.y=e,a.rotation.z=Math.PI/3,a.rotation.x=.2,a.castShadow=!0,a.receiveShadow=!0,t.add(a)}const l=n(9127187,.95,.05);for(let n=0;n<2;n++){const e=new Se(new $e(.15,8,8),l);e.position.set(.5*Math.cos(n*Math.PI),3.5,.5*Math.sin(n*Math.PI)),e.castShadow=!0,e.receiveShadow=!0,t.add(e)}}else if("palm2"===e){const e=n(9127187,.9,.1),a=new Se(new ke(.25,.35,4.5,16),e);a.position.y=2.25,a.rotation.z=-.1,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(3329330,.6,.2,Me);for(let n=0;n<16;n++){const e=n/16*Math.PI*2,a=new Se(new ze(.25,3,.1),i);a.position.set(.4*Math.cos(e),4.2,.4*Math.sin(e)),a.rotation.y=e,a.rotation.z=Math.PI/3.5,a.rotation.x=.15,a.castShadow=!0,a.receiveShadow=!0,t.add(a)}const l=n(9127187,.95,.05);for(let n=0;n<4;n++){const e=new Se(new $e(.18,8,8),l);e.position.set(.6*Math.cos(n*Math.PI/2),3.8,.6*Math.sin(n*Math.PI/2)),e.castShadow=!0,e.receiveShadow=!0,t.add(e)}const s=n(16739179,.5,.3);for(let n=0;n<3;n++){const e=new Se(new Ie(.2,1),s);e.position.set(.3*Math.cos(n*Math.PI/1.5),4.5,.3*Math.sin(n*Math.PI/1.5)),e.castShadow=!0,e.receiveShadow=!0,t.add(e)}}else if("cactus"===e){const e=n(2278750,.8,.1),a=new Se(new ke(.35,.45,2.5,16),e);a.position.y=1.25,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(1467700,.9,.05);for(let n=0;n<20;n++){const e=new Se(new ke(.01,.02,.3,4),i),a=n/20*Math.PI*2,l=2.5*Math.random();e.position.set(.4*Math.cos(a),l,.4*Math.sin(a)),e.rotation.y=a,e.rotation.z=Math.PI/2,e.castShadow=!0,e.receiveShadow=!0,t.add(e)}}else if("cactus2"===e){const e=n(1483594,.7,.2),a=new Se(new ke(.3,.4,3,16),e);a.position.y=1.5,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=4;for(let n=0;n<i;n++){const a=new Se(new ke(.15,.2,1.5,12),e),l=n/i*Math.PI*2,s=1+n%2*.5;a.position.set(.4*Math.cos(l),s,.4*Math.sin(l)),a.rotation.z=Math.PI/4*(n%2==0?1:-1),a.rotation.y=l,a.castShadow=!0,a.receiveShadow=!0,t.add(a)}const l=n(16766720,.6,.3);for(let n=0;n<3;n++){const e=new Se(new $e(.2,8,8),l);e.position.set(.2*(Math.random()-.5),3.2,.2*(Math.random()-.5)),e.castShadow=!0,e.receiveShadow=!0,t.add(e)}const s=n(1409085,.9,.05);for(let n=0;n<30;n++){const e=new Se(new ke(.01,.02,.4,4),s),a=n/30*Math.PI*2,i=3*Math.random();e.position.set(.35*Math.cos(a),i,.35*Math.sin(a)),e.rotation.y=a,e.rotation.z=Math.PI/2,e.castShadow=!0,e.receiveShadow=!0,t.add(e)}}else if("mushroom"===e){const e=n(16772565,.7,.1),a=new Se(new ke(.25,.35,1,16),e);a.position.y=.5,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(16729943,.6,.1),l=new Se(new $e(1.2,16,16,0,2*Math.PI,0,Math.PI/2),i);l.position.y=1.2,l.castShadow=!0,l.receiveShadow=!0,t.add(l);const s=n(16777215,.8,.05);for(let n=0;n<8;n++){const e=new Se(new $e(.2,8,8),s),a=n/8*Math.PI*2,i=.8+.3*Math.random();e.position.set(Math.cos(a)*i,1.3+.2*Math.random(),Math.sin(a)*i),e.castShadow=!0,e.receiveShadow=!0,t.add(e)}}else if("mushroom2"===e){const e=n(16777184,.6,.2),a=new Se(new ke(.2,.3,1.5,16),e);a.position.y=.75,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(9109504,.5,.3),l=new Se(new Ce(1.5,2,16),i);l.position.y=1.75,l.rotation.x=Math.PI,l.castShadow=!0,l.receiveShadow=!0,t.add(l);const s=n(16777215,.9,.1);for(let n=0;n<12;n++){const e=new Se(new Ie(.25,1),s),a=n/12*Math.PI*2,i=1+.4*Math.random(),l=.5*Math.random();e.position.set(Math.cos(a)*i,1.5+l,Math.sin(a)*i),e.castShadow=!0,e.receiveShadow=!0,t.add(e)}const r=n(6684672,.8,.1);for(let n=0;n<8;n++){const e=new Se(new ze(.05,.8,.5),r),a=n/8*Math.PI*2;e.position.set(.15*Math.cos(a),1.2,.15*Math.sin(a)),e.rotation.y=a,e.castShadow=!0,e.receiveShadow=!0,t.add(e)}}else if("sunflower"===e){const e=n(4906624,.8,.1),a=new Se(new ke(.08,.12,3,10),e);a.position.y=1.5,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(16436245,.7,.1),l=new Se(new ke(.8,.8,.15,20),i);l.position.set(0,3,0),l.castShadow=!0,l.receiveShadow=!0,t.add(l);const s=n(7877903,.9,.05),r=new Se(new ke(.3,.3,.2,12),s);r.position.set(0,3.05,0),r.castShadow=!0,r.receiveShadow=!0,t.add(r);const o=n(16498468,.8,.1,Me);for(let n=0;n<20;n++){const e=new Se(new ze(.3,.05,.8),o),a=n/20*Math.PI*2;e.position.set(.55*Math.cos(a),3,.55*Math.sin(a)),e.rotation.y=a,e.rotation.z=Math.PI/2,e.castShadow=!0,e.receiveShadow=!0,t.add(e)}}else if("sunflower2"===e){const e=n(3462041,.7,.2),a=new Se(new ke(.12,.18,4,10),e);a.position.y=2,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=3;for(let u=0;u<i;u++){const a=new Se(new ke(.06,.08,1.5,8),e),l=1.5+.8*u,s=u/i*Math.PI/3-Math.PI/6;a.position.set(.2*Math.cos(s),l,.2*Math.sin(s)),a.rotation.z=s,a.rotation.y=Math.PI/2,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const r=n(16498468,.6,.2),o=new Se(new ke(.6,.6,.15,16),r),c=.8*Math.cos(s),d=.8*Math.sin(s);o.position.set(c,l,d),o.castShadow=!0,o.receiveShadow=!0,t.add(o);const h=n(9584654,.9,.1),f=new Se(new ke(.25,.25,.2,10),h);f.position.set(c,l+.05,d),f.castShadow=!0,f.receiveShadow=!0,t.add(f);const p=n(16436245,.7,.1,Me);for(let e=0;e<16;e++){const n=new Se(new ze(.25,.04,.6),p),a=e/16*Math.PI*2;n.position.set(c+.42*Math.cos(a),l,d+.42*Math.sin(a)),n.rotation.y=a,n.rotation.z=Math.PI/2,n.castShadow=!0,n.receiveShadow=!0,t.add(n)}}const l=n(16498468,.6,.2),s=new Se(new ke(.9,.9,.18,24),l);s.position.set(0,4,0),s.castShadow=!0,s.receiveShadow=!0,t.add(s);const r=n(9584654,.9,.1),o=new Se(new ke(.35,.35,.25,16),r);o.position.set(0,4.07,0),o.castShadow=!0,o.receiveShadow=!0,t.add(o);const c=n(16436245,.7,.1,Me);for(let n=0;n<24;n++){const e=new Se(new ze(.35,.06,1),c),a=n/24*Math.PI*2;e.position.set(.62*Math.cos(a),4,.62*Math.sin(a)),e.rotation.y=a,e.rotation.z=Math.PI/2,e.castShadow=!0,e.receiveShadow=!0,t.add(e)}}else if("birch"===e){const e=new Se(new ke(.18,.25,3.2,12),n(15857145,.8,.1));e.position.y=1.6,e.castShadow=!0,e.receiveShadow=!0,t.add(e);const a=n(1976635,.9,.1);for(let n=0;n<8;n++){const e=new Se(new ze(.21,.1,.1),a),i=n/8*Math.PI*2,l=.5+2.2*Math.random();e.position.set(.14*Math.cos(i),l,.14*Math.sin(i)),e.rotation.y=i,e.castShadow=!0,e.receiveShadow=!0,t.add(e)}const i=n(16569165,.6,.3),l=new Se(new $e(1.6,16,16),i);l.position.y=3.3,l.castShadow=!0,l.receiveShadow=!0,t.add(l)}else if("birch2"===e){const e=new Se(new ke(.22,.3,4,16),n(16317180,.7,.2));e.position.y=2,e.castShadow=!0,e.receiveShadow=!0,t.add(e);const a=n(1976635,.95,.05);for(let n=0;n<15;n++){const e=new Se(new ze(.25,.15,.12),a),i=n/15*Math.PI*2,l=.8+2.4*Math.random();e.position.set(.17*Math.cos(i),l,.17*Math.sin(i)),e.rotation.y=i,e.castShadow=!0,e.receiveShadow=!0,t.add(e)}const i=n(16498468,.5,.4),l=new Se(new $e(1.8,16,16),i);l.position.y=4,l.castShadow=!0,l.receiveShadow=!0,t.add(l);for(let n=0;n<4;n++){const e=new Se(new $e(.8,12,12),i),a=n/4*Math.PI*2,l=1.2+.4*Math.random();e.position.set(Math.cos(a)*l,3.8+.8*Math.random(),Math.sin(a)*l),e.castShadow=!0,e.receiveShadow=!0,t.add(e)}const s=n(9741240,.9,.1);for(let n=0;n<3;n++){const e=new Se(new $e(.15,8,8),s),a=n/3*Math.PI*2,i=1.2+1.5*Math.random();e.position.set(.22*Math.cos(a),i,.22*Math.sin(a)),e.castShadow=!0,e.receiveShadow=!0,t.add(e)}}else if("oak"===a||"oak"===e||"oak1"===e||"oak2"===e){if("oak"===e||"oak1"===e){const e=n(6045747,.9,.1),a=new Se(new ke(.3,.5,1.5,12),e);a.position.y=.75,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(4906624,.7,.1),l=new Se(new Ie(1.6,2),i);l.position.y=2.2,l.castShadow=!0,l.receiveShadow=!0,t.add(l);const s=n(9127187,.95,.05);for(let n=0;n<5;n++){const e=new Se(new Ce(.15,.3,8),s),a=n/5*Math.PI*2,i=1.2+.3*Math.random();e.position.set(Math.cos(a)*i,2,Math.sin(a)*i),e.rotation.x=Math.PI,e.castShadow=!0,e.receiveShadow=!0,t.add(e)}}else if("oak2"===e){const e=n(7032374,.9,.1),a=new Se(new ke(.35,.55,1.8,12),e);a.position.y=.9,a.rotation.z=-.1,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(3584894,.7,.1),l=new Se(new Ie(1.8,2),i);l.position.y=2.5,l.castShadow=!0,l.receiveShadow=!0,t.add(l);for(let n=0;n<4;n++){const e=new Se(new Ie(.8,1),i),a=n/4*Math.PI*2,l=1.4+.3*Math.random();e.position.set(Math.cos(a)*l,2.2+.8*Math.random(),Math.sin(a)*l),e.castShadow=!0,e.receiveShadow=!0,t.add(e)}const s=n(7951688,.95,.05);for(let n=0;n<8;n++){const e=new Se(new Ce(.18,.35,8),s),a=n/8*Math.PI*2,i=1.4+.4*Math.random();e.position.set(Math.cos(a)*i,2.2+.5*Math.random(),Math.sin(a)*i),e.rotation.x=Math.PI+.5*Math.random(),e.castShadow=!0,e.receiveShadow=!0,t.add(e)}const r=n(6045747,.9,.1);for(let n=0;n<6;n++){const e=new Se(new ke(.08,.12,.8,8),r),a=n/6*Math.PI*2;e.position.set(.4*Math.cos(a),1.5+.5*Math.random(),.4*Math.sin(a)),e.rotation.y=a,e.rotation.z=Math.PI/4+Math.random()*Math.PI/4,e.castShadow=!0,e.receiveShadow=!0,t.add(e)}}}else{const e=n(6045747,.9,.1),a=new Se(new ke(.2,.4,1.2,12),e);a.position.y=.6,a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=n(2976335,.8,.1);for(let n=0;n<4;n++){const e=1.8+.8*n,a=new Se(new Ce(1.5-.3*n,1.8,8),i);a.position.y=e,a.castShadow=!0,a.receiveShadow=!0,t.add(a)}}return t}createAnimal(e){const t=new Ne;if("fox"===e){const e=new _e({color:16347926,roughness:.7,metalness:.2}),n=new Se(new Ae(.25,.4,4,8),e);n.position.set(0,.4,0),n.rotation.z=.2,n.castShadow=!0,n.receiveShadow=!0,t.add(n);const a=new Se(new $e(.25,16,16),e);a.position.set(0,.7,.4),a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=new _e({color:2042167,roughness:.8,metalness:.1}),l=new Se(new ze(.15,.2,.1),i);l.position.set(-.12,.9,.35),l.rotation.z=.3,l.castShadow=!0,l.receiveShadow=!0,t.add(l);const s=new Se(new ze(.15,.2,.1),i);s.position.set(.12,.9,.35),s.rotation.z=-.3,s.castShadow=!0,s.receiveShadow=!0,t.add(s);const r=new _e({color:14251782,roughness:.7,metalness:.2}),o=new Se(new ze(.3,.3,.7),r);o.position.set(0,.3,-.3),o.rotation.y=Math.PI/4,o.castShadow=!0,o.receiveShadow=!0,t.add(o)}else if("fox2"===e){const e=new _e({color:15357964,roughness:.6,metalness:.3}),n=new Se(new Ae(.3,.5,4,8),e);n.position.set(0,.45,0),n.rotation.z=.15,n.castShadow=!0,n.receiveShadow=!0,t.add(n);const a=new Se(new $e(.28,16,16),e);a.position.set(0,.8,.45),a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=new _e({color:988970,roughness:.85,metalness:.05}),l=new Se(new ze(.18,.25,.12),i);l.position.set(-.15,1.05,.4),l.rotation.z=.2,l.castShadow=!0,l.receiveShadow=!0,t.add(l);const s=new Se(new ze(.18,.25,.12),i);s.position.set(.15,1.05,.4),s.rotation.z=-.2,s.castShadow=!0,s.receiveShadow=!0,t.add(s);const r=new _e({color:12730636,roughness:.6,metalness:.3}),o=new Se(new ze(.35,.35,.8),r);o.position.set(0,.35,-.35),o.rotation.y=Math.PI/3.5,o.castShadow=!0,o.receiveShadow=!0,t.add(o);const c=new _e({color:16777215,roughness:.9,metalness:0}),u=new Se(new $e(.05,8,8),c);u.position.set(0,.75,.65),u.castShadow=!0,u.receiveShadow=!0,t.add(u);const d=new _e({color:1976635,roughness:.8,metalness:.1}),h=new Se(new $e(.04,8,8),d);h.position.set(-.1,.85,.6),h.castShadow=!0,h.receiveShadow=!0,t.add(h);const f=new Se(new $e(.04,8,8),d);f.position.set(.1,.85,.6),f.castShadow=!0,f.receiveShadow=!0,t.add(f)}else if("rabbit"===e){const e=new _e({color:16777215,roughness:.7,metalness:.1}),n=new Se(new Ae(.2,.3,4,8),e);n.position.set(0,.3,0),n.castShadow=!0,n.receiveShadow=!0,t.add(n);const a=new Se(new $e(.2,16,16),e);a.position.set(0,.5,.3),a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=new _e({color:16777215,roughness:.8,metalness:0}),l=new Se(new ze(.1,.5,.1),i);l.position.set(-.1,.9,.25),l.rotation.z=.1,l.castShadow=!0,l.receiveShadow=!0,t.add(l);const s=new Se(new ze(.1,.5,.1),i);s.position.set(.1,.9,.25),s.rotation.z=-.1,s.castShadow=!0,s.receiveShadow=!0,t.add(s);const r=new _e({color:2042167,roughness:.7,metalness:.2}),o=new Se(new ze(.05,.05,.05),r);o.position.set(-.08,.55,.45),o.castShadow=!0,o.receiveShadow=!0,t.add(o);const c=new Se(new ze(.05,.05,.05),r);c.position.set(.08,.55,.45),c.castShadow=!0,c.receiveShadow=!0,t.add(c)}else if("rabbit2"===e){const e=new _e({color:16708551,roughness:.65,metalness:.15}),n=new Se(new Ie(.25,3),e);n.position.set(0,.35,0),n.castShadow=!0,n.receiveShadow=!0,t.add(n);const a=new Se(new Ie(.22,3),e);a.position.set(0,.55,.35),a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=new _e({color:16708551,roughness:.75,metalness:.05}),l=new Se(new ze(.12,.6,.12),i);l.position.set(-.12,1,.3),l.rotation.z=.2,l.castShadow=!0,l.receiveShadow=!0,t.add(l);const s=new Se(new ze(.12,.6,.12),i);s.position.set(.12,1,.3),s.rotation.z=-.2,s.castShadow=!0,s.receiveShadow=!0,t.add(s);const r=new _e({color:223649,roughness:.6,metalness:.3}),o=new Se(new ze(.06,.06,.06),r);o.position.set(-.09,.6,.5),o.castShadow=!0,o.receiveShadow=!0,t.add(o);const c=new Se(new ze(.06,.06,.06),r);c.position.set(.09,.6,.5),c.castShadow=!0,c.receiveShadow=!0,t.add(c);const u=new _e({color:16708551,roughness:.7,metalness:.1}),d=new Se(new Ie(.15,2),u);d.position.set(0,.3,-.25),d.castShadow=!0,d.receiveShadow=!0,t.add(d)}else if("panda"===e||"panda2"===e){const n=new _e({color:16777215,roughness:.7,metalness:.1}),a=new _e({color:2042167,roughness:.8,metalness:.05}),i=new Se(new Ae(.35,.5,4,8),n);i.position.set(0,.5,0),i.castShadow=!0,i.receiveShadow=!0,t.add(i);const l=new Se(new $e(.3,16,16),n);if(l.position.set(0,.9,.4),l.castShadow=!0,l.receiveShadow=!0,t.add(l),"panda2"===e){i.scale.set(1.1,1.1,1.1);const e=new Se(new ze(.15,.25,.05),a);e.position.set(-.15,.95,.6),e.rotation.z=.2,e.castShadow=!0,e.receiveShadow=!0,t.add(e);const n=new Se(new ze(.15,.25,.05),a);n.position.set(.15,.95,.6),n.rotation.z=-.2,n.castShadow=!0,n.receiveShadow=!0,t.add(n);const l=new _e({color:4906624,roughness:.7,metalness:.1}),s=new Se(new ke(.05,.05,.6,6),l);s.position.set(0,.8,.7),s.rotation.z=Math.PI/4,s.castShadow=!0,s.receiveShadow=!0,t.add(s)}else{const e=new Se(new ze(.06,.06,.06),a);e.position.set(-.12,.95,.6),e.castShadow=!0,e.receiveShadow=!0,t.add(e);const n=new Se(new ze(.06,.06,.06),a);n.position.set(.12,.95,.6),n.castShadow=!0,n.receiveShadow=!0,t.add(n)}}else if("pig"===e||"pig2"===e){const n=new _e({color:16502760,roughness:.7,metalness:.1}),a=new Se(new Ie(.3,3),n);a.position.set(0,.4,0),a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=new Se(new ze(.4,.4,.4),n);if(i.position.set(0,.6,.4),i.castShadow=!0,i.receiveShadow=!0,t.add(i),"pig2"===e){n.color.set(16361684);const e=new _e({color:16361684,roughness:.7,metalness:.1});for(let n=0;n<3;n++){const a=new Se(new ke(.05,.05,.2,6),e);a.position.set(.2*Math.cos(n*Math.PI/2),.4,.2*Math.sin(n*Math.PI/2)-.2),a.rotation.z=n*Math.PI/2,a.castShadow=!0,a.receiveShadow=!0,t.add(a)}}}else if("chick"===e||"chick2"===e){const n=new _e({color:16436245,roughness:.65,metalness:.15}),a=new Se(new Ie(.2,3),n);a.position.set(0,.3,0),a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=new Se(new $e(.18,16,16),n);if(i.position.set(0,.5,.3),i.castShadow=!0,i.receiveShadow=!0,t.add(i),"chick2"===e){a.scale.set(1.1,1.1,1.1);const e=new _e({color:16096779,roughness:.7,metalness:.1}),n=new Se(new ze(.15,.08,.2),e);n.position.set(-.2,.35,.1),n.rotation.z=.3,n.castShadow=!0,n.receiveShadow=!0,t.add(n);const i=new Se(new ze(.15,.08,.2),e);i.position.set(.2,.35,.1),i.rotation.z=-.3,i.castShadow=!0,i.receiveShadow=!0,t.add(i)}}else if("penguin"===e||"penguin2"===e){const n=new _e({color:2042167,roughness:.7,metalness:.1}),a=new _e({color:16777215,roughness:.75,metalness:.05}),i=new Se(new ke(.25,.35,.9,12),n);i.position.set(0,.45,0),i.castShadow=!0,i.receiveShadow=!0,t.add(i);const l=new Se(new ke(.2,.3,.8,12),a);l.position.set(0,.4,.1),l.castShadow=!0,l.receiveShadow=!0,t.add(l);const s=new Se(new $e(.25,16,16),n);if(s.position.set(0,.9,.2),s.castShadow=!0,s.receiveShadow=!0,t.add(s),"penguin2"===e){const e=new _e({color:15680580,roughness:.6,metalness:.2}),n=new Se(new ze(.2,.1,.1),e);n.position.set(0,.7,.3),n.castShadow=!0,n.receiveShadow=!0,t.add(n)}}else if("frog"===e||"frog2"===e){const n=new _e({color:4906624,roughness:.7,metalness:.1}),a=new Se(new Ie(.25,3),n);a.position.set(0,.3,0),a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=new _e({color:16777215,roughness:.6,metalness:.2}),l=new Se(new $e(.15,12,12),i);l.position.set(-.2,.5,.3),l.castShadow=!0,l.receiveShadow=!0,t.add(l);const s=new Se(new $e(.15,12,12),i);if(s.position.set(.2,.5,.3),s.castShadow=!0,s.receiveShadow=!0,t.add(s),"frog2"===e){n.color.set(1096065);const e=new _e({color:366185,roughness:.8,metalness:.05});for(let n=0;n<5;n++){const n=new Se(new $e(.05,8,8),e);n.position.set(.3*(Math.random()-.5),.3+.2*Math.random(),.2*(Math.random()-.5)),n.castShadow=!0,n.receiveShadow=!0,t.add(n)}}}else if("bee"===e||"bee2"===e){if("bee"===e){const e=new _e({color:16436245,roughness:.6,metalness:.3}),n=new _e({color:0,roughness:.8,metalness:.1}),a=new Se(new Ae(.12,.5,8,16),e);a.position.set(0,.5,0),a.rotation.x=Math.PI/2,a.castShadow=!0,a.receiveShadow=!0,t.add(a);for(let x=0;x<3;x++){const e=new Se(new ke(.14,.14,.12,16),n);e.position.set(0,.5,.2*x-.2),e.rotation.x=Math.PI/2,e.castShadow=!0,e.receiveShadow=!0,t.add(e)}const i=new Se(new $e(.1,16,16),e);i.position.set(0,.5,.35),i.castShadow=!0,i.receiveShadow=!0,t.add(i);const l=new _e({color:1982639,roughness:.2,metalness:.8,emissive:1982639,emissiveIntensity:.3}),s=new $e(.035,16,16),r=new Se(s,l);r.position.set(.07,.55,.35),t.add(r);const o=new Se(s,l);o.position.set(-.07,.55,.35),t.add(o);for(let x=0;x<2;x++){const a=new Se(new ke(.008,.008,.18,6),e),i=0===x?.04:-.04;a.position.set(i,.62,.32),a.rotation.x=-Math.PI/4,t.add(a);const l=new Se(new $e(.02,8,8),n);l.position.set(0,-.18,0),a.add(l)}const c=new Se(new ke(.01,.01,.1,6),n);c.position.set(0,.45,.45),c.rotation.x=Math.PI/6,t.add(c);const u=new _e({color:16777215,opacity:.8,transparent:!0,roughness:.3,metalness:.7,emissive:4937059,emissiveIntensity:.2}),d=new Re(.4,.35),h=new Se(d,u);h.position.set(.2,.55,0),h.rotation.z=Math.PI/10,h.castShadow=!0,h.receiveShadow=!0,t.add(h);const f=new Se(d,u);f.position.set(-.2,.55,0),f.rotation.z=-Math.PI/10,f.castShadow=!0,f.receiveShadow=!0,t.add(f);const p=new Re(.25,.2),m=new Se(p,u);m.position.set(.18,.5,-.1),m.rotation.z=Math.PI/6,m.castShadow=!0,m.receiveShadow=!0,t.add(m);const g=new Se(p,u);g.position.set(-.18,.5,-.1),g.rotation.z=-Math.PI/6,g.castShadow=!0,g.receiveShadow=!0,t.add(g);const b=new _e({color:0,roughness:.7,metalness:.2}),w=new ke(.015,.015,.25,6);for(let x=0;x<2;x++){const e=new Se(w,b),n=0===x?.12:-.12;e.position.set(n,.4,.25),e.rotation.z=0===x?Math.PI/6:-Math.PI/6,t.add(e)}for(let x=0;x<2;x++){const e=new Se(w,b),n=0===x?.13:-.13;e.position.set(n,.4,0),t.add(e)}for(let x=0;x<2;x++){const e=new Se(w,b),n=0===x?.12:-.12;e.position.set(n,.4,-.25),e.rotation.z=0===x?-Math.PI/6:Math.PI/6,t.add(e)}}else if("bee2"===e){const e=new _e({color:16096779,roughness:.8,metalness:.1}),n=new _e({color:0,roughness:.9,metalness:.05}),a=new Se(new Ae(.18,.45,8,16),e);a.position.set(0,.5,0),a.rotation.x=Math.PI/2,a.castShadow=!0,a.receiveShadow=!0,t.add(a);for(let v=0;v<2;v++){const e=new Se(new ke(.2,.2,.18,16),n);e.position.set(0,.5,.3*v-.15),e.rotation.x=Math.PI/2,e.castShadow=!0,e.receiveShadow=!0,t.add(e)}const i=new Se(new $e(.16,16,16),n);i.position.set(0,.55,.2),i.castShadow=!0,i.receiveShadow=!0,t.add(i);const l=new Se(new $e(.14,16,16),e);l.position.set(0,.55,.4),l.castShadow=!0,l.receiveShadow=!0,t.add(l);const s=new _e({color:7877903,roughness:.4,metalness:.3}),r=new $e(.05,16,16),o=new Se(r,s);o.position.set(.1,.6,.4),t.add(o);const c=new Se(r,s);c.position.set(-.1,.6,.4),t.add(c);for(let v=0;v<2;v++){const a=new Se(new ke(.015,.015,.12,6),n),i=0===v?.08:-.08;a.position.set(i,.7,.38),a.rotation.x=-Math.PI/4,t.add(a);const l=new Se(new $e(.03,8,8),e);l.position.set(0,-.12,0),a.add(l)}const u=new Se(new ke(.015,.015,.08,6),n);u.position.set(0,.5,.5),u.rotation.x=Math.PI/6,t.add(u);const d=new _e({color:16777215,opacity:.8,transparent:!0,roughness:.3,metalness:.7,emissive:4937059,emissiveIntensity:.2}),h=new Re(.5,.45),f=new Se(h,d);f.position.set(.25,.6,0),f.rotation.z=Math.PI/8,f.castShadow=!0,f.receiveShadow=!0,t.add(f);const p=new Se(h,d);p.position.set(-.25,.6,0),p.rotation.z=-Math.PI/8,p.castShadow=!0,p.receiveShadow=!0,t.add(p);const m=new Re(.3,.25),g=new Se(m,d);g.position.set(.22,.55,-.15),g.rotation.z=Math.PI/5,g.castShadow=!0,g.receiveShadow=!0,t.add(g);const b=new Se(m,d);b.position.set(-.22,.55,-.15),b.rotation.z=-Math.PI/5,b.castShadow=!0,b.receiveShadow=!0,t.add(b);const w=new _e({color:0,roughness:.9,metalness:.05}),x=new ke(.025,.025,.25,8);for(let v=0;v<2;v++){const e=new Se(x,w),n=0===v?.2:-.2;e.position.set(n,.4,.2),e.rotation.z=0===v?Math.PI/5:-Math.PI/5,t.add(e)}for(let v=0;v<2;v++){const e=new Se(x,w),n=0===v?.22:-.22;e.position.set(n,.4,0),t.add(e)}for(let v=0;v<2;v++){const e=new Se(x,w),n=0===v?.2:-.2;e.position.set(n,.4,-.2),e.rotation.z=0===v?-Math.PI/5:Math.PI/5,t.add(e)}}}else if("sheep"===e||"sheep2"===e){const n=new _e({color:16777215,roughness:.65,metalness:.15}),a=new Se(new Ie(.3,3),n);a.position.set(0,.4,0),a.castShadow=!0,a.receiveShadow=!0,t.add(a);const i=new Se(new ze(.3,.3,.35),n);if(i.position.set(0,.6,.4),i.castShadow=!0,i.receiveShadow=!0,t.add(i),"sheep2"===e){for(let i=0;i<15;i++){const e=new Se(new $e(.1,8,8),n);e.position.set(.4*(Math.random()-.5),.4+.3*(Math.random()-.5),.4*(Math.random()-.5)),e.castShadow=!0,e.receiveShadow=!0,t.add(e)}const e=new _e({color:16498468,roughness:.4,metalness:.6}),a=new Se(new ke(.08,.1,.12,8),e);a.position.set(0,.2,0),a.castShadow=!0,a.receiveShadow=!0,t.add(a)}}else if("bear"===e||"bear2"===e){const n="bear2"===e,a=new _e({color:n?15790320:7877903,roughness:.9,metalness:.05,flatShading:!1}),i=new _e({color:n?14737632:9584654,roughness:.95,metalness:0}),l=new _e({color:n?1120295:2042167,roughness:.9,metalness:0}),s=new _e({color:n?13751771:10265519,roughness:.7,metalness:.2}),r=new Se(new Ae(n?.45:.4,n?.25:.275,8,16),a);r.position.set(0,1,0),r.rotation.z=0,r.castShadow=!0,r.receiveShadow=!0,t.add(r);const o=new Se(new Ae(.22,.3,8,8),a);o.position.set(0,.5,0),o.rotation.z=0,o.castShadow=!0,o.receiveShadow=!0,r.add(o);const c=new Se(new $e(n?.35:.32,16,16),a);c.position.set(0,.3,0),c.castShadow=!0,c.receiveShadow=!0,o.add(c);const u=new $e(.12,8,8),d=new Se(u,a);d.position.set(-.25,.25,0),d.scale.set(1,.8,1),d.castShadow=!0,d.receiveShadow=!0,c.add(d);const h=new Se(u,a);h.position.set(.25,.25,0),h.scale.set(1,.8,1),h.castShadow=!0,h.receiveShadow=!0,c.add(h);const f=new $e(.05,8,8),p=new Se(f,l);p.position.set(-.15,.1,.3),p.castShadow=!0,p.receiveShadow=!0,c.add(p);const m=new Se(f,l);m.position.set(.15,.1,.3),m.castShadow=!0,m.receiveShadow=!0,c.add(m);const g=new Se(new ke(.1,.08,.06,8),l);g.position.set(0,-.05,.33),g.rotation.x=Math.PI/2,g.castShadow=!0,g.receiveShadow=!0,c.add(g);const b=new Se(new ze(.18,.03,.05),l);b.position.set(0,-.12,.31),b.castShadow=!0,b.receiveShadow=!0,c.add(b);const w=new Ae(.15,.8,8,8),x=new Se(w,a);x.position.set(-.5,.3,.2),x.rotation.z=Math.PI/2,x.rotation.x=.1,x.castShadow=!0,x.receiveShadow=!0,r.add(x);const v=new Se(w,a);v.position.set(.5,.3,.2),v.rotation.z=-Math.PI/2,v.rotation.x=-.1,v.castShadow=!0,v.receiveShadow=!0,r.add(v);const y=new Ae(.18,.9,8,8),k=new Se(y,a);k.position.set(-.3,-.5,-.3),k.rotation.z=0,k.rotation.x=.1,k.castShadow=!0,k.receiveShadow=!0,r.add(k);const _=new Se(y,a);_.position.set(.3,-.5,-.3),_.rotation.z=0,_.rotation.x=-.1,_.castShadow=!0,_.receiveShadow=!0,r.add(_);const M=new $e(.2,8,8),S=new Se(M,i);S.position.set(-.4,.4,.3),S.castShadow=!0,S.receiveShadow=!0,r.add(S);const T=new Se(M,i);T.position.set(.4,.4,.3),T.castShadow=!0,T.receiveShadow=!0,r.add(T);const C=new $e(.22,8,8),D=new Se(C,i);D.position.set(-.3,-.3,-.3),D.castShadow=!0,D.receiveShadow=!0,r.add(D);const $=new Se(C,i);$.position.set(.3,-.3,-.3),$.castShadow=!0,$.receiveShadow=!0,r.add($);const N=new Se(new $e(.08,8,8),a);N.position.set(0,-.1,-.5),N.castShadow=!0,N.receiveShadow=!0,r.add(N);const E=(e,t)=>{for(let n=0;n<5;n++){const a=new Se(new ke(.03,.015,.1,4),s),i=.08*(n-2);a.position.set(0,-.4,t?-.1+i:.1-i),a.rotation.z=t?-.1:.1,a.rotation.y=t?-Math.PI/2:Math.PI/2,a.castShadow=!0,a.receiveShadow=!0,e.add(a)}},R=(e,t)=>{for(let n=0;n<5;n++){const a=new Se(new ke(.03,.02,.12,4),s),i=.1*(n-2);a.position.set(t?-.05+i:.05-i,-.45,0),a.rotation.z=t?.1:-.1,a.rotation.x=Math.PI/2,a.castShadow=!0,a.receiveShadow=!0,e.add(a)}};if(E(x,!0),E(v,!1),R(k,!0),R(_,!1),!n){const e=new Se(new $e(.22,16,16,0,2*Math.PI,0,Math.PI/3),i);e.position.set(0,0,.2),e.scale.set(1,.7,.8),e.castShadow=!0,e.receiveShadow=!0,c.add(e)}if(n){const e=new Se(new Pe(.3,.12,8,16),i);e.position.set(0,.6,0),e.rotation.x=Math.PI/2,e.castShadow=!0,e.receiveShadow=!0,r.add(e)}}else{const e=new _e({color:16777215,roughness:.7,metalness:.1}),n=new Se(new Ae(.2,.3,4,8),e);n.position.set(0,.3,0),n.castShadow=!0,n.receiveShadow=!0,t.add(n);const a=new Se(new $e(.2,16,16),e);a.position.set(0,.5,.3),a.castShadow=!0,a.receiveShadow=!0,t.add(a)}return t}createEntity(e,t,n){var a;if(!this.scene)return null;let i;const l=Cn.plants.some(t=>t.id===e),s=Cn.animals.some(t=>t.id===e);if(l?(i=this.createPlant(e),i.userData=i.userData||{},i.userData.isAnimal=!1,i.userData.isPlant=!0):s?(i=this.createAnimal(e),i.userData=i.userData||{},i.userData.isAnimal=!0,i.userData.isPlant=!1):(i=this.createPlant("pine"),i.userData=i.userData||{},i.userData.isAnimal=!1,i.userData.isPlant=!0),i instanceof Ne)i.position.set(t,2.5,n);else if(i.geometry){const e=(null==(a=i.geometry.parameters)?void 0:a.height)||0;i.position.set(t,2.5+e/2,n)}else i.position.set(t,2.5,n);return i.castShadow=!0,i.receiveShadow=!0,i}checkPositionValidity(e,t,n=1.5){if(Math.sqrt(e*e+t*t)>90-n)return!1;for(const a of this.entities)if(a&&a.position){const i=e-a.position.x,l=t-a.position.z;if(Math.sqrt(i*i+l*l)<1.5*n)return!1}return!0}generateValidPosition(e=1.5){let t=0;for(;t<100;){t++;const n=20,a=Math.random()*Math.PI*2,i=n+Math.random()*(90-n),l=Math.cos(a)*i,s=Math.sin(a)*i;if(this.checkPositionValidity(l,s,e))return{x:l,z:s}}const n=Math.random()*Math.PI*2,a=20+70*Math.random();return{x:Math.cos(n)*a,z:Math.sin(n)*a}}updateEcosystem(e){if(this.scene)try{const t=this.getThemeColors();this.ground&&this.ground.material.color.set(t.groundColor);const n=[...Cn.plants,...Cn.animals],a=Math.max(0,e),i=this.entities.length;if(a!==i)if(a>i)for(let e=i;e<a;e++){const e=n[Math.floor(Math.random()*n.length)],t=1.5,{x:a,z:i}=this.generateValidPosition(t),l=this.createEntity(e.id,a,i);if(l&&(l.scale.set(1,1,1),l.visible=!0,this.scene.add(l),this.entities.push(l),l instanceof Ne)&&Cn.animals.some(t=>t.id===e.id)){let t,n,a;switch(l.userData.isAnimal=!0,l.userData.originalPosition={x:l.position.x,y:l.position.y,z:l.position.z},l.userData.speciesId=e.id,e.id){case"rabbit":case"rabbit2":t=.008+.01*Math.random(),n=2+2*Math.random(),a=.15;break;case"fox":case"fox2":t=.015+.02*Math.random(),n=4+3*Math.random(),a=.15;break;default:t=.015+.02*Math.random(),n=4+3*Math.random(),a=.2}l.userData.speed=t,l.userData.angle=Math.random()*Math.PI*2,l.userData.waveOffset=Math.random()*Math.PI*2,l.userData.movementRadius=n,l.userData.jumpHeight=a}}else if(a<i)for(let e=i-1;e>=a;e--){const t=this.entities[e];t&&t.parent===this.scene&&this.scene.remove(t),this.entities.splice(e,1)}}catch(t){console.error("Error updating ecosystem:",t)}}updatePreview(e){if(this.scene)try{this.scene.traverse(e=>{"previewMesh"===e.name&&e.parent&&e.parent.remove(e)});const t=this.scene.getObjectByName("tomatoMesh"),n=t&&void 0!==t.visible&&t.visible;let a;const i=e.replace(/\d+$/,""),l=["rabbit","fox","panda","pig","chick","penguin","frog","sheep","bear","bee"];if(a=["pine","oak","cherry","willow","bamboo","palm","cactus","mushroom","sunflower","birch"].includes(i)?this.createPlant(e):l.includes(i)?this.createAnimal(e):this.createPlant("pine"),a.name="previewMesh",n){if(t){for(;t.children.length>0;)t.remove(t.children[0]);a.position.set(0,0,0),a.scale.set(.5,.5,.5),t.add(a)}}else{a.position.set(0,2.5,0),a.scale.set(0,0,0),a.castShadow=!0,a.receiveShadow=!0,a.renderOrder=1e3,this.scene.add(a);let e=0;const t=()=>{e+=.05,e<=2.5?(a.scale.set(e,e,e),requestAnimationFrame(t)):a.scale.set(2.5,2.5,2.5)};t()}this.previewMesh=a}catch(t){console.error("Error updating preview:",t)}}animate(){if(!this.scene||!this.camera||!this.renderer)return;const e=Date.now();e-(this.lastUpdateTime||0)<50||(this.lastUpdateTime=e,this.entities.forEach(t=>{if(t.userData&&t.userData.isAnimal){const n=t,a=n.userData.originalPosition,i=n.userData.speed;n.userData.angle+=i;const l=n.userData.movementRadius||3,s=a.x+Math.cos(n.userData.angle)*l,r=a.z+Math.sin(n.userData.angle)*l,o=Math.max(2.5,a.y),c=n.userData.jumpHeight||.1,u=o+Math.sin(.001*e+n.userData.waveOffset)*c;n.position.set(s,u,r),n.rotation.y=n.userData.angle+Math.PI/2}}),this.controls&&(this.controls.autoRotate||this.controls.isDragging||this.controls.isZooming)&&this.controls.update(),this.applyLOD(),this.renderer&&this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)),this.animationFrameId=requestAnimationFrame(()=>this.animate())}applyLOD(){this.scene&&this.camera&&this.entities.forEach(e=>{const t=this.camera.position.distanceTo(e.position);t>100?e.traverse(e=>{e instanceof Se&&(e.castShadow=!1,e.receiveShadow=!1)}):t>50?e.traverse(e=>{e instanceof Se&&(e.castShadow=!0,e.receiveShadow=!1)}):e.traverse(e=>{e instanceof Se&&(e.castShadow=!0,e.receiveShadow=!0)})})}updateScene(e,t,n,a,i){this.updateTheme(e,a,i),this.updateEcosystem(t),this.updatePreview(n)}dispose(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.controls&&(this.controls.dispose(),this.controls=null),this.renderer&&(this.renderer.dispose(),this.renderer=null),this.scene&&(this.scene.traverse(e=>{e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose())}),this.scene=null),this.camera=null,this.entities=[]}}const $n=({theme:t,totalPlants:n,currentSeed:a,isFocusing:i,isPaused:l,onEntityCreated:s})=>{const r=e.useRef(null),o=e.useRef(null),c=e.useRef(null);return e.useEffect(()=>{if(!r.current||!o.current)return;const e=new Dn;return e.init(o.current,r.current),c.current=e,()=>{c.current&&(c.current.dispose(),c.current=null)}},[]),e.useEffect(()=>{c.current&&c.current.updateScene(t,n,a,i,l)},[t,n,a,i,l]),qe.jsx("div",{ref:r,className:"fixed inset-0 w-full h-full overflow-hidden",children:qe.jsx("canvas",{ref:o,className:"w-full h-full"})})},Nn=({theme:t,onExitImmersive:n,totalPlants:a,todayPlants:i,timeLeft:l,isActive:s,duration:r,onUpdateTimeLeft:o,onUpdateIsActive:u,isMuted:d,currentSoundId:h,onUpdateTotalPlants:f,onUpdateTodayPlants:p})=>{const m=e.useRef(null);e.useState(!1);const[g,b]=e.useState("pine"),[w,x]=e.useState(s),[v,y]=e.useState(!1),[k,_]=e.useState(l),[M,S]=e.useState(60*r),[T,C]=e.useState(!1),[D,$]=e.useState(!1),[N,E]=e.useState(!1),[R,A]=e.useState(""),[P,O]=e.useState(null),[j,L]=e.useState(()=>{const e=localStorage.getItem("immersionPomodoro_totalPlants");return e?parseInt(e):a||20}),[B,F]=e.useState(()=>{const e=localStorage.getItem("immersionPomodoro_todayPlants");return e?parseInt(e):i||0}),[U,H]=e.useState(!1),[W,G]=e.useState(null),[J,K]=e.useState(()=>{const e=localStorage.getItem("immersionPomodoro_mode");return"3d"===e||"timebox"===e?e:"3d"}),q=e.useCallback(()=>{const e="3d"===J?"timebox":"3d";K(e),localStorage.setItem("immersionPomodoro_mode",e)},[J]),X=e.useRef(null),Y=e.useRef(null),{currentBgMusicId:Q}=Xt(),{toggleTheme:Z}=st();e.useEffect(()=>{let e;return w&&!v&&k>0?(console.log("Starting timer interval"),e=window.setInterval(()=>{_(t=>{const n=t-1;if(console.log("Updating time:",n),o(n),n<=0){e&&clearInterval(e);const t=j+1;L(t),f&&f(t);const n=B+1;return F(n),p&&p(n),setTimeout(()=>{_(M),o(M),x(!1),y(!1)},1e3),0}return n})},1e3)):e&&(console.log("Clearing timer interval"),clearInterval(e)),()=>{e&&(console.log("Cleaning up timer interval"),clearInterval(e))}},[w,v,k,M]);const ee=e.useCallback(e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},[]),te=e.useCallback(e=>{b(e)},[]),ne=e.useCallback(()=>{x(!0),y(!1),u(!0)},[u]),ae=e.useCallback(()=>{const e=!v;y(e),u(!e)},[v,u]),ie=e.useCallback(()=>{x(!1),y(!1),_(M),o(M),u(!1)},[M,o,u]),le=e.useCallback(e=>{const t=60*e;S(t),_(t),o(t)},[o]),se=e.useCallback(()=>{C(!0),A(j.toString()),setTimeout(()=>{var e;const t=null==(e=X.current)?void 0:e.querySelector("input");null==t||t.focus(),null==t||t.select()},0)},[j]);e.useCallback(()=>{$(!0),A(B.toString()),setTimeout(()=>{var e;const t=null==(e=Y.current)?void 0:e.querySelector("input");null==t||t.focus(),null==t||t.select()},0)},[B]);const re=e.useCallback(e=>{const t=parseInt(R);!isNaN(t)&&t>=0&&("total"===e?(L(t),localStorage.setItem("immersionPomodoro_totalPlants",t.toString()),f&&f(t)):(F(t),localStorage.setItem("immersionPomodoro_todayPlants",t.toString()),p&&p(t))),C(!1),$(!1)},[R,f,p]),oe=e.useCallback(e=>{E(!0),O(e),A(e.toString()),setTimeout(()=>{const t=document.querySelector(`#preset-${e}`);null==t||t.focus(),null==t||t.select()},0)},[]),ce=e.useCallback(()=>{const e=parseInt(R);!isNaN(e)&&e>0&&null!==P&&le(e),E(!1),O(null)},[R,P,le]),ue=e.useCallback((e,t)=>{"Enter"===e.key||13===e.keyCode?"preset"===t?ce():re(t):"Escape"!==e.key&&27!==e.keyCode||(C(!1),$(!1),E(!1),O(null))},[re,ce]),de=t.includes("dark"),he=t.startsWith("neomorphic"),fe="neomorphic-dark"===t;return qe.jsx("div",{className:"fixed inset-0 z-50 flex flex-col bg-transparent",children:qe.jsx("div",{ref:m,className:"absolute inset-0 w-full h-full",children:"3d"===J?qe.jsxs(qe.Fragment,{children:[qe.jsx($n,{theme:t,totalPlants:j,currentSeed:g,isFocusing:w,isPaused:v,onEntityCreated:e=>{console.log("Entity created:",e)}}),qe.jsxs("div",{className:"fixed top-0 right-0 flex items-center justify-end gap-4 p-4 z-10",children:[qe.jsx("button",{className:"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 "+(he?de?"border border-zinc-700 shadow-[5px_5px_10px_rgba(0,0,0,0.3),-5px_-5px_10px_rgba(40,43,52,0.8)] hover:shadow-[7px_7px_14px_rgba(0,0,0,0.4),-7px_-7px_14px_rgba(40,43,52,1)] active:shadow-[inset_5px_5px_10px_rgba(0,0,0,0.3),inset_-5px_-5px_10px_rgba(40,43,52,0.8)]":"border border-slate-300 shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] hover:shadow-[7px_7px_14px_rgba(163,177,198,0.7),-7px_-7px_14px_rgba(255,255,255,1)] active:shadow-[inset_5px_5px_10px_rgba(163,177,198,0.6),inset_-5px_-5px_10px_rgba(255,255,255,1)]":de?"text-zinc-300 hover:text-blue-400 hover:bg-zinc-800/50":"text-zinc-500 hover:text-blue-400 hover:bg-white/10"),onClick:q,title:"",style:{background:"3d"===J?`linear-gradient(90deg, #2563eb 50%, ${de?"#1e1e2e":"#e0e5ec"} 50%)`:`linear-gradient(90deg, ${de?"#1e1e2e":"#e0e5ec"} 50%, #2563eb 50%)`,backgroundSize:"100% 100%",transition:"background 0.4s ease, box-shadow 0.3s ease, transform 0.2s ease",boxShadow:he?de?"5px 5px 10px rgba(0,0,0,0.3), -5px -5px 10px rgba(40,43,52,0.8)":"5px 5px 10px rgba(163,177,198,0.6), -5px -5px 10px rgba(255,255,255,1)":"none"}}),qe.jsx("button",{className:"exit-btn",id:"exitBtn",onClick:n,children:""})]}),qe.jsxs("div",{className:"ui-container",children:[qe.jsx("div",{className:"stats-bar "+(w&&!v?"hidden":""),children:qe.jsx("div",{ref:X,className:(fe?"neu-out neomorphic-dark-mode":de?"neu-out dark-mode":"neu-out")+" stats-panel relative w-auto min-w-[240px] p-2 px-4",id:"statsTotal",onDoubleClick:se,children:qe.jsxs("div",{className:"flex items-center justify-between",children:[qe.jsxs("div",{className:"flex items-center gap-4",children:[qe.jsxs("div",{className:"flex items-center gap-2",children:[qe.jsx("span",{className:"text-xs",children:" "}),T?qe.jsx("div",{className:"highlight-num edit-mode",children:qe.jsx("input",{type:"number",min:"0",value:R,onChange:e=>A(e.target.value),onBlur:()=>{re("total"),C(!1)},onKeyDown:e=>ue(e,"total"),className:"edit-input text-xs"})}):qe.jsx("span",{className:"highlight-num text-xs",id:"totalCount",children:j})]}),qe.jsx("div",{className:"h-4 w-px bg-gray-300"})," ",qe.jsxs("div",{className:"flex items-center gap-2",children:[qe.jsx("span",{className:"text-xs",children:" "}),D?qe.jsx("div",{className:"highlight-num edit-mode",children:qe.jsx("input",{type:"number",min:"0",value:R,onChange:e=>A(e.target.value),onBlur:()=>{re("today"),$(!1)},onKeyDown:e=>ue(e,"today"),className:"edit-input text-xs"})}):qe.jsx("span",{className:"highlight-num text-xs",id:"todayCount",children:B})]})]}),qe.jsxs("div",{className:"flex items-center gap-4 ml-auto pl-8",children:[qe.jsx("button",{className:"p-2 rounded-full transition-all duration-300 hover:scale-110 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:Z,title:"/",children:de?qe.jsx(I,{size:18,className:"text-yellow-400"}):qe.jsx(z,{size:18,className:"text-gray-600"})}),qe.jsx("button",{className:"p-2 rounded-full transition-all duration-300 hover:scale-110 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>G("pomodoro-guide"),title:"",children:qe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-500",children:[qe.jsx("circle",{cx:"12",cy:"12",r:"10"}),qe.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),qe.jsx("path",{d:"M12 17h.01"})]})})]})]})})}),qe.jsx(bt,{activeHelp:W,helpContent:xt,onClose:()=>G(null),config:{cardBg:de?"#1a202c":"#ffffff",textMain:de?"#f7fafc":"#1a202c",textSub:de?"#a0aec0":"#4a5568",buttonBg:de?"#4a5568":"#e2e8f0",buttonHoverBg:de?"#718096":"#cbd5e0",borderRadius:"8px",shadow:de?"0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2)":"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",maxWidth:"500px",fontSize:"0.875rem",iconSize:20}}),qe.jsxs("div",{className:"controls",children:[qe.jsxs("div",{className:"controls-row "+(w&&!v?"hidden":""),id:"controlsRow",children:[qe.jsx("div",{id:"presetGroup",className:"flex gap-2",children:[1,5,10,25,30,45,60].map(e=>qe.jsx("div",{className:"relative",children:qe.jsx("button",{className:"preset-btn "+(Math.floor(M/60)===e?"active":""),"data-time":e,onClick:()=>le(e),onDoubleClick:()=>oe(e),children:e})},e))}),qe.jsxs("div",{className:"audio-dropdown relative",children:[qe.jsx("button",{className:"p-2.5 rounded-full transition-all duration-300 hover:scale-105 active:scale-95 "+(he?de?"bg-[#1e1e2e] border border-zinc-700 shadow-[3px_3px_6px_rgba(0,0,0,0.3),-3px_-3px_6px_rgba(40,43,52,0.8)] hover:shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(40,43,52,1)] active:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.3),inset_-4px_-4px_8px_rgba(40,43,52,0.8)] text-zinc-300":"bg-[#e0e5ec] border border-slate-300 shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] hover:shadow-[5px_5px_10px_rgba(163,177,198,0.7),-5px_-5px_10px_rgba(255,255,255,1)] active:shadow-[inset_4px_4px_8px_rgba(163,177,198,0.6),inset_-4px_-4px_8px_rgba(255,255,255,1)] text-zinc-600":de?"text-zinc-300 hover:text-blue-400 hover:bg-zinc-800/50":"text-zinc-500 hover:text-blue-400 hover:bg-white/10"),onClick:()=>H(!U),title:"",children:"mute"===Q?qe.jsx(V,{size:18,className:de?"text-zinc-300":"text-zinc-600"}):qe.jsx(c,{size:18,className:de?"text-zinc-300":"text-zinc-600"})}),qe.jsx(en,{theme:t,isVisible:U,onClose:()=>H(!1),className:"absolute top-full right-0 mt-2 mr-2"})]})]}),qe.jsxs("div",{className:`focus-ring-container ${w?"focusing":""} ${v?"paused":""}`,id:"focusRing",onClick:w?ae:ne,children:[qe.jsx("div",{className:"ring-groove",children:qe.jsxs("svg",{className:"progress-ring",viewBox:"0 0 240 240",children:[qe.jsx("circle",{className:"progress-ring__circle-bg",r:"114",cx:"120",cy:"120"}),qe.jsx("circle",{className:"progress-ring__circle",id:"progressCircle",r:"114",cx:"120",cy:"120",style:{strokeDasharray:716,strokeDashoffset:716-k/M*716}})]})}),qe.jsxs("div",{className:"center-plate",children:[qe.jsx("div",{className:"timer-text",id:"timer",children:ee(k)}),qe.jsx("div",{className:"status-text",id:"statusText",children:w?v?" ()":"...":""})]})]})]}),qe.jsx("div",{className:`${fe?"neu-out neomorphic-dark-mode":de?"neu-out dark-mode":"neu-out"} seed-selector ${w&&!v?"hidden":""}`,id:"seedSelector",children:[...Cn.plants,...Cn.animals].map((e,t)=>qe.jsxs("div",{id:`opt-${e.id}`,className:"seed-option "+(g===e.id?"active":""),onClick:()=>te(e.id),children:[qe.jsx("div",{className:"seed-number",children:t+1}),qe.jsx("div",{className:"seed-icon",children:e.icon}),qe.jsx("div",{className:"seed-name",children:e.name})]},e.id))})]})]}):qe.jsxs("div",{className:`fixed inset-0 ${fe?"bg-[#1e1e2e]":de?"bg-[#1a202c]":"bg-[#e0e5ec]"} flex items-center justify-center z-[100000]`,children:[qe.jsxs("div",{className:"fixed top-0 right-0 flex items-center justify-end gap-4 p-4 z-10",children:[qe.jsx("button",{className:"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 "+(he?de?"border border-zinc-700 shadow-[5px_5px_10px_rgba(0,0,0,0.3),-5px_-5px_10px_rgba(40,43,52,0.8)] hover:shadow-[7px_7px_14px_rgba(0,0,0,0.4),-7px_-7px_14px_rgba(40,43,52,1)] active:shadow-[inset_5px_5px_10px_rgba(0,0,0,0.3),inset_-5px_-5px_10px_rgba(40,43,52,0.8)]":"border border-slate-300 shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] hover:shadow-[7px_7px_14px_rgba(163,177,198,0.7),-7px_-7px_14px_rgba(255,255,255,1)] active:shadow-[inset_5px_5px_10px_rgba(163,177,198,0.6),inset_-5px_-5px_10px_rgba(255,255,255,1)]":de?"text-zinc-300 hover:text-blue-400 hover:bg-zinc-800/50":"text-zinc-500 hover:text-blue-400 hover:bg-white/10"),onClick:q,title:"",style:{background:"3d"===J?`linear-gradient(90deg, #2563eb 50%, ${de?"#1e1e2e":"#e0e5ec"} 50%)`:`linear-gradient(90deg, ${de?"#1e1e2e":"#e0e5ec"} 50%, #2563eb 50%)`,backgroundSize:"100% 100%",transition:"background 0.4s ease, box-shadow 0.3s ease, transform 0.2s ease",boxShadow:he?de?"5px 5px 10px rgba(0,0,0,0.3), -5px -5px 10px rgba(40,43,52,0.8)":"5px 5px 10px rgba(163,177,198,0.6), -5px -5px 10px rgba(255,255,255,1)":"none"}}),qe.jsx("button",{className:"exit-btn",id:"exitBtn",onClick:n,children:""})]}),qe.jsxs("div",{className:"flex flex-col items-center justify-center",children:[qe.jsxs("div",{className:"relative w-96 h-96 mb-10",children:[qe.jsx("div",{className:"absolute inset-0 rounded-full "+(he?de?"bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.3),-5px_-5px_10px_rgba(40,43,52,0.8)]":"bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)]":"")}),qe.jsxs("svg",{className:"absolute inset-0",width:"100%",height:"100%",viewBox:"0 0 300 300",children:[qe.jsx("circle",{cx:"150",cy:"150",r:"130",fill:"none",stroke:de?"rgba(30, 64, 175, 0.3)":"rgba(30, 64, 175, 0.2)",strokeWidth:"12"}),qe.jsx("circle",{cx:"150",cy:"150",r:"130",fill:"none",stroke:de?"#3b82f6":"#2563eb",strokeWidth:"12",strokeLinecap:"round",transform:"rotate(-90 150 150)",strokeDasharray:""+2*Math.PI*130,strokeDashoffset:""+2*Math.PI*130*(1-k/M),className:"transition-all duration-1000 ease-linear"})]}),qe.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[qe.jsx("h2",{className:"text-2xl font-semibold mb-4 text-center "+(de?"text-zinc-100":"text-zinc-800"),children:""}),qe.jsx("h3",{className:"text-xl font-medium mb-6 text-center "+(de?"text-blue-300":"text-blue-600"),children:""}),qe.jsx("span",{className:"text-7xl font-bold "+(de?"text-zinc-100":"text-zinc-800"),children:ee(k)})]})]}),qe.jsxs("div",{className:"flex space-x-8",children:[qe.jsx("button",{onClick:()=>w?ae():ne(),className:`px-10 py-4 rounded-lg text-base font-medium transition-all ${he?de?"bg-[#1e1e2e] border border-zinc-700 shadow-[5px_5px_10px_rgba(0,0,0,0.3),-5px_-5px_10px_rgba(40,43,52,0.8)] hover:shadow-[inset_5px_5px_10px_rgba(0,0,0,0.3),inset_-5px_-5px_10px_rgba(40,43,52,0.8)]":"bg-[#e0e5ec] border border-slate-300 shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] hover:shadow-[inset_5px_5px_10px_rgba(163,177,198,0.6),inset_-5px_-5px_10px_rgba(255,255,255,1)]":""} ${de?"text-zinc-300":"text-zinc-600"}`,children:w?"":""}),qe.jsx("button",{onClick:()=>{ie(),n()},className:`px-10 py-4 rounded-lg text-base font-medium transition-all ${he?de?"bg-[#1e1e2e] border border-zinc-700 shadow-[5px_5px_10px_rgba(0,0,0,0.3),-5px_-5px_10px_rgba(40,43,52,0.8)] hover:shadow-[inset_5px_5px_10px_rgba(0,0,0,0.3),inset_-5px_-5px_10px_rgba(40,43,52,0.8)]":"bg-[#e0e5ec] border border-slate-300 shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] hover:shadow-[inset_5px_5px_10px_rgba(163,177,198,0.6),inset_-5px_-5px_10px_rgba(255,255,255,1)]":""} ${de?"text-zinc-300":"text-zinc-600"}`,children:""})]})]})]})})})},En=({theme:e,balance:t,totalKills:n=0,isEditingBalance:a,isEditingKills:i,tempBalance:l,tempKills:s,setIsEditingBalance:r,setIsEditingKills:c,setTempBalance:u,setTempKills:d,handleSaveBalance:f,handleSaveKills:p,onHelpClick:m})=>{const g="dark"===e||"neomorphic-dark"===e;return e.startsWith("neomorphic"),qe.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 w-full",children:[qe.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:qe.jsxs("span",{className:"text-xs text-zinc-500 uppercase font-bold flex items-center gap-1",children:[qe.jsx(h,{size:12})," "]})}),qe.jsx("div",{className:"flex-1"}),qe.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[qe.jsx(W,{size:12,className:"text-yellow-500"}),qe.jsx("span",{className:"text-zinc-500",children:""}),a?qe.jsx("input",{autoFocus:!0,type:"number",className:"text-xs font-mono font-bold text-center bg-transparent border-b outline-none w-10 "+(g?"text-yellow-400 border-yellow-600":"text-yellow-600 border-yellow-400"),value:l,onChange:e=>u(e.target.value),onBlur:f,onKeyDown:e=>"Enter"===e.key&&f()}):qe.jsx("span",{className:`text-xs font-mono font-black ${g?"text-yellow-400":"text-yellow-600"} cursor-pointer`,onDoubleClick:()=>r(!0),children:Math.floor(t)})]}),qe.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[qe.jsx(o,{size:12,className:"text-red-500"}),qe.jsx("span",{className:"text-zinc-500",children:""}),i?qe.jsx("input",{autoFocus:!0,type:"number",className:"text-xs font-mono font-bold text-center bg-transparent border-b outline-none w-10 "+(g?"text-red-400 border-red-600":"text-red-600 border-red-400"),value:s,onChange:e=>d(e.target.value),onBlur:p,onKeyDown:e=>"Enter"===e.key&&p()}):qe.jsx("span",{className:`text-xs font-mono font-black ${g?"text-red-400":"text-red-600"} cursor-pointer`,onDoubleClick:()=>c(!0),children:n}),m&&qe.jsx(wt,{helpId:"military",onHelpClick:m,size:14,className:"hover:scale-[1.1] ml-1"})]})]})},Rn=({theme:e,mantras:t,currentMantraIndex:n,cycleMantra:a,setIsMantraModalOpen:i,onHelpClick:l})=>{const s="dark"===e||"neomorphic-dark"===e,r=e.startsWith("neomorphic");return qe.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 w-full",children:[qe.jsxs("div",{className:"flex items-center gap-2 flex-1 overflow-hidden",children:[qe.jsx("button",{onClick:()=>i(!0),className:"flex items-center gap-1 flex-shrink-0 transition-colors hover:text-blue-400",title:"",children:qe.jsxs("span",{className:"text-xs text-zinc-500 uppercase font-bold flex items-center gap-1",children:[qe.jsx(G,{size:12,className:"text-purple-500"}),""]})}),qe.jsxs("div",{className:"text-xs font-bold text-left cursor-pointer select-none hover:text-blue-400 transition-colors truncate relative group "+("neomorphic-dark"===e?"text-zinc-300":r?"text-zinc-700":s?"text-zinc-300":"text-slate-700"),onClick:a,children:['"',t[n],'"']})]}),l&&qe.jsx(wt,{helpId:"mantra",onHelpClick:l,size:14,className:"hover:scale-[1.1]"})]})},zn=["","","","","","","","","","","","","","","","","","","","","","","","",""," > ","","","","30%","","","","","","","","","","","","","","","20%80%","","","","","1%","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","10","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],In=({isOpen:t,onClose:n,mantras:a,onAddMantra:i,onDeleteMantra:l,onUpdateMantra:s,theme:r})=>{const[o,c]=e.useState(""),[u,d]=e.useState(null),[h,f]=e.useState("");if(!t)return null;const p="dark"===r||"neomorphic-dark"===r,m=r.startsWith("neomorphic"),g=()=>{o.trim()&&(i(o.trim()),c(""))},b=e=>{h.trim()&&(s(e,h.trim()),d(null))};return qe.jsx("div",{className:"fixed inset-0 z-[2000] bg-black/80 flex items-center justify-center p-2 sm:p-4 backdrop-blur-md animate-in fade-in",children:qe.jsxs("div",{className:(m?"neomorphic-dark"===r?"bg-[#1e1e2e] shadow-[10px_10px_20px_rgba(0,0,0,0.4),-10px_-10px_20px_rgba(30,30,46,0.8)]":"bg-[#e0e5ec] shadow-[10px_10px_20px_rgba(163,177,198,0.6),-10px_-10px_20px_rgba(255,255,255,1)]":p?"bg-zinc-900 border-zinc-800":"bg-white border-slate-200")+" border rounded-2xl sm:rounded-[48px] p-4 sm:p-6 w-full max-w-2xl overflow-y-auto max-h-[90vh] transition-all duration-300",children:[qe.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[qe.jsx("h2",{className:"text-lg sm:text-xl font-bold "+(p?"text-white":m?"text-zinc-800":"text-slate-800"),children:""}),qe.jsx("button",{onClick:n,className:"p-2 sm:p-3 rounded-full transition-colors "+(m?"neomorphic-dark"===r?"bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] hover:shadow-[3px_3px_6px_rgba(0,0,0,0.5),-3px_-3px_6px_rgba(30,30,46,0.8)]":"bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] hover:shadow-[3px_3px_6px_rgba(163,177,198,0.5),-3px_-3px_6px_rgba(255,255,255,1)] active:shadow-[inset_5px_5px_10px_rgba(163,177,198,0.6),inset_-5px_-5px_10px_rgba(255,255,255,1)]":p?"hover:bg-zinc-700 text-white":"hover:bg-slate-100 text-slate-800"),children:qe.jsx(j,{size:20,className:p?"text-white":m?"text-zinc-800":"text-slate-800"})})]}),qe.jsxs("div",{className:"mb-4 sm:mb-6",children:[qe.jsx("h3",{className:"text-sm font-medium mb-2 "+(p?"text-zinc-300":m?"text-zinc-700":"text-slate-700"),children:""}),qe.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[qe.jsx("input",{type:"text",placeholder:"...",value:o,onChange:e=>c(e.target.value),onKeyDown:e=>"Enter"===e.key&&g(),className:`flex-1 px-4 py-3 rounded-xl sm:rounded-[24px] transition-all ${m?"neomorphic-dark"===r?"bg-[#1e1e2e] shadow-[inset_5px_5px_10px_rgba(0,0,0,0.4),inset_-5px_-5px_10px_rgba(30,30,46,0.8)] text-white placeholder-zinc-500":"bg-[#e0e5ec] shadow-[inset_5px_5px_10px_rgba(163,177,198,0.6),inset_-5px_-5px_10px_rgba(255,255,255,1)] text-zinc-800 placeholder-zinc-500":p?"bg-zinc-800 border-zinc-700 text-white placeholder-zinc-500":"bg-slate-50 border-slate-300 text-slate-800 placeholder-slate-400"} border focus:outline-none focus:ring-2 focus:ring-blue-500`}),qe.jsx("button",{onClick:g,className:"px-4 py-3 rounded-xl sm:rounded-[24px] transition-all font-medium "+(m?"neomorphic-dark"===r?"bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] text-white hover:shadow-[3px_3px_6px_rgba(0,0,0,0.5),-3px_-3px_6px_rgba(30,30,46,0.8)]":"bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] hover:shadow-[3px_3px_6px_rgba(163,177,198,0.5),-3px_-3px_6px_rgba(255,255,255,1)] active:shadow-[inset_5px_5px_10px_rgba(163,177,198,0.6),inset_-5px_-5px_10px_rgba(255,255,255,1)] text-zinc-800":p?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"),children:""})]})]}),qe.jsxs("div",{children:[qe.jsxs("h3",{className:"text-sm font-medium mb-3 "+(p?"text-zinc-300":m?"text-zinc-700":"text-slate-700"),children:[" (",a.length,")"]}),qe.jsx("div",{className:"space-y-3",children:a.map((e,t)=>qe.jsx("div",{className:`flex items-center justify-between p-3 rounded-[24px] transition-all ${m?"neomorphic-dark"===r?"bg-[#1e1e2e] shadow-[5px_5px_10px_rgba(0,0,0,0.4),-5px_-5px_10px_rgba(30,30,46,0.8)] hover:shadow-[3px_3px_6px_rgba(0,0,0,0.5),-3px_-3px_6px_rgba(30,30,46,0.8)]":"bg-[#e0e5ec] shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)] hover:shadow-[3px_3px_6px_rgba(163,177,198,0.5),-3px_-3px_6px_rgba(255,255,255,1)] active:shadow-[inset_5px_5px_10px_rgba(163,177,198,0.6),inset_-5px_-5px_10px_rgba(255,255,255,1)]":p?"bg-zinc-800 border-zinc-700":"bg-slate-50 border-slate-300"} border`,children:u===t?qe.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[qe.jsx("input",{type:"text",value:h,onChange:e=>f(e.target.value),onKeyDown:e=>"Enter"===e.key&&b(t),autoFocus:!0,className:`flex-1 px-3 py-1.5 rounded-[16px] transition-all ${m?"neomorphic-dark"===r?"bg-[#1e1e2e] shadow-[inset_4px_4px_8px_rgba(0,0,0,0.4),inset_-4px_-4px_8px_rgba(30,30,46,0.8)] text-white":"bg-[#e0e5ec] shadow-[inset_4px_4px_8px_rgba(163,177,198,0.6),inset_-4px_-4px_8px_rgba(255,255,255,1)] text-zinc-800":p?"bg-zinc-700 border-zinc-600 text-white":"bg-white border-slate-300 text-slate-800"} border focus:outline-none focus:ring-2 focus:ring-blue-500`}),qe.jsx("button",{onClick:()=>b(t),className:"px-3 py-1.5 rounded-[16px] text-sm transition-all "+(m?"neomorphic-dark"===r?"bg-[#1e1e2e] shadow-[4px_4px_8px_rgba(0,0,0,0.4),-4px_-4px_8px_rgba(30,30,46,0.8)] text-white hover:shadow-[2px_2px_4px_rgba(0,0,0,0.5),-2px_-2px_4px_rgba(30,30,46,0.8)]":"bg-[#e0e5ec] shadow-[4px_4px_8px_rgba(163,177,198,0.6),-4px_-4px_8px_rgba(255,255,255,1)] hover:shadow-[2px_2px_4px_rgba(163,177,198,0.5),-2px_-2px_4px_rgba(255,255,255,1)] active:shadow-[inset_4px_4px_8px_rgba(163,177,198,0.6),inset_-4px_-4px_8px_rgba(255,255,255,1)] text-zinc-800":p?"bg-green-600 hover:bg-green-700 text-white":"bg-green-500 hover:bg-green-600 text-white"),children:""})]}):qe.jsxs("div",{className:"flex items-center justify-between flex-1",children:[qe.jsx("span",{className:p?"text-zinc-200":m?"text-zinc-800":"text-slate-700",children:e}),qe.jsxs("div",{className:"flex gap-1.5",children:[qe.jsx("button",{onClick:()=>{d(t),f(e)},className:"p-1.5 rounded-full transition-colors "+(m?"neomorphic-dark"===r?"bg-[#1e1e2e] shadow-[3px_3px_6px_rgba(0,0,0,0.4),-3px_-3px_6px_rgba(30,30,46,0.8)] hover:shadow-[2px_2px_4px_rgba(0,0,0,0.5),-2px_-2px_4px_rgba(30,30,46,0.8)]":"bg-[#e0e5ec] shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] hover:shadow-[2px_2px_4px_rgba(163,177,198,0.5),-2px_-2px_4px_rgba(255,255,255,1)] active:shadow-[inset_3px_3px_6px_rgba(163,177,198,0.6),inset_-3px_-3px_6px_rgba(255,255,255,1)] text-zinc-700":p?"hover:bg-zinc-700 text-blue-400":"hover:bg-slate-200 text-blue-600"),title:"",children:qe.jsx(J,{size:16,className:p?"text-blue-400":m?"text-zinc-700":"text-blue-600"})}),qe.jsx("button",{onClick:()=>l(t),className:"p-1.5 rounded-full transition-colors "+(m?"neomorphic-dark"===r?"bg-[#1e1e2e] shadow-[3px_3px_6px_rgba(0,0,0,0.4),-3px_-3px_6px_rgba(30,30,46,0.8)] hover:shadow-[2px_2px_4px_rgba(0,0,0,0.5),-2px_-2px_4px_rgba(30,30,46,0.8)]":"bg-[#e0e5ec] shadow-[3px_3px_6px_rgba(163,177,198,0.6),-3px_-3px_6px_rgba(255,255,255,1)] hover:shadow-[2px_2px_4px_rgba(163,177,198,0.5),-2px_-2px_4px_rgba(255,255,255,1)] active:shadow-[inset_3px_3px_6px_rgba(163,177,198,0.6),inset_-3px_-3px_6px_rgba(255,255,255,1)] text-zinc-700":p?"hover:bg-zinc-700 text-red-400":"hover:bg-slate-200 text-red-600"),title:"",children:qe.jsx(K,{size:16,className:p?"text-red-400":m?"text-zinc-700":"text-red-600"})})]})]})},t))})]})]})})},An=[{min:0,title:""},{min:200,title:""},{min:500,title:""},{min:1e3,title:""},{min:2e3,title:""},{min:3500,title:""},{min:5e3,title:""},{min:8e3,title:""},{min:12e3,title:""},{min:18e3,title:""},{min:25e3,title:""},{min:35e3,title:""},{min:5e4,title:""},{min:75e3,title:""},{min:1e5,title:""},{min:15e4,title:""},{min:25e4,title:""},{min:5e5,title:""}],Pn=[{min:5,title:""},{min:15,title:""},{min:30,title:""},{min:50,title:""},{min:80,title:""},{min:120,title:""},{min:180,title:""},{min:250,title:""},{min:350,title:""},{min:500,title:""},{min:700,title:""},{min:1e3,title:""},{min:1500,title:""},{min:2e3,title:""},{min:3e3,title:""},{min:5e3,title:""},{min:8e3,title:""},{min:1e4,title:""}],On=[{min:50,title:""},{min:150,title:""},{min:300,title:""},{min:500,title:""},{min:800,title:""},{min:1500,title:""},{min:2500,title:""},{min:4e3,title:""},{min:6e3,title:""},{min:1e4,title:""},{min:2e4,title:""},{min:5e4,title:""},{min:1e5,title:""},{min:25e4,title:""},{min:5e5,title:""},{min:1e6,title:""},{min:5e6,title:""},{min:1e7,title:""}],jn=[{min:0,title:""},{min:5,title:""},{min:15,title:""},{min:30,title:""},{min:50,title:""},{min:80,title:""},{min:120,title:""},{min:180,title:""},{min:250,title:""},{min:350,title:""},{min:500,title:""},{min:700,title:""},{min:1e3,title:""},{min:1500,title:""},{min:2e3,title:""},{min:3e3,title:""},{min:5e3,title:""}],Ln=()=>An,Bn=()=>Pn,Fn=()=>On,Un=()=>jn,Hn=e.forwardRef(function(t,n){const{theme:a,xp:i,balance:l,totalHours:s,totalKills:r=0,onUpdateBalance:o,timeLeft:c,isActive:u,duration:d,onToggleTimer:h,onResetTimer:f,onChangeDuration:p,onUpdateTimeLeft:m,onUpdateIsActive:g,onImmersiveModeChange:b,onHelpClick:w,onLevelChange:x,onUpdateTodayStats:v,settings:y={showCharacterSystem:!0,showPomodoroSystem:!0,showFocusTimeSystem:!0,showCheckinSystem:!0,showAchievementCollectionRate:!0,showSystemStabilityModule:!0,showLatestBadges:!0,showChartSummary:!0,showSupplyMarket:!0}}=t,k=a.includes("dark"),_=a.startsWith("neomorphic")?"neomorphic-dark"===a?"bg-[#1e1e2e] border-[#1e1e2e] rounded-lg shadow-[8px_8px_16px_rgba(0,0,0,0.4),-8px_-8px_16px_rgba(30,30,46,0.8)] transition-all duration-300":"bg-[#e0e5ec] border-[#e0e5ec] rounded-lg shadow-[10px_10px_20px_rgba(163,177,198,0.6),-10px_-10px_20px_rgba(255,255,255,1)] transition-all duration-300":k?"bg-zinc-900 border-zinc-800":"bg-white border-slate-200",{isMuted:M,currentBgMusicId:S,playBgMusic:T,playSoundEffect:C}=Xt(),[$,N]=e.useState(zn),[E,R]=e.useState(0),[z,I]=e.useState(!1);e.useState(!1);const[A,P]=e.useState(!1),[O,j]=e.useState(!1);e.useState(!1);const[L,B]=e.useState(!1),[F,U]=e.useState(!1),[H,V]=e.useState(l.toString()),[W,G]=e.useState((null==r?void 0:r.toString())||"0"),[J,K]=e.useState(new Date);e.useState(!1),e.useRef(null);const q=(e=>{let t=An.findIndex(t=>e<t.min)-1;-2===t&&(t=An.length-1),t<0&&(t=0);const n=An[t],a=An[t+1];let i=100;return a&&(i=Math.max(0,Math.min(100,(e-n.min)/(a.min-n.min)*100))),{level:t+1,progress:i,title:n.title,nextThreshold:a?a.min:e}})(i),X=(e=>{let t=Pn.findIndex(t=>e<t.min)-1;-2===t&&(t=Pn.length-1),t<0&&(t=0);const n=Pn[t],a=Pn[t+1];let i=100;return a&&(i=Math.min(100,(e-n.min)/(a.min-n.min)*100)),n?{title:n.title,level:t+1,progress:i,nextTitle:a?a.title:"",value:e}:{title:"",level:0,progress:e/5*100,nextTitle:"",value:e}})(s),Y=(e=>{let t=On.findIndex(t=>e<t.min)-1;-2===t&&(t=On.length-1),t<0&&(t=0);const n=On[t],a=On[t+1];let i=100;return a&&(i=Math.max(0,Math.min(100,(e-n.min)/(a.min-n.min)*100))),n?{title:n.title,level:t+1,progress:i,value:e}:{title:"",level:0,progress:e/50*100,value:e}})(l);e.useEffect(()=>{b&&b(A)},[A,b]),e.useEffect(()=>{const e=localStorage.getItem("aes-global-mantras");if(e)try{N(JSON.parse(e))}catch(t){}},[]),e.useEffect(()=>{P(!1)},[]),e.useEffect(()=>{localStorage.setItem("aes-global-mantras",JSON.stringify($))},[$]),e.useEffect(()=>{const e=setInterval(()=>{z||R(e=>(e+1)%$.length)},1e4);return()=>clearInterval(e)},[$.length,z]),e.useEffect(()=>{const e=setInterval(()=>{K(new Date)},1e3);return()=>clearInterval(e)},[]),e.useImperativeHandle(n,()=>({startTimer:e=>{p(e),m(60*e),g(!0),C("timer"),b&&b(!0),P(!0)}})),e.useEffect(()=>{V(l.toString())},[l]);const Q=e.useRef(c);return e.useEffect(()=>{Q.current>0&&0===c&&u&&A&&(P(!1),b&&b(!1)),Q.current=c},[c,u,A,b]),qe.jsxs(qe.Fragment,{children:[qe.jsxs("div",{className:`${_} border p-2 sm:p-4 rounded-2xl z-20 w-full max-w-4xl mx-auto transition-all duration-300 hover:shadow-lg mb-8`,children:[qe.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[qe.jsxs("div",{className:"text-xs text-zinc-500 uppercase font-bold flex items-center gap-1",children:[qe.jsx(D,{size:12})," "]}),qe.jsx("div",{className:"w-6"})]}),qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-3",children:[y.showCharacterSystem&&qe.jsx("div",{className:`${_} border p-2 rounded-2xl flex flex-col justify-between transition-all duration-300 cursor-default hover:shadow-lg`,children:qe.jsx(St,{theme:a,xp:i,totalHours:s,balance:l,levelInfo:q,focusInfo:X,wealthInfo:Y,onLevelChange:(e,t)=>{window.confirm(`${"level"===t?"":"focus"===t?"":""}${e}`)&&x&&x(e,t)},onBadgeCategoryClick:t.onBadgeCategoryClick,onHelpClick:w})}),y.showPomodoroSystem&&qe.jsx("div",{className:`${_} border p-2 rounded-2xl flex flex-col justify-between transition-all duration-300 cursor-default hover:shadow-lg`,children:qe.jsx(tn,{theme:a,timeLeft:c,isActive:u,duration:d,onToggleTimer:h,onResetTimer:f,onChangeDuration:p,onUpdateTimeLeft:m,onUpdateIsActive:g,onImmersiveModeChange:e=>P(e),onInternalImmersiveModeChange:e=>{e&&(P(!0),j(!0))},onHelpClick:w,currentSoundId:S,onSoundChange:T})}),y.showFocusTimeSystem&&qe.jsx("div",{className:`${_} border p-2 rounded-2xl flex flex-col justify-between transition-all duration-300 cursor-default hover:shadow-lg`,children:qe.jsx(En,{theme:a,balance:l,totalKills:r,isEditingBalance:L,isEditingKills:F,tempBalance:H,tempKills:W,setIsEditingBalance:B,setIsEditingKills:U,setTempBalance:V,setTempKills:G,handleSaveBalance:()=>{const e=parseInt(H);if(!isNaN(e)&&o){const t=e-l;0!==t&&o(t,"")}B(!1)},handleSaveKills:()=>{const e=parseInt(W);!isNaN(e)&&v&&v(t=>({...t,tasksCompleted:e-t.habitsDone})),U(!1)},onHelpClick:w})}),y.showCheckinSystem&&qe.jsx("div",{className:`${_} border p-2 rounded-2xl flex flex-col justify-between transition-all duration-300 cursor-default hover:shadow-lg`,children:qe.jsx(Rn,{theme:a,mantras:$,currentMantraIndex:E,cycleMantra:()=>R(e=>(e+1)%$.length),setIsMantraModalOpen:I,onHelpClick:w})})]})]}),A&&qe.jsx(_t,{fallback:Mt,children:qe.jsx(Nn,{theme:a,timeLeft:c,isActive:u,duration:d,onToggleTimer:h,onResetTimer:f,onUpdateTimeLeft:m,onUpdateIsActive:g,onExitImmersive:()=>{P(!1),j(!1)},totalPlants:r||20,todayPlants:0,isMuted:M,currentSoundId:S,onUpdateTotalPlants:e=>{v&&v(t=>({...t,totalKills:e}))},onUpdateTodayPlants:()=>{}})}),qe.jsx(In,{isOpen:z,onClose:()=>I(!1),mantras:$,onAddMantra:e=>{N([e,...$])},onDeleteMantra:e=>{const t=$.filter((t,n)=>n!==e);N(t.length?t:[]),E>=t.length&&R(0)},onUpdateMantra:(e,t)=>{const n=[...$];n[e]=t,N(n)},theme:a})]})});var Vn=Oe();const Wn=l(Vn),Gn="life_game_system_default_key",Jn=e=>{((e,t)=>{try{const n=JSON.stringify(t),a=Gn,i=Vn.AES.encrypt(n,a).toString();localStorage.setItem(e,i)}catch(n){console.error(":",n),localStorage.setItem(e,JSON.stringify(t))}})("webdav-config",{url:e.url,username:e.username,password:e.password})},Kn=()=>{const e={url:"https://dav.jianguoyun.com/dav/",username:"",password:""};try{const t=(e=>{try{const t=localStorage.getItem(e);if(!t)return null;const n=Gn,a=Vn.AES.decrypt(t,n).toString(Vn.enc.Utf8);return JSON.parse(a)}catch(t){console.error(":",t);try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(n){return null}}})("webdav-config");if(t&&"object"==typeof t)return{url:t.url||e.url,username:t.username||e.username,password:t.password||e.password}}catch(t){console.error("WebDAV:",t)}return e},qn=new class{constructor(){this.logs=[],this.maxLogs=1e3}log(e,t,n){const a={timestamp:(new Date).toISOString(),level:e,message:t,context:n};this.logs.push(a),this.logs.length>this.maxLogs&&this.logs.shift(),this.outputToConsole(e,t,n),this.dispatchLogEvent(a)}outputToConsole(e,t,n){const a=`[${e}] ${t}`,i=(new Date).toLocaleTimeString();switch(e){case"DEBUG":console.debug(`[${i}] ${a}`,n||"");break;case"INFO":console.info(`[${i}] ${a}`,n||"");break;case"WARN":console.warn(`[${i}] ${a}`,n||"");break;case"ERROR":console.error(`[${i}] ${a}`,n||"")}}dispatchLogEvent(e){const t=new CustomEvent("globalLog",{detail:e});window.dispatchEvent(t)}debug(e,t){this.log("DEBUG",e,t)}info(e,t){this.log("INFO",e,t)}warn(e,t){this.log("WARN",e,t)}error(e,t){this.log("ERROR",e,t)}getLogs(){return[...this.logs]}getLogsByLevel(e){return this.logs.filter(t=>t.level===e)}clearLogs(){this.logs=[]}getRecentLogs(e){return this.logs.slice(-e)}},Xn=(e,t)=>qn.info(e,t),Yn=(e,t)=>qn.error(e,t);"undefined"!=typeof window&&(window.addEventListener("unhandledrejection",e=>{qn.error("Unhandled promise rejection",{reason:e.reason,promise:e.promise})}),window.addEventListener("error",e=>{qn.error("Global error caught",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:e.error})}));const Qn=[{min:3,title:""},{min:7,title:""},{min:15,title:""},{min:30,title:""},{min:60,title:""},{min:100,title:""},{min:200,title:""},{min:365,title:""}],Zn=[{min:100,title:""},{min:500,title:""},{min:1e3,title:""},{min:2e3,title:""},{min:3500,title:""},{min:5e3,title:""},{min:8e3,title:""},{min:12e3,title:""},{min:18e3,title:""},{min:25e3,title:""},{min:4e4,title:""},{min:6e4,title:""},{min:9e4,title:""},{min:15e4,title:""},{min:25e4,title:""},{min:5e5,title:""},{min:1e6,title:""},{min:5e6,title:""}],ea=[{id:"mk1",name:":  & / (07:30)",reward:5,xp:10,duration:15,streak:1,color:"#ef4444",attr:dt.STRENGTH,archived:!1,history:{"2025/12/24":!0},logs:{}},{id:"mk2",name:":  &  (08:00)",reward:10,xp:15,duration:20,streak:0,color:"#3b82f6",attr:dt.INTELLIGENCE,archived:!1,history:{},logs:{}},{id:"mk3",name:" I: / (08:30)",reward:30,xp:50,duration:90,streak:0,color:"#f59e0b",attr:dt.WEALTH,archived:!1,history:{},logs:{}},{id:"mk4",name:":  (12:00)",reward:5,xp:5,duration:30,streak:0,color:"#10b981",attr:dt.STRENGTH,archived:!1,history:{},logs:{}},{id:"mk5",name:": / (13:00)",reward:10,xp:10,duration:30,streak:0,color:"#10b981",attr:dt.STRENGTH,archived:!1,history:{},logs:{}},{id:"mk6",name:" II: / (14:00)",reward:30,xp:50,duration:120,streak:0,color:"#f59e0b",attr:dt.WEALTH,archived:!1,history:{},logs:{}},{id:"mk7",name:":  (18:00)",reward:20,xp:30,duration:60,streak:0,color:"#ef4444",attr:dt.STRENGTH,archived:!1,history:{},logs:{}},{id:"mk8",name:":  &  (19:30)",reward:15,xp:20,duration:45,streak:0,color:"#8b5cf6",attr:dt.INTELLIGENCE,archived:!1,history:{},logs:{}},{id:"mk9",name:":  (23:00)",reward:10,xp:10,duration:0,streak:0,color:"#64748b",attr:dt.DISCIPLINE,archived:!1,history:{},logs:{}},{id:"mk10",name:":  (00:00)",reward:20,xp:20,duration:480,streak:0,color:"#ef4444",attr:dt.STRENGTH,archived:!1,history:{},logs:{}}],ta=[{id:"p1",name:"",startDate:"2025-12-23",description:"1",status:"active",logs:[],dailyFocus:{},todayFocusMinutes:0,fears:[],attr:dt.WEALTH,subTasks:[{id:"t1_1",title:"",duration:5,completed:!1,frequency:"daily"},{id:"t1_2",title:"",duration:5,completed:!1,frequency:"daily"},{id:"t1_3",title:"",duration:5,completed:!1,frequency:"daily"}]},{id:"p3",name:"",startDate:"2025-12-23",description:"1000",status:"active",logs:[],dailyFocus:{},todayFocusMinutes:0,fears:[],attr:dt.INTELLIGENCE,subTasks:[{id:"t3_1",title:"",duration:10,completed:!1,frequency:"daily"},{id:"t3_2",title:" AI",duration:20,completed:!1,frequency:"daily"},{id:"t3_3",title:"",duration:20,completed:!1,frequency:"daily"},{id:"t3_4",title:"",duration:20,completed:!1,frequency:"daily"},{id:"t3_5",title:"",duration:10,completed:!1,frequency:"daily"}]},{id:"p4",name:"",startDate:"2025-12-23",description:"",status:"active",logs:[],dailyFocus:{},todayFocusMinutes:0,fears:[],attr:dt.WEALTH,subTasks:[{id:"t4_1",title:"",duration:5,completed:!1,frequency:"daily"},{id:"t4_2",title:"",duration:5,completed:!1,frequency:"daily"},{id:"t4_3",title:"",duration:5,completed:!1,frequency:"daily"}]}],na=[],aa=[{id:"c0",title:"",description:" 1 ",unlocked:!1,target:1}],ia={[ft.HEALTH]:[{id:"dice-health-1",text:"5/10/20/25/30/45/60",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:30},{id:"dice-health-2",text:"10",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:1},{id:"dice-health-3",text:"50",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:5},{id:"dice-health-4",text:"10/20/30/50",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:5},{id:"dice-health-5",text:"50",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:10},{id:"dice-health-6",text:"10",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:10},{id:"dice-health-7",text:"20",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:2},{id:"dice-health-8",text:"15",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:15},{id:"dice-health-9",text:"/",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:2},{id:"dice-health-10",text:"5",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:5},{id:"dice-health-11",text:"3",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:3},{id:"dice-health-12",text:"500ml",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:1},{id:"dice-health-13",text:"1030/2",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:2},{id:"dice-health-14",text:"2",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:2},{id:"dice-health-15",text:"1",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:1},{id:"dice-health-16",text:"5",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:5},{id:"dice-health-17",text:"100",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:3},{id:"dice-health-18",text:"10",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:1},{id:"dice-health-19",text:"/",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:1},{id:"dice-health-20",text:"",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:10},{id:"dice-health-21",text:"",category:ft.HEALTH,goldRange:[3,6],xpRange:[5,10],duration:3}],[ft.EFFICIENCY]:[{id:"dice-efficiency-1",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:60},{id:"dice-efficiency-2",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:90},{id:"dice-efficiency-3",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:30},{id:"dice-efficiency-4",text:"AI",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:45},{id:"dice-efficiency-5",text:"AI",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:120},{id:"dice-efficiency-6",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:15},{id:"dice-efficiency-7",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:10},{id:"dice-efficiency-8",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:2},{id:"dice-efficiency-9",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:20},{id:"dice-efficiency-10",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:40},{id:"dice-efficiency-11",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:30},{id:"dice-efficiency-12",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:60},{id:"dice-efficiency-13",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:20},{id:"dice-efficiency-14",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:5},{id:"dice-efficiency-15",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:10},{id:"dice-efficiency-16",text:"10",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:10},{id:"dice-efficiency-17",text:"10",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:10},{id:"dice-efficiency-18",text:"3",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:15},{id:"dice-efficiency-19",text:"/1",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:5},{id:"dice-efficiency-20",text:"10",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:10},{id:"dice-efficiency-21",text:"11",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:5},{id:"dice-efficiency-22",text:"3",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:10},{id:"dice-efficiency-23",text:"1",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:30},{id:"dice-efficiency-24",text:"2",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:15},{id:"dice-efficiency-25",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:15},{id:"dice-efficiency-26",text:"5",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:5},{id:"dice-efficiency-27",text:"",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:15},{id:"dice-efficiency-28",text:"30",category:ft.EFFICIENCY,goldRange:[5,10],xpRange:[10,20],duration:5}],[ft.LEISURE]:[{id:"dice-leisure-1",text:"",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:1},{id:"dice-leisure-2",text:"",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:1},{id:"dice-leisure-3",text:"",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:5},{id:"dice-leisure-4",text:"",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:3},{id:"dice-leisure-5",text:"1",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:4},{id:"dice-leisure-6",text:"15",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:5},{id:"dice-leisure-7",text:"/",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:2},{id:"dice-leisure-8",text:"5",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:5},{id:"dice-leisure-9",text:"MBTI",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:3},{id:"dice-leisure-10",text:"",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:1},{id:"dice-leisure-11",text:"",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:2},{id:"dice-leisure-12",text:"/",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:3},{id:"dice-leisure-13",text:"5",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:5},{id:"dice-leisure-14",text:"10",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:10},{id:"dice-leisure-15",text:"5",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:5},{id:"dice-leisure-16",text:"1",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:1},{id:"dice-leisure-17",text:"/",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:5},{id:"dice-leisure-18",text:"1",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:10},{id:"dice-leisure-19",text:"",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:2},{id:"dice-leisure-20",text:"500",category:ft.LEISURE,goldRange:[2,5],xpRange:[3,8],duration:20}]},la={dailyLimit:10,faceCount:12,categoryDistribution:{[ft.HEALTH]:4,[ft.EFFICIENCY]:5,[ft.LEISURE]:3}},sa={todayCount:0,lastClickDate:(new Date).toISOString().split("T")[0],history:[],completedTaskIds:[],isSpinning:!1,currentResult:void 0,taskPool:ia,config:la,pendingTasks:[],completedTasks:[]},ra=({badge:t,onClose:n,theme:a="neomorphic-light"})=>{let i=0;if(t.min)i=t.min;else if(t.val)i=t.val;else{const e=t.subTitle.match(/(\d+)/);e&&(i=parseInt(e[0]))}0===i&&(i=1);const l=Math.max(1,Math.floor(.1*i));let s=0,c=0,u=D,d="text-yellow-400",h="animate-spin-slow";t.id.startsWith("lvl")?(c=l,s=l,u=x,d="text-blue-500",h="animate-pulse"):t.id.startsWith("rank")?(c=0,s=Math.max(10,5*l),u=r,d="text-emerald-500",h="animate-bounce"):t.id.startsWith("class")?(c=0,s=Math.max(5,Math.floor(.05*i)),u=b,d="text-yellow-500",h="animate-pulse"):t.id.startsWith("consume")?(c=0,s=Math.floor(.1*i),u=M,d="text-orange-500",h="animate-bounce"):t.id.startsWith("combat")?(c=10*i,s=10*i,u=o,d="text-red-500",h="animate-bounce"):t.id.startsWith("check")&&(c=10*i,s=10*i,u=X,d="text-purple-500",h="animate-pulse"),"Target"===t.iconName&&(u=o),e.useEffect(()=>{const e=setTimeout(()=>{n(t.id,c,s)},2e3),a=Date.now()+2e3,i={startVelocity:30,spread:360,ticks:60,zIndex:9999},l=(e,t)=>Math.random()*(t-e)+e,r=setInterval(function(){const e=a-Date.now();if(e<=0)return clearInterval(r);const t=e/2e3*50;je({...i,particleCount:t,origin:{x:l(.1,.3),y:Math.random()-.2}}),je({...i,particleCount:t,origin:{x:l(.7,.9),y:Math.random()-.2}})},250);return()=>{clearInterval(r),clearTimeout(e)}},[t.id,c,s,n]),e.useEffect(()=>{const e=new Audio("/audio/sfx/.mp3");e.volume=.5,e.play().catch(e=>{})},[]),a.startsWith("neomorphic");const f=a.includes("dark"),p=f?"bg-[#1e1e2e]":"bg-[#e0e5ec]",m=f?"shadow-[10px_10px_20px_rgba(0,0,0,0.4),-10px_-10px_20px_rgba(30,30,46,0.8)]":"shadow-[10px_10px_20px_rgba(163,177,198,0.6),-10px_-10px_20px_rgba(255,255,255,1)]";return qe.jsx("div",{className:"fixed inset-0 z-[99999] bg-black/50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in duration-500",onClick:()=>n(t.id,c,s),children:qe.jsxs("div",{className:`flex flex-col items-center text-center space-y-6 animate-in zoom-in duration-500 max-w-sm w-full ${p} ${m} p-8 rounded-2xl relative overflow-visible transition-all duration-300`,onClick:e=>e.stopPropagation(),children:[qe.jsx("button",{onClick:()=>n(t.id,c,s),className:`absolute top-3 right-3 rounded-full ${f?"bg-[#1e1e2e] shadow-[inset_2px_2px_4px_rgba(0,0,0,0.4),inset_-2px_-2px_4px_rgba(30,30,46,0.8)] hover:shadow-[inset_4px_4px_8px_rgba(0,0,0,0.5),inset_-4px_-4px_8px_rgba(30,30,46,0.9)]":"bg-[#e0e5ec] shadow-[inset_2px_2px_4px_rgba(163,177,198,0.6),inset_-2px_-2px_4px_rgba(255,255,255,1)] hover:shadow-[inset_4px_4px_8px_rgba(163,177,198,0.7),inset_-4px_-4px_8px_rgba(255,255,255,0.9)]"} transition-all z-10`,"aria-label":"",children:qe.jsx(j,{size:16,className:f?"text-zinc-400":"text-zinc-600"})}),qe.jsxs("div",{className:"relative z-10 mt-4",children:[qe.jsx("div",{className:`absolute inset-0 ${d.replace("text-","bg-")}/20 blur-[60px] rounded-full animate-pulse`}),qe.jsxs("div",{className:"relative text-[100px] animate-[spin_3s_linear_infinite]",children:[qe.jsx(q,{className:"text-white opacity-20 absolute -top-10 -left-10 animate-pulse",size:40}),qe.jsx(q,{className:"text-white opacity-20 absolute top-20 -right-10 animate-pulse",size:30}),qe.jsx(q,{className:"text-white opacity-20 absolute -bottom-10 left-10 animate-pulse",size:30}),qe.jsx("div",{className:(f?"shadow-[5px_5px_10px_rgba(0,0,0,0.5),-5px_-5px_10px_rgba(30,30,46,0.8)]":"shadow-[5px_5px_10px_rgba(163,177,198,0.6),-5px_-5px_10px_rgba(255,255,255,1)]")+" p-4 rounded-full bg-gradient-to-br from-yellow-400/10 to-purple-500/10",children:qe.jsx(u,{className:`${d} ${h}`,size:80,strokeWidth:1.5})})]})]}),qe.jsxs("div",{className:"w-full z-10 text-center -mt-4",children:[qe.jsx("h2",{className:"text-2xl font-black mb-2 uppercase tracking-widest "+(f?"text-white":"text-zinc-900"),children:""}),qe.jsx("div",{className:`text-lg font-bold ${t.color}`,children:t.title}),qe.jsx("div",{className:"text-sm font-mono mt-1 "+(f?"text-zinc-400":"text-zinc-500"),children:t.subTitle})]}),qe.jsxs("div",{className:"w-full flex justify-around items-center pt-4 z-10 "+(f?"border-t border-[#3a3f4e]":"border-t border-[#caced5]"),children:[qe.jsxs("div",{className:"flex flex-col items-center",children:[qe.jsx("div",{className:"text-xs font-bold uppercase mb-1 "+(f?"text-zinc-500":"text-zinc-600"),children:""}),qe.jsxs("div",{className:`text-xl font-black ${c>0?"text-blue-400":"text-zinc-600"} animate-bounce`,children:["+",c]})]}),qe.jsx("div",{className:"w-0.5 h-8 "+(f?"bg-[#3a3f4e]":"bg-[#caced5]")}),qe.jsxs("div",{className:"flex flex-col items-center",children:[qe.jsx("div",{className:"text-xs font-bold uppercase mb-1 "+(f?"text-zinc-500":"text-zinc-600"),children:""}),qe.jsxs("div",{className:`text-xl font-black ${s>0?"text-yellow-400":"text-zinc-600"} animate-bounce`,children:["+",s]})]})]})]})})},oa=(e,t)=>{switch(t.type){case"SET_HABITS":return{...e,habits:t.payload};case"SET_PROJECTS":return{...e,projects:t.payload};case"SET_HABIT_ORDER":return{...e,habitOrder:t.payload};case"SET_PROJECT_ORDER":return{...e,projectOrder:t.payload};case"ADD_HABIT":return{...e,habits:[...e.habits,t.payload],habitOrder:[...e.habitOrder,t.payload.id]};case"ADD_PROJECT":return{...e,projects:[...e.projects,t.payload],projectOrder:[...e.projectOrder,t.payload.id]};case"UPDATE_HABIT":return{...e,habits:e.habits.map(e=>e.id===t.payload.id?{...e,...t.payload.updates}:e)};case"UPDATE_PROJECT":return{...e,projects:e.projects.map(e=>e.id===t.payload.id?{...e,...t.payload.updates}:e)};case"DELETE_HABIT":return{...e,habits:e.habits.filter(e=>e.id!==t.payload),habitOrder:e.habitOrder.filter(e=>e!==t.payload)};case"DELETE_PROJECT":return{...e,projects:e.projects.filter(e=>e.id!==t.payload),projectOrder:e.projectOrder.filter(e=>e!==t.payload)};case"TOGGLE_HABIT":{const n=e.habits.find(e=>e.id===t.payload);if(!n)return e;const a=(new Date).toLocaleDateString(),i=n.completedDates||[],l=i.includes(a);return{...e,habits:e.habits.map(e=>e.id===t.payload?{...e,completedDates:l?i.filter(e=>e!==a):[...i,a]}:e)}}case"TOGGLE_SUBTASK":return{...e,projects:e.projects.map(e=>e.id===t.payload.projectId?{...e,subTasks:e.subTasks.map(e=>e.id===t.payload.subTaskId?{...e,completed:!e.completed}:e)}:e)};case"REORDER_HABITS":{const{fromIndex:n,toIndex:a}=t.payload,i=[...e.habitOrder],[l]=i.splice(n,1);return i.splice(a,0,l),{...e,habitOrder:i}}case"REORDER_PROJECTS":{const{fromIndex:n,toIndex:a}=t.payload,i=[...e.projectOrder],[l]=i.splice(n,1);return i.splice(a,0,l),{...e,projectOrder:i}}case"RESET_ALL":return t.payload;default:return e}},ca=new class{constructor(e){this.DEFAULT_ENCRYPTION_KEY="aes-life-game-default-key-2024",this.STORAGE_PREFIX="aes-data-v2-",this.METADATA_KEY="aes-metadata",this.encryptionKey=(null==e?void 0:e.encryptionKey)||this.DEFAULT_ENCRYPTION_KEY,this.version=(null==e?void 0:e.version)||"1.0.0",this.autoBackup=(null==e?void 0:e.autoBackup)??!0}setItem(e,t){try{const n={data:t,metadata:{version:this.version,timestamp:Date.now(),key:e}},a=JSON.stringify(n),i=Wn.AES.encrypt(a,this.encryptionKey).toString();localStorage.setItem(this.STORAGE_PREFIX+e,i),this.updateMetadata(e,n.metadata)}catch(n){console.error(` (key: ${e}):`,n),localStorage.setItem(this.STORAGE_PREFIX+e,JSON.stringify({data:t,metadata:{version:this.version,timestamp:Date.now()}}))}}getItem(e){try{const t=localStorage.getItem(this.STORAGE_PREFIX+e);if(!t)return null;const n=Wn.AES.decrypt(t,this.encryptionKey).toString(Wn.enc.Utf8);return n?JSON.parse(n).data:(console.warn(` (key: ${e})`),this.getPlainItem(e))}catch(t){return console.error(` (key: ${e}):`,t),this.getPlainItem(e)}}getPlainItem(e){try{const t=localStorage.getItem(this.STORAGE_PREFIX+e);if(!t)return null;const n=JSON.parse(t);return n.data||n}catch(t){return console.error(` (key: ${e}):`,t),null}}removeItem(e){localStorage.removeItem(this.STORAGE_PREFIX+e),this.removeMetadata(e)}clear(){const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith(this.STORAGE_PREFIX)&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),localStorage.removeItem(this.METADATA_KEY)}validateData(e,t){try{const n=this.getItem(e);if(null===n)return{isValid:!1,error:""};if(t){const e=this.validateAgainstSchema(n,t);if(!e.isValid)return e}return{isValid:!0,data:n}}catch(n){return{isValid:!1,error:n.message}}}validateAgainstSchema(e,t){try{if("object"==typeof t&&null!==t)for(const n in t){if(t[n].required&&!(n in e))return{isValid:!1,error:`: ${n}`};if(void 0!==e[n]&&typeof e[n]!==t[n].type)return{isValid:!1,error:` ${n}  ${t[n].type} ${typeof e[n]}`}}return{isValid:!0}}catch(n){return{isValid:!1,error:n.message}}}updateMetadata(e,t){try{const n=this.getAllMetadata();n[e]=t,localStorage.setItem(this.METADATA_KEY,JSON.stringify(n))}catch(n){console.error(":",n)}}getMetadata(e){try{return this.getAllMetadata()[e]||null}catch(t){return console.error(":",t),null}}getAllMetadata(){try{const e=localStorage.getItem(this.METADATA_KEY);return e?JSON.parse(e):{}}catch(e){return console.error(":",e),{}}}removeMetadata(e){try{const t=this.getAllMetadata();delete t[e],localStorage.setItem(this.METADATA_KEY,JSON.stringify(t))}catch(t){console.error(":",t)}}getStorageUsage(){let e=0;for(let n=0;n<localStorage.length;n++){const t=localStorage.key(n);if(t&&t.startsWith(this.STORAGE_PREFIX)){const n=localStorage.getItem(t);n&&(e+=new Blob([t+n]).size)}}const t=4194304;return{used:e,total:t,percentage:e/t*100}}batchSet(e){e.forEach(e=>{this.setItem(e.key,e.data)})}batchGet(e){return e.map(e=>({key:e,data:this.getItem(e)}))}static isLocalStorageAvailable(){try{const e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}exportAllData(){const e={};for(let a=0;a<localStorage.length;a++){const t=localStorage.key(a);if(t&&t.startsWith(this.STORAGE_PREFIX)){const n=t.replace(this.STORAGE_PREFIX,"");e[n]=this.getItem(n)}}const t=["aes-global-data-v3","life-game-stats-v2","aes-checkin-streak","aes-dice-state","aes-last-checkin-date","aes-global-mantras","aes-level-thresholds","aes-focus-thresholds","aes-wealth-thresholds","aes-combat-thresholds","claimedBadges","life-game-weekly-checkin","life-game-state-v2","theme","pomodoro-state","life-game-habits","life-game-today-stats","life-game-habit-order","life-game-last-date","life-game-projects","life-game-project-order","aes-settings-v2","localBackups","life-game-bank","life-game-inventory","life-game-challenge-pool","life-game-completed-random-tasks","life-game-dice-history","life-game-manifestation-progress","life-game-sound-settings","life-game-reminders","life-game-achievements","life-game-character-stats","life-game-equipment","life-game-skills","life-game-spells","life-game-quests","life-game-world-state","life-game-locations","life-game-npcs","life-game-events","life-game-journal","life-game-reputation","life-game-faction-relationships","life-game-resources","life-game-recipes","life-game-crafts","life-game-trades","life-game-battle-history","life-game-pvp-stats","life-game-tournament-stats","life-game-leaderboard-data","life-game-achievements-progress","life-game-collections","life-game-badges","life-game-titles","life-game-permissions","life-game-notifications","life-game-messages","life-game-friends","life-game-parties","life-game-guilds","life-game-alliances","life-game-wars","life-game-territories","life-game-economy-data","life-game-market-data","life-game-weather-data","life-game-calendar-events","life-game-seasons","life-game-holidays","life-game-special-events","life-game-announcements","life-game-updates","life-game-version-history","life-game-feedback","life-game-bug-reports","life-game-suggestions","life-game-feature-requests","life-game-surveys","life-game-analytics-data","life-game-usage-stats","life-game-performance-data","life-game-error-logs","life-game-debug-info","life-game-system-info","life-game-environment-info","life-game-browser-info","life-game-device-info","life-game-network-info","life-game-storage-info","life-game-security-info","life-game-privacy-info","life-game-terms-acceptance","life-game-privacy-acceptance","life-game-cookies-acceptance","life-game-notifications-acceptance","life-game-marketing-acceptance","life-game-analytics-acceptance","life-game-data-sharing-acceptance","life-game-age-verification","life-game-account-verification","life-game-email-verification","life-game-phone-verification","life-game-two-factor-auth","life-game-password-recovery","life-game-account-settings","life-game-profile-settings","life-game-game-settings","life-game-audio-settings","life-game-video-settings","life-game-controls-settings","life-game-accessibility-settings","life-game-language-settings","life-game-region-settings","life-game-timezone-settings","life-game-date-format-settings","life-game-time-format-settings","life-game-currency-settings","life-game-measurement-settings","life-game-theme-settings","life-game-ui-settings","life-game-hud-settings","life-game-minimap-settings","life-game-quest-log-settings","life-game-inventory-settings","life-game-skills-settings","life-game-spells-settings","life-game-character-sheet-settings","life-game-social-settings","life-game-chat-settings","life-game-guild-settings","life-game-party-settings","life-game-trade-settings","life-game-market-settings","life-game-bank-settings","life-game-housing-settings","life-game-crafting-settings","life-game-gathering-settings","life-game-combat-settings","life-game-pvp-settings","life-game-tournament-settings","life-game-leaderboard-settings","life-game-achievement-settings","life-game-collection-settings","life-game-badge-settings","life-game-title-settings","life-game-reputation-settings","life-game-faction-settings","life-game-quest-settings","life-game-world-settings","life-game-location-settings","life-game-npc-settings","life-game-event-settings","life-game-journal-settings","life-game-calendar-settings","life-game-season-settings","life-game-holiday-settings","life-game-special-event-settings","life-game-announcement-settings","life-game-update-settings","life-game-feedback-settings","life-game-bug-report-settings","life-game-suggestion-settings","life-game-feature-request-settings","life-game-survey-settings","life-game-analytics-settings","life-game-usage-stats-settings","life-game-performance-settings","life-game-error-log-settings","life-game-debug-settings","life-game-system-settings","life-game-environment-settings","life-game-browser-settings","life-game-device-settings","life-game-network-settings","life-game-storage-settings","life-game-security-settings","life-game-privacy-settings","life-game-terms-settings","life-game-cookies-settings","life-game-notifications-settings","life-game-marketing-settings","life-game-data-sharing-settings","life-game-age-verification-settings","life-game-account-verification-settings","life-game-email-verification-settings","life-game-phone-verification-settings","life-game-two-factor-auth-settings","life-game-password-recovery-settings","projects","habits","habitOrder","projectOrder"];for(const a of t){const t=localStorage.getItem(a);if(null!==t)try{e[a]=JSON.parse(t)}catch(n){e[a]=t}}return JSON.stringify(e,null,2)}importData(e){try{const t=JSON.parse(e);for(const e in t)this.isCriticalDataKey(e)?localStorage.setItem(e,"string"==typeof t[e]?t[e]:JSON.stringify(t[e])):this.setItem(e,t[e]);return!0}catch(t){return console.error(":",t),!1}}isCriticalDataKey(e){return["aes-global-data-v3","life-game-stats-v2","aes-checkin-streak","aes-dice-state","aes-last-checkin-date","aes-global-mantras","aes-level-thresholds","aes-focus-thresholds","aes-wealth-thresholds","aes-combat-thresholds","claimedBadges","life-game-weekly-checkin","life-game-state-v2","theme","pomodoro-state","life-game-habits","life-game-today-stats","life-game-habit-order","life-game-last-date","life-game-projects","life-game-project-order","aes-settings-v2"].includes(e)}}({encryptionKey:"aes-life-game-secure-key-2024",version:"2.0.0",autoBackup:!0});class ua{constructor(e={}){this.serverUrl=e.serverUrl||"",this.username=e.username||"",this.password=e.password||"",this.basePath=e.basePath||"/",this.authHeader=`Basic ${btoa(`${this.username}:${this.password}`)}`,this.debug=e.debug||!1}getCurrentPort(){return window.location.port||("https:"===window.location.protocol?"443":"80")}buildProxyUrl(e){return`/webdav${`${this.basePath}${e}`.replace("//","/")}`}async sendRequest(e,t,n=null,a={}){const i=this.buildProxyUrl(t),l={...a,Authorization:this.authHeader,"Content-Type":"application/xml; charset=utf-8","X-Target-Url":`https://dav.jianguoyun.com/dav${this.basePath}${t}`.replace("//","/"),...a};this.debug&&(console.log(`[WebDAV Debug] ${e} ${i}`,{headers:l,body:n}),console.log(`[WebDAV Debug] Target URL: https://dav.jianguoyun.com/dav${this.basePath}${t}`));const s=await fetch(i,{method:e,headers:l,body:n,credentials:"omit"});return this.debug&&console.log(`[WebDAV Debug] Response Status: ${s.status}`),s}async testConnection(){try{const e=await this.sendRequest("PROPFIND","/",null,{Depth:"0"});if(e.ok)return console.log("[WebDAV] Connection test successful"),{success:!0,message:""};{const t=await e.text();return console.error("[WebDAV] Connection test failed:",t),{success:!1,message:`: ${e.status} ${t}`}}}catch(e){return console.error("[WebDAV] Connection test error:",e),{success:!1,message:`: ${e.message}`}}}async createDirectory(e){try{const t=await this.sendRequest("MKCOL",e);if(t.ok||405===t.status)return console.log(`[WebDAV] Directory created or already exists: ${e}`),{success:!0,message:""};{const n=await t.text();return console.error(`[WebDAV] Failed to create directory: ${e}`,n),{success:!1,message:`: ${t.status} ${n}`}}}catch(t){return console.error("[WebDAV] Create directory error:",t),{success:!1,message:`: ${t.message}`}}}async uploadFile(e,t){try{const n=e.substring(0,e.lastIndexOf("/"));n&&"/"!==n&&await this.createDirectory(n);const a=await this.sendRequest("PUT",e,t,{"Content-Type":"application/octet-stream"});if(a.ok)return console.log(`[WebDAV] File uploaded successfully: ${e}`),{success:!0,message:""};{const t=await a.text();return console.error(`[WebDAV] Failed to upload file: ${e}`,t),{success:!1,message:`: ${a.status} ${t}`}}}catch(n){return console.error("[WebDAV] Upload file error:",n),{success:!1,message:`: ${n.message}`}}}async downloadFile(e){try{const t=await this.sendRequest("GET",e);if(t.ok){const n=await t.text();return console.log(`[WebDAV] File downloaded successfully: ${e}`),{success:!0,content:n,message:""}}{const n=await t.text();return console.error(`[WebDAV] Failed to download file: ${e}`,n),{success:!1,message:`: ${t.status} ${n}`}}}catch(t){return console.error("[WebDAV] Download file error:",t),{success:!1,message:`: ${t.message}`}}}async listDirectory(e="/"){var t,n;try{const a='<?xml version="1.0" encoding="utf-8"?>\n        <propfind xmlns="DAV:">\n          <prop>\n            <displayname/>\n            <getlastmodified/>\n            <getcontentlength/>\n            <resourcetype/>\n          </prop>\n        </propfind>',i=await this.sendRequest("PROPFIND",e,a,{Depth:"1"});if(i.ok){const a=await i.text();console.log(`[WebDAV] Directory listing for ${e}:`,a);const l=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("response"),s=[];for(let i=0;i<l.length;i++){const a=l[i],r=null==(t=a.getElementsByTagName("href")[0])?void 0:t.textContent,o=null==(n=a.getElementsByTagName("displayname")[0])?void 0:n.textContent;if(r&&r!==e){const e=null!==a.querySelector("collection");s.push({name:o||r.split("/").pop(),path:r,type:e?"directory":"file"})}}return{success:!0,items:s,message:""}}{const t=await i.text();return console.error(`[WebDAV] Failed to list directory: ${e}`,t),{success:!1,message:`: ${i.status} ${t}`}}}catch(a){return console.error("[WebDAV] List directory error:",a),{success:!1,message:`: ${a.message}`}}}async backupAppData(e={}){try{const t=`//backup_${(new Date).toISOString().replace(/[:.]/g,"-")}`;await this.createDirectory(t);const n={timestamp:(new Date).toISOString(),version:"1.0.0",data:e},a=`${t}/backup.json`,i=JSON.stringify(n,null,2),l=await this.uploadFile(a,i);return l.success?(console.log(`[WebDAV] Backup completed successfully at ${a}`),{success:!0,backupPath:a,message:`: ${a}`}):l}catch(t){return console.error("[WebDAV] Backup error:",t),{success:!1,message:`: ${t.message}`}}}async restoreFromWebDAV(e){try{const n=await this.downloadFile(e);if(!n.success)return n;try{const e=JSON.parse(n.content);return console.log("[WebDAV] Restore data parsed successfully",e),{success:!0,data:e.data,message:""}}catch(t){return console.error("[WebDAV] Failed to parse backup data:",t),{success:!1,message:`: ${t.message}`}}}catch(n){return console.error("[WebDAV] Restore error:",n),{success:!1,message:`: ${n.message}`}}}}class da{constructor(e){this.webDAVClient=new ua({serverUrl:null==e?void 0:e.serverUrl,username:null==e?void 0:e.username,password:null==e?void 0:e.password,basePath:(null==e?void 0:e.basePath)||"/",debug:(null==e?void 0:e.debug)||!1})}async initialize(){console.log("WebDAV")}async uploadBackup(e,t){const n=`//backup_${(new Date).toISOString().replace(/[:.]/g,"-")}`;await this.webDAVClient.createDirectory(n);const a={timestamp:(new Date).toISOString(),version:"1.0.0",data:t},i=`${n}/${e}.json`,l=JSON.stringify(a,null,2),s=await this.webDAVClient.uploadFile(i,l);if(!s.success)throw new Error(`: ${s.message}`)}async downloadBackup(e){const t=await this.webDAVClient.listDirectory("/");if(!t.success)throw new Error(`: ${t.message}`);const n=t.items.filter(t=>t.name.includes(e)&&"file"===t.type);if(0===n.length)return console.log(`: ${e}`),null;const a=n.reduce((e,t)=>t.path>e.path?t:e),i=await this.webDAVClient.downloadFile(a.path);if(!i.success)throw new Error(`: ${i.message}`);try{return JSON.parse(i.content).data||i.content}catch(l){return console.error(":",l),i.content}}async deleteBackup(e){const t=await this.webDAVClient.listDirectory("/");if(!t.success)throw new Error(`: ${t.message}`);const n=t.items.filter(t=>t.name.includes(e)&&"file"===t.type);if(0!==n.length)for(const a of n){const e=await this.webDAVClient.sendRequest("DELETE",a.path);e.ok?console.log(`: ${a.path}`):console.error(`: ${a.path}`,e.statusText)}else console.log(`: ${e}`)}async testConnection(){return(await this.webDAVClient.testConnection()).success}createDirectory(e){return this.webDAVClient.createDirectory(e)}uploadFile(e,t){return this.webDAVClient.uploadFile(e,t)}downloadFile(e){return this.webDAVClient.downloadFile(e)}listDirectory(e){return this.webDAVClient.listDirectory(e||"/")}backupAppData(e){return this.webDAVClient.backupAppData(e)}restoreFromWebDAV(e){return this.webDAVClient.restoreFromWebDAV(e)}}class ha{constructor(e){this.config={...e,basePath:e.basePath||"/"}}getAuthHeader(){const{username:e,password:t}=this.config,n=`${encodeURIComponent(e)}:${encodeURIComponent(t)}`,a=(new TextEncoder).encode(n);let i="";for(let l=0;l<a.byteLength;l++)i+=String.fromCharCode(a[l]);return`Basic ${btoa(i)}`}buildUrl(e){var t;const n=(null==(t=this.config.basePath)?void 0:t.replace(/^\/|\/$/g,""))||"",a=e.replace(/^\//,"");let i;return i=n?`/${n}/${a}`:`/${a}`,i.startsWith("/")||(i="/"+i),new URL(i,this.config.url).href}async request(e,t,n,a){const i=this.buildUrl(t);try{const t={Authorization:this.getAuthHeader(),...a};n&&(t["Content-Type"]="PUT"===e?"application/octet-stream":"PROPFIND"===e?"application/xml":"application/octet-stream"),"PROPFIND"!==e||(null==a?void 0:a.Depth)||(t.Depth="1");const l=await fetch(i,{method:e,headers:t,body:n,credentials:"omit",mode:"cors"});if(!l.ok)throw 401===l.status?new Error(""):403===l.status?new Error(""):404===l.status?new Error(""):new Error(`${l.status} ${l.statusText}`);return l}catch(l){if(console.error("WebDAV request failed:",l),l instanceof TypeError&&(l.message.includes("fetch")||l.message.includes("network")))throw new Error("");if(l instanceof Error&&l.message.includes("Failed to fetch"))throw new Error("WebDAV");throw l}}async listFiles(e=""){var t;try{const n=await this.request("PROPFIND",e,void 0,{Depth:"1"}),a=await n.text(),i=(new DOMParser).parseFromString(a,"application/xml").getElementsByTagName("d:response"),l=[];for(let s=0;s<i.length;s++){const n=i[s],a=(null==(t=n.getElementsByTagName("d:href")[0])?void 0:t.textContent)||"",r=a.endsWith("/");if(a===`${e}/`||a===`${e}/../`)continue;const o=a.split("/").filter(Boolean).pop()||"",c=n.getElementsByTagName("d:getcontentlength")[0],u=c?parseInt(c.textContent||"0",10):0,d=n.getElementsByTagName("d:getlastmodified")[0],h=d?new Date(d.textContent||""):new Date;l.push({name:o,size:u,mtime:h,isDirectory:r,url:a})}return l}catch(n){throw console.error("Failed to list files:",n),n}}async createDirectory(e){try{await this.request("MKCOL",e)}catch(t){throw console.error(`Failed to create directory ${e}:`,t),t}}async ensureDirectoryExists(e){const t=e.split("/").filter(Boolean);let n="";for(const i of t){n+=`/${i}`;try{await this.createDirectory(n)}catch(a){}}}async uploadFile(e,t){try{const n=e.substring(0,e.lastIndexOf("/"));n&&await this.ensureDirectoryExists(n),await this.request("PUT",e,t)}catch(n){throw console.error(`Failed to upload file ${e}:`,n),n}}async downloadFile(e){try{const t=await this.request("GET",e);return await t.text()}catch(t){throw console.error(`Failed to download file ${e}:`,t),t}}async deleteFile(e){try{await this.request("DELETE",e)}catch(t){throw console.error(`Failed to delete file ${e}:`,t),t}}async getFileInfo(e){try{const t=await this.listFiles(e.substring(0,e.lastIndexOf("/"))),n=e.split("/").pop()||"";return t.find(e=>e.name===n)||null}catch(t){return console.error(`Failed to get file info for ${e}:`,t),null}}async testConnection(){try{await this.listFiles("/")}catch(e){throw console.error("Failed to test connection:",e),e}}}class fa{constructor(e){this.isCancelled=!1,this.client=new ha({url:e.url,username:e.username,password:e.password,basePath:e.basePath||"/"}),this.config={url:e.url,username:e.username,password:e.password,basePath:e.basePath||"/",chunkSize:e.chunkSize||5242880,maxConcurrent:e.maxConcurrent||3,retryAttempts:e.retryAttempts||3,timeout:e.timeout||3e4}}async testConnection(){try{return await this.client.testConnection(),!0}catch(e){return console.error("WebDAV:",e),!1}}cancel(){this.isCancelled=!0}async uploadChunked(e,t,n){const a=this.config.chunkSize,i=new Blob([t]).size;if(i<=a)return void(await this.client.uploadFile(e,t));const l=`upload_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,s=`${this.config.basePath}/temp_${l}`;await this.client.ensureDirectoryExists(s);const r=[];for(let u=0;u<i;u+=a){if(this.isCancelled)throw new Error("");const e=t.slice(u,u+a);r.push(e)}const o=[];for(let u=0;u<r.length;u++){if(this.isCancelled)throw new Error("");const t=this.withRetry(async()=>{const e=`${s}/chunk_${u.toString().padStart(5,"0")}`;await this.client.uploadFile(e,r[u])});o.push(t),o.length>=this.config.maxConcurrent&&(await Promise.allSettled(o),o.length=0),n&&n({total:r.length,completed:u+1,currentFile:e,percentage:(u+1)/r.length*100,status:"uploading"})}o.length>0&&await Promise.allSettled(o);let c="";for(let u=0;u<r.length;u++){const e=`${s}/chunk_${u.toString().padStart(5,"0")}`;c+=await this.client.downloadFile(e),await this.client.deleteFile(e)}await this.client.uploadFile(e,c),await this.cleanupTempDir(s)}async withRetry(e){let t=null;for(let a=0;a<=this.config.retryAttempts;a++)try{if(this.isCancelled)throw new Error("");return await this.withTimeout(e(),this.config.timeout)}catch(n){if(t=n,console.warn(`${a+1}:`,n),this.isCancelled)throw new Error("");if(a<this.config.retryAttempts){const e=1e3*Math.pow(2,a);await this.delay(e)}}throw t}delay(e){return new Promise(t=>setTimeout(t,e))}async withTimeout(e,t){const n=new Promise((e,n)=>{setTimeout(()=>{n(new Error(` (${t}ms)`))},t)});return Promise.race([e,n])}async cleanupTempDir(e){try{const t=await this.client.listFiles(e);for(const e of t)e.isDirectory||await this.client.deleteFile(e.url);await this.client.deleteFile(e)}catch(t){console.warn(":",t)}}async batchBackup(e,t){this.isCancelled=!1;const n=(null==t?void 0:t.batchSize)||5,a={success:0,failed:[]};for(let i=0;i<e.length&&!this.isCancelled;i+=n){const l=e.slice(i,i+n),s=l.map(async n=>{if(this.isCancelled)throw new Error("");try{const s=(new Date).toISOString().replace(/[:.]/g,"-"),r=`${this.config.basePath}//backup_${s}`;await this.client.ensureDirectoryExists(r);const o={timestamp:(new Date).toISOString(),version:"1.0.0",data:n.data},c=`${r}/${n.id}.json`,u=JSON.stringify(o,null,2);await this.uploadChunked(c,u,n=>{if(null==t?void 0:t.onProgress){const a={...n,total:e.length,completed:i+Math.floor(n.completed/n.total*l.length),percentage:(i+Math.floor(n.completed/n.total*l.length))/e.length*100,status:"uploading"};t.onProgress(a)}}),a.success++}catch(s){console.error(` ${n.id}:`,s),a.failed.push(n.id)}});await Promise.all(s)}return(null==t?void 0:t.onProgress)&&t.onProgress({total:e.length,completed:a.success+a.failed.length,currentFile:"",percentage:100,status:this.isCancelled?"error":"completed"}),a}async uploadBackup(e,t,n){this.isCancelled=!1;const a=(new Date).toISOString().replace(/[:.]/g,"-"),i=`${this.config.basePath}//backup_${a}`;await this.client.ensureDirectoryExists(i);const l={timestamp:(new Date).toISOString(),version:"1.0.0",data:t},s=`${i}/${e}.json`,r=JSON.stringify(l,null,2);await this.uploadChunked(s,r,n)}async downloadBackup(e){this.isCancelled=!1;try{const t=(await this.client.listFiles(`${this.config.basePath}/`)).filter(t=>t.name.includes(e)&&t.name.endsWith(".json"));if(0===t.length)return console.log(`: ${e}`),null;const n=t.reduce((e,t)=>t.mtime>e.mtime?t:e),a=await this.client.downloadFile(n.url);return JSON.parse(a).data||a}catch(t){throw console.error(":",t),t}}async listBackups(){try{const e=(await this.client.listFiles(`${this.config.basePath}/`)).filter(e=>e.isDirectory&&e.name.startsWith("backup_")),t=[];for(const n of e){const e=await this.client.listFiles(n.url);for(const n of e)if(n.name.endsWith(".json")){const e=n.name.replace(".json","");t.push({id:e,timestamp:n.mtime,size:n.size})}}return t.sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime())}catch(e){return console.error(":",e),[]}}async deleteBackup(e){try{if(!(await this.listBackups()).find(t=>t.id.includes(e)))return void console.log(`: ${e}`);const t=(await this.client.listFiles(`${this.config.basePath}/`)).filter(e=>e.isDirectory&&e.name.startsWith("backup_"));for(const n of t){const t=(await this.client.listFiles(n.url)).find(t=>t.name.includes(e)&&t.name.endsWith(".json"));if(t){await this.client.deleteFile(t.url),console.log(`: ${e}`),0===(await this.client.listFiles(n.url)).length&&await this.client.deleteFile(n.url);break}}}catch(t){throw console.error(":",t),t}}async getBackupStats(){try{const e=await this.listBackups();return{totalBackups:e.length,totalSize:e.reduce((e,t)=>e+t.size,0),lastBackupDate:e.length>0?e[0].timestamp:void 0}}catch(e){return console.error(":",e),{totalBackups:0,totalSize:0}}}}class pa{constructor(e){this.accessTokenExpiry=null,this.config={clientId:e.clientId,clientSecret:e.clientSecret,redirectUri:e.redirectUri,accessToken:e.accessToken||"",refreshToken:e.refreshToken||"",basePath:e.basePath||"/",debug:e.debug||!1}}async initialize(){console.log(""),this.config.accessToken?await this.testConnection()||console.warn(""):console.warn("accessToken")}generateAuthorizationUrl(){return`https://pan.baidu.com/oauth/2.0/authorize?${new URLSearchParams({client_id:this.config.clientId,response_type:"code",redirect_uri:this.config.redirectUri,scope:"basic,netdisk",display:"page"}).toString()}`}async getAccessToken(e){const t=new URLSearchParams({grant_type:"authorization_code",code:e,client_id:this.config.clientId,client_secret:this.config.clientSecret,redirect_uri:this.config.redirectUri}),n=await fetch("https://pan.baidu.com/oauth/2.0/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.toString()}),a=await n.json();if(a.error)throw new Error(`access_token: ${a.error_msg}`);return this.config.accessToken=a.access_token,this.config.refreshToken=a.refresh_token,this.accessTokenExpiry=Date.now()+1e3*a.expires_in,a}async refreshAccessToken(){if(!this.config.refreshToken)throw new Error("refreshToken");const e=new URLSearchParams({grant_type:"refresh_token",refresh_token:this.config.refreshToken,client_id:this.config.clientId,client_secret:this.config.clientSecret}),t=await fetch("https://pan.baidu.com/oauth/2.0/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e.toString()}),n=await t.json();if(n.error)throw new Error(`access_token: ${n.error_msg}`);return this.config.accessToken=n.access_token,this.accessTokenExpiry=Date.now()+1e3*n.expires_in,n}async ensureValidAccessToken(){if(!this.config.accessToken)throw new Error("accessToken");this.accessTokenExpiry&&this.accessTokenExpiry-Date.now()<3e5&&(console.log("accessToken..."),await this.refreshAccessToken())}async sendRequest(e,t="GET",n){await this.ensureValidAccessToken();const a=`https://pan.baidu.com/rest/2.0/xpan${e}?access_token=${this.config.accessToken}`,i={method:t,headers:{"Content-Type":"application/json"}};!n||"POST"!==t&&"PUT"!==t||(i.body=JSON.stringify(n));try{const t=await fetch(a,i),n=await t.json();return this.config.debug&&console.log(`API (${e}):`,n),n}catch(l){return console.error(`API (${e}):`,l),{error:500,error_msg:l.message}}}async createDirectory(e){return!(await this.sendRequest("/file","POST",{method:"mkdir",path:e,autoinit:1})).error}async uploadFile(e,t){var n;const a=e.substring(0,e.lastIndexOf("/"));"/"!==a&&await this.createDirectory(a);const i=new Blob([t]).size,l=await this.sendRequest("/file","POST",{method:"precreate",path:e,size:i,isdir:0,autoinit:1,rtype:1});if(l.error)return console.error(":",l.error_msg),!1;const s=`https://d.pcs.baidu.com/rest/2.0/pcs/file?method=upload&access_token=${this.config.accessToken}&path=${encodeURIComponent(e)}&uploadid=${null==(n=l.data)?void 0:n.uploadid}&partseq=0`;try{const e=await fetch(s,{method:"POST",body:t}),n=await e.json();return this.config.debug&&console.log(":",n),!n.error}catch(r){return console.error(":",r),!1}}async downloadFile(e){await this.ensureValidAccessToken();const t=`https://d.pcs.baidu.com/rest/2.0/pcs/file?method=download&access_token=${this.config.accessToken}&path=${encodeURIComponent(e)}`;try{const e=await fetch(t);return e.ok?await e.text():(console.error(":",e.statusText),null)}catch(n){return console.error(":",n),null}}async listDirectory(e){var t;const n=await this.sendRequest("/file","POST",{method:"list",path:e,web:1,page:1,num:1e3,order:"name",desc:0});return n.error?(console.error(":",n.error_msg),[]):(null==(t=n.data)?void 0:t.list)||[]}async deleteFile(e){return!(await this.sendRequest("/file","POST",{method:"delete",filelist:JSON.stringify([e])})).error}async testConnection(){try{return await this.ensureValidAccessToken(),!(await this.sendRequest("/user","GET")).error}catch(e){return console.error(":",e),!1}}async uploadBackup(e,t){const n=(new Date).toISOString().replace(/[:.]/g,"-"),a=`${this.config.basePath}/backup_${n}`;if(!(await this.createDirectory(a)))throw new Error("");const i={timestamp:(new Date).toISOString(),version:"1.0.0",data:t},l=`${a}/${e}.json`,s=JSON.stringify(i,null,2);if(!(await this.uploadFile(l,s)))throw new Error("")}async downloadBackup(e){const t=(await this.listDirectory(this.config.basePath)).filter(e=>1===e.type&&e.path.includes("backup_"));if(0===t.length)return console.log(""),null;t.sort((e,t)=>t.mtime-e.mtime);for(const a of t){const t=(await this.listDirectory(a.path)).find(t=>0===t.type&&t.path.includes(e)&&t.path.endsWith(".json"));if(t){const e=await this.downloadFile(t.path);if(e)try{return JSON.parse(e).data||e}catch(n){return console.error(":",n),e}}}return console.log(`: ${e}`),null}async deleteBackup(e){const t=(await this.listDirectory(this.config.basePath)).filter(e=>1===e.type&&e.path.includes("backup_"));for(const n of t){const t=(await this.listDirectory(n.path)).find(t=>0===t.type&&t.path.includes(e)&&t.path.endsWith(".json"));if(t)return await this.deleteFile(t.path),console.log(`: ${t.path}`),void(0===(await this.listDirectory(n.path)).length&&(await this.deleteFile(n.path),console.log(`: ${n.path}`)))}console.log(`: ${e}`)}async getBackupList(){const e=(await this.listDirectory(this.config.basePath)).filter(e=>1===e.type&&e.path.includes("backup_")),t=[];for(const n of e){const e=await this.listDirectory(n.path);for(const n of e)if(0===n.type&&n.path.endsWith(".json")){const e=n.path.substring(n.path.lastIndexOf("/")+1,n.path.lastIndexOf("."));t.push({id:e,timestamp:new Date(1e3*n.mtime),size:n.size})}}return t.sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()),t}getConfig(){return{clientId:this.config.clientId,clientSecret:this.config.clientSecret,redirectUri:this.config.redirectUri,accessToken:this.config.accessToken,refreshToken:this.config.refreshToken,basePath:this.config.basePath,debug:this.config.debug}}updateConfig(e){this.config={...this.config,...e}}}const ma=new class{constructor(e){this.webDAVBackup=null,this.enhancedWebDAVBackup=null,this.baiduNetdiskBackup=null,this.backupIntervalId=null,this.currentProgress=null,this.progressCallbacks=[],this.initialized=!1,this.initializingPromise=null,this.config={localAutoBackup:(null==e?void 0:e.localAutoBackup)??!0,cloudAutoBackup:(null==e?void 0:e.cloudAutoBackup)??!0,hybridBackup:(null==e?void 0:e.hybridBackup)??!1,backupInterval:(null==e?void 0:e.backupInterval)??60,retentionDays:(null==e?void 0:e.retentionDays)??7,backupStrategy:(null==e?void 0:e.backupStrategy)??"full",priorityBackupType:(null==e?void 0:e.priorityBackupType)??"both",smartScheduling:(null==e?void 0:e.smartScheduling)??!1,networkCondition:(null==e?void 0:e.networkCondition)??"always",batteryCondition:(null==e?void 0:e.batteryCondition)??"always",backupPlans:(null==e?void 0:e.backupPlans)??[],incrementalBackup:(null==e?void 0:e.incrementalBackup)??!1,incrementalBaseDays:(null==e?void 0:e.incrementalBaseDays)??7,triggerOnDataChange:(null==e?void 0:e.triggerOnDataChange)??!1,triggerOnAppStart:(null==e?void 0:e.triggerOnAppStart)??!1,triggerOnAppClose:(null==e?void 0:e.triggerOnAppClose)??!1,minDataChangeSize:(null==e?void 0:e.minDataChangeSize)??1024,baiduNetdiskEnabled:(null==e?void 0:e.baiduNetdiskEnabled)??!1,cloudBackupProvider:(null==e?void 0:e.cloudBackupProvider)??"webdav",baiduNetdiskConfig:(null==e?void 0:e.baiduNetdiskConfig)??{clientId:"",clientSecret:"",redirectUri:"https://localhost"},...e}}async initialize(e=!1){return this.initializingPromise&&!e||(this.initializingPromise=(async()=>{console.log("...",e?"()":"");const t=Kn();e&&(this.webDAVBackup=null,this.enhancedWebDAVBackup=null,this.baiduNetdiskBackup=null,this.initialized=!1);try{"baidu"===this.config.cloudBackupProvider&&this.config.baiduNetdiskEnabled&&this.config.baiduNetdiskConfig?(console.log(""),this.baiduNetdiskBackup=new pa(this.config.baiduNetdiskConfig),await this.baiduNetdiskBackup.initialize()):t.url&&t.username&&t.password?(console.log("WebDAV"),this.enhancedWebDAVBackup=new fa({url:t.url,username:t.username,password:t.password,basePath:"/"}),await this.enhancedWebDAVBackup.testConnection()||console.warn("WebDAV")):(console.log("WebDAV"),this.webDAVBackup=new da,await this.webDAVBackup.initialize())}catch(n){console.error(":",n)}this.initialized=!0,this.config.backupInterval&&this.config.backupInterval>0&&this.startAutoBackup()})()),this.initializingPromise}async ensureInitialized(){if(!this.initialized||!this.webDAVBackup&&!this.enhancedWebDAVBackup&&!this.baiduNetdiskBackup)return void(await this.initialize());const e=Kn(),t=e.url&&e.username&&e.password,n=null!==this.enhancedWebDAVBackup,a=null!==this.webDAVBackup,i=null!==this.baiduNetdiskBackup;"baidu"===this.config.cloudBackupProvider?this.config.baiduNetdiskEnabled&&!i&&(console.log("..."),await this.initialize(!0)):(t&&!n||!t&&!a)&&(console.log("WebDAV..."),await this.initialize(!0))}async checkBackupConditions(){if(!this.config.smartScheduling)return!0;if(this.config.backupWindow){const e=new Date,t=60*e.getHours()+e.getMinutes(),[n,a]=this.config.backupWindow.start.split(":").map(Number),[i,l]=this.config.backupWindow.end.split(":").map(Number),s=60*n+a,r=60*i+l;if(s<=r){if(t<s||t>r)return console.log(""),!1}else if(t>=r&&t<=s)return console.log(""),!1}return"always"!==this.config.networkCondition&&console.log(`${this.config.networkCondition}`),"always"!==this.config.batteryCondition&&console.log(`${this.config.batteryCondition}`),!0}startAutoBackup(){this.backupIntervalId&&clearInterval(this.backupIntervalId),this.backupIntervalId=setInterval(()=>{this.performAutoBackup()},60*this.config.backupInterval*1e3),this.startBackupPlans()}startBackupPlans(){this.config.backupPlans&&this.config.backupPlans.length>0&&(console.log("..."),this.config.backupPlans.forEach(e=>{e.enabled&&this.scheduleBackupPlan(e)}))}scheduleBackupPlan(e){const t=this.calculateNextRunTime(e);if(!t)return;const n=new Date,a=t.getTime()-n.getTime();a>0&&(console.log(` ${e.name}  ${t.toISOString()}`),setTimeout(async()=>{await this.executeBackupPlan(e),this.scheduleBackupPlan(e)},a))}calculateNextRunTime(e){const t=new Date,[n,a]=e.time.split(":").map(Number);let i=new Date;if(i.setHours(n,a,0,0),"daily"===e.schedule)i<=t&&i.setDate(i.getDate()+1);else if("weekly"===e.schedule){if(e.days&&e.days.length>0){let l=!1;for(let s=0;s<7;s++){const r=new Date(t);if(r.setDate(r.getDate()+s),e.days.includes(r.getDay())&&(i=new Date(r),i.setHours(n,a,0,0),i>t)){l=!0;break}}l||i.setDate(i.getDate()+7)}}else if("monthly"===e.schedule&&e.days&&e.days.length>0){let l=!1;for(let s=0;s<12;s++){const r=new Date(t);r.setMonth(r.getMonth()+s);for(const s of e.days){const e=new Date(r.getFullYear(),r.getMonth(),s);if(e.setHours(n,a,0,0),e>t){i=e,l=!0;break}}if(l)break}}return i}async executeBackupPlan(e){console.log(`: ${e.name}`);try{if(!(await this.checkBackupConditions()))return void console.log("");"local"===e.backupType?await this.createLocalBackup(`plan-${e.id}-${Date.now()}`):"cloud"===e.backupType?await this.createCloudBackup(`plan-${e.id}-${Date.now()}`):"hybrid"===e.backupType&&await this.createHybridBackup(`plan-${e.id}-${Date.now()}`),console.log(` ${e.name} `)}catch(t){console.error(` ${e.name} :`,t)}}async performAutoBackup(){console.log("...");try{if(!(await this.checkBackupConditions()))return void console.log("");this.config.hybridBackup&&(this.webDAVBackup||this.enhancedWebDAVBackup)?(console.log("..."),await this.createHybridBackup(`auto-hybrid-backup-${Date.now()}`),console.log("")):("local"!==this.config.priorityBackupType&&"both"!==this.config.priorityBackupType||this.config.localAutoBackup&&(console.log("..."),await this.createLocalBackup(`auto-local-backup-${Date.now()}`),console.log("")),"cloud"!==this.config.priorityBackupType&&"both"!==this.config.priorityBackupType||(this.config.cloudAutoBackup&&(this.webDAVBackup||this.enhancedWebDAVBackup)?(console.log("..."),await this.createCloudBackup(`auto-cloud-backup-${Date.now()}`),console.log("")):this.config.cloudAutoBackup&&(console.warn("WebDAV"),await this.initialize(!0),this.webDAVBackup||this.enhancedWebDAVBackup?(console.log("WebDAV..."),await this.createCloudBackup(`auto-cloud-backup-${Date.now()}`),console.log("")):console.error("WebDAV"))))}catch(e){console.error(":",e)}}async createLocalBackup(e){const t=e||`local-backup-${Date.now()}`,n=Date.now(),a=this.config.backupStrategy||"full";try{let e,i,l,s=!1;if(this.config.incrementalBackup&&"incremental"===a){const t=this.findLatestFullBackup("local");t?(console.log(` ${t.id} `),e=await this.createIncrementalBackup(t.id),i=new Blob([e]).size,s=!0,l=t.id):(console.log(""),e=ca.exportAllData(),i=new Blob([e]).size)}else e=ca.exportAllData(),i=new Blob([e]).size;const r=`backup_${t}`;ca.setItem(r,{data:e,timestamp:n,size:i,strategy:a,isIncremental:s,baseBackupId:l});const o={id:t,timestamp:n,size:i,type:"local",status:"success",strategy:a};return this.saveBackupInfo(o),console.log(`: ${t} (: ${a})`),o}catch(i){console.error(`: ${t}`,i);const e={id:t,timestamp:n,size:0,type:"local",status:"failed",strategy:a};throw this.saveBackupInfo(e),i}}async createCloudBackup(e){if(console.log("..."),await this.ensureInitialized(),"baidu"===this.config.cloudBackupProvider&&this.config.baiduNetdiskEnabled){if(this.baiduNetdiskBackup||(console.log("..."),await this.initialize(!0)),!this.baiduNetdiskBackup)throw new Error("");const n=e||`baidu-backup-${Date.now()}`,a=Date.now();try{const e=ca.exportAllData(),t=new Blob([e]).size;await this.baiduNetdiskBackup.uploadBackup(n,e);const i={id:n,timestamp:a,size:t,type:"cloud",status:"success",strategy:this.config.backupStrategy};return this.saveBackupInfo(i),console.log(`: ${n}`),i}catch(t){console.error(`: ${n}`,t);const e={id:n,timestamp:a,size:0,type:"cloud",status:"failed",strategy:this.config.backupStrategy};throw this.saveBackupInfo(e),t}}else{const n=Kn();if(!n.username||!n.password)throw console.error("WebDAV"),new Error("WebDAV");if(this.webDAVBackup||this.enhancedWebDAVBackup||(console.log("WebDAV..."),await this.initialize(!0)),!this.webDAVBackup&&!this.enhancedWebDAVBackup)throw new Error("WebDAV");const a=e||`webdav-backup-${Date.now()}`,i=Date.now();try{const e=ca.exportAllData(),t=new Blob([e]).size;this.enhancedWebDAVBackup?await this.enhancedWebDAVBackup.uploadBackup(a,e,e=>{this.currentProgress=e,this.progressCallbacks.forEach(t=>t(e))}):await this.webDAVBackup.uploadBackup(a,e);const n={id:a,timestamp:i,size:t,type:"cloud",status:"success",strategy:this.config.backupStrategy};return this.saveBackupInfo(n),console.log(`WebDAV: ${a}`),n}catch(t){console.error(`WebDAV: ${a}`,t);const e={id:a,timestamp:i,size:0,type:"cloud",status:"failed",strategy:this.config.backupStrategy};throw this.saveBackupInfo(e),t}}}async restoreFromLocalBackup(e,t){try{const n=`backup_${e}`,a=ca.getItem(n);if(!a||!a.data)return{success:!1,message:`: ${e}`};let i,l,s=a.data;if(a.isIncremental&&a.baseBackupId){console.log(` ${e} ${a.baseBackupId}`);const t=await this.restoreFromLocalBackup(a.baseBackupId);if(!t.success)return{success:!1,message:` ${a.baseBackupId}: ${t.message}`}}return(null==t?void 0:t.selective)&&t.dataKeys&&t.dataKeys.length>0?(i=await this.performSelectiveRestore(s,t.dataKeys),l=t.dataKeys):i=ca.importData(s),i?(console.log(`: ${e}`),{success:!0,restoredData:l,message:`: ${e}`}):{success:!1,message:`: ${e}`}}catch(n){return console.error(`: ${e}`,n),{success:!1,message:`: ${n.message}`}}}async restoreFromCloudBackup(e,t){if(await this.ensureInitialized(),"baidu"===this.config.cloudBackupProvider&&this.config.baiduNetdiskEnabled){if(!this.baiduNetdiskBackup)return{success:!1,message:""};try{const n=await this.baiduNetdiskBackup.downloadBackup(e);if(!n)return{success:!1,message:`: ${e}`};let a,i;return(null==t?void 0:t.selective)&&t.dataKeys&&t.dataKeys.length>0?(a=await this.performSelectiveRestore(n,t.dataKeys),i=t.dataKeys):a=ca.importData(n),a?(console.log(`: ${e}`),{success:!0,restoredData:i,message:`: ${e}`}):{success:!1,message:`: ${e}`}}catch(n){return console.error(`: ${e}`,n),{success:!1,message:`: ${n.message}`}}}else{if(!this.webDAVBackup&&!this.enhancedWebDAVBackup)return{success:!1,message:"WebDAV"};try{let n,a,i=null;return i=this.enhancedWebDAVBackup?await this.enhancedWebDAVBackup.downloadBackup(e):await this.webDAVBackup.downloadBackup(e),i?((null==t?void 0:t.selective)&&t.dataKeys&&t.dataKeys.length>0?(n=await this.performSelectiveRestore(i,t.dataKeys),a=t.dataKeys):n=ca.importData(i),n?(console.log(`WebDAV: ${e}`),{success:!0,restoredData:a,message:`WebDAV: ${e}`}):{success:!1,message:`: ${e}`}):{success:!1,message:`WebDAV: ${e}`}}catch(n){return console.error(`WebDAV: ${e}`,n),{success:!1,message:`WebDAV: ${n.message}`}}}}async performSelectiveRestore(e,t){try{const n=JSON.parse(e),a={};return t.forEach(e=>{void 0!==n[e]&&(a[e]=n[e])}),0===Object.keys(a).length?(console.warn(""),!1):ca.importData(JSON.stringify(a))}catch(n){return console.error(":",n),!1}}async restoreFromAnotherDevice(e,t){try{if(console.log(` ${t}  ${e}`),await this.ensureInitialized(),!this.enhancedWebDAVBackup)return{success:!1,message:"WebDAV"};const n=await this.enhancedWebDAVBackup.downloadBackup(`${t}-${e}`);return n?ca.importData(n)?(console.log(` ${t} : ${e}`),{success:!0,message:` ${t} : ${e}`}):{success:!1,message:""}:{success:!1,message:` ${t}  ${e} `}}catch(n){return console.error(`: ${e} from ${t}`,n),{success:!1,message:`: ${n.message}`}}}async getRestoreOptions(e,t){try{let n;if("local"===t){const t=`backup_${e}`,a=ca.getItem(t);if(!a||!a.data)return{available:!1};n=a.data}else{if(await this.ensureInitialized(),!this.enhancedWebDAVBackup)return{available:!1};const t=await this.enhancedWebDAVBackup.downloadBackup(e);if(!t)return{available:!1};n=t}const a=JSON.parse(n),i=Object.keys(a);return{available:!0,dataKeys:i,backupInfo:{size:new Blob([n]).size,timestamp:Date.now(),dataKeysCount:i.length}}}catch(n){return console.error(":",n),{available:!1}}}getBackupList(){return(ca.getItem("backup_infos")||[]).sort((e,t)=>t.timestamp-e.timestamp)}async deleteBackup(e,t){try{if("local"===t){const t=`backup_${e}`;ca.removeItem(t)}else"cloud"===t&&("baidu"===this.config.cloudBackupProvider&&this.config.baiduNetdiskEnabled&&this.baiduNetdiskBackup?await this.baiduNetdiskBackup.deleteBackup(e):(this.webDAVBackup||this.enhancedWebDAVBackup)&&(this.enhancedWebDAVBackup?await this.enhancedWebDAVBackup.deleteBackup(e):await this.webDAVBackup.deleteBackup(e)));const n=this.getBackupList().filter(t=>t.id!==e);ca.setItem("backup_infos",n),console.log(`: ${e} (${t})`)}catch(n){throw console.error(`: ${e} (${t})`,n),n}}async cleanupOldBackups(){const e=24*this.config.retentionDays*60*60*1e3,t=Date.now(),n=this.getBackupList().filter(n=>t-n.timestamp>e);for(const i of n)try{await this.deleteBackup(i.id,i.type)}catch(a){console.error(`: ${i.id}`,a)}console.log(` ${n.length} `)}saveBackupInfo(e){try{const t=this.getBackupList(),n=t.findIndex(t=>t.id===e.id);n>=0?t[n]=e:t.push(e);const a=t.slice(0,100);ca.setItem("backup_infos",a)}catch(t){console.error(":",t)}}getBackupStats(){const e=this.getBackupList();return{totalBackups:e.length,localBackups:e.filter(e=>"local"===e.type).length,cloudBackups:e.filter(e=>"cloud"===e.type).length,totalSize:e.reduce((e,t)=>e+t.size,0),oldestBackup:e.length>0?Math.min(...e.map(e=>e.timestamp)):null,newestBackup:e.length>0?Math.max(...e.map(e=>e.timestamp)):null}}getCurrentProgress(){return this.currentProgress}addProgressCallback(e){this.progressCallbacks.push(e)}removeProgressCallback(e){const t=this.progressCallbacks.indexOf(e);t>-1&&this.progressCallbacks.splice(t,1)}async batchCreateCloudBackups(e){if(await this.ensureInitialized(),!this.enhancedWebDAVBackup)throw new Error("WebDAV");return await this.enhancedWebDAVBackup.batchBackup(e,{onProgress:e=>{this.currentProgress=e,this.progressCallbacks.forEach(t=>t(e))}})}async getCloudBackupList(){return"baidu"===this.config.cloudBackupProvider&&this.config.baiduNetdiskEnabled&&this.baiduNetdiskBackup?await this.baiduNetdiskBackup.getBackupList():this.enhancedWebDAVBackup?await this.enhancedWebDAVBackup.listBackups():[]}async getEnhancedBackupStats(){if("baidu"===this.config.cloudBackupProvider&&this.config.baiduNetdiskEnabled&&this.baiduNetdiskBackup){const e=await this.baiduNetdiskBackup.getBackupList();return{totalBackups:e.length,totalSize:e.reduce((e,t)=>e+t.size,0),lastBackupDate:e.length>0?e[0].timestamp:void 0}}return this.enhancedWebDAVBackup?await this.enhancedWebDAVBackup.getBackupStats():{totalBackups:this.getBackupStats().cloudBackups,totalSize:0,lastBackupDate:new Date}}async verifyBackupIntegrity(e,t){try{if("local"===t){const t=`backup_${e}`,a=ca.getItem(t);if(!a||!a.data)return{success:!1,message:` ${e} `};try{return JSON.parse(a.data),{success:!0,message:` ${e} `,details:{size:a.size,timestamp:a.timestamp,isIncremental:a.isIncremental||!1}}}catch(n){return{success:!1,message:` ${e} `,details:{error:n.message}}}}else if("cloud"===t)if("baidu"===this.config.cloudBackupProvider&&this.config.baiduNetdiskEnabled&&this.baiduNetdiskBackup)try{const t=await this.baiduNetdiskBackup.downloadBackup(e);if(!t)return{success:!1,message:` ${e} `};try{return JSON.parse(t),{success:!0,message:` ${e} `}}catch(n){return{success:!1,message:` ${e} `,details:{error:n.message}}}}catch(a){return{success:!1,message:` ${e} `,details:{error:a.message}}}else{if(!this.enhancedWebDAVBackup)return{success:!1,message:""};try{const t=await this.enhancedWebDAVBackup.downloadBackup(e);if(!t)return{success:!1,message:`WebDAV ${e} `};try{return JSON.parse(t),{success:!0,message:`WebDAV ${e} `}}catch(n){return{success:!1,message:`WebDAV ${e} `,details:{error:n.message}}}}catch(a){return{success:!1,message:`WebDAV ${e} `,details:{error:a.message}}}}return{success:!1,message:""}}catch(a){return{success:!1,message:"",details:{error:a.message}}}}async updateConfig(e){this.config={...this.config,...e},await this.initialize(!0)}async authBaiduNetdisk(){if(!this.config.baiduNetdiskEnabled||!this.config.baiduNetdiskConfig)throw new Error("");if(!this.baiduNetdiskBackup)throw new Error("");const e=this.baiduNetdiskBackup.generateAuthorizationUrl();console.log(":",e),window.open(e,"_blank")}async generateHealthReport(){try{const e=this.getBackupList(),t=new Date,n=864e5,a=e.length,i=e.filter(e=>"success"===e.status).length,l=e.filter(e=>"failed"===e.status).length;let s,r;if(e.length>0){const t=[...e].sort((e,t)=>t.timestamp-e.timestamp);s=new Date(t[0].timestamp),r=new Date(t[t.length-1].timestamp)}const o=e.filter(e=>"local"===e.type),c=[];let u="healthy";if(0===o.length)u="critical",c.push("");else{const e=o.sort((e,t)=>t.timestamp-e.timestamp)[0],a=(t.getTime()-e.timestamp)/n;a>7?(u="critical",c.push(` ${Math.round(a)} `)):a>3&&(u="warning",c.push(` ${Math.round(a)} `));const i=o.filter(e=>"failed"===e.status).length;i>0&&i/o.length>.3&&(u="warning",c.push(`: ${Math.round(i/o.length*100)}%`))}const d=e.filter(e=>"cloud"===e.type),h=[];let f="healthy";if(0===d.length)f="warning",h.push("");else{const e=d.sort((e,t)=>t.timestamp-e.timestamp)[0],a=(t.getTime()-e.timestamp)/n;a>7?(f="critical",h.push(` ${Math.round(a)} `)):a>3&&(f="warning",h.push(` ${Math.round(a)} `));const i=d.filter(e=>"failed"===e.status).length;i>0&&i/d.length>.3&&(f="warning",h.push(`: ${Math.round(i/d.length*100)}%`))}const p=e.filter(e=>"hybrid"===e.type),m=[];let g="healthy";if(0===p.length)g="warning",m.push("");else{const e=p.sort((e,t)=>t.timestamp-e.timestamp)[0],a=(t.getTime()-e.timestamp)/n;a>7?(g="critical",m.push(` ${Math.round(a)} `)):a>3&&(g="warning",m.push(` ${Math.round(a)} `))}const b=[];"critical"===u&&b.push(""),"critical"===f&&b.push("WebDAV"),l>0&&b.push(""),e.length>2*this.config.retentionDays&&b.push("");let w="healthy";return"critical"===u||"critical"===f?w="critical":"warning"!==u&&"warning"!==f&&"warning"!==g||(w="warning"),{status:w,timestamp:t,summaries:{totalBackups:a,successfulBackups:i,failedBackups:l,lastBackupDate:s,oldestBackupDate:r},details:{localBackups:{count:o.length,lastBackupDate:o.length>0?new Date(o.sort((e,t)=>t.timestamp-e.timestamp)[0].timestamp):void 0,healthStatus:u,issues:c},cloudBackups:{count:d.length,lastBackupDate:d.length>0?new Date(d.sort((e,t)=>t.timestamp-e.timestamp)[0].timestamp):void 0,healthStatus:f,issues:h},hybridBackups:{count:p.length,lastBackupDate:p.length>0?new Date(p.sort((e,t)=>t.timestamp-e.timestamp)[0].timestamp):void 0,healthStatus:g,issues:m}},recommendations:b}}catch(e){return console.error(":",e),{status:"critical",timestamp:new Date,summaries:{totalBackups:0,successfulBackups:0,failedBackups:0},details:{localBackups:{count:0,healthStatus:"critical",issues:[""]},cloudBackups:{count:0,healthStatus:"critical",issues:[""]},hybridBackups:{count:0,healthStatus:"critical",issues:[""]}},recommendations:[""]}}}async createHybridBackup(e){const t=`hybrid-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n=Date.now(),a=e||`hybrid-backup-${n}`;let i,l,s="failed";try{console.log("..."),i=await this.createLocalBackup(`${a}-local`),console.log("..."),l=await this.createCloudBackup(`${a}-cloud`),"success"===i.status&&"success"===l.status?s="success":"success"!==i.status&&"success"!==l.status||(s="partial"),console.log(`: ${s}`)}catch(o){console.error(":",o),i={id:`${a}-local`,timestamp:n,size:0,type:"local",status:"failed"},l={id:`${a}-cloud`,timestamp:n,size:0,type:"cloud",status:"failed"},this.saveBackupInfo(i),this.saveBackupInfo(l)}const r={localBackup:i,cloudBackup:l,correlationId:t,status:s};try{const e=ca.getItem("hybrid_backups")||[];e.push(r);const t=e.slice(0,50);ca.setItem("hybrid_backups",t)}catch(o){console.error(":",o)}return r}async createManualBackup(e){const t={},n=(null==e?void 0:e.name)||`manual-backup-${Date.now()}`;return(null==e?void 0:e.hybrid)&&this.config.hybridBackup&&(this.webDAVBackup||this.enhancedWebDAVBackup)?t.hybrid=await this.createHybridBackup(n+"-hybrid"):(!1!==(null==e?void 0:e.local)&&this.config.localAutoBackup&&(t.local=await this.createLocalBackup(n+"-local")),!1!==(null==e?void 0:e.cloud)&&this.config.cloudAutoBackup&&(this.webDAVBackup||this.enhancedWebDAVBackup)&&(t.cloud=await this.createCloudBackup(n+"-cloud"))),t}findLatestFullBackup(e){const t=this.getBackupList().filter(t=>t.type===e&&("full"===t.strategy||!t.strategy)&&"success"===t.status);return 0===t.length?null:(t.sort((e,t)=>t.timestamp-e.timestamp),t[0])}async createIncrementalBackup(e){try{const t=`backup_${e}`,n=ca.getItem(t);if(!n||!n.data)throw new Error(` ${e} `);const a=ca.exportAllData(),i={type:"incremental",baseBackupId:e,timestamp:Date.now(),data:a};return JSON.stringify(i)}catch(t){throw console.error(":",t),t}}stopAutoBackup(){this.backupIntervalId&&(clearInterval(this.backupIntervalId),this.backupIntervalId=null)}restartAutoBackup(){this.stopAutoBackup(),this.startAutoBackup()}destroy(){this.stopAutoBackup()}}({localAutoBackup:!0,cloudAutoBackup:!0,backupInterval:60,retentionDays:7}),ga=new class{constructor(e){this.webDAVClient=null,this.syncIntervalId=null,this.syncInProgress=!1,this.statusCallbacks=[],this.initialized=!1,this.config={autoSync:(null==e?void 0:e.autoSync)??!0,syncInterval:(null==e?void 0:e.syncInterval)??15,conflictResolution:(null==e?void 0:e.conflictResolution)??"local_wins",enableVersioning:(null==e?void 0:e.enableVersioning)??!0,maxVersions:(null==e?void 0:e.maxVersions)??5,...e},this.status={lastSync:null,lastSyncStatus:"success",pendingChanges:0,syncError:null},this.loadStatus()}async initialize(){try{const e=Kn();return e.url&&e.username&&e.password?(this.webDAVClient=new ha({...e,basePath:e.basePath||"//sync"}),await this.webDAVClient.testConnection(),await this.ensureSyncDirectory(),this.initialized=!0,this.config.autoSync&&this.startAutoSync(),Xn(""),!0):(qn.warn("WebDAV",undefined),!1)}catch(e){return Yn(":",e),this.status.syncError=e instanceof Error?e.message:"",this.saveStatus(),!1}}async ensureSyncDirectory(){if(this.webDAVClient)try{await this.webDAVClient.ensureDirectoryExists("/"),this.config.enableVersioning&&await this.webDAVClient.ensureDirectoryExists("/versions")}catch(e){throw Yn(":",e),e}}startAutoSync(){this.syncIntervalId&&clearInterval(this.syncIntervalId),this.syncIntervalId=setInterval(()=>{this.performSync()},60*this.config.syncInterval*1e3),Xn(`: ${this.config.syncInterval}`)}stopAutoSync(){this.syncIntervalId&&(clearInterval(this.syncIntervalId),this.syncIntervalId=null,Xn(""))}async performSync(){if(this.syncInProgress)return Xn(""),this.status;if(!(this.initialized&&this.webDAVClient||(await this.initialize(),this.initialized)))return this.status;this.syncInProgress=!0,this.status.lastSyncStatus="in_progress",this.status.syncError=null,this.saveStatus(),this.notifyStatusChange();try{Xn("...");const e=this.getLocalFiles(),t=await this.getRemoteFiles(),n=this.analyzeDifferences(e,t);await this.executeSync(n),this.status.lastSync=Date.now(),this.status.lastSyncStatus="success",this.status.pendingChanges=0,this.status.syncError=null,Xn("")}catch(e){Yn(":",e),this.status.lastSyncStatus="failed",this.status.syncError=e instanceof Error?e.message:""}finally{this.syncInProgress=!1,this.saveStatus(),this.notifyStatusChange()}return this.status}analyzeDifferences(e,t){const n=[],a=new Map(t.map(e=>[e.path,e]));for(const i of e){const e=a.get(i.path);e?(i.localTimestamp===e.remoteTimestamp?n.push({...i,remoteTimestamp:e.remoteTimestamp,status:"synced"}):i.localTimestamp>e.remoteTimestamp?n.push({...i,remoteTimestamp:e.remoteTimestamp,status:"local_newer"}):n.push({...i,remoteTimestamp:e.remoteTimestamp,status:"remote_newer"}),a.delete(i.path)):n.push(i)}for(const[i,l]of a)n.push(l);return n}async executeSync(e){if(this.webDAVClient)for(const n of e)try{switch(n.status){case"local_newer":case"local_only":await this.uploadFile(n);break;case"remote_newer":case"remote_only":await this.downloadFile(n);break;case"conflict":await this.resolveConflict(n)}}catch(t){Yn(`: ${n.path}`,t)}}async uploadFile(e){if(this.webDAVClient)try{let t;Xn(`: ${e.path}`),this.config.enableVersioning&&"local_only"!==e.status&&await this.createVersion(e.path),t="/data.json"===e.path?ca.exportAllData():"",await this.webDAVClient.uploadFile(e.path,t),Xn(`: ${e.path}`)}catch(t){throw Yn(`: ${e.path}`,t),t}}async downloadFile(e){if(this.webDAVClient)try{Xn(`: ${e.path}`);const t=await this.webDAVClient.downloadFile(e.path);if("/data.json"===e.path&&!ca.importData(t))throw new Error("");Xn(`: ${e.path}`)}catch(t){throw Yn(`: ${e.path}`,t),t}}async resolveConflict(e){if(this.webDAVClient)try{switch(Xn(`: ${e.path}`),this.config.conflictResolution){case"local_wins":case"manual":await this.uploadFile(e);break;case"remote_wins":await this.downloadFile(e)}Xn(`: ${e.path}`)}catch(t){throw Yn(`: ${e.path}`,t),t}}async createVersion(e){if(this.webDAVClient)try{const t=await this.webDAVClient.downloadFile(e),n=(await this.getVersions(e)).length+1,a=`/versions${e.replace(/\.json$/,`_v${n}.json`)}`;await this.webDAVClient.uploadFile(a,t),await this.cleanupOldVersions(e),Xn(`: ${a}`)}catch(t){Yn(`: ${e}`,t)}}async getVersions(e){if(!this.webDAVClient)return[];try{return(await this.webDAVClient.listFiles("/versions")).filter(t=>t.name.includes(e.replace(/^\//,"").replace(/\.json$/,""))&&t.name.includes("_v")).map(e=>{const t=e.name.match(/_v(\d+)\.json$/);return{version:t?parseInt(t[1],10):0,timestamp:e.mtime.getTime(),size:e.size,path:`/versions/${e.name}`}}).sort((e,t)=>t.version-e.version)}catch(t){return Yn(`: ${e}`,t),[]}}async cleanupOldVersions(e){if(this.webDAVClient)try{const t=await this.getVersions(e);if(t.length>this.config.maxVersions){const e=t.slice(this.config.maxVersions);for(const t of e)await this.webDAVClient.deleteFile(t.path),Xn(`: ${t.path}`)}}catch(t){Yn(`: ${e}`,t)}}async getRemoteFiles(){if(!this.webDAVClient)return[];try{return(await this.webDAVClient.listFiles("/")).filter(e=>!e.isDirectory).map(e=>({path:`/${e.name}`,localTimestamp:0,remoteTimestamp:e.mtime.getTime(),size:e.size,status:"remote_only"}))}catch(e){return Yn(":",e),[]}}getLocalFiles(){const e=[],t=ca.exportAllData(),n=new Blob([t]).size,a=ca.getItem("last_modified")||Date.now();return e.push({path:"/data.json",localTimestamp:a,remoteTimestamp:0,size:n,status:"local_only"}),e}saveStatus(){try{ca.setItem("sync_status",this.status)}catch(e){Yn(":",e)}}loadStatus(){try{const e=ca.getItem("sync_status");e&&(this.status={...this.status,...e})}catch(e){Yn(":",e)}}notifyStatusChange(){this.statusCallbacks.forEach(e=>{try{e({...this.status})}catch(t){Yn(":",t)}})}getStatus(){return{...this.status}}addStatusCallback(e){this.statusCallbacks.push(e)}removeStatusCallback(e){const t=this.statusCallbacks.indexOf(e);t>-1&&this.statusCallbacks.splice(t,1)}async syncNow(){return await this.performSync()}pauseSync(){this.stopAutoSync()}resumeSync(){this.config.autoSync&&this.startAutoSync()}updateConfig(e){this.config={...this.config,...e},this.config.autoSync?this.startAutoSync():this.stopAutoSync()}destroy(){this.stopAutoSync(),this.statusCallbacks=[]}}({autoSync:!0,syncInterval:15,conflictResolution:"local_wins",enableVersioning:!0,maxVersions:5}),ba=e.lazy(()=>ct(()=>import("./MissionControl-Cu9CWCbj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),wa=e.lazy(()=>ct(()=>import("./LifeGame-BqFMa07h.js"),__vite__mapDeps([9,1,2,8,6,3,4,5,7]),import.meta.url)),xa=e.lazy(()=>ct(()=>import("./HallOfFame-Cvybn1iR.js"),__vite__mapDeps([10,1,2,5,6,4,7,8]),import.meta.url)),va=e.lazy(()=>ct(()=>import("./Settings-BMbYVg8e.js"),__vite__mapDeps([11,1,2,5,6,4,7,8]),import.meta.url)),ya=e.lazy(()=>ct(()=>import("./ThinkingCenter-BE9Dm1QH.js"),__vite__mapDeps([12,1,2,5,6,4,7,8]),import.meta.url)),ka=e.lazy(()=>ct(()=>import("./TimeBox-80jtINfW.js"),__vite__mapDeps([13,1,2,6,4,7,8]),import.meta.url)),_a=e.lazy(()=>ct(()=>import("./SelfManifestation-DTIgfqMQ.js"),__vite__mapDeps([14,1,2,6,4,7,8]),import.meta.url)),Ma=()=>{const[t,n]=e.useState(ut.RPG_MISSION_CENTER),[a,i]=e.useState(!1),[l,s]=e.useState(!1),[c,u]=e.useState(!1),{theme:d,toggleTheme:h}=st(),[f,m]=e.useState(1),[g,w]=e.useState(88),[v,y]=e.useState(10),[k,_]=e.useState(1),[S,T]=e.useState([]),[C,D]=e.useState([]),[$,N]=e.useState(!1),[E,R]=e.useState(!1),[z,I]=e.useState(!1),A=e.useCallback(e=>{I(e),e&&N(!1)},[]),{pomodoroState:P,toggleTimer:O,resetTimer:j,changeDuration:L,updateTimeLeft:B,updateIsActive:F}=((t=25)=>{const[n,a]=e.useState({timeLeft:60*t,isActive:!1,duration:t});return e.useEffect(()=>{let e;return n.isActive&&n.timeLeft>0?e=window.setInterval(()=>{a(e=>({...e,timeLeft:e.timeLeft-1}))},1e3):0===n.timeLeft&&n.isActive&&a(e=>({...e,isActive:!1,timeLeft:60*e.duration})),()=>{e&&clearInterval(e)}},[n.isActive,n.timeLeft,n.duration]),{pomodoroState:n,toggleTimer:()=>{a(e=>({...e,isActive:!e.isActive}))},resetTimer:()=>{a(e=>({...e,isActive:!1,timeLeft:60*e.duration}))},changeDuration:e=>{a({timeLeft:60*e,isActive:!1,duration:e})},updateTimeLeft:e=>{a(t=>({...t,timeLeft:e}))},updateIsActive:e=>{a(t=>({...t,isActive:e}))}}})();e.useRef(null);const[U,H]=e.useState({bgMusicVolume:.5,soundEffectVolume:.7,enableBgMusic:!0,enableSoundEffects:!0,enableNotifications:!0,guideCardConfig:{fontSize:"medium",borderRadius:"medium",shadowIntensity:"medium",showUnderlyingPrinciple:!0},enableTaskCompleteNotifications:!0,enableAchievementNotifications:!0,enablePomodoroNotifications:!0,showExperienceBar:!0,showBalance:!0,showTaskCompletionRate:!0,soundEffectsByLocation:{},soundLibrary:{},showCharacterSystem:!0,showPomodoroSystem:!0,showFocusTimeSystem:!0,showCheckinSystem:!0,showAchievementCollectionRate:!0,showSystemStabilityModule:!0,showLatestBadges:!0,showChartSummary:!0,showSupplyMarket:!0,autoBackupEnabled:!0,autoBackupFrequency:"daily",autoBackupTime:"10:00",customBackupPath:"",enableWebDAV:!0}),[V,W]=e.useState(""),[G,J]=e.useState(""),[K,ae]=e.useState("timebox"),{state:{habits:ie,projects:le,habitOrder:se,projectOrder:re},setHabits:oe,setProjects:ce,setHabitOrder:ue,setProjectOrder:de}=(t=>{const[n,a]=e.useReducer(oa,t);return{state:n,dispatch:a,setHabits:e=>{const t="function"==typeof e?e(n.habits):e;a({type:"SET_HABITS",payload:t})},setProjects:e=>{const t="function"==typeof e?e(n.projects):e;a({type:"SET_PROJECTS",payload:t})},setHabitOrder:e=>{const t="function"==typeof e?e(n.habitOrder):e;a({type:"SET_HABIT_ORDER",payload:t})},setProjectOrder:e=>{const t="function"==typeof e?e(n.projectOrder):e;a({type:"SET_PROJECT_ORDER",payload:t})},addHabit:e=>a({type:"ADD_HABIT",payload:e}),addProject:e=>a({type:"ADD_PROJECT",payload:e}),updateHabit:(e,t)=>a({type:"UPDATE_HABIT",payload:{id:e,updates:t}}),updateProject:(e,t)=>a({type:"UPDATE_PROJECT",payload:{id:e,updates:t}}),deleteHabit:e=>a({type:"DELETE_HABIT",payload:e}),deleteProject:e=>a({type:"DELETE_PROJECT",payload:e}),toggleHabit:e=>a({type:"TOGGLE_HABIT",payload:e}),toggleSubTask:(e,t)=>a({type:"TOGGLE_SUBTASK",payload:{projectId:e,subTaskId:t}}),reorderHabits:(e,t)=>a({type:"REORDER_HABITS",payload:{fromIndex:e,toIndex:t}}),reorderProjects:(e,t)=>a({type:"REORDER_PROJECTS",payload:{fromIndex:e,toIndex:t}}),resetAll:e=>a({type:"RESET_ALL",payload:e})}})({habits:ea,projects:ta,habitOrder:ea.map(e=>e.id),projectOrder:ta.map(e=>e.id)}),[he,fe]=e.useState(na),[pe,me]=e.useState({date:"",tasks:[]}),[ge,be]=e.useState(aa),[we,xe]=e.useState({}),[ve,ye]=e.useState([]),[ke,_e]=e.useState(["class-","class-","class-","class-","class-"]),[Me,Se]=e.useState(null),{diceState:Te,setDiceState:Ce}=(t=>{const[n,a]=e.useState(sa);return e.useEffect(()=>{const e=localStorage.getItem("aes-dice-state");if(e)try{const t=JSON.parse(e),n=(new Date).toLocaleDateString();t.lastClickDate!==n?a(e=>({...e,todayCount:0,lastClickDate:n,pendingTasks:[],completedTasks:[]})):a({...t,pendingTasks:t.pendingTasks||[],completedTasks:t.completedTasks||[]})}catch(t){console.error("Dice save corrupted",t),a(sa)}else a(sa)},[]),e.useEffect(()=>{t&&localStorage.setItem("aes-dice-state",JSON.stringify(n))},[n,t]),{diceState:n,setDiceState:a}})(c),[De,$e]=e.useState({1:{focusMinutes:10,tasksCompleted:0,habitsDone:1,earnings:117,spending:9}}),[Ne,Ee]=e.useState({focusMinutes:10,tasksCompleted:0,habitsDone:1,earnings:117,spending:9}),{totalKills:Re,totalHours:ze,totalSpent:Ie}=((t,n)=>e.useMemo(()=>({totalKills:n.tasksCompleted+n.habitsDone,totalHours:Object.values(t).reduce((e,t)=>e+(t.focusMinutes||0),0)/60+n.focusMinutes/60,totalSpent:Object.values(t).reduce((e,t)=>e+(t.spending||0),0)+n.spending,totalEarnings:Object.values(t).reduce((e,t)=>e+(t.earnings||0),0)+n.earnings}),[t,n]))(De,Ne);e.useEffect(()=>{Xn("Initializing app data loading");try{ma.initialize()}catch(i){Yn("Failed to initialize backup manager:",i)}try{ga.initialize()}catch(i){Yn("Failed to initialize sync manager:",i)}try{(()=>{const e=localStorage.getItem("webdav-url"),t=localStorage.getItem("webdav-username"),n=localStorage.getItem("webdav-password");(e||t||n)&&(Jn({url:e||"https://dav.jianguoyun.com/dav/",username:t||"",password:n||""}),localStorage.removeItem("webdav-url"),localStorage.removeItem("webdav-username"),localStorage.removeItem("webdav-password"))})()}catch(i){Yn("Failed to migrate old WebDAV config:",i)}const e=localStorage.getItem("aes-global-data-v3"),t=localStorage.getItem("life-game-stats-v2"),n=localStorage.getItem("aes-checkin-streak"),a=localStorage.getItem("aes-dice-state");if(Xn("Retrieved data from localStorage",{hasSavedGlobal:!!e,hasSavedLifeGame:!!t,hasStreak:!!n,hasDiceState:!!a}),n&&_(parseInt(n)),e)try{const t=JSON.parse(e);oe(t.habits||ea);const n=[...t.projects||[]];ta.forEach(e=>{n.find(t=>t.id===e.id)||n.push(e)});const a=(new Date).toLocaleDateString(),i=t.lastLoginDate;let l=n;i!==a?(l=n.map(e=>({...e,subTasks:e.subTasks.map(e=>({...e,completed:!1}))})),Ee({focusMinutes:0,tasksCompleted:0,habitsDone:0,earnings:0,spending:0}),ye([])):(Ee(t.todayStats||{}),ye(t.givenUpTasks||[])),ce(l),ue(t.habitOrder||(t.habits||ea).map(e=>e.id)),de(t.projectOrder||l.map(e=>e.id)),w(t.balance??88),m(t.day||1),T(t.transactions||[]),D(t.reviews||[]),$e(t.statsHistory||{}),fe(t.challengePool||na),me(t.todaysChallenges||{date:"",tasks:[]}),be(t.achievements||aa),xe(t.completedRandomTasks||{}),_e(t.claimedBadges||[]),t.weeklyGoal&&W(t.weeklyGoal),t.todayGoal&&J(t.todayGoal);const s=t.startDate?new Date(t.startDate):new Date,r=Math.floor((Date.now()-s.getTime())/864e5)+1;m(r)}catch(l){Yn("Global save corrupted",{error:l,stack:l.stack}),oe(ea),ce(ta),ue(ea.map(e=>e.id)),de(ta.map(e=>e.id)),w(1250),m(1),T([]),D([]),$e({}),fe(na),me({date:"",tasks:[]}),be(aa),xe({}),_e([])}else localStorage.setItem("aes-global-data-v3",JSON.stringify({startDate:(new Date).toISOString()}));if(a)try{const e=JSON.parse(a),t=(new Date).toLocaleDateString();e.lastClickDate!==t?Ce(e=>({...e,todayCount:0,lastClickDate:t,pendingTasks:[],completedTasks:[]})):Ce({...e,pendingTasks:e.pendingTasks||[],completedTasks:e.completedTasks||[]})}catch(l){Yn("Dice save corrupted",{error:l,stack:l.stack}),Ce(sa)}else Ce(sa);if(t)try{const e=JSON.parse(t);e.xp&&y(e.xp)}catch(l){Yn("LifeGame save corrupted",{error:l,stack:l.stack}),y(0)}u(!0)},[]),e.useEffect(()=>{const e=setTimeout(()=>{c||u(!0)},3e3);return()=>clearTimeout(e)},[c]);const{activeAchievement:Ae,setActiveAchievement:Pe}=((t,n,a,i,l,s,c,u)=>{const[d,h]=e.useState(null);return e.useEffect(()=>{u&&(()=>{const e=[...Ln().map((e,n)=>{const a=n+1;return{id:`lvl-${a}`,title:e.title,subTitle:`LV.${a}`,icon:n%2==0?qe.jsx(x,{size:32,strokeWidth:3}):qe.jsx(q,{size:32,strokeWidth:3}),color:"text-blue-500",isUnlocked:t>=e.min,req:` ${a}`,min:e.min}}),...Bn().map((e,t)=>({id:`rank-${e.title}`,title:e.title,subTitle:`${e.min}H`,icon:t%2==0?qe.jsx(r,{size:32,strokeWidth:3}):qe.jsx(Y,{size:32,strokeWidth:3}),color:"text-emerald-500",isUnlocked:a>=e.min,req:` ${e.min} `,min:e.min})),...Fn().map((e,t)=>({id:`class-${e.title}`,title:e.title,subTitle:`${e.min}G`,icon:t>10?qe.jsx(Q,{size:32,strokeWidth:3}):qe.jsx(b,{size:32,strokeWidth:3}),color:"text-yellow-500",isUnlocked:n>=e.min,req:` ${e.min} `,min:e.min})),...Un().map((e,t)=>({id:`combat-${e.title}`,title:e.title,subTitle:`${e.min} KILLS`,icon:t>15?qe.jsx(Z,{size:32,strokeWidth:3}):t>8?qe.jsx(ee,{size:32,strokeWidth:3}):qe.jsx(o,{size:32,strokeWidth:3}),color:"text-red-500",isUnlocked:i>=e.min,req:` ${e.min} `,min:e.min})),...Qn.map((e,t)=>({id:`check-${e.title}`,title:e.title,subTitle:`${e.min} DAYS`,icon:t>5?qe.jsx(X,{size:32,strokeWidth:3}):t>2?qe.jsx(te,{size:32,strokeWidth:3}):qe.jsx(p,{size:32,strokeWidth:3}),color:"text-purple-500",isUnlocked:l>=e.min,req:` ${e.min} `,min:e.min})),...Zn.map((e,t)=>({id:`consume-${e.title}`,title:e.title,subTitle:`${e.min}G`,icon:t>5?qe.jsx(ne,{size:32,strokeWidth:3}):qe.jsx(M,{size:32,strokeWidth:3}),color:"text-orange-500",isUnlocked:s>=e.min,req:` ${e.min} `,min:e.min}))].find(e=>{return e.isUnlocked&&!c.includes(e.id)&&!(0===(t=e).min||t.id.includes("")&&0===i||t.id.includes("")&&0===a||t.id.includes("")&&n<50||t.id.startsWith("consume")&&0===s);var t});e&&!d&&h(e)})()},[t,n,a,i,l,s,c,u,d]),{activeAchievement:d,setActiveAchievement:h}})(v,g,ze,Re,k,Ie,ke,c);e.useEffect(()=>{if(!c)return;const e=(new Date).toLocaleDateString();if(pe.date!==e){const t=[...he].sort(()=>.5-Math.random());me({date:e,tasks:t.slice(0,3)})}},[c,he,pe]),e.useEffect(()=>{c&&localStorage.setItem("aes-dice-state",JSON.stringify(Te))},[Te,c]),e.useEffect(()=>{if(!c)return;const e={habits:ie,projects:le,habitOrder:se,projectOrder:re,balance:g,day:f,transactions:S,reviews:C,statsHistory:De,todayStats:Ne,challengePool:he,todaysChallenges:pe,achievements:ge,completedRandomTasks:we,claimedBadges:ke,weeklyGoal:V,todayGoal:G,givenUpTasks:ve,lastLoginDate:(new Date).toLocaleDateString(),startDate:(()=>{const e=localStorage.getItem("aes-global-data-v3");try{return e?JSON.parse(e).startDate:(new Date).toISOString()}catch{return(new Date).toISOString()}})()};localStorage.setItem("aes-global-data-v3",JSON.stringify(e));const t=(()=>{const e=localStorage.getItem("life-game-stats-v2");try{return e?JSON.parse(e):{}}catch{return{}}})();t.xp=v,localStorage.setItem("life-game-stats-v2",JSON.stringify(t))},[ie,le,se,re,g,f,S,C,De,Ne,he,pe,ge,we,c,v,ke,V,G,ve]),e.useEffect(()=>{c&&localStorage.setItem("aes-settings-v2",JSON.stringify(U))},[U,c]),e.useEffect(()=>{const e=localStorage.getItem("aes-settings-v2");if(e)try{const t=JSON.parse(e);H(e=>({...e,...t}))}catch(t){console.error(":",t)}},[]),e.useEffect(()=>{const e=()=>{oe(e=>e.map(e=>({...e,history:{},streak:0}))),ce(e=>e.map(e=>({...e,subTasks:e.subTasks.map(e=>({...e,completed:!1})),status:"active"}))),ye([]),Ee({focusMinutes:0,tasksCompleted:0,habitsDone:0,earnings:0,spending:0});const e=(new Date).toLocaleDateString(),t=[...he].sort(()=>.5-Math.random()).slice(0,3);me({date:e,tasks:t}),xe(t=>({...t,[e]:[]}))};let t=setTimeout(()=>{e(),t=setInterval(e,864e5)},(()=>{const e=new Date,t=new Date(e);return t.setDate(t.getDate()+1),t.setHours(0,0,0,0),t.getTime()-e.getTime()})());return()=>{clearTimeout(t),clearInterval(t)}},[he]),e.useEffect(()=>{c&&$e(e=>({...e,[f]:Ne}))},[Ne,f,c]);const[Oe,je]=e.useState([]),[Le,Be]=e.useState(null),Fe=(e,t)=>{var n;switch(t){case"level":_e(e=>e.filter(e=>!e.startsWith("class-")));const t=(null==(n=Ln()[e-1])?void 0:n.min)||0;y(t);break;case"focus":_e(e=>e.filter(e=>!e.startsWith("focus-"))),$e({}),Ee(e=>({...e,focusMinutes:0}));break;case"wealth":_e(e=>e.filter(e=>!e.startsWith("wealth-"))),w(0),Ee(e=>({...e,earnings:0,spending:0}))}He(`${"level"===t?"":"focus"===t?"":""}${e}`,"text-yellow-500")},Ue=e.useRef({text:"",timestamp:0}),He=(e,t,n,a)=>{const i=Date.now();if(Ue.current.text===e&&i-Ue.current.timestamp<100)return;Ue.current={text:e,timestamp:i};const l=i+Math.random(),s=n||window.innerWidth/2+(100*Math.random()-50),r=a||window.innerHeight/2+(100*Math.random()-50);je(n=>[...n,{id:l,text:e,x:s,y:r,color:t}]),setTimeout(()=>{je(e=>e.filter(e=>e.id!==l))},1500)},Ve=e.useCallback((e,t)=>{w(t=>t+e);const n={id:Date.now().toString(),time:(new Date).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),desc:t,amount:e};T(e=>[n,...e].slice(0,50)),""!==t&&(e>0?(Ee(t=>({...t,earnings:t.earnings+e})),Kt.playSoundEffect("coin")):(Ee(t=>({...t,spending:t.spending-e})),Kt.playSoundEffect("coin")))},[]),We=e.useCallback((e,t,n)=>{_e(t=>[...t,e]);const a=t;n>0&&Ve(n,""),a>0&&(y(e=>e+a),He(`+${a} `,"text-blue-500",window.innerWidth/2)),Pe(null),Kt.playSoundEffect("achievement")},[Ve]),Ge=e.useCallback(e=>{ye(t=>[...t,e])},[]),Je=e.useCallback(e=>{H(t=>({...t,...e}))},[]),Ke=e.useCallback(()=>{h()},[h]),Xe=e.useCallback(e=>{const t=(new Date).toLocaleDateString(),n=we[t]||[],a=n.includes(e),i={...we};let l=e;try{l=JSON.parse(e).text}catch(s){}a?(i[t]=n.filter(t=>t!==e),Ve(-10,`: ${l}`),y(e=>Math.max(0,e-10)),Ee(e=>({...e,tasksCompleted:Math.max(0,e.tasksCompleted-1),focusMinutes:Math.max(0,e.focusMinutes-10)}))):(i[t]||(i[t]=[]),i[t].push(e),Ve(10,`: ${l}`),y(e=>e+10),Ee(e=>({...e,tasksCompleted:e.tasksCompleted+1,focusMinutes:e.focusMinutes+10})),He("+10 ","text-yellow-500",window.innerWidth/2-80),setTimeout(()=>{He("+10 ","text-blue-500",window.innerWidth/2)},300),setTimeout(()=>{He("+10 ","text-green-500",window.innerWidth/2+80)},600),Kt.playSoundEffect("taskComplete")),xe(i)},[we,Ve]),Ye=e.useCallback((e,t,n,a)=>{Se({type:e,id:t,subId:a})},[]);e.useCallback((e,t)=>{const n={id:Date.now().toString(),date:(new Date).toLocaleDateString(),content:e,aiAnalysis:t,timestamp:Date.now()};D(e=>[...e,n])},[]);const Qe=e.useCallback((e,t,n)=>{const a={id:Date.now().toString(),name:e,reward:t,xp:(null==n?void 0:n.xp)||Math.ceil(1.5*t),duration:(null==n?void 0:n.duration)||t,streak:0,color:"#8b5cf6",attr:dt.DISCIPLINE,archived:!1,history:{},logs:{},priority:(null==n?void 0:n.priority)||"medium"};oe([...ie,a]),ue([...se,a.id])},[ie,se]),Ze=e.useCallback((e,t)=>{oe(n=>n.map(n=>n.id===e?{...n,...t}:n))},[]),et=e.useCallback(e=>{window.confirm("")&&(oe(t=>t.filter(t=>t.id!==e)),ue(t=>t.filter(t=>t!==e)))},[]),tt=e.useCallback((e,t)=>{oe(ie.map(n=>{if(n.id===e){const e=!!n.history[t],a={...n.history};return e?(delete a[t],Ve(-10,`: ${n.name}`),Ee(e=>({...e,habitsDone:Math.max(0,e.habitsDone-1),focusMinutes:Math.max(0,e.focusMinutes-10)})),y(e=>Math.max(0,e-10)),{...n,history:a,streak:Math.max(0,n.streak-1)}):(a[t]=!0,Ve(10,`: ${n.name}`),Ee(e=>({...e,habitsDone:e.habitsDone+1,focusMinutes:e.focusMinutes+10})),He("+10 ","text-yellow-500",window.innerWidth/2-80),y(e=>e+10),setTimeout(()=>{He("+10 ","text-blue-500",window.innerWidth/2)},300),setTimeout(()=>{He("+10 ","text-green-500",window.innerWidth/2+80)},600),Kt.playSoundEffect("taskComplete"),{...n,history:a,streak:n.streak+1})}return n}))},[ie,Ve]),nt=(e,t)=>{ce(n=>n.map(n=>{if(n.id===e){const e={...n,...t};if(t.subTasks){const t=n.subTasks.filter(e=>e.completed).length,a=e.subTasks.filter(e=>e.completed).length-t;if(a>0){for(let e=0;e<a;e++)Ve(10,`: ${n.name}`),y(e=>e+10),Ee(e=>({...e,focusMinutes:e.focusMinutes+10,tasksCompleted:e.tasksCompleted+1})),setTimeout(()=>{He("+10 ","text-yellow-500",window.innerWidth/2-80)},300*e),setTimeout(()=>{He("+10 ","text-blue-500",window.innerWidth/2)},300*e+300),setTimeout(()=>{He("+10 ","text-green-500",window.innerWidth/2+80)},300*e+600);Kt.playSoundEffect("mainTaskComplete")}else if(a<0){const e=Math.abs(a);for(let t=0;t<e;t++)Ve(-10,`: ${n.name}`),y(e=>Math.max(0,e-10)),Ee(e=>({...e,focusMinutes:Math.max(0,e.focusMinutes-10),tasksCompleted:Math.max(0,e.tasksCompleted-1)})),setTimeout(()=>{He("-10 ","text-red-500",window.innerWidth/2-80)},300*t),setTimeout(()=>{He("-10 ","text-red-500",window.innerWidth/2)},300*t+300),setTimeout(()=>{He("-10 ","text-red-500",window.innerWidth/2+80)},300*t+600)}const i=e.subTasks.length>0&&e.subTasks.every(e=>e.completed);i&&"completed"!==n.status?(e.status="completed",Ve(100,`: ${n.name}`),He("","text-yellow-400"),y(e=>e+200),He("+200 ","text-blue-500",window.innerWidth/2)):i||"completed"!==n.status||(e.status="active",Ve(-100,`: ${n.name}`),y(e=>Math.max(0,e-200)),He("-200 ","text-red-500",window.innerWidth/2))}return e}return n}))},at=e.useCallback(e=>{ce([...le,e]),de([...re,e.id])},[le,re]),it=e.useCallback(e=>{window.confirm("")&&(ce(t=>t.filter(t=>t.id!==e)),de(t=>t.filter(t=>t!==e)))},[]),lt=e.useCallback(e=>{Ve(e,` ${e}min`),Ee(t=>({...t,focusMinutes:t.focusMinutes+e})),y(t=>t+2*e);const t=(new Date).toLocaleDateString();ce(n=>n.map(n=>"active"===n.status?{...n,todayFocusMinutes:n.todayFocusMinutes+e,dailyFocus:{...n.dailyFocus,[t]:(n.dailyFocus[t]||0)+e}}:n))},[Ve]);e.useCallback(e=>{Ve(50,`: ${e.text||""}`),Ee(e=>({...e,tasksCompleted:e.tasksCompleted+1}))},[Ve]),e.useCallback(e=>{ae(e),n(ut.RPG_MISSION_CENTER)},[]),e.useEffect(()=>{const e=e=>{qn.error("Global JavaScript Error",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:e.error})},t=e=>{qn.error("Unhandled Promise Rejection",{reason:e.reason,promise:e.promise})};return window.addEventListener("error",e),window.addEventListener("unhandledrejection",t),()=>{window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",t)}},[]),e.useEffect(()=>{Xn("App initialized successfully"),window.addEventListener("load",()=>{Xn("Page loaded",{timestamp:Date.now(),userAgent:navigator.userAgent})})},[]);const rt=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,ot=()=>{if((new Date).toLocaleDateString(),!(()=>{const e=(new Date).toLocaleDateString();return Te.lastClickDate!==e?(Ce(t=>({...t,todayCount:0,lastClickDate:e})),!0):Te.todayCount<Te.config.dailyLimit})())return{success:!1,message:""};Ce(e=>({...e,isSpinning:!0}));const e=Object.entries(Te.config.categoryDistribution),t=e.reduce((e,[t,n])=>e+n,0);let n,a=Math.random()*t;for(const[c,u]of e){if(a<u){n=c;break}a-=u}const i=Te.taskPool[n],l=i.filter(e=>!Te.history.slice(-5).some(t=>t.taskId===e.id)),s=l.length>0?l[Math.floor(Math.random()*l.length)]:i[Math.floor(Math.random()*i.length)],r=rt(s.goldRange[0],s.goldRange[1]),o=s.xpRange?rt(s.xpRange[0],s.xpRange[1]):0;return setTimeout(()=>{Ce(e=>({...e,isSpinning:!1,currentResult:{...s,wt:r,xt:o},todayCount:e.todayCount+1}))},0),{success:!0}},ct=e=>{if(!Te.currentResult)return;const t=Te.currentResult,n=t.wt||0,a=t.xt||0;"completed"===e&&(Ve(n,`: ${t.text}`),y(e=>e+a),Ee(e=>({...e,tasksCompleted:e.tasksCompleted+1,focusMinutes:e.focusMinutes+(t.duration||0)})),He(`+${n} `,"text-yellow-500",window.innerWidth/2-80),setTimeout(()=>{He(`+${a} `,"text-blue-500",window.innerWidth/2)},300),t.duration&&setTimeout(()=>{He(`+${t.duration} `,"text-green-500",window.innerWidth/2+80)},600),Kt.playSoundEffect("fateTaskComplete"));const i={id:Date.now().toString(),date:(new Date).toISOString(),taskId:t.id,text:t.text,category:t.category,gold:n,xp:a,result:e,completedAt:"completed"===e?(new Date).toISOString():void 0};if("later"===e||"completed"===e){const l={id:Date.now().toString(),task:t,generatedGold:n,generatedXp:a,status:"completed"===e?"completed":"pending",createdAt:(new Date).toISOString(),completedAt:"completed"===e?(new Date).toISOString():void 0};Ce(n=>({...n,history:[i,...n.history].slice(0,100),completedTaskIds:"completed"===e?[...n.completedTaskIds,t.id]:n.completedTaskIds,currentResult:void 0,pendingTasks:"later"===e?[...n.pendingTasks,l]:n.pendingTasks.filter(e=>e.task.id!==t.id),completedTasks:"completed"===e?[...n.completedTasks,l]:n.completedTasks}))}else Ce(e=>({...e,history:[i,...e.history].slice(0,100),completedTaskIds:e.completedTaskIds,currentResult:void 0}))},ht=e=>{Ce(t=>({...t,taskPool:{...t.taskPool,[e.category]:[...t.taskPool[e.category],e]}}))},ft=(e,t)=>{Ce(n=>({...n,taskPool:{...n.taskPool,[t]:n.taskPool[t].filter(t=>t.id!==e)}}))},pt=(e,t,n)=>{Ce(a=>({...a,taskPool:{...a.taskPool,[t]:a.taskPool[t].map(t=>t.id===e?{...t,...n}:t)}}))},mt=e=>{Ce(t=>({...t,config:{...t.config,...e}}))},gt=e=>{Ce(t=>({...t,...e}))},wt=d.includes("dark")?"bg-[#1e1e2e] text-zinc-100":"bg-[#e0e5ec] text-zinc-800",kt=Math.round(100*(1-Ne.habitsDone/Math.max(1,ie.length)));return c?qe.jsx(_t,{fallback:Mt,children:qe.jsxs(Qt,{children:[qe.jsx(Zt,{}),qe.jsxs("div",{className:`flex h-screen w-full overflow-hidden font-sans relative transition-colors duration-500 ${wt}`,children:[!$&&!z&&qe.jsx(vt,{currentView:t,setView:n,isMobileOpen:a,setIsMobileOpen:i,entropy:kt,isNavCollapsed:l,setIsNavCollapsed:s,onHelpClick:e=>Be(e)}),Ae&&qe.jsx(ra,{badge:Ae,onClose:(e,t,n)=>{I(!1),We(e,t,n)},theme:d}),qe.jsxs("main",{className:`flex-1 h-full overflow-y-auto relative scroll-smooth flex flex-col transition-all duration-200 ${wt}`,children:[d.includes("dark")?qe.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none opacity-20",style:{backgroundImage:"radial-gradient(circle at 50% 5%, #10b981 0%, transparent 20%), radial-gradient(circle at 90% 90%, #3b82f6 0%, transparent 20%)"}}):qe.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none opacity-40",style:{backgroundImage:"radial-gradient(circle at 50% 5%, #cbd5e1 0%, transparent 30%)"}}),qe.jsx("div",{className:"relative z-10 flex-1 overflow-y-auto",children:qe.jsx(e.Suspense,{fallback:qe.jsx(yt,{fullscreen:!0,message:"..."}),children:(()=>{switch(t){case ut.RPG_MISSION_CENTER:return qe.jsx(wa,{theme:d,balance:g,onUpdateBalance:Ve,habits:ie,projects:le,habitOrder:se,projectOrder:re,onUpdateHabitOrder:ue,onUpdateProjectOrder:de,onToggleHabit:tt,onUpdateHabit:Ze,onDeleteHabit:et,onUpdateProject:nt,onDeleteProject:it,onAddHabit:Qe,onAddProject:at,initialTab:"battle",initialCategory:K,onAddFloatingReward:He,totalTasksCompleted:Re,totalHours:ze,challengePool:he,setChallengePool:fe,todaysChallenges:pe,completedRandomTasks:we,onToggleRandomChallenge:Xe,onStartAutoTask:Ye,checkInStreak:k,onPomodoroComplete:lt,xp:v,todayStats:Ne,statsHistory:De,onUpdateTodayStats:Ee,weeklyGoal:V,setWeeklyGoal:W,todayGoal:G,setTodayGoal:J,givenUpTasks:ve,onGiveUpTask:Ge,isNavCollapsed:l,setIsNavCollapsed:s,timeLeft:P.timeLeft,isActive:P.isActive,duration:P.duration,onToggleTimer:O,onResetTimer:j,onChangeDuration:L,onUpdateTimeLeft:B,onUpdateIsActive:F,isImmersive:$,setIsImmersive:N,onInternalImmersiveModeChange:e=>{N(!0),R(!0)},settings:U,diceState:Te,onSpinDice:ot,onDiceResult:ct,onAddDiceTask:ht,onDeleteDiceTask:ft,onUpdateDiceTask:pt,onUpdateDiceConfig:mt,onUpdateDiceState:gt,onLevelChange:Fe,setModalState:A});case ut.BLACK_MARKET:return qe.jsx(wa,{theme:d,balance:g,onUpdateBalance:Ve,habits:ie,projects:le,habitOrder:se,projectOrder:re,onUpdateHabitOrder:ue,onUpdateProjectOrder:de,onToggleHabit:tt,onUpdateHabit:Ze,onDeleteHabit:et,onUpdateProject:nt,onDeleteProject:it,onAddHabit:Qe,onAddProject:at,initialTab:"shop",initialCategory:K,onAddFloatingReward:He,totalTasksCompleted:Re,totalHours:ze,challengePool:he,setChallengePool:fe,todaysChallenges:pe,completedRandomTasks:we,onToggleRandomChallenge:Xe,onStartAutoTask:Ye,checkInStreak:k,onPomodoroComplete:lt,xp:v,todayStats:Ne,statsHistory:De,onUpdateTodayStats:Ee,weeklyGoal:V,setWeeklyGoal:W,todayGoal:G,setTodayGoal:J,givenUpTasks:ve,onGiveUpTask:Ge,isNavCollapsed:l,setIsNavCollapsed:s,timeLeft:P.timeLeft,isActive:P.isActive,duration:P.duration,onToggleTimer:O,onResetTimer:j,onChangeDuration:L,onUpdateTimeLeft:B,onUpdateIsActive:F,isImmersive:$,setIsImmersive:N,onInternalImmersiveModeChange:e=>{N(!0),R(!0)},settings:U,diceState:Te,onSpinDice:ot,onDiceResult:ct,onAddDiceTask:ht,onDeleteDiceTask:ft,onUpdateDiceTask:pt,onUpdateDiceConfig:mt,onUpdateDiceState:gt,onLevelChange:Fe,setModalState:A,onHelpClick:Be});case ut.HALL_OF_FAME:return qe.jsx(xa,{theme:d,balance:g,totalHours:ze,totalCampaignsWon:Re,achievements:ge,setAchievements:be,xp:v,checkInStreak:k,onPomodoroComplete:lt,totalSpent:Ie,claimedBadges:ke,setModalState:A,onClaimReward:We,isNavCollapsed:l,setIsNavCollapsed:s,timeLeft:P.timeLeft,isActive:P.isActive,duration:P.duration,onToggleTimer:O,onResetTimer:j,onChangeDuration:L,onUpdateTimeLeft:B,onUpdateIsActive:F,onHelpClick:Be});case ut.DATA_CHARTS:return qe.jsx(ba,{theme:d,projects:le,habits:ie,onHelpClick:Be});case ut.SETTINGS:return qe.jsx(va,{theme:d,settings:U,onUpdateSettings:Je,onToggleTheme:Ke,day:f,balance:g,xp:v,checkInStreak:k,transactions:S,reviews:C});case ut.THINKING_CENTER:return qe.jsx(ya,{theme:d,onHelpClick:Be});case ut.TIME_BOX:return qe.jsx(ka,{setModalState:A});case ut.SELF_MANIFESTATION:case ut.HIGHEST_VERSION:return qe.jsx(_a,{onHelpClick:Be});default:return console.error("Unknown view encountered:",t),qe.jsx(wa,{theme:d,balance:g,onUpdateBalance:Ve,habits:ie,projects:le,habitOrder:se,projectOrder:re,onUpdateHabitOrder:ue,onUpdateProjectOrder:de,onToggleHabit:tt,onUpdateHabit:Ze,onDeleteHabit:et,onUpdateProject:nt,onDeleteProject:it,onAddHabit:Qe,onAddProject:at,initialTab:"battle",initialCategory:K,onAddFloatingReward:He,totalTasksCompleted:Re,totalHours:ze,challengePool:he,setChallengePool:fe,todaysChallenges:pe,completedRandomTasks:we,onToggleRandomChallenge:Xe,onStartAutoTask:Ye,checkInStreak:k,onPomodoroComplete:lt,xp:v,todayStats:Ne,statsHistory:De,onUpdateTodayStats:Ee,weeklyGoal:V,setWeeklyGoal:W,todayGoal:G,setTodayGoal:J,givenUpTasks:ve,onGiveUpTask:Ge,isNavCollapsed:l,setIsNavCollapsed:s,timeLeft:P.timeLeft,isActive:P.isActive,duration:P.duration,onToggleTimer:O,onResetTimer:j,onChangeDuration:L,onUpdateTimeLeft:B,onUpdateIsActive:F,isImmersive:$,setIsImmersive:N,onInternalImmersiveModeChange:e=>{N(!0),R(!0)},settings:U,diceState:Te,onSpinDice:ot,onDiceResult:ct,onAddDiceTask:ht,onDeleteDiceTask:ft,onUpdateDiceTask:pt,onUpdateDiceConfig:mt,onUpdateDiceState:gt,onLevelChange:Fe,setModalState:A})}})()})})]}),Oe.map(e=>qe.jsx("div",{className:`fixed pointer-events-none text-xl sm:text-2xl font-black ${e.color} animate-bounce z-[9999]`,style:{left:e.x,top:e.y,textShadow:"0 2px 10px rgba(0,0,0,0.5)"},children:e.text},e.id)),qe.jsx(bt,{activeHelp:Le,helpContent:xt,onClose:()=>{I(!1),Be(null)},cardBg:d.includes("dark")?"bg-[#1e1e2e] shadow-[8px_8px_16px_rgba(0,0,0,0.4),-8px_-8px_16px_rgba(30,30,46,0.8)]":"bg-[#e0e5ec] shadow-[10px_10px_20px_rgba(163,177,198,0.6),-10px_-10px_20px_rgba(255,255,255,1)]",textMain:d.includes("dark")?"text-zinc-200":"text-zinc-800",textSub:d.includes("dark")?"text-zinc-500":"text-zinc-600",config:U.guideCardConfig||{fontSize:"medium",borderRadius:"medium",shadowIntensity:"medium",showUnderlyingPrinciple:!0}})]})]})}):qe.jsx(yt,{fullscreen:!0,size:"large",message:"..."})},Sa=()=>qe.jsx(rt,{children:qe.jsx(Ma,{})}),Ta=document.getElementById("root");if(!Ta)throw new Error("Could not find root element to mount to");it.createRoot(Ta).render(qe.jsx(n.StrictMode,{children:qe.jsx(Sa,{})}));export{dt as A,Hn as C,ft as D,wt as G,sa as I,ht as T,ha as W,ct as _,st as a,bt as b,Bn as c,Fn as d,Un as e,ma as f,Ln as g,xt as h,mt as i,qe as j,Jn as k,Kn as r,Kt as s,Xt as u};//# sourceMappingURL=index-DMztQwJg.js.map
